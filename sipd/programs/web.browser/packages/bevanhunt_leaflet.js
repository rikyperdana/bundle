//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;

(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet/dist/leaflet-src.js                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/*                                                                                                                     // 1
 Leaflet 1.0.3, a JS library for interactive maps. http://leafletjs.com                                                // 2
 (c) 2010-2016 Vladimir Agafonkin, (c) 2010-2011 CloudMade                                                             // 3
*/                                                                                                                     // 4
(function (window, document, undefined) {                                                                              // 5
var L = {                                                                                                              // 6
	version: "1.0.3"                                                                                                      // 7
};                                                                                                                     // 8
                                                                                                                       // 9
function expose() {                                                                                                    // 10
	var oldL = window.L;                                                                                                  // 11
                                                                                                                       // 12
	L.noConflict = function () {                                                                                          // 13
		window.L = oldL;                                                                                                     // 14
		return this;                                                                                                         // 15
	};                                                                                                                    // 16
                                                                                                                       // 17
	window.L = L;                                                                                                         // 18
}                                                                                                                      // 19
                                                                                                                       // 20
// define Leaflet for Node module pattern loaders, including Browserify                                                // 21
if (typeof module === 'object' && typeof module.exports === 'object') {                                                // 22
	module.exports = L;                                                                                                   // 23
                                                                                                                       // 24
// define Leaflet as an AMD module                                                                                     // 25
} else if (typeof define === 'function' && define.amd) {                                                               // 26
	define(L);                                                                                                            // 27
}                                                                                                                      // 28
                                                                                                                       // 29
// define Leaflet as a global L variable, saving the original L to restore later if needed                             // 30
if (typeof window !== 'undefined') {                                                                                   // 31
	expose();                                                                                                             // 32
}                                                                                                                      // 33
                                                                                                                       // 34
                                                                                                                       // 35
                                                                                                                       // 36
/*                                                                                                                     // 37
 * @namespace Util                                                                                                     // 38
 *                                                                                                                     // 39
 * Various utility functions, used by Leaflet internally.                                                              // 40
 */                                                                                                                    // 41
                                                                                                                       // 42
L.Util = {                                                                                                             // 43
                                                                                                                       // 44
	// @function extend(dest: Object, src?: Object): Object                                                               // 45
	// Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.
	extend: function (dest) {                                                                                             // 47
		var i, j, len, src;                                                                                                  // 48
                                                                                                                       // 49
		for (j = 1, len = arguments.length; j < len; j++) {                                                                  // 50
			src = arguments[j];                                                                                                 // 51
			for (i in src) {                                                                                                    // 52
				dest[i] = src[i];                                                                                                  // 53
			}                                                                                                                   // 54
		}                                                                                                                    // 55
		return dest;                                                                                                         // 56
	},                                                                                                                    // 57
                                                                                                                       // 58
	// @function create(proto: Object, properties?: Object): Object                                                       // 59
	// Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)
	create: Object.create || (function () {                                                                               // 61
		function F() {}                                                                                                      // 62
		return function (proto) {                                                                                            // 63
			F.prototype = proto;                                                                                                // 64
			return new F();                                                                                                     // 65
		};                                                                                                                   // 66
	})(),                                                                                                                 // 67
                                                                                                                       // 68
	// @function bind(fn: Function, …): Function                                                                          // 69
	// Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).
	// Has a `L.bind()` shortcut.                                                                                         // 71
	bind: function (fn, obj) {                                                                                            // 72
		var slice = Array.prototype.slice;                                                                                   // 73
                                                                                                                       // 74
		if (fn.bind) {                                                                                                       // 75
			return fn.bind.apply(fn, slice.call(arguments, 1));                                                                 // 76
		}                                                                                                                    // 77
                                                                                                                       // 78
		var args = slice.call(arguments, 2);                                                                                 // 79
                                                                                                                       // 80
		return function () {                                                                                                 // 81
			return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);                                 // 82
		};                                                                                                                   // 83
	},                                                                                                                    // 84
                                                                                                                       // 85
	// @function stamp(obj: Object): Number                                                                               // 86
	// Returns the unique ID of an object, assiging it one if it doesn't have it.                                         // 87
	stamp: function (obj) {                                                                                               // 88
		/*eslint-disable */                                                                                                  // 89
		obj._leaflet_id = obj._leaflet_id || ++L.Util.lastId;                                                                // 90
		return obj._leaflet_id;                                                                                              // 91
		/*eslint-enable */                                                                                                   // 92
	},                                                                                                                    // 93
                                                                                                                       // 94
	// @property lastId: Number                                                                                           // 95
	// Last unique ID used by [`stamp()`](#util-stamp)                                                                    // 96
	lastId: 0,                                                                                                            // 97
                                                                                                                       // 98
	// @function throttle(fn: Function, time: Number, context: Object): Function                                          // 99
	// Returns a function which executes function `fn` with the given scope `context`                                     // 100
	// (so that the `this` keyword refers to `context` inside `fn`'s code). The function                                  // 101
	// `fn` will be called no more than one time per given amount of `time`. The arguments                                // 102
	// received by the bound function will be any arguments passed when binding the                                       // 103
	// function, followed by any arguments passed when invoking the bound function.                                       // 104
	// Has an `L.bind` shortcut.                                                                                          // 105
	throttle: function (fn, time, context) {                                                                              // 106
		var lock, args, wrapperFn, later;                                                                                    // 107
                                                                                                                       // 108
		later = function () {                                                                                                // 109
			// reset lock and call if queued                                                                                    // 110
			lock = false;                                                                                                       // 111
			if (args) {                                                                                                         // 112
				wrapperFn.apply(context, args);                                                                                    // 113
				args = false;                                                                                                      // 114
			}                                                                                                                   // 115
		};                                                                                                                   // 116
                                                                                                                       // 117
		wrapperFn = function () {                                                                                            // 118
			if (lock) {                                                                                                         // 119
				// called too soon, queue to call later                                                                            // 120
				args = arguments;                                                                                                  // 121
                                                                                                                       // 122
			} else {                                                                                                            // 123
				// call and lock until later                                                                                       // 124
				fn.apply(context, arguments);                                                                                      // 125
				setTimeout(later, time);                                                                                           // 126
				lock = true;                                                                                                       // 127
			}                                                                                                                   // 128
		};                                                                                                                   // 129
                                                                                                                       // 130
		return wrapperFn;                                                                                                    // 131
	},                                                                                                                    // 132
                                                                                                                       // 133
	// @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number                                      // 134
	// Returns the number `num` modulo `range` in such a way so it lies within                                            // 135
	// `range[0]` and `range[1]`. The returned value will be always smaller than                                          // 136
	// `range[1]` unless `includeMax` is set to `true`.                                                                   // 137
	wrapNum: function (x, range, includeMax) {                                                                            // 138
		var max = range[1],                                                                                                  // 139
		    min = range[0],                                                                                                  // 140
		    d = max - min;                                                                                                   // 141
		return x === max && includeMax ? x : ((x - min) % d + d) % d + min;                                                  // 142
	},                                                                                                                    // 143
                                                                                                                       // 144
	// @function falseFn(): Function                                                                                      // 145
	// Returns a function which always returns `false`.                                                                   // 146
	falseFn: function () { return false; },                                                                               // 147
                                                                                                                       // 148
	// @function formatNum(num: Number, digits?: Number): Number                                                          // 149
	// Returns the number `num` rounded to `digits` decimals, or to 5 decimals by default.                                // 150
	formatNum: function (num, digits) {                                                                                   // 151
		var pow = Math.pow(10, digits || 5);                                                                                 // 152
		return Math.round(num * pow) / pow;                                                                                  // 153
	},                                                                                                                    // 154
                                                                                                                       // 155
	// @function trim(str: String): String                                                                                // 156
	// Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)
	trim: function (str) {                                                                                                // 158
		return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, '');                                                        // 159
	},                                                                                                                    // 160
                                                                                                                       // 161
	// @function splitWords(str: String): String[]                                                                        // 162
	// Trims and splits the string on whitespace and returns the array of parts.                                          // 163
	splitWords: function (str) {                                                                                          // 164
		return L.Util.trim(str).split(/\s+/);                                                                                // 165
	},                                                                                                                    // 166
                                                                                                                       // 167
	// @function setOptions(obj: Object, options: Object): Object                                                         // 168
	// Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.
	setOptions: function (obj, options) {                                                                                 // 170
		if (!obj.hasOwnProperty('options')) {                                                                                // 171
			obj.options = obj.options ? L.Util.create(obj.options) : {};                                                        // 172
		}                                                                                                                    // 173
		for (var i in options) {                                                                                             // 174
			obj.options[i] = options[i];                                                                                        // 175
		}                                                                                                                    // 176
		return obj.options;                                                                                                  // 177
	},                                                                                                                    // 178
                                                                                                                       // 179
	// @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String                           // 180
	// Converts an object into a parameter URL string, e.g. `{a: "foo", b: "bar"}`                                        // 181
	// translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will                                       // 182
	// be appended at the end. If `uppercase` is `true`, the parameter names will                                         // 183
	// be uppercased (e.g. `'?A=foo&B=bar'`)                                                                              // 184
	getParamString: function (obj, existingUrl, uppercase) {                                                              // 185
		var params = [];                                                                                                     // 186
		for (var i in obj) {                                                                                                 // 187
			params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));                // 188
		}                                                                                                                    // 189
		return ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');                           // 190
	},                                                                                                                    // 191
                                                                                                                       // 192
	// @function template(str: String, data: Object): String                                                              // 193
	// Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`                               // 194
	// and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string                                            // 195
	// `('Hello foo, bar')`. You can also specify functions instead of strings for                                        // 196
	// data values — they will be evaluated passing `data` as an argument.                                                // 197
	template: function (str, data) {                                                                                      // 198
		return str.replace(L.Util.templateRe, function (str, key) {                                                          // 199
			var value = data[key];                                                                                              // 200
                                                                                                                       // 201
			if (value === undefined) {                                                                                          // 202
				throw new Error('No value provided for variable ' + str);                                                          // 203
                                                                                                                       // 204
			} else if (typeof value === 'function') {                                                                           // 205
				value = value(data);                                                                                               // 206
			}                                                                                                                   // 207
			return value;                                                                                                       // 208
		});                                                                                                                  // 209
	},                                                                                                                    // 210
                                                                                                                       // 211
	templateRe: /\{ *([\w_\-]+) *\}/g,                                                                                    // 212
                                                                                                                       // 213
	// @function isArray(obj): Boolean                                                                                    // 214
	// Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)
	isArray: Array.isArray || function (obj) {                                                                            // 216
		return (Object.prototype.toString.call(obj) === '[object Array]');                                                   // 217
	},                                                                                                                    // 218
                                                                                                                       // 219
	// @function indexOf(array: Array, el: Object): Number                                                                // 220
	// Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)
	indexOf: function (array, el) {                                                                                       // 222
		for (var i = 0; i < array.length; i++) {                                                                             // 223
			if (array[i] === el) { return i; }                                                                                  // 224
		}                                                                                                                    // 225
		return -1;                                                                                                           // 226
	},                                                                                                                    // 227
                                                                                                                       // 228
	// @property emptyImageUrl: String                                                                                    // 229
	// Data URI string containing a base64-encoded empty GIF image.                                                       // 230
	// Used as a hack to free memory from unused images on WebKit-powered                                                 // 231
	// mobile devices (by setting image `src` to this string).                                                            // 232
	emptyImageUrl: 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='                                           // 233
};                                                                                                                     // 234
                                                                                                                       // 235
(function () {                                                                                                         // 236
	// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/                                   // 237
                                                                                                                       // 238
	function getPrefixed(name) {                                                                                          // 239
		return window['webkit' + name] || window['moz' + name] || window['ms' + name];                                       // 240
	}                                                                                                                     // 241
                                                                                                                       // 242
	var lastTime = 0;                                                                                                     // 243
                                                                                                                       // 244
	// fallback for IE 7-8                                                                                                // 245
	function timeoutDefer(fn) {                                                                                           // 246
		var time = +new Date(),                                                                                              // 247
		    timeToCall = Math.max(0, 16 - (time - lastTime));                                                                // 248
                                                                                                                       // 249
		lastTime = time + timeToCall;                                                                                        // 250
		return window.setTimeout(fn, timeToCall);                                                                            // 251
	}                                                                                                                     // 252
                                                                                                                       // 253
	var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer,                 // 254
	    cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||                                  // 255
	               getPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };              // 256
                                                                                                                       // 257
                                                                                                                       // 258
	// @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): Number                            // 259
	// Schedules `fn` to be executed when the browser repaints. `fn` is bound to                                          // 260
	// `context` if given. When `immediate` is set, `fn` is called immediately if                                         // 261
	// the browser doesn't have native support for                                                                        // 262
	// [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),         // 263
	// otherwise it's delayed. Returns a request ID that can be used to cancel the request.                               // 264
	L.Util.requestAnimFrame = function (fn, context, immediate) {                                                         // 265
		if (immediate && requestFn === timeoutDefer) {                                                                       // 266
			fn.call(context);                                                                                                   // 267
		} else {                                                                                                             // 268
			return requestFn.call(window, L.bind(fn, context));                                                                 // 269
		}                                                                                                                    // 270
	};                                                                                                                    // 271
                                                                                                                       // 272
	// @function cancelAnimFrame(id: Number): undefined                                                                   // 273
	// Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).
	L.Util.cancelAnimFrame = function (id) {                                                                              // 275
		if (id) {                                                                                                            // 276
			cancelFn.call(window, id);                                                                                          // 277
		}                                                                                                                    // 278
	};                                                                                                                    // 279
})();                                                                                                                  // 280
                                                                                                                       // 281
// shortcuts for most used utility functions                                                                           // 282
L.extend = L.Util.extend;                                                                                              // 283
L.bind = L.Util.bind;                                                                                                  // 284
L.stamp = L.Util.stamp;                                                                                                // 285
L.setOptions = L.Util.setOptions;                                                                                      // 286
                                                                                                                       // 287
                                                                                                                       // 288
                                                                                                                       // 289
                                                                                                                       // 290
// @class Class                                                                                                        // 291
// @aka L.Class                                                                                                        // 292
                                                                                                                       // 293
// @section                                                                                                            // 294
// @uninheritable                                                                                                      // 295
                                                                                                                       // 296
// Thanks to John Resig and Dean Edwards for inspiration!                                                              // 297
                                                                                                                       // 298
L.Class = function () {};                                                                                              // 299
                                                                                                                       // 300
L.Class.extend = function (props) {                                                                                    // 301
                                                                                                                       // 302
	// @function extend(props: Object): Function                                                                          // 303
	// [Extends the current class](#class-inheritance) given the properties to be included.                               // 304
	// Returns a Javascript function that is a class constructor (to be called with `new`).                               // 305
	var NewClass = function () {                                                                                          // 306
                                                                                                                       // 307
		// call the constructor                                                                                              // 308
		if (this.initialize) {                                                                                               // 309
			this.initialize.apply(this, arguments);                                                                             // 310
		}                                                                                                                    // 311
                                                                                                                       // 312
		// call all constructor hooks                                                                                        // 313
		this.callInitHooks();                                                                                                // 314
	};                                                                                                                    // 315
                                                                                                                       // 316
	var parentProto = NewClass.__super__ = this.prototype;                                                                // 317
                                                                                                                       // 318
	var proto = L.Util.create(parentProto);                                                                               // 319
	proto.constructor = NewClass;                                                                                         // 320
                                                                                                                       // 321
	NewClass.prototype = proto;                                                                                           // 322
                                                                                                                       // 323
	// inherit parent's statics                                                                                           // 324
	for (var i in this) {                                                                                                 // 325
		if (this.hasOwnProperty(i) && i !== 'prototype') {                                                                   // 326
			NewClass[i] = this[i];                                                                                              // 327
		}                                                                                                                    // 328
	}                                                                                                                     // 329
                                                                                                                       // 330
	// mix static properties into the class                                                                               // 331
	if (props.statics) {                                                                                                  // 332
		L.extend(NewClass, props.statics);                                                                                   // 333
		delete props.statics;                                                                                                // 334
	}                                                                                                                     // 335
                                                                                                                       // 336
	// mix includes into the prototype                                                                                    // 337
	if (props.includes) {                                                                                                 // 338
		L.Util.extend.apply(null, [proto].concat(props.includes));                                                           // 339
		delete props.includes;                                                                                               // 340
	}                                                                                                                     // 341
                                                                                                                       // 342
	// merge options                                                                                                      // 343
	if (proto.options) {                                                                                                  // 344
		props.options = L.Util.extend(L.Util.create(proto.options), props.options);                                          // 345
	}                                                                                                                     // 346
                                                                                                                       // 347
	// mix given properties into the prototype                                                                            // 348
	L.extend(proto, props);                                                                                               // 349
                                                                                                                       // 350
	proto._initHooks = [];                                                                                                // 351
                                                                                                                       // 352
	// add method for calling all hooks                                                                                   // 353
	proto.callInitHooks = function () {                                                                                   // 354
                                                                                                                       // 355
		if (this._initHooksCalled) { return; }                                                                               // 356
                                                                                                                       // 357
		if (parentProto.callInitHooks) {                                                                                     // 358
			parentProto.callInitHooks.call(this);                                                                               // 359
		}                                                                                                                    // 360
                                                                                                                       // 361
		this._initHooksCalled = true;                                                                                        // 362
                                                                                                                       // 363
		for (var i = 0, len = proto._initHooks.length; i < len; i++) {                                                       // 364
			proto._initHooks[i].call(this);                                                                                     // 365
		}                                                                                                                    // 366
	};                                                                                                                    // 367
                                                                                                                       // 368
	return NewClass;                                                                                                      // 369
};                                                                                                                     // 370
                                                                                                                       // 371
                                                                                                                       // 372
// @function include(properties: Object): this                                                                         // 373
// [Includes a mixin](#class-includes) into the current class.                                                         // 374
L.Class.include = function (props) {                                                                                   // 375
	L.extend(this.prototype, props);                                                                                      // 376
	return this;                                                                                                          // 377
};                                                                                                                     // 378
                                                                                                                       // 379
// @function mergeOptions(options: Object): this                                                                       // 380
// [Merges `options`](#class-options) into the defaults of the class.                                                  // 381
L.Class.mergeOptions = function (options) {                                                                            // 382
	L.extend(this.prototype.options, options);                                                                            // 383
	return this;                                                                                                          // 384
};                                                                                                                     // 385
                                                                                                                       // 386
// @function addInitHook(fn: Function): this                                                                           // 387
// Adds a [constructor hook](#class-constructor-hooks) to the class.                                                   // 388
L.Class.addInitHook = function (fn) { // (Function) || (String, args...)                                               // 389
	var args = Array.prototype.slice.call(arguments, 1);                                                                  // 390
                                                                                                                       // 391
	var init = typeof fn === 'function' ? fn : function () {                                                              // 392
		this[fn].apply(this, args);                                                                                          // 393
	};                                                                                                                    // 394
                                                                                                                       // 395
	this.prototype._initHooks = this.prototype._initHooks || [];                                                          // 396
	this.prototype._initHooks.push(init);                                                                                 // 397
	return this;                                                                                                          // 398
};                                                                                                                     // 399
                                                                                                                       // 400
                                                                                                                       // 401
                                                                                                                       // 402
/*                                                                                                                     // 403
 * @class Evented                                                                                                      // 404
 * @aka L.Evented                                                                                                      // 405
 * @inherits Class                                                                                                     // 406
 *                                                                                                                     // 407
 * A set of methods shared between event-powered classes (like `Map` and `Marker`). Generally, events allow you to execute some function when something happens with an object (e.g. the user clicks on the map, causing the map to fire `'click'` event).
 *                                                                                                                     // 409
 * @example                                                                                                            // 410
 *                                                                                                                     // 411
 * ```js                                                                                                               // 412
 * map.on('click', function(e) {                                                                                       // 413
 * 	alert(e.latlng);                                                                                                   // 414
 * } );                                                                                                                // 415
 * ```                                                                                                                 // 416
 *                                                                                                                     // 417
 * Leaflet deals with event listeners by reference, so if you want to add a listener and then remove it, define it as a function:
 *                                                                                                                     // 419
 * ```js                                                                                                               // 420
 * function onClick(e) { ... }                                                                                         // 421
 *                                                                                                                     // 422
 * map.on('click', onClick);                                                                                           // 423
 * map.off('click', onClick);                                                                                          // 424
 * ```                                                                                                                 // 425
 */                                                                                                                    // 426
                                                                                                                       // 427
                                                                                                                       // 428
L.Evented = L.Class.extend({                                                                                           // 429
                                                                                                                       // 430
	/* @method on(type: String, fn: Function, context?: Object): this                                                     // 431
	 * Adds a listener function (`fn`) to a particular event type of the object. You can optionally specify the context of the listener (object the this keyword will point to). You can also pass several space-separated types (e.g. `'click dblclick'`).
	 *                                                                                                                    // 433
	 * @alternative                                                                                                       // 434
	 * @method on(eventMap: Object): this                                                                                 // 435
	 * Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`                                 // 436
	 */                                                                                                                   // 437
	on: function (types, fn, context) {                                                                                   // 438
                                                                                                                       // 439
		// types can be a map of types/handlers                                                                              // 440
		if (typeof types === 'object') {                                                                                     // 441
			for (var type in types) {                                                                                           // 442
				// we don't process space-separated events here for performance;                                                   // 443
				// it's a hot path since Layer uses the on(obj) syntax                                                             // 444
				this._on(type, types[type], fn);                                                                                   // 445
			}                                                                                                                   // 446
                                                                                                                       // 447
		} else {                                                                                                             // 448
			// types can be a string of space-separated words                                                                   // 449
			types = L.Util.splitWords(types);                                                                                   // 450
                                                                                                                       // 451
			for (var i = 0, len = types.length; i < len; i++) {                                                                 // 452
				this._on(types[i], fn, context);                                                                                   // 453
			}                                                                                                                   // 454
		}                                                                                                                    // 455
                                                                                                                       // 456
		return this;                                                                                                         // 457
	},                                                                                                                    // 458
                                                                                                                       // 459
	/* @method off(type: String, fn?: Function, context?: Object): this                                                   // 460
	 * Removes a previously added listener function. If no function is specified, it will remove all the listeners of that particular event from the object. Note that if you passed a custom context to `on`, you must pass the same context to `off` in order to remove the listener.
	 *                                                                                                                    // 462
	 * @alternative                                                                                                       // 463
	 * @method off(eventMap: Object): this                                                                                // 464
	 * Removes a set of type/listener pairs.                                                                              // 465
	 *                                                                                                                    // 466
	 * @alternative                                                                                                       // 467
	 * @method off: this                                                                                                  // 468
	 * Removes all listeners to all events on the object.                                                                 // 469
	 */                                                                                                                   // 470
	off: function (types, fn, context) {                                                                                  // 471
                                                                                                                       // 472
		if (!types) {                                                                                                        // 473
			// clear all listeners if called without arguments                                                                  // 474
			delete this._events;                                                                                                // 475
                                                                                                                       // 476
		} else if (typeof types === 'object') {                                                                              // 477
			for (var type in types) {                                                                                           // 478
				this._off(type, types[type], fn);                                                                                  // 479
			}                                                                                                                   // 480
                                                                                                                       // 481
		} else {                                                                                                             // 482
			types = L.Util.splitWords(types);                                                                                   // 483
                                                                                                                       // 484
			for (var i = 0, len = types.length; i < len; i++) {                                                                 // 485
				this._off(types[i], fn, context);                                                                                  // 486
			}                                                                                                                   // 487
		}                                                                                                                    // 488
                                                                                                                       // 489
		return this;                                                                                                         // 490
	},                                                                                                                    // 491
                                                                                                                       // 492
	// attach listener (without syntactic sugar now)                                                                      // 493
	_on: function (type, fn, context) {                                                                                   // 494
		this._events = this._events || {};                                                                                   // 495
                                                                                                                       // 496
		/* get/init listeners for type */                                                                                    // 497
		var typeListeners = this._events[type];                                                                              // 498
		if (!typeListeners) {                                                                                                // 499
			typeListeners = [];                                                                                                 // 500
			this._events[type] = typeListeners;                                                                                 // 501
		}                                                                                                                    // 502
                                                                                                                       // 503
		if (context === this) {                                                                                              // 504
			// Less memory footprint.                                                                                           // 505
			context = undefined;                                                                                                // 506
		}                                                                                                                    // 507
		var newListener = {fn: fn, ctx: context},                                                                            // 508
		    listeners = typeListeners;                                                                                       // 509
                                                                                                                       // 510
		// check if fn already there                                                                                         // 511
		for (var i = 0, len = listeners.length; i < len; i++) {                                                              // 512
			if (listeners[i].fn === fn && listeners[i].ctx === context) {                                                       // 513
				return;                                                                                                            // 514
			}                                                                                                                   // 515
		}                                                                                                                    // 516
                                                                                                                       // 517
		listeners.push(newListener);                                                                                         // 518
	},                                                                                                                    // 519
                                                                                                                       // 520
	_off: function (type, fn, context) {                                                                                  // 521
		var listeners,                                                                                                       // 522
		    i,                                                                                                               // 523
		    len;                                                                                                             // 524
                                                                                                                       // 525
		if (!this._events) { return; }                                                                                       // 526
                                                                                                                       // 527
		listeners = this._events[type];                                                                                      // 528
                                                                                                                       // 529
		if (!listeners) {                                                                                                    // 530
			return;                                                                                                             // 531
		}                                                                                                                    // 532
                                                                                                                       // 533
		if (!fn) {                                                                                                           // 534
			// Set all removed listeners to noop so they are not called if remove happens in fire                               // 535
			for (i = 0, len = listeners.length; i < len; i++) {                                                                 // 536
				listeners[i].fn = L.Util.falseFn;                                                                                  // 537
			}                                                                                                                   // 538
			// clear all listeners for a type if function isn't specified                                                       // 539
			delete this._events[type];                                                                                          // 540
			return;                                                                                                             // 541
		}                                                                                                                    // 542
                                                                                                                       // 543
		if (context === this) {                                                                                              // 544
			context = undefined;                                                                                                // 545
		}                                                                                                                    // 546
                                                                                                                       // 547
		if (listeners) {                                                                                                     // 548
                                                                                                                       // 549
			// find fn and remove it                                                                                            // 550
			for (i = 0, len = listeners.length; i < len; i++) {                                                                 // 551
				var l = listeners[i];                                                                                              // 552
				if (l.ctx !== context) { continue; }                                                                               // 553
				if (l.fn === fn) {                                                                                                 // 554
                                                                                                                       // 555
					// set the removed listener to noop so that's not called if remove happens in fire                                // 556
					l.fn = L.Util.falseFn;                                                                                            // 557
                                                                                                                       // 558
					if (this._firingCount) {                                                                                          // 559
						/* copy array in case events are being fired */                                                                  // 560
						this._events[type] = listeners = listeners.slice();                                                              // 561
					}                                                                                                                 // 562
					listeners.splice(i, 1);                                                                                           // 563
                                                                                                                       // 564
					return;                                                                                                           // 565
				}                                                                                                                  // 566
			}                                                                                                                   // 567
		}                                                                                                                    // 568
	},                                                                                                                    // 569
                                                                                                                       // 570
	// @method fire(type: String, data?: Object, propagate?: Boolean): this                                               // 571
	// Fires an event of the specified type. You can optionally provide an data                                           // 572
	// object — the first argument of the listener function will contain its                                              // 573
	// properties. The event can optionally be propagated to event parents.                                               // 574
	fire: function (type, data, propagate) {                                                                              // 575
		if (!this.listens(type, propagate)) { return this; }                                                                 // 576
                                                                                                                       // 577
		var event = L.Util.extend({}, data, {type: type, target: this});                                                     // 578
                                                                                                                       // 579
		if (this._events) {                                                                                                  // 580
			var listeners = this._events[type];                                                                                 // 581
                                                                                                                       // 582
			if (listeners) {                                                                                                    // 583
				this._firingCount = (this._firingCount + 1) || 1;                                                                  // 584
				for (var i = 0, len = listeners.length; i < len; i++) {                                                            // 585
					var l = listeners[i];                                                                                             // 586
					l.fn.call(l.ctx || this, event);                                                                                  // 587
				}                                                                                                                  // 588
                                                                                                                       // 589
				this._firingCount--;                                                                                               // 590
			}                                                                                                                   // 591
		}                                                                                                                    // 592
                                                                                                                       // 593
		if (propagate) {                                                                                                     // 594
			// propagate the event to parents (set with addEventParent)                                                         // 595
			this._propagateEvent(event);                                                                                        // 596
		}                                                                                                                    // 597
                                                                                                                       // 598
		return this;                                                                                                         // 599
	},                                                                                                                    // 600
                                                                                                                       // 601
	// @method listens(type: String): Boolean                                                                             // 602
	// Returns `true` if a particular event type has any listeners attached to it.                                        // 603
	listens: function (type, propagate) {                                                                                 // 604
		var listeners = this._events && this._events[type];                                                                  // 605
		if (listeners && listeners.length) { return true; }                                                                  // 606
                                                                                                                       // 607
		if (propagate) {                                                                                                     // 608
			// also check parents for listeners if event propagates                                                             // 609
			for (var id in this._eventParents) {                                                                                // 610
				if (this._eventParents[id].listens(type, propagate)) { return true; }                                              // 611
			}                                                                                                                   // 612
		}                                                                                                                    // 613
		return false;                                                                                                        // 614
	},                                                                                                                    // 615
                                                                                                                       // 616
	// @method once(…): this                                                                                              // 617
	// Behaves as [`on(…)`](#evented-on), except the listener will only get fired once and then removed.                  // 618
	once: function (types, fn, context) {                                                                                 // 619
                                                                                                                       // 620
		if (typeof types === 'object') {                                                                                     // 621
			for (var type in types) {                                                                                           // 622
				this.once(type, types[type], fn);                                                                                  // 623
			}                                                                                                                   // 624
			return this;                                                                                                        // 625
		}                                                                                                                    // 626
                                                                                                                       // 627
		var handler = L.bind(function () {                                                                                   // 628
			this                                                                                                                // 629
			    .off(types, fn, context)                                                                                        // 630
			    .off(types, handler, context);                                                                                  // 631
		}, this);                                                                                                            // 632
                                                                                                                       // 633
		// add a listener that's executed once and removed after that                                                        // 634
		return this                                                                                                          // 635
		    .on(types, fn, context)                                                                                          // 636
		    .on(types, handler, context);                                                                                    // 637
	},                                                                                                                    // 638
                                                                                                                       // 639
	// @method addEventParent(obj: Evented): this                                                                         // 640
	// Adds an event parent - an `Evented` that will receive propagated events                                            // 641
	addEventParent: function (obj) {                                                                                      // 642
		this._eventParents = this._eventParents || {};                                                                       // 643
		this._eventParents[L.stamp(obj)] = obj;                                                                              // 644
		return this;                                                                                                         // 645
	},                                                                                                                    // 646
                                                                                                                       // 647
	// @method removeEventParent(obj: Evented): this                                                                      // 648
	// Removes an event parent, so it will stop receiving propagated events                                               // 649
	removeEventParent: function (obj) {                                                                                   // 650
		if (this._eventParents) {                                                                                            // 651
			delete this._eventParents[L.stamp(obj)];                                                                            // 652
		}                                                                                                                    // 653
		return this;                                                                                                         // 654
	},                                                                                                                    // 655
                                                                                                                       // 656
	_propagateEvent: function (e) {                                                                                       // 657
		for (var id in this._eventParents) {                                                                                 // 658
			this._eventParents[id].fire(e.type, L.extend({layer: e.target}, e), true);                                          // 659
		}                                                                                                                    // 660
	}                                                                                                                     // 661
});                                                                                                                    // 662
                                                                                                                       // 663
var proto = L.Evented.prototype;                                                                                       // 664
                                                                                                                       // 665
// aliases; we should ditch those eventually                                                                           // 666
                                                                                                                       // 667
// @method addEventListener(…): this                                                                                   // 668
// Alias to [`on(…)`](#evented-on)                                                                                     // 669
proto.addEventListener = proto.on;                                                                                     // 670
                                                                                                                       // 671
// @method removeEventListener(…): this                                                                                // 672
// Alias to [`off(…)`](#evented-off)                                                                                   // 673
                                                                                                                       // 674
// @method clearAllEventListeners(…): this                                                                             // 675
// Alias to [`off()`](#evented-off)                                                                                    // 676
proto.removeEventListener = proto.clearAllEventListeners = proto.off;                                                  // 677
                                                                                                                       // 678
// @method addOneTimeEventListener(…): this                                                                            // 679
// Alias to [`once(…)`](#evented-once)                                                                                 // 680
proto.addOneTimeEventListener = proto.once;                                                                            // 681
                                                                                                                       // 682
// @method fireEvent(…): this                                                                                          // 683
// Alias to [`fire(…)`](#evented-fire)                                                                                 // 684
proto.fireEvent = proto.fire;                                                                                          // 685
                                                                                                                       // 686
// @method hasEventListeners(…): Boolean                                                                               // 687
// Alias to [`listens(…)`](#evented-listens)                                                                           // 688
proto.hasEventListeners = proto.listens;                                                                               // 689
                                                                                                                       // 690
L.Mixin = {Events: proto};                                                                                             // 691
                                                                                                                       // 692
                                                                                                                       // 693
                                                                                                                       // 694
/*                                                                                                                     // 695
 * @namespace Browser                                                                                                  // 696
 * @aka L.Browser                                                                                                      // 697
 *                                                                                                                     // 698
 * A namespace with static properties for browser/feature detection used by Leaflet internally.                        // 699
 *                                                                                                                     // 700
 * @example                                                                                                            // 701
 *                                                                                                                     // 702
 * ```js                                                                                                               // 703
 * if (L.Browser.ielt9) {                                                                                              // 704
 *   alert('Upgrade your browser, dude!');                                                                             // 705
 * }                                                                                                                   // 706
 * ```                                                                                                                 // 707
 */                                                                                                                    // 708
                                                                                                                       // 709
(function () {                                                                                                         // 710
                                                                                                                       // 711
	var ua = navigator.userAgent.toLowerCase(),                                                                           // 712
	    doc = document.documentElement,                                                                                   // 713
                                                                                                                       // 714
	    ie = 'ActiveXObject' in window,                                                                                   // 715
                                                                                                                       // 716
	    webkit    = ua.indexOf('webkit') !== -1,                                                                          // 717
	    phantomjs = ua.indexOf('phantom') !== -1,                                                                         // 718
	    android23 = ua.search('android [23]') !== -1,                                                                     // 719
	    chrome    = ua.indexOf('chrome') !== -1,                                                                          // 720
	    gecko     = ua.indexOf('gecko') !== -1  && !webkit && !window.opera && !ie,                                       // 721
                                                                                                                       // 722
	    win = navigator.platform.indexOf('Win') === 0,                                                                    // 723
                                                                                                                       // 724
	    mobile = typeof orientation !== 'undefined' || ua.indexOf('mobile') !== -1,                                       // 725
	    msPointer = !window.PointerEvent && window.MSPointerEvent,                                                        // 726
	    pointer = window.PointerEvent || msPointer,                                                                       // 727
                                                                                                                       // 728
	    ie3d = ie && ('transition' in doc.style),                                                                         // 729
	    webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23,                // 730
	    gecko3d = 'MozPerspective' in doc.style,                                                                          // 731
	    opera12 = 'OTransition' in doc.style;                                                                             // 732
                                                                                                                       // 733
                                                                                                                       // 734
	var touch = !window.L_NO_TOUCH && (pointer || 'ontouchstart' in window ||                                             // 735
			(window.DocumentTouch && document instanceof window.DocumentTouch));                                                // 736
                                                                                                                       // 737
	L.Browser = {                                                                                                         // 738
                                                                                                                       // 739
		// @property ie: Boolean                                                                                             // 740
		// `true` for all Internet Explorer versions (not Edge).                                                             // 741
		ie: ie,                                                                                                              // 742
                                                                                                                       // 743
		// @property ielt9: Boolean                                                                                          // 744
		// `true` for Internet Explorer versions less than 9.                                                                // 745
		ielt9: ie && !document.addEventListener,                                                                             // 746
                                                                                                                       // 747
		// @property edge: Boolean                                                                                           // 748
		// `true` for the Edge web browser.                                                                                  // 749
		edge: 'msLaunchUri' in navigator && !('documentMode' in document),                                                   // 750
                                                                                                                       // 751
		// @property webkit: Boolean                                                                                         // 752
		// `true` for webkit-based browsers like Chrome and Safari (including mobile versions).                              // 753
		webkit: webkit,                                                                                                      // 754
                                                                                                                       // 755
		// @property gecko: Boolean                                                                                          // 756
		// `true` for gecko-based browsers like Firefox.                                                                     // 757
		gecko: gecko,                                                                                                        // 758
                                                                                                                       // 759
		// @property android: Boolean                                                                                        // 760
		// `true` for any browser running on an Android platform.                                                            // 761
		android: ua.indexOf('android') !== -1,                                                                               // 762
                                                                                                                       // 763
		// @property android23: Boolean                                                                                      // 764
		// `true` for browsers running on Android 2 or Android 3.                                                            // 765
		android23: android23,                                                                                                // 766
                                                                                                                       // 767
		// @property chrome: Boolean                                                                                         // 768
		// `true` for the Chrome browser.                                                                                    // 769
		chrome: chrome,                                                                                                      // 770
                                                                                                                       // 771
		// @property safari: Boolean                                                                                         // 772
		// `true` for the Safari browser.                                                                                    // 773
		safari: !chrome && ua.indexOf('safari') !== -1,                                                                      // 774
                                                                                                                       // 775
                                                                                                                       // 776
		// @property win: Boolean                                                                                            // 777
		// `true` when the browser is running in a Windows platform                                                          // 778
		win: win,                                                                                                            // 779
                                                                                                                       // 780
                                                                                                                       // 781
		// @property ie3d: Boolean                                                                                           // 782
		// `true` for all Internet Explorer versions supporting CSS transforms.                                              // 783
		ie3d: ie3d,                                                                                                          // 784
                                                                                                                       // 785
		// @property webkit3d: Boolean                                                                                       // 786
		// `true` for webkit-based browsers supporting CSS transforms.                                                       // 787
		webkit3d: webkit3d,                                                                                                  // 788
                                                                                                                       // 789
		// @property gecko3d: Boolean                                                                                        // 790
		// `true` for gecko-based browsers supporting CSS transforms.                                                        // 791
		gecko3d: gecko3d,                                                                                                    // 792
                                                                                                                       // 793
		// @property opera12: Boolean                                                                                        // 794
		// `true` for the Opera browser supporting CSS transforms (version 12 or later).                                     // 795
		opera12: opera12,                                                                                                    // 796
                                                                                                                       // 797
		// @property any3d: Boolean                                                                                          // 798
		// `true` for all browsers supporting CSS transforms.                                                                // 799
		any3d: !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantomjs,                              // 800
                                                                                                                       // 801
                                                                                                                       // 802
		// @property mobile: Boolean                                                                                         // 803
		// `true` for all browsers running in a mobile device.                                                               // 804
		mobile: mobile,                                                                                                      // 805
                                                                                                                       // 806
		// @property mobileWebkit: Boolean                                                                                   // 807
		// `true` for all webkit-based browsers in a mobile device.                                                          // 808
		mobileWebkit: mobile && webkit,                                                                                      // 809
                                                                                                                       // 810
		// @property mobileWebkit3d: Boolean                                                                                 // 811
		// `true` for all webkit-based browsers in a mobile device supporting CSS transforms.                                // 812
		mobileWebkit3d: mobile && webkit3d,                                                                                  // 813
                                                                                                                       // 814
		// @property mobileOpera: Boolean                                                                                    // 815
		// `true` for the Opera browser in a mobile device.                                                                  // 816
		mobileOpera: mobile && window.opera,                                                                                 // 817
                                                                                                                       // 818
		// @property mobileGecko: Boolean                                                                                    // 819
		// `true` for gecko-based browsers running in a mobile device.                                                       // 820
		mobileGecko: mobile && gecko,                                                                                        // 821
                                                                                                                       // 822
                                                                                                                       // 823
		// @property touch: Boolean                                                                                          // 824
		// `true` for all browsers supporting [touch events](https://developer.mozilla.org/docs/Web/API/Touch_events).       // 825
		// This does not necessarily mean that the browser is running in a computer with                                     // 826
		// a touchscreen, it only means that the browser is capable of understanding                                         // 827
		// touch events.                                                                                                     // 828
		touch: !!touch,                                                                                                      // 829
                                                                                                                       // 830
		// @property msPointer: Boolean                                                                                      // 831
		// `true` for browsers implementing the Microsoft touch events model (notably IE10).                                 // 832
		msPointer: !!msPointer,                                                                                              // 833
                                                                                                                       // 834
		// @property pointer: Boolean                                                                                        // 835
		// `true` for all browsers supporting [pointer events](https://msdn.microsoft.com/en-us/library/dn433244%28v=vs.85%29.aspx).
		pointer: !!pointer,                                                                                                  // 837
                                                                                                                       // 838
                                                                                                                       // 839
		// @property retina: Boolean                                                                                         // 840
		// `true` for browsers on a high-resolution "retina" screen.                                                         // 841
		retina: (window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI)) > 1                      // 842
	};                                                                                                                    // 843
                                                                                                                       // 844
}());                                                                                                                  // 845
                                                                                                                       // 846
                                                                                                                       // 847
                                                                                                                       // 848
/*                                                                                                                     // 849
 * @class Point                                                                                                        // 850
 * @aka L.Point                                                                                                        // 851
 *                                                                                                                     // 852
 * Represents a point with `x` and `y` coordinates in pixels.                                                          // 853
 *                                                                                                                     // 854
 * @example                                                                                                            // 855
 *                                                                                                                     // 856
 * ```js                                                                                                               // 857
 * var point = L.point(200, 300);                                                                                      // 858
 * ```                                                                                                                 // 859
 *                                                                                                                     // 860
 * All Leaflet methods and options that accept `Point` objects also accept them in a simple Array form (unless noted otherwise), so these lines are equivalent:
 *                                                                                                                     // 862
 * ```js                                                                                                               // 863
 * map.panBy([200, 300]);                                                                                              // 864
 * map.panBy(L.point(200, 300));                                                                                       // 865
 * ```                                                                                                                 // 866
 */                                                                                                                    // 867
                                                                                                                       // 868
L.Point = function (x, y, round) {                                                                                     // 869
	// @property x: Number; The `x` coordinate of the point                                                               // 870
	this.x = (round ? Math.round(x) : x);                                                                                 // 871
	// @property y: Number; The `y` coordinate of the point                                                               // 872
	this.y = (round ? Math.round(y) : y);                                                                                 // 873
};                                                                                                                     // 874
                                                                                                                       // 875
L.Point.prototype = {                                                                                                  // 876
                                                                                                                       // 877
	// @method clone(): Point                                                                                             // 878
	// Returns a copy of the current point.                                                                               // 879
	clone: function () {                                                                                                  // 880
		return new L.Point(this.x, this.y);                                                                                  // 881
	},                                                                                                                    // 882
                                                                                                                       // 883
	// @method add(otherPoint: Point): Point                                                                              // 884
	// Returns the result of addition of the current and the given points.                                                // 885
	add: function (point) {                                                                                               // 886
		// non-destructive, returns a new point                                                                              // 887
		return this.clone()._add(L.point(point));                                                                            // 888
	},                                                                                                                    // 889
                                                                                                                       // 890
	_add: function (point) {                                                                                              // 891
		// destructive, used directly for performance in situations where it's safe to modify existing point                 // 892
		this.x += point.x;                                                                                                   // 893
		this.y += point.y;                                                                                                   // 894
		return this;                                                                                                         // 895
	},                                                                                                                    // 896
                                                                                                                       // 897
	// @method subtract(otherPoint: Point): Point                                                                         // 898
	// Returns the result of subtraction of the given point from the current.                                             // 899
	subtract: function (point) {                                                                                          // 900
		return this.clone()._subtract(L.point(point));                                                                       // 901
	},                                                                                                                    // 902
                                                                                                                       // 903
	_subtract: function (point) {                                                                                         // 904
		this.x -= point.x;                                                                                                   // 905
		this.y -= point.y;                                                                                                   // 906
		return this;                                                                                                         // 907
	},                                                                                                                    // 908
                                                                                                                       // 909
	// @method divideBy(num: Number): Point                                                                               // 910
	// Returns the result of division of the current point by the given number.                                           // 911
	divideBy: function (num) {                                                                                            // 912
		return this.clone()._divideBy(num);                                                                                  // 913
	},                                                                                                                    // 914
                                                                                                                       // 915
	_divideBy: function (num) {                                                                                           // 916
		this.x /= num;                                                                                                       // 917
		this.y /= num;                                                                                                       // 918
		return this;                                                                                                         // 919
	},                                                                                                                    // 920
                                                                                                                       // 921
	// @method multiplyBy(num: Number): Point                                                                             // 922
	// Returns the result of multiplication of the current point by the given number.                                     // 923
	multiplyBy: function (num) {                                                                                          // 924
		return this.clone()._multiplyBy(num);                                                                                // 925
	},                                                                                                                    // 926
                                                                                                                       // 927
	_multiplyBy: function (num) {                                                                                         // 928
		this.x *= num;                                                                                                       // 929
		this.y *= num;                                                                                                       // 930
		return this;                                                                                                         // 931
	},                                                                                                                    // 932
                                                                                                                       // 933
	// @method scaleBy(scale: Point): Point                                                                               // 934
	// Multiply each coordinate of the current point by each coordinate of                                                // 935
	// `scale`. In linear algebra terms, multiply the point by the                                                        // 936
	// [scaling matrix](https://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)                       // 937
	// defined by `scale`.                                                                                                // 938
	scaleBy: function (point) {                                                                                           // 939
		return new L.Point(this.x * point.x, this.y * point.y);                                                              // 940
	},                                                                                                                    // 941
                                                                                                                       // 942
	// @method unscaleBy(scale: Point): Point                                                                             // 943
	// Inverse of `scaleBy`. Divide each coordinate of the current point by                                               // 944
	// each coordinate of `scale`.                                                                                        // 945
	unscaleBy: function (point) {                                                                                         // 946
		return new L.Point(this.x / point.x, this.y / point.y);                                                              // 947
	},                                                                                                                    // 948
                                                                                                                       // 949
	// @method round(): Point                                                                                             // 950
	// Returns a copy of the current point with rounded coordinates.                                                      // 951
	round: function () {                                                                                                  // 952
		return this.clone()._round();                                                                                        // 953
	},                                                                                                                    // 954
                                                                                                                       // 955
	_round: function () {                                                                                                 // 956
		this.x = Math.round(this.x);                                                                                         // 957
		this.y = Math.round(this.y);                                                                                         // 958
		return this;                                                                                                         // 959
	},                                                                                                                    // 960
                                                                                                                       // 961
	// @method floor(): Point                                                                                             // 962
	// Returns a copy of the current point with floored coordinates (rounded down).                                       // 963
	floor: function () {                                                                                                  // 964
		return this.clone()._floor();                                                                                        // 965
	},                                                                                                                    // 966
                                                                                                                       // 967
	_floor: function () {                                                                                                 // 968
		this.x = Math.floor(this.x);                                                                                         // 969
		this.y = Math.floor(this.y);                                                                                         // 970
		return this;                                                                                                         // 971
	},                                                                                                                    // 972
                                                                                                                       // 973
	// @method ceil(): Point                                                                                              // 974
	// Returns a copy of the current point with ceiled coordinates (rounded up).                                          // 975
	ceil: function () {                                                                                                   // 976
		return this.clone()._ceil();                                                                                         // 977
	},                                                                                                                    // 978
                                                                                                                       // 979
	_ceil: function () {                                                                                                  // 980
		this.x = Math.ceil(this.x);                                                                                          // 981
		this.y = Math.ceil(this.y);                                                                                          // 982
		return this;                                                                                                         // 983
	},                                                                                                                    // 984
                                                                                                                       // 985
	// @method distanceTo(otherPoint: Point): Number                                                                      // 986
	// Returns the cartesian distance between the current and the given points.                                           // 987
	distanceTo: function (point) {                                                                                        // 988
		point = L.point(point);                                                                                              // 989
                                                                                                                       // 990
		var x = point.x - this.x,                                                                                            // 991
		    y = point.y - this.y;                                                                                            // 992
                                                                                                                       // 993
		return Math.sqrt(x * x + y * y);                                                                                     // 994
	},                                                                                                                    // 995
                                                                                                                       // 996
	// @method equals(otherPoint: Point): Boolean                                                                         // 997
	// Returns `true` if the given point has the same coordinates.                                                        // 998
	equals: function (point) {                                                                                            // 999
		point = L.point(point);                                                                                              // 1000
                                                                                                                       // 1001
		return point.x === this.x &&                                                                                         // 1002
		       point.y === this.y;                                                                                           // 1003
	},                                                                                                                    // 1004
                                                                                                                       // 1005
	// @method contains(otherPoint: Point): Boolean                                                                       // 1006
	// Returns `true` if both coordinates of the given point are less than the corresponding current point coordinates (in absolute values).
	contains: function (point) {                                                                                          // 1008
		point = L.point(point);                                                                                              // 1009
                                                                                                                       // 1010
		return Math.abs(point.x) <= Math.abs(this.x) &&                                                                      // 1011
		       Math.abs(point.y) <= Math.abs(this.y);                                                                        // 1012
	},                                                                                                                    // 1013
                                                                                                                       // 1014
	// @method toString(): String                                                                                         // 1015
	// Returns a string representation of the point for debugging purposes.                                               // 1016
	toString: function () {                                                                                               // 1017
		return 'Point(' +                                                                                                    // 1018
		        L.Util.formatNum(this.x) + ', ' +                                                                            // 1019
		        L.Util.formatNum(this.y) + ')';                                                                              // 1020
	}                                                                                                                     // 1021
};                                                                                                                     // 1022
                                                                                                                       // 1023
// @factory L.point(x: Number, y: Number, round?: Boolean)                                                             // 1024
// Creates a Point object with the given `x` and `y` coordinates. If optional `round` is set to true, rounds the `x` and `y` values.
                                                                                                                       // 1026
// @alternative                                                                                                        // 1027
// @factory L.point(coords: Number[])                                                                                  // 1028
// Expects an array of the form `[x, y]` instead.                                                                      // 1029
                                                                                                                       // 1030
// @alternative                                                                                                        // 1031
// @factory L.point(coords: Object)                                                                                    // 1032
// Expects a plain object of the form `{x: Number, y: Number}` instead.                                                // 1033
L.point = function (x, y, round) {                                                                                     // 1034
	if (x instanceof L.Point) {                                                                                           // 1035
		return x;                                                                                                            // 1036
	}                                                                                                                     // 1037
	if (L.Util.isArray(x)) {                                                                                              // 1038
		return new L.Point(x[0], x[1]);                                                                                      // 1039
	}                                                                                                                     // 1040
	if (x === undefined || x === null) {                                                                                  // 1041
		return x;                                                                                                            // 1042
	}                                                                                                                     // 1043
	if (typeof x === 'object' && 'x' in x && 'y' in x) {                                                                  // 1044
		return new L.Point(x.x, x.y);                                                                                        // 1045
	}                                                                                                                     // 1046
	return new L.Point(x, y, round);                                                                                      // 1047
};                                                                                                                     // 1048
                                                                                                                       // 1049
                                                                                                                       // 1050
                                                                                                                       // 1051
/*                                                                                                                     // 1052
 * @class Bounds                                                                                                       // 1053
 * @aka L.Bounds                                                                                                       // 1054
 *                                                                                                                     // 1055
 * Represents a rectangular area in pixel coordinates.                                                                 // 1056
 *                                                                                                                     // 1057
 * @example                                                                                                            // 1058
 *                                                                                                                     // 1059
 * ```js                                                                                                               // 1060
 * var p1 = L.point(10, 10),                                                                                           // 1061
 * p2 = L.point(40, 60),                                                                                               // 1062
 * bounds = L.bounds(p1, p2);                                                                                          // 1063
 * ```                                                                                                                 // 1064
 *                                                                                                                     // 1065
 * All Leaflet methods that accept `Bounds` objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:
 *                                                                                                                     // 1067
 * ```js                                                                                                               // 1068
 * otherBounds.intersects([[10, 10], [40, 60]]);                                                                       // 1069
 * ```                                                                                                                 // 1070
 */                                                                                                                    // 1071
                                                                                                                       // 1072
L.Bounds = function (a, b) {                                                                                           // 1073
	if (!a) { return; }                                                                                                   // 1074
                                                                                                                       // 1075
	var points = b ? [a, b] : a;                                                                                          // 1076
                                                                                                                       // 1077
	for (var i = 0, len = points.length; i < len; i++) {                                                                  // 1078
		this.extend(points[i]);                                                                                              // 1079
	}                                                                                                                     // 1080
};                                                                                                                     // 1081
                                                                                                                       // 1082
L.Bounds.prototype = {                                                                                                 // 1083
	// @method extend(point: Point): this                                                                                 // 1084
	// Extends the bounds to contain the given point.                                                                     // 1085
	extend: function (point) { // (Point)                                                                                 // 1086
		point = L.point(point);                                                                                              // 1087
                                                                                                                       // 1088
		// @property min: Point                                                                                              // 1089
		// The top left corner of the rectangle.                                                                             // 1090
		// @property max: Point                                                                                              // 1091
		// The bottom right corner of the rectangle.                                                                         // 1092
		if (!this.min && !this.max) {                                                                                        // 1093
			this.min = point.clone();                                                                                           // 1094
			this.max = point.clone();                                                                                           // 1095
		} else {                                                                                                             // 1096
			this.min.x = Math.min(point.x, this.min.x);                                                                         // 1097
			this.max.x = Math.max(point.x, this.max.x);                                                                         // 1098
			this.min.y = Math.min(point.y, this.min.y);                                                                         // 1099
			this.max.y = Math.max(point.y, this.max.y);                                                                         // 1100
		}                                                                                                                    // 1101
		return this;                                                                                                         // 1102
	},                                                                                                                    // 1103
                                                                                                                       // 1104
	// @method getCenter(round?: Boolean): Point                                                                          // 1105
	// Returns the center point of the bounds.                                                                            // 1106
	getCenter: function (round) {                                                                                         // 1107
		return new L.Point(                                                                                                  // 1108
		        (this.min.x + this.max.x) / 2,                                                                               // 1109
		        (this.min.y + this.max.y) / 2, round);                                                                       // 1110
	},                                                                                                                    // 1111
                                                                                                                       // 1112
	// @method getBottomLeft(): Point                                                                                     // 1113
	// Returns the bottom-left point of the bounds.                                                                       // 1114
	getBottomLeft: function () {                                                                                          // 1115
		return new L.Point(this.min.x, this.max.y);                                                                          // 1116
	},                                                                                                                    // 1117
                                                                                                                       // 1118
	// @method getTopRight(): Point                                                                                       // 1119
	// Returns the top-right point of the bounds.                                                                         // 1120
	getTopRight: function () { // -> Point                                                                                // 1121
		return new L.Point(this.max.x, this.min.y);                                                                          // 1122
	},                                                                                                                    // 1123
                                                                                                                       // 1124
	// @method getSize(): Point                                                                                           // 1125
	// Returns the size of the given bounds                                                                               // 1126
	getSize: function () {                                                                                                // 1127
		return this.max.subtract(this.min);                                                                                  // 1128
	},                                                                                                                    // 1129
                                                                                                                       // 1130
	// @method contains(otherBounds: Bounds): Boolean                                                                     // 1131
	// Returns `true` if the rectangle contains the given one.                                                            // 1132
	// @alternative                                                                                                       // 1133
	// @method contains(point: Point): Boolean                                                                            // 1134
	// Returns `true` if the rectangle contains the given point.                                                          // 1135
	contains: function (obj) {                                                                                            // 1136
		var min, max;                                                                                                        // 1137
                                                                                                                       // 1138
		if (typeof obj[0] === 'number' || obj instanceof L.Point) {                                                          // 1139
			obj = L.point(obj);                                                                                                 // 1140
		} else {                                                                                                             // 1141
			obj = L.bounds(obj);                                                                                                // 1142
		}                                                                                                                    // 1143
                                                                                                                       // 1144
		if (obj instanceof L.Bounds) {                                                                                       // 1145
			min = obj.min;                                                                                                      // 1146
			max = obj.max;                                                                                                      // 1147
		} else {                                                                                                             // 1148
			min = max = obj;                                                                                                    // 1149
		}                                                                                                                    // 1150
                                                                                                                       // 1151
		return (min.x >= this.min.x) &&                                                                                      // 1152
		       (max.x <= this.max.x) &&                                                                                      // 1153
		       (min.y >= this.min.y) &&                                                                                      // 1154
		       (max.y <= this.max.y);                                                                                        // 1155
	},                                                                                                                    // 1156
                                                                                                                       // 1157
	// @method intersects(otherBounds: Bounds): Boolean                                                                   // 1158
	// Returns `true` if the rectangle intersects the given bounds. Two bounds                                            // 1159
	// intersect if they have at least one point in common.                                                               // 1160
	intersects: function (bounds) { // (Bounds) -> Boolean                                                                // 1161
		bounds = L.bounds(bounds);                                                                                           // 1162
                                                                                                                       // 1163
		var min = this.min,                                                                                                  // 1164
		    max = this.max,                                                                                                  // 1165
		    min2 = bounds.min,                                                                                               // 1166
		    max2 = bounds.max,                                                                                               // 1167
		    xIntersects = (max2.x >= min.x) && (min2.x <= max.x),                                                            // 1168
		    yIntersects = (max2.y >= min.y) && (min2.y <= max.y);                                                            // 1169
                                                                                                                       // 1170
		return xIntersects && yIntersects;                                                                                   // 1171
	},                                                                                                                    // 1172
                                                                                                                       // 1173
	// @method overlaps(otherBounds: Bounds): Boolean                                                                     // 1174
	// Returns `true` if the rectangle overlaps the given bounds. Two bounds                                              // 1175
	// overlap if their intersection is an area.                                                                          // 1176
	overlaps: function (bounds) { // (Bounds) -> Boolean                                                                  // 1177
		bounds = L.bounds(bounds);                                                                                           // 1178
                                                                                                                       // 1179
		var min = this.min,                                                                                                  // 1180
		    max = this.max,                                                                                                  // 1181
		    min2 = bounds.min,                                                                                               // 1182
		    max2 = bounds.max,                                                                                               // 1183
		    xOverlaps = (max2.x > min.x) && (min2.x < max.x),                                                                // 1184
		    yOverlaps = (max2.y > min.y) && (min2.y < max.y);                                                                // 1185
                                                                                                                       // 1186
		return xOverlaps && yOverlaps;                                                                                       // 1187
	},                                                                                                                    // 1188
                                                                                                                       // 1189
	isValid: function () {                                                                                                // 1190
		return !!(this.min && this.max);                                                                                     // 1191
	}                                                                                                                     // 1192
};                                                                                                                     // 1193
                                                                                                                       // 1194
                                                                                                                       // 1195
// @factory L.bounds(topLeft: Point, bottomRight: Point)                                                               // 1196
// Creates a Bounds object from two coordinates (usually top-left and bottom-right corners).                           // 1197
// @alternative                                                                                                        // 1198
// @factory L.bounds(points: Point[])                                                                                  // 1199
// Creates a Bounds object from the points it contains                                                                 // 1200
L.bounds = function (a, b) {                                                                                           // 1201
	if (!a || a instanceof L.Bounds) {                                                                                    // 1202
		return a;                                                                                                            // 1203
	}                                                                                                                     // 1204
	return new L.Bounds(a, b);                                                                                            // 1205
};                                                                                                                     // 1206
                                                                                                                       // 1207
                                                                                                                       // 1208
                                                                                                                       // 1209
/*                                                                                                                     // 1210
 * @class Transformation                                                                                               // 1211
 * @aka L.Transformation                                                                                               // 1212
 *                                                                                                                     // 1213
 * Represents an affine transformation: a set of coefficients `a`, `b`, `c`, `d`                                       // 1214
 * for transforming a point of a form `(x, y)` into `(a*x + b, c*y + d)` and doing                                     // 1215
 * the reverse. Used by Leaflet in its projections code.                                                               // 1216
 *                                                                                                                     // 1217
 * @example                                                                                                            // 1218
 *                                                                                                                     // 1219
 * ```js                                                                                                               // 1220
 * var transformation = new L.Transformation(2, 5, -1, 10),                                                            // 1221
 * 	p = L.point(1, 2),                                                                                                 // 1222
 * 	p2 = transformation.transform(p), //  L.point(7, 8)                                                                // 1223
 * 	p3 = transformation.untransform(p2); //  L.point(1, 2)                                                             // 1224
 * ```                                                                                                                 // 1225
 */                                                                                                                    // 1226
                                                                                                                       // 1227
                                                                                                                       // 1228
// factory new L.Transformation(a: Number, b: Number, c: Number, d: Number)                                            // 1229
// Creates a `Transformation` object with the given coefficients.                                                      // 1230
L.Transformation = function (a, b, c, d) {                                                                             // 1231
	this._a = a;                                                                                                          // 1232
	this._b = b;                                                                                                          // 1233
	this._c = c;                                                                                                          // 1234
	this._d = d;                                                                                                          // 1235
};                                                                                                                     // 1236
                                                                                                                       // 1237
L.Transformation.prototype = {                                                                                         // 1238
	// @method transform(point: Point, scale?: Number): Point                                                             // 1239
	// Returns a transformed point, optionally multiplied by the given scale.                                             // 1240
	// Only accepts actual `L.Point` instances, not arrays.                                                               // 1241
	transform: function (point, scale) { // (Point, Number) -> Point                                                      // 1242
		return this._transform(point.clone(), scale);                                                                        // 1243
	},                                                                                                                    // 1244
                                                                                                                       // 1245
	// destructive transform (faster)                                                                                     // 1246
	_transform: function (point, scale) {                                                                                 // 1247
		scale = scale || 1;                                                                                                  // 1248
		point.x = scale * (this._a * point.x + this._b);                                                                     // 1249
		point.y = scale * (this._c * point.y + this._d);                                                                     // 1250
		return point;                                                                                                        // 1251
	},                                                                                                                    // 1252
                                                                                                                       // 1253
	// @method untransform(point: Point, scale?: Number): Point                                                           // 1254
	// Returns the reverse transformation of the given point, optionally divided                                          // 1255
	// by the given scale. Only accepts actual `L.Point` instances, not arrays.                                           // 1256
	untransform: function (point, scale) {                                                                                // 1257
		scale = scale || 1;                                                                                                  // 1258
		return new L.Point(                                                                                                  // 1259
		        (point.x / scale - this._b) / this._a,                                                                       // 1260
		        (point.y / scale - this._d) / this._c);                                                                      // 1261
	}                                                                                                                     // 1262
};                                                                                                                     // 1263
                                                                                                                       // 1264
                                                                                                                       // 1265
                                                                                                                       // 1266
/*                                                                                                                     // 1267
 * @namespace DomUtil                                                                                                  // 1268
 *                                                                                                                     // 1269
 * Utility functions to work with the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)          // 1270
 * tree, used by Leaflet internally.                                                                                   // 1271
 *                                                                                                                     // 1272
 * Most functions expecting or returning a `HTMLElement` also work for                                                 // 1273
 * SVG elements. The only difference is that classes refer to CSS classes                                              // 1274
 * in HTML and SVG classes in SVG.                                                                                     // 1275
 */                                                                                                                    // 1276
                                                                                                                       // 1277
L.DomUtil = {                                                                                                          // 1278
                                                                                                                       // 1279
	// @function get(id: String|HTMLElement): HTMLElement                                                                 // 1280
	// Returns an element given its DOM id, or returns the element itself                                                 // 1281
	// if it was passed directly.                                                                                         // 1282
	get: function (id) {                                                                                                  // 1283
		return typeof id === 'string' ? document.getElementById(id) : id;                                                    // 1284
	},                                                                                                                    // 1285
                                                                                                                       // 1286
	// @function getStyle(el: HTMLElement, styleAttrib: String): String                                                   // 1287
	// Returns the value for a certain style attribute on an element,                                                     // 1288
	// including computed values or values set through CSS.                                                               // 1289
	getStyle: function (el, style) {                                                                                      // 1290
                                                                                                                       // 1291
		var value = el.style[style] || (el.currentStyle && el.currentStyle[style]);                                          // 1292
                                                                                                                       // 1293
		if ((!value || value === 'auto') && document.defaultView) {                                                          // 1294
			var css = document.defaultView.getComputedStyle(el, null);                                                          // 1295
			value = css ? css[style] : null;                                                                                    // 1296
		}                                                                                                                    // 1297
                                                                                                                       // 1298
		return value === 'auto' ? null : value;                                                                              // 1299
	},                                                                                                                    // 1300
                                                                                                                       // 1301
	// @function create(tagName: String, className?: String, container?: HTMLElement): HTMLElement                        // 1302
	// Creates an HTML element with `tagName`, sets its class to `className`, and optionally appends it to `container` element.
	create: function (tagName, className, container) {                                                                    // 1304
                                                                                                                       // 1305
		var el = document.createElement(tagName);                                                                            // 1306
		el.className = className || '';                                                                                      // 1307
                                                                                                                       // 1308
		if (container) {                                                                                                     // 1309
			container.appendChild(el);                                                                                          // 1310
		}                                                                                                                    // 1311
                                                                                                                       // 1312
		return el;                                                                                                           // 1313
	},                                                                                                                    // 1314
                                                                                                                       // 1315
	// @function remove(el: HTMLElement)                                                                                  // 1316
	// Removes `el` from its parent element                                                                               // 1317
	remove: function (el) {                                                                                               // 1318
		var parent = el.parentNode;                                                                                          // 1319
		if (parent) {                                                                                                        // 1320
			parent.removeChild(el);                                                                                             // 1321
		}                                                                                                                    // 1322
	},                                                                                                                    // 1323
                                                                                                                       // 1324
	// @function empty(el: HTMLElement)                                                                                   // 1325
	// Removes all of `el`'s children elements from `el`                                                                  // 1326
	empty: function (el) {                                                                                                // 1327
		while (el.firstChild) {                                                                                              // 1328
			el.removeChild(el.firstChild);                                                                                      // 1329
		}                                                                                                                    // 1330
	},                                                                                                                    // 1331
                                                                                                                       // 1332
	// @function toFront(el: HTMLElement)                                                                                 // 1333
	// Makes `el` the last children of its parent, so it renders in front of the other children.                          // 1334
	toFront: function (el) {                                                                                              // 1335
		el.parentNode.appendChild(el);                                                                                       // 1336
	},                                                                                                                    // 1337
                                                                                                                       // 1338
	// @function toBack(el: HTMLElement)                                                                                  // 1339
	// Makes `el` the first children of its parent, so it renders back from the other children.                           // 1340
	toBack: function (el) {                                                                                               // 1341
		var parent = el.parentNode;                                                                                          // 1342
		parent.insertBefore(el, parent.firstChild);                                                                          // 1343
	},                                                                                                                    // 1344
                                                                                                                       // 1345
	// @function hasClass(el: HTMLElement, name: String): Boolean                                                         // 1346
	// Returns `true` if the element's class attribute contains `name`.                                                   // 1347
	hasClass: function (el, name) {                                                                                       // 1348
		if (el.classList !== undefined) {                                                                                    // 1349
			return el.classList.contains(name);                                                                                 // 1350
		}                                                                                                                    // 1351
		var className = L.DomUtil.getClass(el);                                                                              // 1352
		return className.length > 0 && new RegExp('(^|\\s)' + name + '(\\s|$)').test(className);                             // 1353
	},                                                                                                                    // 1354
                                                                                                                       // 1355
	// @function addClass(el: HTMLElement, name: String)                                                                  // 1356
	// Adds `name` to the element's class attribute.                                                                      // 1357
	addClass: function (el, name) {                                                                                       // 1358
		if (el.classList !== undefined) {                                                                                    // 1359
			var classes = L.Util.splitWords(name);                                                                              // 1360
			for (var i = 0, len = classes.length; i < len; i++) {                                                               // 1361
				el.classList.add(classes[i]);                                                                                      // 1362
			}                                                                                                                   // 1363
		} else if (!L.DomUtil.hasClass(el, name)) {                                                                          // 1364
			var className = L.DomUtil.getClass(el);                                                                             // 1365
			L.DomUtil.setClass(el, (className ? className + ' ' : '') + name);                                                  // 1366
		}                                                                                                                    // 1367
	},                                                                                                                    // 1368
                                                                                                                       // 1369
	// @function removeClass(el: HTMLElement, name: String)                                                               // 1370
	// Removes `name` from the element's class attribute.                                                                 // 1371
	removeClass: function (el, name) {                                                                                    // 1372
		if (el.classList !== undefined) {                                                                                    // 1373
			el.classList.remove(name);                                                                                          // 1374
		} else {                                                                                                             // 1375
			L.DomUtil.setClass(el, L.Util.trim((' ' + L.DomUtil.getClass(el) + ' ').replace(' ' + name + ' ', ' ')));           // 1376
		}                                                                                                                    // 1377
	},                                                                                                                    // 1378
                                                                                                                       // 1379
	// @function setClass(el: HTMLElement, name: String)                                                                  // 1380
	// Sets the element's class.                                                                                          // 1381
	setClass: function (el, name) {                                                                                       // 1382
		if (el.className.baseVal === undefined) {                                                                            // 1383
			el.className = name;                                                                                                // 1384
		} else {                                                                                                             // 1385
			// in case of SVG element                                                                                           // 1386
			el.className.baseVal = name;                                                                                        // 1387
		}                                                                                                                    // 1388
	},                                                                                                                    // 1389
                                                                                                                       // 1390
	// @function getClass(el: HTMLElement): String                                                                        // 1391
	// Returns the element's class.                                                                                       // 1392
	getClass: function (el) {                                                                                             // 1393
		return el.className.baseVal === undefined ? el.className : el.className.baseVal;                                     // 1394
	},                                                                                                                    // 1395
                                                                                                                       // 1396
	// @function setOpacity(el: HTMLElement, opacity: Number)                                                             // 1397
	// Set the opacity of an element (including old IE support).                                                          // 1398
	// `opacity` must be a number from `0` to `1`.                                                                        // 1399
	setOpacity: function (el, value) {                                                                                    // 1400
                                                                                                                       // 1401
		if ('opacity' in el.style) {                                                                                         // 1402
			el.style.opacity = value;                                                                                           // 1403
                                                                                                                       // 1404
		} else if ('filter' in el.style) {                                                                                   // 1405
			L.DomUtil._setOpacityIE(el, value);                                                                                 // 1406
		}                                                                                                                    // 1407
	},                                                                                                                    // 1408
                                                                                                                       // 1409
	_setOpacityIE: function (el, value) {                                                                                 // 1410
		var filter = false,                                                                                                  // 1411
		    filterName = 'DXImageTransform.Microsoft.Alpha';                                                                 // 1412
                                                                                                                       // 1413
		// filters collection throws an error if we try to retrieve a filter that doesn't exist                              // 1414
		try {                                                                                                                // 1415
			filter = el.filters.item(filterName);                                                                               // 1416
		} catch (e) {                                                                                                        // 1417
			// don't set opacity to 1 if we haven't already set an opacity,                                                     // 1418
			// it isn't needed and breaks transparent pngs.                                                                     // 1419
			if (value === 1) { return; }                                                                                        // 1420
		}                                                                                                                    // 1421
                                                                                                                       // 1422
		value = Math.round(value * 100);                                                                                     // 1423
                                                                                                                       // 1424
		if (filter) {                                                                                                        // 1425
			filter.Enabled = (value !== 100);                                                                                   // 1426
			filter.Opacity = value;                                                                                             // 1427
		} else {                                                                                                             // 1428
			el.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';                                             // 1429
		}                                                                                                                    // 1430
	},                                                                                                                    // 1431
                                                                                                                       // 1432
	// @function testProp(props: String[]): String|false                                                                  // 1433
	// Goes through the array of style names and returns the first name                                                   // 1434
	// that is a valid style name for an element. If no such name is found,                                               // 1435
	// it returns false. Useful for vendor-prefixed styles like `transform`.                                              // 1436
	testProp: function (props) {                                                                                          // 1437
                                                                                                                       // 1438
		var style = document.documentElement.style;                                                                          // 1439
                                                                                                                       // 1440
		for (var i = 0; i < props.length; i++) {                                                                             // 1441
			if (props[i] in style) {                                                                                            // 1442
				return props[i];                                                                                                   // 1443
			}                                                                                                                   // 1444
		}                                                                                                                    // 1445
		return false;                                                                                                        // 1446
	},                                                                                                                    // 1447
                                                                                                                       // 1448
	// @function setTransform(el: HTMLElement, offset: Point, scale?: Number)                                             // 1449
	// Resets the 3D CSS transform of `el` so it is translated by `offset` pixels                                         // 1450
	// and optionally scaled by `scale`. Does not have an effect if the                                                   // 1451
	// browser doesn't support 3D CSS transforms.                                                                         // 1452
	setTransform: function (el, offset, scale) {                                                                          // 1453
		var pos = offset || new L.Point(0, 0);                                                                               // 1454
                                                                                                                       // 1455
		el.style[L.DomUtil.TRANSFORM] =                                                                                      // 1456
			(L.Browser.ie3d ?                                                                                                   // 1457
				'translate(' + pos.x + 'px,' + pos.y + 'px)' :                                                                     // 1458
				'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +                                                                // 1459
			(scale ? ' scale(' + scale + ')' : '');                                                                             // 1460
	},                                                                                                                    // 1461
                                                                                                                       // 1462
	// @function setPosition(el: HTMLElement, position: Point)                                                            // 1463
	// Sets the position of `el` to coordinates specified by `position`,                                                  // 1464
	// using CSS translate or top/left positioning depending on the browser                                               // 1465
	// (used by Leaflet internally to position its layers).                                                               // 1466
	setPosition: function (el, point) { // (HTMLElement, Point[, Boolean])                                                // 1467
                                                                                                                       // 1468
		/*eslint-disable */                                                                                                  // 1469
		el._leaflet_pos = point;                                                                                             // 1470
		/*eslint-enable */                                                                                                   // 1471
                                                                                                                       // 1472
		if (L.Browser.any3d) {                                                                                               // 1473
			L.DomUtil.setTransform(el, point);                                                                                  // 1474
		} else {                                                                                                             // 1475
			el.style.left = point.x + 'px';                                                                                     // 1476
			el.style.top = point.y + 'px';                                                                                      // 1477
		}                                                                                                                    // 1478
	},                                                                                                                    // 1479
                                                                                                                       // 1480
	// @function getPosition(el: HTMLElement): Point                                                                      // 1481
	// Returns the coordinates of an element previously positioned with setPosition.                                      // 1482
	getPosition: function (el) {                                                                                          // 1483
		// this method is only used for elements previously positioned using setPosition,                                    // 1484
		// so it's safe to cache the position for performance                                                                // 1485
                                                                                                                       // 1486
		return el._leaflet_pos || new L.Point(0, 0);                                                                         // 1487
	}                                                                                                                     // 1488
};                                                                                                                     // 1489
                                                                                                                       // 1490
                                                                                                                       // 1491
(function () {                                                                                                         // 1492
	// prefix style property names                                                                                        // 1493
                                                                                                                       // 1494
	// @property TRANSFORM: String                                                                                        // 1495
	// Vendor-prefixed fransform style name (e.g. `'webkitTransform'` for WebKit).                                        // 1496
	L.DomUtil.TRANSFORM = L.DomUtil.testProp(                                                                             // 1497
			['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);                                     // 1498
                                                                                                                       // 1499
                                                                                                                       // 1500
	// webkitTransition comes first because some browser versions that drop vendor prefix don't do                        // 1501
	// the same for the transitionend event, in particular the Android 4.1 stock browser                                  // 1502
                                                                                                                       // 1503
	// @property TRANSITION: String                                                                                       // 1504
	// Vendor-prefixed transform style name.                                                                              // 1505
	var transition = L.DomUtil.TRANSITION = L.DomUtil.testProp(                                                           // 1506
			['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);                                // 1507
                                                                                                                       // 1508
	L.DomUtil.TRANSITION_END =                                                                                            // 1509
			transition === 'webkitTransition' || transition === 'OTransition' ? transition + 'End' : 'transitionend';           // 1510
                                                                                                                       // 1511
	// @function disableTextSelection()                                                                                   // 1512
	// Prevents the user from generating `selectstart` DOM events, usually generated                                      // 1513
	// when the user drags the mouse through a page with text. Used internally                                            // 1514
	// by Leaflet to override the behaviour of any click-and-drag interaction on                                          // 1515
	// the map. Affects drag interactions on the whole document.                                                          // 1516
                                                                                                                       // 1517
	// @function enableTextSelection()                                                                                    // 1518
	// Cancels the effects of a previous [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection).               // 1519
	if ('onselectstart' in document) {                                                                                    // 1520
		L.DomUtil.disableTextSelection = function () {                                                                       // 1521
			L.DomEvent.on(window, 'selectstart', L.DomEvent.preventDefault);                                                    // 1522
		};                                                                                                                   // 1523
		L.DomUtil.enableTextSelection = function () {                                                                        // 1524
			L.DomEvent.off(window, 'selectstart', L.DomEvent.preventDefault);                                                   // 1525
		};                                                                                                                   // 1526
                                                                                                                       // 1527
	} else {                                                                                                              // 1528
		var userSelectProperty = L.DomUtil.testProp(                                                                         // 1529
			['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);                                // 1530
                                                                                                                       // 1531
		L.DomUtil.disableTextSelection = function () {                                                                       // 1532
			if (userSelectProperty) {                                                                                           // 1533
				var style = document.documentElement.style;                                                                        // 1534
				this._userSelect = style[userSelectProperty];                                                                      // 1535
				style[userSelectProperty] = 'none';                                                                                // 1536
			}                                                                                                                   // 1537
		};                                                                                                                   // 1538
		L.DomUtil.enableTextSelection = function () {                                                                        // 1539
			if (userSelectProperty) {                                                                                           // 1540
				document.documentElement.style[userSelectProperty] = this._userSelect;                                             // 1541
				delete this._userSelect;                                                                                           // 1542
			}                                                                                                                   // 1543
		};                                                                                                                   // 1544
	}                                                                                                                     // 1545
                                                                                                                       // 1546
	// @function disableImageDrag()                                                                                       // 1547
	// As [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection), but                                          // 1548
	// for `dragstart` DOM events, usually generated when the user drags an image.                                        // 1549
	L.DomUtil.disableImageDrag = function () {                                                                            // 1550
		L.DomEvent.on(window, 'dragstart', L.DomEvent.preventDefault);                                                       // 1551
	};                                                                                                                    // 1552
                                                                                                                       // 1553
	// @function enableImageDrag()                                                                                        // 1554
	// Cancels the effects of a previous [`L.DomUtil.disableImageDrag`](#domutil-disabletextselection).                   // 1555
	L.DomUtil.enableImageDrag = function () {                                                                             // 1556
		L.DomEvent.off(window, 'dragstart', L.DomEvent.preventDefault);                                                      // 1557
	};                                                                                                                    // 1558
                                                                                                                       // 1559
	// @function preventOutline(el: HTMLElement)                                                                          // 1560
	// Makes the [outline](https://developer.mozilla.org/docs/Web/CSS/outline)                                            // 1561
	// of the element `el` invisible. Used internally by Leaflet to prevent                                               // 1562
	// focusable elements from displaying an outline when the user performs a                                             // 1563
	// drag interaction on them.                                                                                          // 1564
	L.DomUtil.preventOutline = function (element) {                                                                       // 1565
		while (element.tabIndex === -1) {                                                                                    // 1566
			element = element.parentNode;                                                                                       // 1567
		}                                                                                                                    // 1568
		if (!element || !element.style) { return; }                                                                          // 1569
		L.DomUtil.restoreOutline();                                                                                          // 1570
		this._outlineElement = element;                                                                                      // 1571
		this._outlineStyle = element.style.outline;                                                                          // 1572
		element.style.outline = 'none';                                                                                      // 1573
		L.DomEvent.on(window, 'keydown', L.DomUtil.restoreOutline, this);                                                    // 1574
	};                                                                                                                    // 1575
                                                                                                                       // 1576
	// @function restoreOutline()                                                                                         // 1577
	// Cancels the effects of a previous [`L.DomUtil.preventOutline`]().                                                  // 1578
	L.DomUtil.restoreOutline = function () {                                                                              // 1579
		if (!this._outlineElement) { return; }                                                                               // 1580
		this._outlineElement.style.outline = this._outlineStyle;                                                             // 1581
		delete this._outlineElement;                                                                                         // 1582
		delete this._outlineStyle;                                                                                           // 1583
		L.DomEvent.off(window, 'keydown', L.DomUtil.restoreOutline, this);                                                   // 1584
	};                                                                                                                    // 1585
})();                                                                                                                  // 1586
                                                                                                                       // 1587
                                                                                                                       // 1588
                                                                                                                       // 1589
/* @class LatLng                                                                                                       // 1590
 * @aka L.LatLng                                                                                                       // 1591
 *                                                                                                                     // 1592
 * Represents a geographical point with a certain latitude and longitude.                                              // 1593
 *                                                                                                                     // 1594
 * @example                                                                                                            // 1595
 *                                                                                                                     // 1596
 * ```                                                                                                                 // 1597
 * var latlng = L.latLng(50.5, 30.5);                                                                                  // 1598
 * ```                                                                                                                 // 1599
 *                                                                                                                     // 1600
 * All Leaflet methods that accept LatLng objects also accept them in a simple Array form and simple object form (unless noted otherwise), so these lines are equivalent:
 *                                                                                                                     // 1602
 * ```                                                                                                                 // 1603
 * map.panTo([50, 30]);                                                                                                // 1604
 * map.panTo({lon: 30, lat: 50});                                                                                      // 1605
 * map.panTo({lat: 50, lng: 30});                                                                                      // 1606
 * map.panTo(L.latLng(50, 30));                                                                                        // 1607
 * ```                                                                                                                 // 1608
 */                                                                                                                    // 1609
                                                                                                                       // 1610
L.LatLng = function (lat, lng, alt) {                                                                                  // 1611
	if (isNaN(lat) || isNaN(lng)) {                                                                                       // 1612
		throw new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');                                                // 1613
	}                                                                                                                     // 1614
                                                                                                                       // 1615
	// @property lat: Number                                                                                              // 1616
	// Latitude in degrees                                                                                                // 1617
	this.lat = +lat;                                                                                                      // 1618
                                                                                                                       // 1619
	// @property lng: Number                                                                                              // 1620
	// Longitude in degrees                                                                                               // 1621
	this.lng = +lng;                                                                                                      // 1622
                                                                                                                       // 1623
	// @property alt: Number                                                                                              // 1624
	// Altitude in meters (optional)                                                                                      // 1625
	if (alt !== undefined) {                                                                                              // 1626
		this.alt = +alt;                                                                                                     // 1627
	}                                                                                                                     // 1628
};                                                                                                                     // 1629
                                                                                                                       // 1630
L.LatLng.prototype = {                                                                                                 // 1631
	// @method equals(otherLatLng: LatLng, maxMargin?: Number): Boolean                                                   // 1632
	// Returns `true` if the given `LatLng` point is at the same position (within a small margin of error). The margin of error can be overriden by setting `maxMargin` to a small number.
	equals: function (obj, maxMargin) {                                                                                   // 1634
		if (!obj) { return false; }                                                                                          // 1635
                                                                                                                       // 1636
		obj = L.latLng(obj);                                                                                                 // 1637
                                                                                                                       // 1638
		var margin = Math.max(                                                                                               // 1639
		        Math.abs(this.lat - obj.lat),                                                                                // 1640
		        Math.abs(this.lng - obj.lng));                                                                               // 1641
                                                                                                                       // 1642
		return margin <= (maxMargin === undefined ? 1.0E-9 : maxMargin);                                                     // 1643
	},                                                                                                                    // 1644
                                                                                                                       // 1645
	// @method toString(): String                                                                                         // 1646
	// Returns a string representation of the point (for debugging purposes).                                             // 1647
	toString: function (precision) {                                                                                      // 1648
		return 'LatLng(' +                                                                                                   // 1649
		        L.Util.formatNum(this.lat, precision) + ', ' +                                                               // 1650
		        L.Util.formatNum(this.lng, precision) + ')';                                                                 // 1651
	},                                                                                                                    // 1652
                                                                                                                       // 1653
	// @method distanceTo(otherLatLng: LatLng): Number                                                                    // 1654
	// Returns the distance (in meters) to the given `LatLng` calculated using the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula).
	distanceTo: function (other) {                                                                                        // 1656
		return L.CRS.Earth.distance(this, L.latLng(other));                                                                  // 1657
	},                                                                                                                    // 1658
                                                                                                                       // 1659
	// @method wrap(): LatLng                                                                                             // 1660
	// Returns a new `LatLng` object with the longitude wrapped so it's always between -180 and +180 degrees.             // 1661
	wrap: function () {                                                                                                   // 1662
		return L.CRS.Earth.wrapLatLng(this);                                                                                 // 1663
	},                                                                                                                    // 1664
                                                                                                                       // 1665
	// @method toBounds(sizeInMeters: Number): LatLngBounds                                                               // 1666
	// Returns a new `LatLngBounds` object in which each boundary is `sizeInMeters/2` meters apart from the `LatLng`.     // 1667
	toBounds: function (sizeInMeters) {                                                                                   // 1668
		var latAccuracy = 180 * sizeInMeters / 40075017,                                                                     // 1669
		    lngAccuracy = latAccuracy / Math.cos((Math.PI / 180) * this.lat);                                                // 1670
                                                                                                                       // 1671
		return L.latLngBounds(                                                                                               // 1672
		        [this.lat - latAccuracy, this.lng - lngAccuracy],                                                            // 1673
		        [this.lat + latAccuracy, this.lng + lngAccuracy]);                                                           // 1674
	},                                                                                                                    // 1675
                                                                                                                       // 1676
	clone: function () {                                                                                                  // 1677
		return new L.LatLng(this.lat, this.lng, this.alt);                                                                   // 1678
	}                                                                                                                     // 1679
};                                                                                                                     // 1680
                                                                                                                       // 1681
                                                                                                                       // 1682
                                                                                                                       // 1683
// @factory L.latLng(latitude: Number, longitude: Number, altitude?: Number): LatLng                                   // 1684
// Creates an object representing a geographical point with the given latitude and longitude (and optionally altitude).
                                                                                                                       // 1686
// @alternative                                                                                                        // 1687
// @factory L.latLng(coords: Array): LatLng                                                                            // 1688
// Expects an array of the form `[Number, Number]` or `[Number, Number, Number]` instead.                              // 1689
                                                                                                                       // 1690
// @alternative                                                                                                        // 1691
// @factory L.latLng(coords: Object): LatLng                                                                           // 1692
// Expects an plain object of the form `{lat: Number, lng: Number}` or `{lat: Number, lng: Number, alt: Number}` instead.
                                                                                                                       // 1694
L.latLng = function (a, b, c) {                                                                                        // 1695
	if (a instanceof L.LatLng) {                                                                                          // 1696
		return a;                                                                                                            // 1697
	}                                                                                                                     // 1698
	if (L.Util.isArray(a) && typeof a[0] !== 'object') {                                                                  // 1699
		if (a.length === 3) {                                                                                                // 1700
			return new L.LatLng(a[0], a[1], a[2]);                                                                              // 1701
		}                                                                                                                    // 1702
		if (a.length === 2) {                                                                                                // 1703
			return new L.LatLng(a[0], a[1]);                                                                                    // 1704
		}                                                                                                                    // 1705
		return null;                                                                                                         // 1706
	}                                                                                                                     // 1707
	if (a === undefined || a === null) {                                                                                  // 1708
		return a;                                                                                                            // 1709
	}                                                                                                                     // 1710
	if (typeof a === 'object' && 'lat' in a) {                                                                            // 1711
		return new L.LatLng(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);                                                       // 1712
	}                                                                                                                     // 1713
	if (b === undefined) {                                                                                                // 1714
		return null;                                                                                                         // 1715
	}                                                                                                                     // 1716
	return new L.LatLng(a, b, c);                                                                                         // 1717
};                                                                                                                     // 1718
                                                                                                                       // 1719
                                                                                                                       // 1720
                                                                                                                       // 1721
/*                                                                                                                     // 1722
 * @class LatLngBounds                                                                                                 // 1723
 * @aka L.LatLngBounds                                                                                                 // 1724
 *                                                                                                                     // 1725
 * Represents a rectangular geographical area on a map.                                                                // 1726
 *                                                                                                                     // 1727
 * @example                                                                                                            // 1728
 *                                                                                                                     // 1729
 * ```js                                                                                                               // 1730
 * var corner1 = L.latLng(40.712, -74.227),                                                                            // 1731
 * corner2 = L.latLng(40.774, -74.125),                                                                                // 1732
 * bounds = L.latLngBounds(corner1, corner2);                                                                          // 1733
 * ```                                                                                                                 // 1734
 *                                                                                                                     // 1735
 * All Leaflet methods that accept LatLngBounds objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:
 *                                                                                                                     // 1737
 * ```js                                                                                                               // 1738
 * map.fitBounds([                                                                                                     // 1739
 * 	[40.712, -74.227],                                                                                                 // 1740
 * 	[40.774, -74.125]                                                                                                  // 1741
 * ]);                                                                                                                 // 1742
 * ```                                                                                                                 // 1743
 *                                                                                                                     // 1744
 * Caution: if the area crosses the antimeridian (often confused with the International Date Line), you must specify corners _outside_ the [-180, 180] degrees longitude range.
 */                                                                                                                    // 1746
                                                                                                                       // 1747
L.LatLngBounds = function (corner1, corner2) { // (LatLng, LatLng) or (LatLng[])                                       // 1748
	if (!corner1) { return; }                                                                                             // 1749
                                                                                                                       // 1750
	var latlngs = corner2 ? [corner1, corner2] : corner1;                                                                 // 1751
                                                                                                                       // 1752
	for (var i = 0, len = latlngs.length; i < len; i++) {                                                                 // 1753
		this.extend(latlngs[i]);                                                                                             // 1754
	}                                                                                                                     // 1755
};                                                                                                                     // 1756
                                                                                                                       // 1757
L.LatLngBounds.prototype = {                                                                                           // 1758
                                                                                                                       // 1759
	// @method extend(latlng: LatLng): this                                                                               // 1760
	// Extend the bounds to contain the given point                                                                       // 1761
                                                                                                                       // 1762
	// @alternative                                                                                                       // 1763
	// @method extend(otherBounds: LatLngBounds): this                                                                    // 1764
	// Extend the bounds to contain the given bounds                                                                      // 1765
	extend: function (obj) {                                                                                              // 1766
		var sw = this._southWest,                                                                                            // 1767
		    ne = this._northEast,                                                                                            // 1768
		    sw2, ne2;                                                                                                        // 1769
                                                                                                                       // 1770
		if (obj instanceof L.LatLng) {                                                                                       // 1771
			sw2 = obj;                                                                                                          // 1772
			ne2 = obj;                                                                                                          // 1773
                                                                                                                       // 1774
		} else if (obj instanceof L.LatLngBounds) {                                                                          // 1775
			sw2 = obj._southWest;                                                                                               // 1776
			ne2 = obj._northEast;                                                                                               // 1777
                                                                                                                       // 1778
			if (!sw2 || !ne2) { return this; }                                                                                  // 1779
                                                                                                                       // 1780
		} else {                                                                                                             // 1781
			return obj ? this.extend(L.latLng(obj) || L.latLngBounds(obj)) : this;                                              // 1782
		}                                                                                                                    // 1783
                                                                                                                       // 1784
		if (!sw && !ne) {                                                                                                    // 1785
			this._southWest = new L.LatLng(sw2.lat, sw2.lng);                                                                   // 1786
			this._northEast = new L.LatLng(ne2.lat, ne2.lng);                                                                   // 1787
		} else {                                                                                                             // 1788
			sw.lat = Math.min(sw2.lat, sw.lat);                                                                                 // 1789
			sw.lng = Math.min(sw2.lng, sw.lng);                                                                                 // 1790
			ne.lat = Math.max(ne2.lat, ne.lat);                                                                                 // 1791
			ne.lng = Math.max(ne2.lng, ne.lng);                                                                                 // 1792
		}                                                                                                                    // 1793
                                                                                                                       // 1794
		return this;                                                                                                         // 1795
	},                                                                                                                    // 1796
                                                                                                                       // 1797
	// @method pad(bufferRatio: Number): LatLngBounds                                                                     // 1798
	// Returns bigger bounds created by extending the current bounds by a given percentage in each direction.             // 1799
	pad: function (bufferRatio) {                                                                                         // 1800
		var sw = this._southWest,                                                                                            // 1801
		    ne = this._northEast,                                                                                            // 1802
		    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,                                                          // 1803
		    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;                                                           // 1804
                                                                                                                       // 1805
		return new L.LatLngBounds(                                                                                           // 1806
		        new L.LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),                                                   // 1807
		        new L.LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));                                                  // 1808
	},                                                                                                                    // 1809
                                                                                                                       // 1810
	// @method getCenter(): LatLng                                                                                        // 1811
	// Returns the center point of the bounds.                                                                            // 1812
	getCenter: function () {                                                                                              // 1813
		return new L.LatLng(                                                                                                 // 1814
		        (this._southWest.lat + this._northEast.lat) / 2,                                                             // 1815
		        (this._southWest.lng + this._northEast.lng) / 2);                                                            // 1816
	},                                                                                                                    // 1817
                                                                                                                       // 1818
	// @method getSouthWest(): LatLng                                                                                     // 1819
	// Returns the south-west point of the bounds.                                                                        // 1820
	getSouthWest: function () {                                                                                           // 1821
		return this._southWest;                                                                                              // 1822
	},                                                                                                                    // 1823
                                                                                                                       // 1824
	// @method getNorthEast(): LatLng                                                                                     // 1825
	// Returns the north-east point of the bounds.                                                                        // 1826
	getNorthEast: function () {                                                                                           // 1827
		return this._northEast;                                                                                              // 1828
	},                                                                                                                    // 1829
                                                                                                                       // 1830
	// @method getNorthWest(): LatLng                                                                                     // 1831
	// Returns the north-west point of the bounds.                                                                        // 1832
	getNorthWest: function () {                                                                                           // 1833
		return new L.LatLng(this.getNorth(), this.getWest());                                                                // 1834
	},                                                                                                                    // 1835
                                                                                                                       // 1836
	// @method getSouthEast(): LatLng                                                                                     // 1837
	// Returns the south-east point of the bounds.                                                                        // 1838
	getSouthEast: function () {                                                                                           // 1839
		return new L.LatLng(this.getSouth(), this.getEast());                                                                // 1840
	},                                                                                                                    // 1841
                                                                                                                       // 1842
	// @method getWest(): Number                                                                                          // 1843
	// Returns the west longitude of the bounds                                                                           // 1844
	getWest: function () {                                                                                                // 1845
		return this._southWest.lng;                                                                                          // 1846
	},                                                                                                                    // 1847
                                                                                                                       // 1848
	// @method getSouth(): Number                                                                                         // 1849
	// Returns the south latitude of the bounds                                                                           // 1850
	getSouth: function () {                                                                                               // 1851
		return this._southWest.lat;                                                                                          // 1852
	},                                                                                                                    // 1853
                                                                                                                       // 1854
	// @method getEast(): Number                                                                                          // 1855
	// Returns the east longitude of the bounds                                                                           // 1856
	getEast: function () {                                                                                                // 1857
		return this._northEast.lng;                                                                                          // 1858
	},                                                                                                                    // 1859
                                                                                                                       // 1860
	// @method getNorth(): Number                                                                                         // 1861
	// Returns the north latitude of the bounds                                                                           // 1862
	getNorth: function () {                                                                                               // 1863
		return this._northEast.lat;                                                                                          // 1864
	},                                                                                                                    // 1865
                                                                                                                       // 1866
	// @method contains(otherBounds: LatLngBounds): Boolean                                                               // 1867
	// Returns `true` if the rectangle contains the given one.                                                            // 1868
                                                                                                                       // 1869
	// @alternative                                                                                                       // 1870
	// @method contains (latlng: LatLng): Boolean                                                                         // 1871
	// Returns `true` if the rectangle contains the given point.                                                          // 1872
	contains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean                                                   // 1873
		if (typeof obj[0] === 'number' || obj instanceof L.LatLng || 'lat' in obj) {                                         // 1874
			obj = L.latLng(obj);                                                                                                // 1875
		} else {                                                                                                             // 1876
			obj = L.latLngBounds(obj);                                                                                          // 1877
		}                                                                                                                    // 1878
                                                                                                                       // 1879
		var sw = this._southWest,                                                                                            // 1880
		    ne = this._northEast,                                                                                            // 1881
		    sw2, ne2;                                                                                                        // 1882
                                                                                                                       // 1883
		if (obj instanceof L.LatLngBounds) {                                                                                 // 1884
			sw2 = obj.getSouthWest();                                                                                           // 1885
			ne2 = obj.getNorthEast();                                                                                           // 1886
		} else {                                                                                                             // 1887
			sw2 = ne2 = obj;                                                                                                    // 1888
		}                                                                                                                    // 1889
                                                                                                                       // 1890
		return (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&                                                                 // 1891
		       (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);                                                                   // 1892
	},                                                                                                                    // 1893
                                                                                                                       // 1894
	// @method intersects(otherBounds: LatLngBounds): Boolean                                                             // 1895
	// Returns `true` if the rectangle intersects the given bounds. Two bounds intersect if they have at least one point in common.
	intersects: function (bounds) {                                                                                       // 1897
		bounds = L.latLngBounds(bounds);                                                                                     // 1898
                                                                                                                       // 1899
		var sw = this._southWest,                                                                                            // 1900
		    ne = this._northEast,                                                                                            // 1901
		    sw2 = bounds.getSouthWest(),                                                                                     // 1902
		    ne2 = bounds.getNorthEast(),                                                                                     // 1903
                                                                                                                       // 1904
		    latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),                                                      // 1905
		    lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);                                                      // 1906
                                                                                                                       // 1907
		return latIntersects && lngIntersects;                                                                               // 1908
	},                                                                                                                    // 1909
                                                                                                                       // 1910
	// @method overlaps(otherBounds: Bounds): Boolean                                                                     // 1911
	// Returns `true` if the rectangle overlaps the given bounds. Two bounds overlap if their intersection is an area.    // 1912
	overlaps: function (bounds) {                                                                                         // 1913
		bounds = L.latLngBounds(bounds);                                                                                     // 1914
                                                                                                                       // 1915
		var sw = this._southWest,                                                                                            // 1916
		    ne = this._northEast,                                                                                            // 1917
		    sw2 = bounds.getSouthWest(),                                                                                     // 1918
		    ne2 = bounds.getNorthEast(),                                                                                     // 1919
                                                                                                                       // 1920
		    latOverlaps = (ne2.lat > sw.lat) && (sw2.lat < ne.lat),                                                          // 1921
		    lngOverlaps = (ne2.lng > sw.lng) && (sw2.lng < ne.lng);                                                          // 1922
                                                                                                                       // 1923
		return latOverlaps && lngOverlaps;                                                                                   // 1924
	},                                                                                                                    // 1925
                                                                                                                       // 1926
	// @method toBBoxString(): String                                                                                     // 1927
	// Returns a string with bounding box coordinates in a 'southwest_lng,southwest_lat,northeast_lng,northeast_lat' format. Useful for sending requests to web services that return geo data.
	toBBoxString: function () {                                                                                           // 1929
		return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');                                 // 1930
	},                                                                                                                    // 1931
                                                                                                                       // 1932
	// @method equals(otherBounds: LatLngBounds): Boolean                                                                 // 1933
	// Returns `true` if the rectangle is equivalent (within a small margin of error) to the given bounds.                // 1934
	equals: function (bounds) {                                                                                           // 1935
		if (!bounds) { return false; }                                                                                       // 1936
                                                                                                                       // 1937
		bounds = L.latLngBounds(bounds);                                                                                     // 1938
                                                                                                                       // 1939
		return this._southWest.equals(bounds.getSouthWest()) &&                                                              // 1940
		       this._northEast.equals(bounds.getNorthEast());                                                                // 1941
	},                                                                                                                    // 1942
                                                                                                                       // 1943
	// @method isValid(): Boolean                                                                                         // 1944
	// Returns `true` if the bounds are properly initialized.                                                             // 1945
	isValid: function () {                                                                                                // 1946
		return !!(this._southWest && this._northEast);                                                                       // 1947
	}                                                                                                                     // 1948
};                                                                                                                     // 1949
                                                                                                                       // 1950
// TODO International date line?                                                                                       // 1951
                                                                                                                       // 1952
// @factory L.latLngBounds(corner1: LatLng, corner2: LatLng)                                                           // 1953
// Creates a `LatLngBounds` object by defining two diagonally opposite corners of the rectangle.                       // 1954
                                                                                                                       // 1955
// @alternative                                                                                                        // 1956
// @factory L.latLngBounds(latlngs: LatLng[])                                                                          // 1957
// Creates a `LatLngBounds` object defined by the geographical points it contains. Very useful for zooming the map to fit a particular set of locations with [`fitBounds`](#map-fitbounds).
L.latLngBounds = function (a, b) {                                                                                     // 1959
	if (a instanceof L.LatLngBounds) {                                                                                    // 1960
		return a;                                                                                                            // 1961
	}                                                                                                                     // 1962
	return new L.LatLngBounds(a, b);                                                                                      // 1963
};                                                                                                                     // 1964
                                                                                                                       // 1965
                                                                                                                       // 1966
                                                                                                                       // 1967
/*                                                                                                                     // 1968
 * @namespace Projection                                                                                               // 1969
 * @section                                                                                                            // 1970
 * Leaflet comes with a set of already defined Projections out of the box:                                             // 1971
 *                                                                                                                     // 1972
 * @projection L.Projection.LonLat                                                                                     // 1973
 *                                                                                                                     // 1974
 * Equirectangular, or Plate Carree projection — the most simple projection,                                           // 1975
 * mostly used by GIS enthusiasts. Directly maps `x` as longitude, and `y` as                                          // 1976
 * latitude. Also suitable for flat worlds, e.g. game maps. Used by the                                                // 1977
 * `EPSG:3395` and `Simple` CRS.                                                                                       // 1978
 */                                                                                                                    // 1979
                                                                                                                       // 1980
L.Projection = {};                                                                                                     // 1981
                                                                                                                       // 1982
L.Projection.LonLat = {                                                                                                // 1983
	project: function (latlng) {                                                                                          // 1984
		return new L.Point(latlng.lng, latlng.lat);                                                                          // 1985
	},                                                                                                                    // 1986
                                                                                                                       // 1987
	unproject: function (point) {                                                                                         // 1988
		return new L.LatLng(point.y, point.x);                                                                               // 1989
	},                                                                                                                    // 1990
                                                                                                                       // 1991
	bounds: L.bounds([-180, -90], [180, 90])                                                                              // 1992
};                                                                                                                     // 1993
                                                                                                                       // 1994
                                                                                                                       // 1995
                                                                                                                       // 1996
/*                                                                                                                     // 1997
 * @namespace Projection                                                                                               // 1998
 * @projection L.Projection.SphericalMercator                                                                          // 1999
 *                                                                                                                     // 2000
 * Spherical Mercator projection — the most common projection for online maps,                                         // 2001
 * used by almost all free and commercial tile providers. Assumes that Earth is                                        // 2002
 * a sphere. Used by the `EPSG:3857` CRS.                                                                              // 2003
 */                                                                                                                    // 2004
                                                                                                                       // 2005
L.Projection.SphericalMercator = {                                                                                     // 2006
                                                                                                                       // 2007
	R: 6378137,                                                                                                           // 2008
	MAX_LATITUDE: 85.0511287798,                                                                                          // 2009
                                                                                                                       // 2010
	project: function (latlng) {                                                                                          // 2011
		var d = Math.PI / 180,                                                                                               // 2012
		    max = this.MAX_LATITUDE,                                                                                         // 2013
		    lat = Math.max(Math.min(max, latlng.lat), -max),                                                                 // 2014
		    sin = Math.sin(lat * d);                                                                                         // 2015
                                                                                                                       // 2016
		return new L.Point(                                                                                                  // 2017
				this.R * latlng.lng * d,                                                                                           // 2018
				this.R * Math.log((1 + sin) / (1 - sin)) / 2);                                                                     // 2019
	},                                                                                                                    // 2020
                                                                                                                       // 2021
	unproject: function (point) {                                                                                         // 2022
		var d = 180 / Math.PI;                                                                                               // 2023
                                                                                                                       // 2024
		return new L.LatLng(                                                                                                 // 2025
			(2 * Math.atan(Math.exp(point.y / this.R)) - (Math.PI / 2)) * d,                                                    // 2026
			point.x * d / this.R);                                                                                              // 2027
	},                                                                                                                    // 2028
                                                                                                                       // 2029
	bounds: (function () {                                                                                                // 2030
		var d = 6378137 * Math.PI;                                                                                           // 2031
		return L.bounds([-d, -d], [d, d]);                                                                                   // 2032
	})()                                                                                                                  // 2033
};                                                                                                                     // 2034
                                                                                                                       // 2035
                                                                                                                       // 2036
                                                                                                                       // 2037
/*                                                                                                                     // 2038
 * @class CRS                                                                                                          // 2039
 * @aka L.CRS                                                                                                          // 2040
 * Abstract class that defines coordinate reference systems for projecting                                             // 2041
 * geographical points into pixel (screen) coordinates and back (and to                                                // 2042
 * coordinates in other units for [WMS](https://en.wikipedia.org/wiki/Web_Map_Service) services). See                  // 2043
 * [spatial reference system](http://en.wikipedia.org/wiki/Coordinate_reference_system).                               // 2044
 *                                                                                                                     // 2045
 * Leaflet defines the most usual CRSs by default. If you want to use a                                                // 2046
 * CRS not defined by default, take a look at the                                                                      // 2047
 * [Proj4Leaflet](https://github.com/kartena/Proj4Leaflet) plugin.                                                     // 2048
 */                                                                                                                    // 2049
                                                                                                                       // 2050
L.CRS = {                                                                                                              // 2051
	// @method latLngToPoint(latlng: LatLng, zoom: Number): Point                                                         // 2052
	// Projects geographical coordinates into pixel coordinates for a given zoom.                                         // 2053
	latLngToPoint: function (latlng, zoom) {                                                                              // 2054
		var projectedPoint = this.projection.project(latlng),                                                                // 2055
		    scale = this.scale(zoom);                                                                                        // 2056
                                                                                                                       // 2057
		return this.transformation._transform(projectedPoint, scale);                                                        // 2058
	},                                                                                                                    // 2059
                                                                                                                       // 2060
	// @method pointToLatLng(point: Point, zoom: Number): LatLng                                                          // 2061
	// The inverse of `latLngToPoint`. Projects pixel coordinates on a given                                              // 2062
	// zoom into geographical coordinates.                                                                                // 2063
	pointToLatLng: function (point, zoom) {                                                                               // 2064
		var scale = this.scale(zoom),                                                                                        // 2065
		    untransformedPoint = this.transformation.untransform(point, scale);                                              // 2066
                                                                                                                       // 2067
		return this.projection.unproject(untransformedPoint);                                                                // 2068
	},                                                                                                                    // 2069
                                                                                                                       // 2070
	// @method project(latlng: LatLng): Point                                                                             // 2071
	// Projects geographical coordinates into coordinates in units accepted for                                           // 2072
	// this CRS (e.g. meters for EPSG:3857, for passing it to WMS services).                                              // 2073
	project: function (latlng) {                                                                                          // 2074
		return this.projection.project(latlng);                                                                              // 2075
	},                                                                                                                    // 2076
                                                                                                                       // 2077
	// @method unproject(point: Point): LatLng                                                                            // 2078
	// Given a projected coordinate returns the corresponding LatLng.                                                     // 2079
	// The inverse of `project`.                                                                                          // 2080
	unproject: function (point) {                                                                                         // 2081
		return this.projection.unproject(point);                                                                             // 2082
	},                                                                                                                    // 2083
                                                                                                                       // 2084
	// @method scale(zoom: Number): Number                                                                                // 2085
	// Returns the scale used when transforming projected coordinates into                                                // 2086
	// pixel coordinates for a particular zoom. For example, it returns                                                   // 2087
	// `256 * 2^zoom` for Mercator-based CRS.                                                                             // 2088
	scale: function (zoom) {                                                                                              // 2089
		return 256 * Math.pow(2, zoom);                                                                                      // 2090
	},                                                                                                                    // 2091
                                                                                                                       // 2092
	// @method zoom(scale: Number): Number                                                                                // 2093
	// Inverse of `scale()`, returns the zoom level corresponding to a scale                                              // 2094
	// factor of `scale`.                                                                                                 // 2095
	zoom: function (scale) {                                                                                              // 2096
		return Math.log(scale / 256) / Math.LN2;                                                                             // 2097
	},                                                                                                                    // 2098
                                                                                                                       // 2099
	// @method getProjectedBounds(zoom: Number): Bounds                                                                   // 2100
	// Returns the projection's bounds scaled and transformed for the provided `zoom`.                                    // 2101
	getProjectedBounds: function (zoom) {                                                                                 // 2102
		if (this.infinite) { return null; }                                                                                  // 2103
                                                                                                                       // 2104
		var b = this.projection.bounds,                                                                                      // 2105
		    s = this.scale(zoom),                                                                                            // 2106
		    min = this.transformation.transform(b.min, s),                                                                   // 2107
		    max = this.transformation.transform(b.max, s);                                                                   // 2108
                                                                                                                       // 2109
		return L.bounds(min, max);                                                                                           // 2110
	},                                                                                                                    // 2111
                                                                                                                       // 2112
	// @method distance(latlng1: LatLng, latlng2: LatLng): Number                                                         // 2113
	// Returns the distance between two geographical coordinates.                                                         // 2114
                                                                                                                       // 2115
	// @property code: String                                                                                             // 2116
	// Standard code name of the CRS passed into WMS services (e.g. `'EPSG:3857'`)                                        // 2117
	//                                                                                                                    // 2118
	// @property wrapLng: Number[]                                                                                        // 2119
	// An array of two numbers defining whether the longitude (horizontal) coordinate                                     // 2120
	// axis wraps around a given range and how. Defaults to `[-180, 180]` in most                                         // 2121
	// geographical CRSs. If `undefined`, the longitude axis does not wrap around.                                        // 2122
	//                                                                                                                    // 2123
	// @property wrapLat: Number[]                                                                                        // 2124
	// Like `wrapLng`, but for the latitude (vertical) axis.                                                              // 2125
                                                                                                                       // 2126
	// wrapLng: [min, max],                                                                                               // 2127
	// wrapLat: [min, max],                                                                                               // 2128
                                                                                                                       // 2129
	// @property infinite: Boolean                                                                                        // 2130
	// If true, the coordinate space will be unbounded (infinite in both axes)                                            // 2131
	infinite: false,                                                                                                      // 2132
                                                                                                                       // 2133
	// @method wrapLatLng(latlng: LatLng): LatLng                                                                         // 2134
	// Returns a `LatLng` where lat and lng has been wrapped according to the                                             // 2135
	// CRS's `wrapLat` and `wrapLng` properties, if they are outside the CRS's bounds.                                    // 2136
	// Only accepts actual `L.LatLng` instances, not arrays.                                                              // 2137
	wrapLatLng: function (latlng) {                                                                                       // 2138
		var lng = this.wrapLng ? L.Util.wrapNum(latlng.lng, this.wrapLng, true) : latlng.lng,                                // 2139
		    lat = this.wrapLat ? L.Util.wrapNum(latlng.lat, this.wrapLat, true) : latlng.lat,                                // 2140
		    alt = latlng.alt;                                                                                                // 2141
                                                                                                                       // 2142
		return L.latLng(lat, lng, alt);                                                                                      // 2143
	},                                                                                                                    // 2144
                                                                                                                       // 2145
	// @method wrapLatLngBounds(bounds: LatLngBounds): LatLngBounds                                                       // 2146
	// Returns a `LatLngBounds` with the same size as the given one, ensuring                                             // 2147
	// that its center is within the CRS's bounds.                                                                        // 2148
	// Only accepts actual `L.LatLngBounds` instances, not arrays.                                                        // 2149
	wrapLatLngBounds: function (bounds) {                                                                                 // 2150
		var center = bounds.getCenter(),                                                                                     // 2151
		    newCenter = this.wrapLatLng(center),                                                                             // 2152
		    latShift = center.lat - newCenter.lat,                                                                           // 2153
		    lngShift = center.lng - newCenter.lng;                                                                           // 2154
                                                                                                                       // 2155
		if (latShift === 0 && lngShift === 0) {                                                                              // 2156
			return bounds;                                                                                                      // 2157
		}                                                                                                                    // 2158
                                                                                                                       // 2159
		var sw = bounds.getSouthWest(),                                                                                      // 2160
		    ne = bounds.getNorthEast(),                                                                                      // 2161
		    newSw = L.latLng({lat: sw.lat - latShift, lng: sw.lng - lngShift}),                                              // 2162
		    newNe = L.latLng({lat: ne.lat - latShift, lng: ne.lng - lngShift});                                              // 2163
                                                                                                                       // 2164
		return new L.LatLngBounds(newSw, newNe);                                                                             // 2165
	}                                                                                                                     // 2166
};                                                                                                                     // 2167
                                                                                                                       // 2168
                                                                                                                       // 2169
                                                                                                                       // 2170
/*                                                                                                                     // 2171
 * @namespace CRS                                                                                                      // 2172
 * @crs L.CRS.Simple                                                                                                   // 2173
 *                                                                                                                     // 2174
 * A simple CRS that maps longitude and latitude into `x` and `y` directly.                                            // 2175
 * May be used for maps of flat surfaces (e.g. game maps). Note that the `y`                                           // 2176
 * axis should still be inverted (going from bottom to top). `distance()` returns                                      // 2177
 * simple euclidean distance.                                                                                          // 2178
 */                                                                                                                    // 2179
                                                                                                                       // 2180
L.CRS.Simple = L.extend({}, L.CRS, {                                                                                   // 2181
	projection: L.Projection.LonLat,                                                                                      // 2182
	transformation: new L.Transformation(1, 0, -1, 0),                                                                    // 2183
                                                                                                                       // 2184
	scale: function (zoom) {                                                                                              // 2185
		return Math.pow(2, zoom);                                                                                            // 2186
	},                                                                                                                    // 2187
                                                                                                                       // 2188
	zoom: function (scale) {                                                                                              // 2189
		return Math.log(scale) / Math.LN2;                                                                                   // 2190
	},                                                                                                                    // 2191
                                                                                                                       // 2192
	distance: function (latlng1, latlng2) {                                                                               // 2193
		var dx = latlng2.lng - latlng1.lng,                                                                                  // 2194
		    dy = latlng2.lat - latlng1.lat;                                                                                  // 2195
                                                                                                                       // 2196
		return Math.sqrt(dx * dx + dy * dy);                                                                                 // 2197
	},                                                                                                                    // 2198
                                                                                                                       // 2199
	infinite: true                                                                                                        // 2200
});                                                                                                                    // 2201
                                                                                                                       // 2202
                                                                                                                       // 2203
                                                                                                                       // 2204
/*                                                                                                                     // 2205
 * @namespace CRS                                                                                                      // 2206
 * @crs L.CRS.Earth                                                                                                    // 2207
 *                                                                                                                     // 2208
 * Serves as the base for CRS that are global such that they cover the earth.                                          // 2209
 * Can only be used as the base for other CRS and cannot be used directly,                                             // 2210
 * since it does not have a `code`, `projection` or `transformation`. `distance()` returns                             // 2211
 * meters.                                                                                                             // 2212
 */                                                                                                                    // 2213
                                                                                                                       // 2214
L.CRS.Earth = L.extend({}, L.CRS, {                                                                                    // 2215
	wrapLng: [-180, 180],                                                                                                 // 2216
                                                                                                                       // 2217
	// Mean Earth Radius, as recommended for use by                                                                       // 2218
	// the International Union of Geodesy and Geophysics,                                                                 // 2219
	// see http://rosettacode.org/wiki/Haversine_formula                                                                  // 2220
	R: 6371000,                                                                                                           // 2221
                                                                                                                       // 2222
	// distance between two geographical points using spherical law of cosines approximation                              // 2223
	distance: function (latlng1, latlng2) {                                                                               // 2224
		var rad = Math.PI / 180,                                                                                             // 2225
		    lat1 = latlng1.lat * rad,                                                                                        // 2226
		    lat2 = latlng2.lat * rad,                                                                                        // 2227
		    a = Math.sin(lat1) * Math.sin(lat2) +                                                                            // 2228
		        Math.cos(lat1) * Math.cos(lat2) * Math.cos((latlng2.lng - latlng1.lng) * rad);                               // 2229
                                                                                                                       // 2230
		return this.R * Math.acos(Math.min(a, 1));                                                                           // 2231
	}                                                                                                                     // 2232
});                                                                                                                    // 2233
                                                                                                                       // 2234
                                                                                                                       // 2235
                                                                                                                       // 2236
/*                                                                                                                     // 2237
 * @namespace CRS                                                                                                      // 2238
 * @crs L.CRS.EPSG3857                                                                                                 // 2239
 *                                                                                                                     // 2240
 * The most common CRS for online maps, used by almost all free and commercial                                         // 2241
 * tile providers. Uses Spherical Mercator projection. Set in by default in                                            // 2242
 * Map's `crs` option.                                                                                                 // 2243
 */                                                                                                                    // 2244
                                                                                                                       // 2245
L.CRS.EPSG3857 = L.extend({}, L.CRS.Earth, {                                                                           // 2246
	code: 'EPSG:3857',                                                                                                    // 2247
	projection: L.Projection.SphericalMercator,                                                                           // 2248
                                                                                                                       // 2249
	transformation: (function () {                                                                                        // 2250
		var scale = 0.5 / (Math.PI * L.Projection.SphericalMercator.R);                                                      // 2251
		return new L.Transformation(scale, 0.5, -scale, 0.5);                                                                // 2252
	}())                                                                                                                  // 2253
});                                                                                                                    // 2254
                                                                                                                       // 2255
L.CRS.EPSG900913 = L.extend({}, L.CRS.EPSG3857, {                                                                      // 2256
	code: 'EPSG:900913'                                                                                                   // 2257
});                                                                                                                    // 2258
                                                                                                                       // 2259
                                                                                                                       // 2260
                                                                                                                       // 2261
/*                                                                                                                     // 2262
 * @namespace CRS                                                                                                      // 2263
 * @crs L.CRS.EPSG4326                                                                                                 // 2264
 *                                                                                                                     // 2265
 * A common CRS among GIS enthusiasts. Uses simple Equirectangular projection.                                         // 2266
 *                                                                                                                     // 2267
 * Leaflet 1.0.x complies with the [TMS coordinate scheme for EPSG:4326](https://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#global-geodetic),
 * which is a breaking change from 0.7.x behaviour.  If you are using a `TileLayer`                                    // 2269
 * with this CRS, ensure that there are two 256x256 pixel tiles covering the                                           // 2270
 * whole earth at zoom level zero, and that the tile coordinate origin is (-180,+90),                                  // 2271
 * or (-180,-90) for `TileLayer`s with [the `tms` option](#tilelayer-tms) set.                                         // 2272
 */                                                                                                                    // 2273
                                                                                                                       // 2274
L.CRS.EPSG4326 = L.extend({}, L.CRS.Earth, {                                                                           // 2275
	code: 'EPSG:4326',                                                                                                    // 2276
	projection: L.Projection.LonLat,                                                                                      // 2277
	transformation: new L.Transformation(1 / 180, 1, -1 / 180, 0.5)                                                       // 2278
});                                                                                                                    // 2279
                                                                                                                       // 2280
                                                                                                                       // 2281
                                                                                                                       // 2282
/*                                                                                                                     // 2283
 * @class Map                                                                                                          // 2284
 * @aka L.Map                                                                                                          // 2285
 * @inherits Evented                                                                                                   // 2286
 *                                                                                                                     // 2287
 * The central class of the API — it is used to create a map on a page and manipulate it.                              // 2288
 *                                                                                                                     // 2289
 * @example                                                                                                            // 2290
 *                                                                                                                     // 2291
 * ```js                                                                                                               // 2292
 * // initialize the map on the "map" div with a given center and zoom                                                 // 2293
 * var map = L.map('map', {                                                                                            // 2294
 * 	center: [51.505, -0.09],                                                                                           // 2295
 * 	zoom: 13                                                                                                           // 2296
 * });                                                                                                                 // 2297
 * ```                                                                                                                 // 2298
 *                                                                                                                     // 2299
 */                                                                                                                    // 2300
                                                                                                                       // 2301
L.Map = L.Evented.extend({                                                                                             // 2302
                                                                                                                       // 2303
	options: {                                                                                                            // 2304
		// @section Map State Options                                                                                        // 2305
		// @option crs: CRS = L.CRS.EPSG3857                                                                                 // 2306
		// The [Coordinate Reference System](#crs) to use. Don't change this if you're not                                   // 2307
		// sure what it means.                                                                                               // 2308
		crs: L.CRS.EPSG3857,                                                                                                 // 2309
                                                                                                                       // 2310
		// @option center: LatLng = undefined                                                                                // 2311
		// Initial geographic center of the map                                                                              // 2312
		center: undefined,                                                                                                   // 2313
                                                                                                                       // 2314
		// @option zoom: Number = undefined                                                                                  // 2315
		// Initial map zoom level                                                                                            // 2316
		zoom: undefined,                                                                                                     // 2317
                                                                                                                       // 2318
		// @option minZoom: Number = undefined                                                                               // 2319
		// Minimum zoom level of the map. Overrides any `minZoom` option set on map layers.                                  // 2320
		minZoom: undefined,                                                                                                  // 2321
                                                                                                                       // 2322
		// @option maxZoom: Number = undefined                                                                               // 2323
		// Maximum zoom level of the map. Overrides any `maxZoom` option set on map layers.                                  // 2324
		maxZoom: undefined,                                                                                                  // 2325
                                                                                                                       // 2326
		// @option layers: Layer[] = []                                                                                      // 2327
		// Array of layers that will be added to the map initially                                                           // 2328
		layers: [],                                                                                                          // 2329
                                                                                                                       // 2330
		// @option maxBounds: LatLngBounds = null                                                                            // 2331
		// When this option is set, the map restricts the view to the given                                                  // 2332
		// geographical bounds, bouncing the user back if the user tries to pan                                              // 2333
		// outside the view. To set the restriction dynamically, use                                                         // 2334
		// [`setMaxBounds`](#map-setmaxbounds) method.                                                                       // 2335
		maxBounds: undefined,                                                                                                // 2336
                                                                                                                       // 2337
		// @option renderer: Renderer = *                                                                                    // 2338
		// The default method for drawing vector layers on the map. `L.SVG`                                                  // 2339
		// or `L.Canvas` by default depending on browser support.                                                            // 2340
		renderer: undefined,                                                                                                 // 2341
                                                                                                                       // 2342
                                                                                                                       // 2343
		// @section Animation Options                                                                                        // 2344
		// @option zoomAnimation: Boolean = true                                                                             // 2345
		// Whether the map zoom animation is enabled. By default it's enabled                                                // 2346
		// in all browsers that support CSS3 Transitions except Android.                                                     // 2347
		zoomAnimation: true,                                                                                                 // 2348
                                                                                                                       // 2349
		// @option zoomAnimationThreshold: Number = 4                                                                        // 2350
		// Won't animate zoom if the zoom difference exceeds this value.                                                     // 2351
		zoomAnimationThreshold: 4,                                                                                           // 2352
                                                                                                                       // 2353
		// @option fadeAnimation: Boolean = true                                                                             // 2354
		// Whether the tile fade animation is enabled. By default it's enabled                                               // 2355
		// in all browsers that support CSS3 Transitions except Android.                                                     // 2356
		fadeAnimation: true,                                                                                                 // 2357
                                                                                                                       // 2358
		// @option markerZoomAnimation: Boolean = true                                                                       // 2359
		// Whether markers animate their zoom with the zoom animation, if disabled                                           // 2360
		// they will disappear for the length of the animation. By default it's                                              // 2361
		// enabled in all browsers that support CSS3 Transitions except Android.                                             // 2362
		markerZoomAnimation: true,                                                                                           // 2363
                                                                                                                       // 2364
		// @option transform3DLimit: Number = 2^23                                                                           // 2365
		// Defines the maximum size of a CSS translation transform. The default                                              // 2366
		// value should not be changed unless a web browser positions layers in                                              // 2367
		// the wrong place after doing a large `panBy`.                                                                      // 2368
		transform3DLimit: 8388608, // Precision limit of a 32-bit float                                                      // 2369
                                                                                                                       // 2370
		// @section Interaction Options                                                                                      // 2371
		// @option zoomSnap: Number = 1                                                                                      // 2372
		// Forces the map's zoom level to always be a multiple of this, particularly                                         // 2373
		// right after a [`fitBounds()`](#map-fitbounds) or a pinch-zoom.                                                    // 2374
		// By default, the zoom level snaps to the nearest integer; lower values                                             // 2375
		// (e.g. `0.5` or `0.1`) allow for greater granularity. A value of `0`                                               // 2376
		// means the zoom level will not be snapped after `fitBounds` or a pinch-zoom.                                       // 2377
		zoomSnap: 1,                                                                                                         // 2378
                                                                                                                       // 2379
		// @option zoomDelta: Number = 1                                                                                     // 2380
		// Controls how much the map's zoom level will change after a                                                        // 2381
		// [`zoomIn()`](#map-zoomin), [`zoomOut()`](#map-zoomout), pressing `+`                                              // 2382
		// or `-` on the keyboard, or using the [zoom controls](#control-zoom).                                              // 2383
		// Values smaller than `1` (e.g. `0.5`) allow for greater granularity.                                               // 2384
		zoomDelta: 1,                                                                                                        // 2385
                                                                                                                       // 2386
		// @option trackResize: Boolean = true                                                                               // 2387
		// Whether the map automatically handles browser window resize to update itself.                                     // 2388
		trackResize: true                                                                                                    // 2389
	},                                                                                                                    // 2390
                                                                                                                       // 2391
	initialize: function (id, options) { // (HTMLElement or String, Object)                                               // 2392
		options = L.setOptions(this, options);                                                                               // 2393
                                                                                                                       // 2394
		this._initContainer(id);                                                                                             // 2395
		this._initLayout();                                                                                                  // 2396
                                                                                                                       // 2397
		// hack for https://github.com/Leaflet/Leaflet/issues/1980                                                           // 2398
		this._onResize = L.bind(this._onResize, this);                                                                       // 2399
                                                                                                                       // 2400
		this._initEvents();                                                                                                  // 2401
                                                                                                                       // 2402
		if (options.maxBounds) {                                                                                             // 2403
			this.setMaxBounds(options.maxBounds);                                                                               // 2404
		}                                                                                                                    // 2405
                                                                                                                       // 2406
		if (options.zoom !== undefined) {                                                                                    // 2407
			this._zoom = this._limitZoom(options.zoom);                                                                         // 2408
		}                                                                                                                    // 2409
                                                                                                                       // 2410
		if (options.center && options.zoom !== undefined) {                                                                  // 2411
			this.setView(L.latLng(options.center), options.zoom, {reset: true});                                                // 2412
		}                                                                                                                    // 2413
                                                                                                                       // 2414
		this._handlers = [];                                                                                                 // 2415
		this._layers = {};                                                                                                   // 2416
		this._zoomBoundLayers = {};                                                                                          // 2417
		this._sizeChanged = true;                                                                                            // 2418
                                                                                                                       // 2419
		this.callInitHooks();                                                                                                // 2420
                                                                                                                       // 2421
		// don't animate on browsers without hardware-accelerated transitions or old Android/Opera                           // 2422
		this._zoomAnimated = L.DomUtil.TRANSITION && L.Browser.any3d && !L.Browser.mobileOpera &&                            // 2423
				this.options.zoomAnimation;                                                                                        // 2424
                                                                                                                       // 2425
		// zoom transitions run with the same duration for all layers, so if one of transitionend events                     // 2426
		// happens after starting zoom animation (propagating to the map pane), we know that it ended globally               // 2427
		if (this._zoomAnimated) {                                                                                            // 2428
			this._createAnimProxy();                                                                                            // 2429
			L.DomEvent.on(this._proxy, L.DomUtil.TRANSITION_END, this._catchTransitionEnd, this);                               // 2430
		}                                                                                                                    // 2431
                                                                                                                       // 2432
		this._addLayers(this.options.layers);                                                                                // 2433
	},                                                                                                                    // 2434
                                                                                                                       // 2435
                                                                                                                       // 2436
	// @section Methods for modifying map state                                                                           // 2437
                                                                                                                       // 2438
	// @method setView(center: LatLng, zoom: Number, options?: Zoom/pan options): this                                    // 2439
	// Sets the view of the map (geographical center and zoom) with the given                                             // 2440
	// animation options.                                                                                                 // 2441
	setView: function (center, zoom, options) {                                                                           // 2442
                                                                                                                       // 2443
		zoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);                                                      // 2444
		center = this._limitCenter(L.latLng(center), zoom, this.options.maxBounds);                                          // 2445
		options = options || {};                                                                                             // 2446
                                                                                                                       // 2447
		this._stop();                                                                                                        // 2448
                                                                                                                       // 2449
		if (this._loaded && !options.reset && options !== true) {                                                            // 2450
                                                                                                                       // 2451
			if (options.animate !== undefined) {                                                                                // 2452
				options.zoom = L.extend({animate: options.animate}, options.zoom);                                                 // 2453
				options.pan = L.extend({animate: options.animate, duration: options.duration}, options.pan);                       // 2454
			}                                                                                                                   // 2455
                                                                                                                       // 2456
			// try animating pan or zoom                                                                                        // 2457
			var moved = (this._zoom !== zoom) ?                                                                                 // 2458
				this._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :                                       // 2459
				this._tryAnimatedPan(center, options.pan);                                                                         // 2460
                                                                                                                       // 2461
			if (moved) {                                                                                                        // 2462
				// prevent resize handler call, the view will refresh after animation anyway                                       // 2463
				clearTimeout(this._sizeTimer);                                                                                     // 2464
				return this;                                                                                                       // 2465
			}                                                                                                                   // 2466
		}                                                                                                                    // 2467
                                                                                                                       // 2468
		// animation didn't start, just reset the map view                                                                   // 2469
		this._resetView(center, zoom);                                                                                       // 2470
                                                                                                                       // 2471
		return this;                                                                                                         // 2472
	},                                                                                                                    // 2473
                                                                                                                       // 2474
	// @method setZoom(zoom: Number, options: Zoom/pan options): this                                                     // 2475
	// Sets the zoom of the map.                                                                                          // 2476
	setZoom: function (zoom, options) {                                                                                   // 2477
		if (!this._loaded) {                                                                                                 // 2478
			this._zoom = zoom;                                                                                                  // 2479
			return this;                                                                                                        // 2480
		}                                                                                                                    // 2481
		return this.setView(this.getCenter(), zoom, {zoom: options});                                                        // 2482
	},                                                                                                                    // 2483
                                                                                                                       // 2484
	// @method zoomIn(delta?: Number, options?: Zoom options): this                                                       // 2485
	// Increases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).                               // 2486
	zoomIn: function (delta, options) {                                                                                   // 2487
		delta = delta || (L.Browser.any3d ? this.options.zoomDelta : 1);                                                     // 2488
		return this.setZoom(this._zoom + delta, options);                                                                    // 2489
	},                                                                                                                    // 2490
                                                                                                                       // 2491
	// @method zoomOut(delta?: Number, options?: Zoom options): this                                                      // 2492
	// Decreases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).                               // 2493
	zoomOut: function (delta, options) {                                                                                  // 2494
		delta = delta || (L.Browser.any3d ? this.options.zoomDelta : 1);                                                     // 2495
		return this.setZoom(this._zoom - delta, options);                                                                    // 2496
	},                                                                                                                    // 2497
                                                                                                                       // 2498
	// @method setZoomAround(latlng: LatLng, zoom: Number, options: Zoom options): this                                   // 2499
	// Zooms the map while keeping a specified geographical point on the map                                              // 2500
	// stationary (e.g. used internally for scroll zoom and double-click zoom).                                           // 2501
	// @alternative                                                                                                       // 2502
	// @method setZoomAround(offset: Point, zoom: Number, options: Zoom options): this                                    // 2503
	// Zooms the map while keeping a specified pixel on the map (relative to the top-left corner) stationary.             // 2504
	setZoomAround: function (latlng, zoom, options) {                                                                     // 2505
		var scale = this.getZoomScale(zoom),                                                                                 // 2506
		    viewHalf = this.getSize().divideBy(2),                                                                           // 2507
		    containerPoint = latlng instanceof L.Point ? latlng : this.latLngToContainerPoint(latlng),                       // 2508
                                                                                                                       // 2509
		    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),                                      // 2510
		    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));                                             // 2511
                                                                                                                       // 2512
		return this.setView(newCenter, zoom, {zoom: options});                                                               // 2513
	},                                                                                                                    // 2514
                                                                                                                       // 2515
	_getBoundsCenterZoom: function (bounds, options) {                                                                    // 2516
                                                                                                                       // 2517
		options = options || {};                                                                                             // 2518
		bounds = bounds.getBounds ? bounds.getBounds() : L.latLngBounds(bounds);                                             // 2519
                                                                                                                       // 2520
		var paddingTL = L.point(options.paddingTopLeft || options.padding || [0, 0]),                                        // 2521
		    paddingBR = L.point(options.paddingBottomRight || options.padding || [0, 0]),                                    // 2522
                                                                                                                       // 2523
		    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));                                              // 2524
                                                                                                                       // 2525
		zoom = (typeof options.maxZoom === 'number') ? Math.min(options.maxZoom, zoom) : zoom;                               // 2526
                                                                                                                       // 2527
		var paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),                                                       // 2528
                                                                                                                       // 2529
		    swPoint = this.project(bounds.getSouthWest(), zoom),                                                             // 2530
		    nePoint = this.project(bounds.getNorthEast(), zoom),                                                             // 2531
		    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);                              // 2532
                                                                                                                       // 2533
		return {                                                                                                             // 2534
			center: center,                                                                                                     // 2535
			zoom: zoom                                                                                                          // 2536
		};                                                                                                                   // 2537
	},                                                                                                                    // 2538
                                                                                                                       // 2539
	// @method fitBounds(bounds: LatLngBounds, options?: fitBounds options): this                                         // 2540
	// Sets a map view that contains the given geographical bounds with the                                               // 2541
	// maximum zoom level possible.                                                                                       // 2542
	fitBounds: function (bounds, options) {                                                                               // 2543
                                                                                                                       // 2544
		bounds = L.latLngBounds(bounds);                                                                                     // 2545
                                                                                                                       // 2546
		if (!bounds.isValid()) {                                                                                             // 2547
			throw new Error('Bounds are not valid.');                                                                           // 2548
		}                                                                                                                    // 2549
                                                                                                                       // 2550
		var target = this._getBoundsCenterZoom(bounds, options);                                                             // 2551
		return this.setView(target.center, target.zoom, options);                                                            // 2552
	},                                                                                                                    // 2553
                                                                                                                       // 2554
	// @method fitWorld(options?: fitBounds options): this                                                                // 2555
	// Sets a map view that mostly contains the whole world with the maximum                                              // 2556
	// zoom level possible.                                                                                               // 2557
	fitWorld: function (options) {                                                                                        // 2558
		return this.fitBounds([[-90, -180], [90, 180]], options);                                                            // 2559
	},                                                                                                                    // 2560
                                                                                                                       // 2561
	// @method panTo(latlng: LatLng, options?: Pan options): this                                                         // 2562
	// Pans the map to a given center.                                                                                    // 2563
	panTo: function (center, options) { // (LatLng)                                                                       // 2564
		return this.setView(center, this._zoom, {pan: options});                                                             // 2565
	},                                                                                                                    // 2566
                                                                                                                       // 2567
	// @method panBy(offset: Point): this                                                                                 // 2568
	// Pans the map by a given number of pixels (animated).                                                               // 2569
	panBy: function (offset, options) {                                                                                   // 2570
		offset = L.point(offset).round();                                                                                    // 2571
		options = options || {};                                                                                             // 2572
                                                                                                                       // 2573
		if (!offset.x && !offset.y) {                                                                                        // 2574
			return this.fire('moveend');                                                                                        // 2575
		}                                                                                                                    // 2576
		// If we pan too far, Chrome gets issues with tiles                                                                  // 2577
		// and makes them disappear or appear in the wrong place (slightly offset) #2602                                     // 2578
		if (options.animate !== true && !this.getSize().contains(offset)) {                                                  // 2579
			this._resetView(this.unproject(this.project(this.getCenter()).add(offset)), this.getZoom());                        // 2580
			return this;                                                                                                        // 2581
		}                                                                                                                    // 2582
                                                                                                                       // 2583
		if (!this._panAnim) {                                                                                                // 2584
			this._panAnim = new L.PosAnimation();                                                                               // 2585
                                                                                                                       // 2586
			this._panAnim.on({                                                                                                  // 2587
				'step': this._onPanTransitionStep,                                                                                 // 2588
				'end': this._onPanTransitionEnd                                                                                    // 2589
			}, this);                                                                                                           // 2590
		}                                                                                                                    // 2591
                                                                                                                       // 2592
		// don't fire movestart if animating inertia                                                                         // 2593
		if (!options.noMoveStart) {                                                                                          // 2594
			this.fire('movestart');                                                                                             // 2595
		}                                                                                                                    // 2596
                                                                                                                       // 2597
		// animate pan unless animate: false specified                                                                       // 2598
		if (options.animate !== false) {                                                                                     // 2599
			L.DomUtil.addClass(this._mapPane, 'leaflet-pan-anim');                                                              // 2600
                                                                                                                       // 2601
			var newPos = this._getMapPanePos().subtract(offset).round();                                                        // 2602
			this._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);                          // 2603
		} else {                                                                                                             // 2604
			this._rawPanBy(offset);                                                                                             // 2605
			this.fire('move').fire('moveend');                                                                                  // 2606
		}                                                                                                                    // 2607
                                                                                                                       // 2608
		return this;                                                                                                         // 2609
	},                                                                                                                    // 2610
                                                                                                                       // 2611
	// @method flyTo(latlng: LatLng, zoom?: Number, options?: Zoom/pan options): this                                     // 2612
	// Sets the view of the map (geographical center and zoom) performing a smooth                                        // 2613
	// pan-zoom animation.                                                                                                // 2614
	flyTo: function (targetCenter, targetZoom, options) {                                                                 // 2615
                                                                                                                       // 2616
		options = options || {};                                                                                             // 2617
		if (options.animate === false || !L.Browser.any3d) {                                                                 // 2618
			return this.setView(targetCenter, targetZoom, options);                                                             // 2619
		}                                                                                                                    // 2620
                                                                                                                       // 2621
		this._stop();                                                                                                        // 2622
                                                                                                                       // 2623
		var from = this.project(this.getCenter()),                                                                           // 2624
		    to = this.project(targetCenter),                                                                                 // 2625
		    size = this.getSize(),                                                                                           // 2626
		    startZoom = this._zoom;                                                                                          // 2627
                                                                                                                       // 2628
		targetCenter = L.latLng(targetCenter);                                                                               // 2629
		targetZoom = targetZoom === undefined ? startZoom : targetZoom;                                                      // 2630
                                                                                                                       // 2631
		var w0 = Math.max(size.x, size.y),                                                                                   // 2632
		    w1 = w0 * this.getZoomScale(startZoom, targetZoom),                                                              // 2633
		    u1 = (to.distanceTo(from)) || 1,                                                                                 // 2634
		    rho = 1.42,                                                                                                      // 2635
		    rho2 = rho * rho;                                                                                                // 2636
                                                                                                                       // 2637
		function r(i) {                                                                                                      // 2638
			var s1 = i ? -1 : 1,                                                                                                // 2639
			    s2 = i ? w1 : w0,                                                                                               // 2640
			    t1 = w1 * w1 - w0 * w0 + s1 * rho2 * rho2 * u1 * u1,                                                            // 2641
			    b1 = 2 * s2 * rho2 * u1,                                                                                        // 2642
			    b = t1 / b1,                                                                                                    // 2643
			    sq = Math.sqrt(b * b + 1) - b;                                                                                  // 2644
                                                                                                                       // 2645
			    // workaround for floating point precision bug when sq = 0, log = -Infinite,                                    // 2646
			    // thus triggering an infinite loop in flyTo                                                                    // 2647
			    var log = sq < 0.000000001 ? -18 : Math.log(sq);                                                                // 2648
                                                                                                                       // 2649
			return log;                                                                                                         // 2650
		}                                                                                                                    // 2651
                                                                                                                       // 2652
		function sinh(n) { return (Math.exp(n) - Math.exp(-n)) / 2; }                                                        // 2653
		function cosh(n) { return (Math.exp(n) + Math.exp(-n)) / 2; }                                                        // 2654
		function tanh(n) { return sinh(n) / cosh(n); }                                                                       // 2655
                                                                                                                       // 2656
		var r0 = r(0);                                                                                                       // 2657
                                                                                                                       // 2658
		function w(s) { return w0 * (cosh(r0) / cosh(r0 + rho * s)); }                                                       // 2659
		function u(s) { return w0 * (cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2; }                                     // 2660
                                                                                                                       // 2661
		function easeOut(t) { return 1 - Math.pow(1 - t, 1.5); }                                                             // 2662
                                                                                                                       // 2663
		var start = Date.now(),                                                                                              // 2664
		    S = (r(1) - r0) / rho,                                                                                           // 2665
		    duration = options.duration ? 1000 * options.duration : 1000 * S * 0.8;                                          // 2666
                                                                                                                       // 2667
		function frame() {                                                                                                   // 2668
			var t = (Date.now() - start) / duration,                                                                            // 2669
			    s = easeOut(t) * S;                                                                                             // 2670
                                                                                                                       // 2671
			if (t <= 1) {                                                                                                       // 2672
				this._flyToFrame = L.Util.requestAnimFrame(frame, this);                                                           // 2673
                                                                                                                       // 2674
				this._move(                                                                                                        // 2675
					this.unproject(from.add(to.subtract(from).multiplyBy(u(s) / u1)), startZoom),                                     // 2676
					this.getScaleZoom(w0 / w(s), startZoom),                                                                          // 2677
					{flyTo: true});                                                                                                   // 2678
                                                                                                                       // 2679
			} else {                                                                                                            // 2680
				this                                                                                                               // 2681
					._move(targetCenter, targetZoom)                                                                                  // 2682
					._moveEnd(true);                                                                                                  // 2683
			}                                                                                                                   // 2684
		}                                                                                                                    // 2685
                                                                                                                       // 2686
		this._moveStart(true);                                                                                               // 2687
                                                                                                                       // 2688
		frame.call(this);                                                                                                    // 2689
		return this;                                                                                                         // 2690
	},                                                                                                                    // 2691
                                                                                                                       // 2692
	// @method flyToBounds(bounds: LatLngBounds, options?: fitBounds options): this                                       // 2693
	// Sets the view of the map with a smooth animation like [`flyTo`](#map-flyto),                                       // 2694
	// but takes a bounds parameter like [`fitBounds`](#map-fitbounds).                                                   // 2695
	flyToBounds: function (bounds, options) {                                                                             // 2696
		var target = this._getBoundsCenterZoom(bounds, options);                                                             // 2697
		return this.flyTo(target.center, target.zoom, options);                                                              // 2698
	},                                                                                                                    // 2699
                                                                                                                       // 2700
	// @method setMaxBounds(bounds: Bounds): this                                                                         // 2701
	// Restricts the map view to the given bounds (see the [maxBounds](#map-maxbounds) option).                           // 2702
	setMaxBounds: function (bounds) {                                                                                     // 2703
		bounds = L.latLngBounds(bounds);                                                                                     // 2704
                                                                                                                       // 2705
		if (!bounds.isValid()) {                                                                                             // 2706
			this.options.maxBounds = null;                                                                                      // 2707
			return this.off('moveend', this._panInsideMaxBounds);                                                               // 2708
		} else if (this.options.maxBounds) {                                                                                 // 2709
			this.off('moveend', this._panInsideMaxBounds);                                                                      // 2710
		}                                                                                                                    // 2711
                                                                                                                       // 2712
		this.options.maxBounds = bounds;                                                                                     // 2713
                                                                                                                       // 2714
		if (this._loaded) {                                                                                                  // 2715
			this._panInsideMaxBounds();                                                                                         // 2716
		}                                                                                                                    // 2717
                                                                                                                       // 2718
		return this.on('moveend', this._panInsideMaxBounds);                                                                 // 2719
	},                                                                                                                    // 2720
                                                                                                                       // 2721
	// @method setMinZoom(zoom: Number): this                                                                             // 2722
	// Sets the lower limit for the available zoom levels (see the [minZoom](#map-minzoom) option).                       // 2723
	setMinZoom: function (zoom) {                                                                                         // 2724
		this.options.minZoom = zoom;                                                                                         // 2725
                                                                                                                       // 2726
		if (this._loaded && this.getZoom() < this.options.minZoom) {                                                         // 2727
			return this.setZoom(zoom);                                                                                          // 2728
		}                                                                                                                    // 2729
                                                                                                                       // 2730
		return this;                                                                                                         // 2731
	},                                                                                                                    // 2732
                                                                                                                       // 2733
	// @method setMaxZoom(zoom: Number): this                                                                             // 2734
	// Sets the upper limit for the available zoom levels (see the [maxZoom](#map-maxzoom) option).                       // 2735
	setMaxZoom: function (zoom) {                                                                                         // 2736
		this.options.maxZoom = zoom;                                                                                         // 2737
                                                                                                                       // 2738
		if (this._loaded && (this.getZoom() > this.options.maxZoom)) {                                                       // 2739
			return this.setZoom(zoom);                                                                                          // 2740
		}                                                                                                                    // 2741
                                                                                                                       // 2742
		return this;                                                                                                         // 2743
	},                                                                                                                    // 2744
                                                                                                                       // 2745
	// @method panInsideBounds(bounds: LatLngBounds, options?: Pan options): this                                         // 2746
	// Pans the map to the closest view that would lie inside the given bounds (if it's not already), controlling the animation using the options specific, if any.
	panInsideBounds: function (bounds, options) {                                                                         // 2748
		this._enforcingBounds = true;                                                                                        // 2749
		var center = this.getCenter(),                                                                                       // 2750
		    newCenter = this._limitCenter(center, this._zoom, L.latLngBounds(bounds));                                       // 2751
                                                                                                                       // 2752
		if (!center.equals(newCenter)) {                                                                                     // 2753
			this.panTo(newCenter, options);                                                                                     // 2754
		}                                                                                                                    // 2755
                                                                                                                       // 2756
		this._enforcingBounds = false;                                                                                       // 2757
		return this;                                                                                                         // 2758
	},                                                                                                                    // 2759
                                                                                                                       // 2760
	// @method invalidateSize(options: Zoom/Pan options): this                                                            // 2761
	// Checks if the map container size changed and updates the map if so —                                               // 2762
	// call it after you've changed the map size dynamically, also animating                                              // 2763
	// pan by default. If `options.pan` is `false`, panning will not occur.                                               // 2764
	// If `options.debounceMoveend` is `true`, it will delay `moveend` event so                                           // 2765
	// that it doesn't happen often even if the method is called many                                                     // 2766
	// times in a row.                                                                                                    // 2767
                                                                                                                       // 2768
	// @alternative                                                                                                       // 2769
	// @method invalidateSize(animate: Boolean): this                                                                     // 2770
	// Checks if the map container size changed and updates the map if so —                                               // 2771
	// call it after you've changed the map size dynamically, also animating                                              // 2772
	// pan by default.                                                                                                    // 2773
	invalidateSize: function (options) {                                                                                  // 2774
		if (!this._loaded) { return this; }                                                                                  // 2775
                                                                                                                       // 2776
		options = L.extend({                                                                                                 // 2777
			animate: false,                                                                                                     // 2778
			pan: true                                                                                                           // 2779
		}, options === true ? {animate: true} : options);                                                                    // 2780
                                                                                                                       // 2781
		var oldSize = this.getSize();                                                                                        // 2782
		this._sizeChanged = true;                                                                                            // 2783
		this._lastCenter = null;                                                                                             // 2784
                                                                                                                       // 2785
		var newSize = this.getSize(),                                                                                        // 2786
		    oldCenter = oldSize.divideBy(2).round(),                                                                         // 2787
		    newCenter = newSize.divideBy(2).round(),                                                                         // 2788
		    offset = oldCenter.subtract(newCenter);                                                                          // 2789
                                                                                                                       // 2790
		if (!offset.x && !offset.y) { return this; }                                                                         // 2791
                                                                                                                       // 2792
		if (options.animate && options.pan) {                                                                                // 2793
			this.panBy(offset);                                                                                                 // 2794
                                                                                                                       // 2795
		} else {                                                                                                             // 2796
			if (options.pan) {                                                                                                  // 2797
				this._rawPanBy(offset);                                                                                            // 2798
			}                                                                                                                   // 2799
                                                                                                                       // 2800
			this.fire('move');                                                                                                  // 2801
                                                                                                                       // 2802
			if (options.debounceMoveend) {                                                                                      // 2803
				clearTimeout(this._sizeTimer);                                                                                     // 2804
				this._sizeTimer = setTimeout(L.bind(this.fire, this, 'moveend'), 200);                                             // 2805
			} else {                                                                                                            // 2806
				this.fire('moveend');                                                                                              // 2807
			}                                                                                                                   // 2808
		}                                                                                                                    // 2809
                                                                                                                       // 2810
		// @section Map state change events                                                                                  // 2811
		// @event resize: ResizeEvent                                                                                        // 2812
		// Fired when the map is resized.                                                                                    // 2813
		return this.fire('resize', {                                                                                         // 2814
			oldSize: oldSize,                                                                                                   // 2815
			newSize: newSize                                                                                                    // 2816
		});                                                                                                                  // 2817
	},                                                                                                                    // 2818
                                                                                                                       // 2819
	// @section Methods for modifying map state                                                                           // 2820
	// @method stop(): this                                                                                               // 2821
	// Stops the currently running `panTo` or `flyTo` animation, if any.                                                  // 2822
	stop: function () {                                                                                                   // 2823
		this.setZoom(this._limitZoom(this._zoom));                                                                           // 2824
		if (!this.options.zoomSnap) {                                                                                        // 2825
			this.fire('viewreset');                                                                                             // 2826
		}                                                                                                                    // 2827
		return this._stop();                                                                                                 // 2828
	},                                                                                                                    // 2829
                                                                                                                       // 2830
	// @section Geolocation methods                                                                                       // 2831
	// @method locate(options?: Locate options): this                                                                     // 2832
	// Tries to locate the user using the Geolocation API, firing a [`locationfound`](#map-locationfound)                 // 2833
	// event with location data on success or a [`locationerror`](#map-locationerror) event on failure,                   // 2834
	// and optionally sets the map view to the user's location with respect to                                            // 2835
	// detection accuracy (or to the world view if geolocation failed).                                                   // 2836
	// Note that, if your page doesn't use HTTPS, this method will fail in                                                // 2837
	// modern browsers ([Chrome 50 and newer](https://sites.google.com/a/chromium.org/dev/Home/chromium-security/deprecating-powerful-features-on-insecure-origins))
	// See `Locate options` for more details.                                                                             // 2839
	locate: function (options) {                                                                                          // 2840
                                                                                                                       // 2841
		options = this._locateOptions = L.extend({                                                                           // 2842
			timeout: 10000,                                                                                                     // 2843
			watch: false                                                                                                        // 2844
			// setView: false                                                                                                   // 2845
			// maxZoom: <Number>                                                                                                // 2846
			// maximumAge: 0                                                                                                    // 2847
			// enableHighAccuracy: false                                                                                        // 2848
		}, options);                                                                                                         // 2849
                                                                                                                       // 2850
		if (!('geolocation' in navigator)) {                                                                                 // 2851
			this._handleGeolocationError({                                                                                      // 2852
				code: 0,                                                                                                           // 2853
				message: 'Geolocation not supported.'                                                                              // 2854
			});                                                                                                                 // 2855
			return this;                                                                                                        // 2856
		}                                                                                                                    // 2857
                                                                                                                       // 2858
		var onResponse = L.bind(this._handleGeolocationResponse, this),                                                      // 2859
		    onError = L.bind(this._handleGeolocationError, this);                                                            // 2860
                                                                                                                       // 2861
		if (options.watch) {                                                                                                 // 2862
			this._locationWatchId =                                                                                             // 2863
			        navigator.geolocation.watchPosition(onResponse, onError, options);                                          // 2864
		} else {                                                                                                             // 2865
			navigator.geolocation.getCurrentPosition(onResponse, onError, options);                                             // 2866
		}                                                                                                                    // 2867
		return this;                                                                                                         // 2868
	},                                                                                                                    // 2869
                                                                                                                       // 2870
	// @method stopLocate(): this                                                                                         // 2871
	// Stops watching location previously initiated by `map.locate({watch: true})`                                        // 2872
	// and aborts resetting the map view if map.locate was called with                                                    // 2873
	// `{setView: true}`.                                                                                                 // 2874
	stopLocate: function () {                                                                                             // 2875
		if (navigator.geolocation && navigator.geolocation.clearWatch) {                                                     // 2876
			navigator.geolocation.clearWatch(this._locationWatchId);                                                            // 2877
		}                                                                                                                    // 2878
		if (this._locateOptions) {                                                                                           // 2879
			this._locateOptions.setView = false;                                                                                // 2880
		}                                                                                                                    // 2881
		return this;                                                                                                         // 2882
	},                                                                                                                    // 2883
                                                                                                                       // 2884
	_handleGeolocationError: function (error) {                                                                           // 2885
		var c = error.code,                                                                                                  // 2886
		    message = error.message ||                                                                                       // 2887
		            (c === 1 ? 'permission denied' :                                                                         // 2888
		            (c === 2 ? 'position unavailable' : 'timeout'));                                                         // 2889
                                                                                                                       // 2890
		if (this._locateOptions.setView && !this._loaded) {                                                                  // 2891
			this.fitWorld();                                                                                                    // 2892
		}                                                                                                                    // 2893
                                                                                                                       // 2894
		// @section Location events                                                                                          // 2895
		// @event locationerror: ErrorEvent                                                                                  // 2896
		// Fired when geolocation (using the [`locate`](#map-locate) method) failed.                                         // 2897
		this.fire('locationerror', {                                                                                         // 2898
			code: c,                                                                                                            // 2899
			message: 'Geolocation error: ' + message + '.'                                                                      // 2900
		});                                                                                                                  // 2901
	},                                                                                                                    // 2902
                                                                                                                       // 2903
	_handleGeolocationResponse: function (pos) {                                                                          // 2904
		var lat = pos.coords.latitude,                                                                                       // 2905
		    lng = pos.coords.longitude,                                                                                      // 2906
		    latlng = new L.LatLng(lat, lng),                                                                                 // 2907
		    bounds = latlng.toBounds(pos.coords.accuracy),                                                                   // 2908
		    options = this._locateOptions;                                                                                   // 2909
                                                                                                                       // 2910
		if (options.setView) {                                                                                               // 2911
			var zoom = this.getBoundsZoom(bounds);                                                                              // 2912
			this.setView(latlng, options.maxZoom ? Math.min(zoom, options.maxZoom) : zoom);                                     // 2913
		}                                                                                                                    // 2914
                                                                                                                       // 2915
		var data = {                                                                                                         // 2916
			latlng: latlng,                                                                                                     // 2917
			bounds: bounds,                                                                                                     // 2918
			timestamp: pos.timestamp                                                                                            // 2919
		};                                                                                                                   // 2920
                                                                                                                       // 2921
		for (var i in pos.coords) {                                                                                          // 2922
			if (typeof pos.coords[i] === 'number') {                                                                            // 2923
				data[i] = pos.coords[i];                                                                                           // 2924
			}                                                                                                                   // 2925
		}                                                                                                                    // 2926
                                                                                                                       // 2927
		// @event locationfound: LocationEvent                                                                               // 2928
		// Fired when geolocation (using the [`locate`](#map-locate) method)                                                 // 2929
		// went successfully.                                                                                                // 2930
		this.fire('locationfound', data);                                                                                    // 2931
	},                                                                                                                    // 2932
                                                                                                                       // 2933
	// TODO handler.addTo                                                                                                 // 2934
	// TODO Appropiate docs section?                                                                                      // 2935
	// @section Other Methods                                                                                             // 2936
	// @method addHandler(name: String, HandlerClass: Function): this                                                     // 2937
	// Adds a new `Handler` to the map, given its name and constructor function.                                          // 2938
	addHandler: function (name, HandlerClass) {                                                                           // 2939
		if (!HandlerClass) { return this; }                                                                                  // 2940
                                                                                                                       // 2941
		var handler = this[name] = new HandlerClass(this);                                                                   // 2942
                                                                                                                       // 2943
		this._handlers.push(handler);                                                                                        // 2944
                                                                                                                       // 2945
		if (this.options[name]) {                                                                                            // 2946
			handler.enable();                                                                                                   // 2947
		}                                                                                                                    // 2948
                                                                                                                       // 2949
		return this;                                                                                                         // 2950
	},                                                                                                                    // 2951
                                                                                                                       // 2952
	// @method remove(): this                                                                                             // 2953
	// Destroys the map and clears all related event listeners.                                                           // 2954
	remove: function () {                                                                                                 // 2955
                                                                                                                       // 2956
		this._initEvents(true);                                                                                              // 2957
                                                                                                                       // 2958
		if (this._containerId !== this._container._leaflet_id) {                                                             // 2959
			throw new Error('Map container is being reused by another instance');                                               // 2960
		}                                                                                                                    // 2961
                                                                                                                       // 2962
		try {                                                                                                                // 2963
			// throws error in IE6-8                                                                                            // 2964
			delete this._container._leaflet_id;                                                                                 // 2965
			delete this._containerId;                                                                                           // 2966
		} catch (e) {                                                                                                        // 2967
			/*eslint-disable */                                                                                                 // 2968
			this._container._leaflet_id = undefined;                                                                            // 2969
			/*eslint-enable */                                                                                                  // 2970
			this._containerId = undefined;                                                                                      // 2971
		}                                                                                                                    // 2972
                                                                                                                       // 2973
		L.DomUtil.remove(this._mapPane);                                                                                     // 2974
                                                                                                                       // 2975
		if (this._clearControlPos) {                                                                                         // 2976
			this._clearControlPos();                                                                                            // 2977
		}                                                                                                                    // 2978
                                                                                                                       // 2979
		this._clearHandlers();                                                                                               // 2980
                                                                                                                       // 2981
		if (this._loaded) {                                                                                                  // 2982
			// @section Map state change events                                                                                 // 2983
			// @event unload: Event                                                                                             // 2984
			// Fired when the map is destroyed with [remove](#map-remove) method.                                               // 2985
			this.fire('unload');                                                                                                // 2986
		}                                                                                                                    // 2987
                                                                                                                       // 2988
		for (var i in this._layers) {                                                                                        // 2989
			this._layers[i].remove();                                                                                           // 2990
		}                                                                                                                    // 2991
                                                                                                                       // 2992
		return this;                                                                                                         // 2993
	},                                                                                                                    // 2994
                                                                                                                       // 2995
	// @section Other Methods                                                                                             // 2996
	// @method createPane(name: String, container?: HTMLElement): HTMLElement                                             // 2997
	// Creates a new [map pane](#map-pane) with the given name if it doesn't exist already,                               // 2998
	// then returns it. The pane is created as a children of `container`, or                                              // 2999
	// as a children of the main map pane if not set.                                                                     // 3000
	createPane: function (name, container) {                                                                              // 3001
		var className = 'leaflet-pane' + (name ? ' leaflet-' + name.replace('Pane', '') + '-pane' : ''),                     // 3002
		    pane = L.DomUtil.create('div', className, container || this._mapPane);                                           // 3003
                                                                                                                       // 3004
		if (name) {                                                                                                          // 3005
			this._panes[name] = pane;                                                                                           // 3006
		}                                                                                                                    // 3007
		return pane;                                                                                                         // 3008
	},                                                                                                                    // 3009
                                                                                                                       // 3010
	// @section Methods for Getting Map State                                                                             // 3011
                                                                                                                       // 3012
	// @method getCenter(): LatLng                                                                                        // 3013
	// Returns the geographical center of the map view                                                                    // 3014
	getCenter: function () {                                                                                              // 3015
		this._checkIfLoaded();                                                                                               // 3016
                                                                                                                       // 3017
		if (this._lastCenter && !this._moved()) {                                                                            // 3018
			return this._lastCenter;                                                                                            // 3019
		}                                                                                                                    // 3020
		return this.layerPointToLatLng(this._getCenterLayerPoint());                                                         // 3021
	},                                                                                                                    // 3022
                                                                                                                       // 3023
	// @method getZoom(): Number                                                                                          // 3024
	// Returns the current zoom level of the map view                                                                     // 3025
	getZoom: function () {                                                                                                // 3026
		return this._zoom;                                                                                                   // 3027
	},                                                                                                                    // 3028
                                                                                                                       // 3029
	// @method getBounds(): LatLngBounds                                                                                  // 3030
	// Returns the geographical bounds visible in the current map view                                                    // 3031
	getBounds: function () {                                                                                              // 3032
		var bounds = this.getPixelBounds(),                                                                                  // 3033
		    sw = this.unproject(bounds.getBottomLeft()),                                                                     // 3034
		    ne = this.unproject(bounds.getTopRight());                                                                       // 3035
                                                                                                                       // 3036
		return new L.LatLngBounds(sw, ne);                                                                                   // 3037
	},                                                                                                                    // 3038
                                                                                                                       // 3039
	// @method getMinZoom(): Number                                                                                       // 3040
	// Returns the minimum zoom level of the map (if set in the `minZoom` option of the map or of any layers), or `0` by default.
	getMinZoom: function () {                                                                                             // 3042
		return this.options.minZoom === undefined ? this._layersMinZoom || 0 : this.options.minZoom;                         // 3043
	},                                                                                                                    // 3044
                                                                                                                       // 3045
	// @method getMaxZoom(): Number                                                                                       // 3046
	// Returns the maximum zoom level of the map (if set in the `maxZoom` option of the map or of any layers).            // 3047
	getMaxZoom: function () {                                                                                             // 3048
		return this.options.maxZoom === undefined ?                                                                          // 3049
			(this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :                                              // 3050
			this.options.maxZoom;                                                                                               // 3051
	},                                                                                                                    // 3052
                                                                                                                       // 3053
	// @method getBoundsZoom(bounds: LatLngBounds, inside?: Boolean): Number                                              // 3054
	// Returns the maximum zoom level on which the given bounds fit to the map                                            // 3055
	// view in its entirety. If `inside` (optional) is set to `true`, the method                                          // 3056
	// instead returns the minimum zoom level on which the map view fits into                                             // 3057
	// the given bounds in its entirety.                                                                                  // 3058
	getBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number                     // 3059
		bounds = L.latLngBounds(bounds);                                                                                     // 3060
		padding = L.point(padding || [0, 0]);                                                                                // 3061
                                                                                                                       // 3062
		var zoom = this.getZoom() || 0,                                                                                      // 3063
		    min = this.getMinZoom(),                                                                                         // 3064
		    max = this.getMaxZoom(),                                                                                         // 3065
		    nw = bounds.getNorthWest(),                                                                                      // 3066
		    se = bounds.getSouthEast(),                                                                                      // 3067
		    size = this.getSize().subtract(padding),                                                                         // 3068
		    boundsSize = L.bounds(this.project(se, zoom), this.project(nw, zoom)).getSize(),                                 // 3069
		    snap = L.Browser.any3d ? this.options.zoomSnap : 1;                                                              // 3070
                                                                                                                       // 3071
		var scale = Math.min(size.x / boundsSize.x, size.y / boundsSize.y);                                                  // 3072
		zoom = this.getScaleZoom(scale, zoom);                                                                               // 3073
                                                                                                                       // 3074
		if (snap) {                                                                                                          // 3075
			zoom = Math.round(zoom / (snap / 100)) * (snap / 100); // don't jump if within 1% of a snap level                   // 3076
			zoom = inside ? Math.ceil(zoom / snap) * snap : Math.floor(zoom / snap) * snap;                                     // 3077
		}                                                                                                                    // 3078
                                                                                                                       // 3079
		return Math.max(min, Math.min(max, zoom));                                                                           // 3080
	},                                                                                                                    // 3081
                                                                                                                       // 3082
	// @method getSize(): Point                                                                                           // 3083
	// Returns the current size of the map container (in pixels).                                                         // 3084
	getSize: function () {                                                                                                // 3085
		if (!this._size || this._sizeChanged) {                                                                              // 3086
			this._size = new L.Point(                                                                                           // 3087
				this._container.clientWidth || 0,                                                                                  // 3088
				this._container.clientHeight || 0);                                                                                // 3089
                                                                                                                       // 3090
			this._sizeChanged = false;                                                                                          // 3091
		}                                                                                                                    // 3092
		return this._size.clone();                                                                                           // 3093
	},                                                                                                                    // 3094
                                                                                                                       // 3095
	// @method getPixelBounds(): Bounds                                                                                   // 3096
	// Returns the bounds of the current map view in projected pixel                                                      // 3097
	// coordinates (sometimes useful in layer and overlay implementations).                                               // 3098
	getPixelBounds: function (center, zoom) {                                                                             // 3099
		var topLeftPoint = this._getTopLeftPoint(center, zoom);                                                              // 3100
		return new L.Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));                                                 // 3101
	},                                                                                                                    // 3102
                                                                                                                       // 3103
	// TODO: Check semantics - isn't the pixel origin the 0,0 coord relative to                                           // 3104
	// the map pane? "left point of the map layer" can be confusing, specially                                            // 3105
	// since there can be negative offsets.                                                                               // 3106
	// @method getPixelOrigin(): Point                                                                                    // 3107
	// Returns the projected pixel coordinates of the top left point of                                                   // 3108
	// the map layer (useful in custom layer and overlay implementations).                                                // 3109
	getPixelOrigin: function () {                                                                                         // 3110
		this._checkIfLoaded();                                                                                               // 3111
		return this._pixelOrigin;                                                                                            // 3112
	},                                                                                                                    // 3113
                                                                                                                       // 3114
	// @method getPixelWorldBounds(zoom?: Number): Bounds                                                                 // 3115
	// Returns the world's bounds in pixel coordinates for zoom level `zoom`.                                             // 3116
	// If `zoom` is omitted, the map's current zoom level is used.                                                        // 3117
	getPixelWorldBounds: function (zoom) {                                                                                // 3118
		return this.options.crs.getProjectedBounds(zoom === undefined ? this.getZoom() : zoom);                              // 3119
	},                                                                                                                    // 3120
                                                                                                                       // 3121
	// @section Other Methods                                                                                             // 3122
                                                                                                                       // 3123
	// @method getPane(pane: String|HTMLElement): HTMLElement                                                             // 3124
	// Returns a [map pane](#map-pane), given its name or its HTML element (its identity).                                // 3125
	getPane: function (pane) {                                                                                            // 3126
		return typeof pane === 'string' ? this._panes[pane] : pane;                                                          // 3127
	},                                                                                                                    // 3128
                                                                                                                       // 3129
	// @method getPanes(): Object                                                                                         // 3130
	// Returns a plain object containing the names of all [panes](#map-pane) as keys and                                  // 3131
	// the panes as values.                                                                                               // 3132
	getPanes: function () {                                                                                               // 3133
		return this._panes;                                                                                                  // 3134
	},                                                                                                                    // 3135
                                                                                                                       // 3136
	// @method getContainer: HTMLElement                                                                                  // 3137
	// Returns the HTML element that contains the map.                                                                    // 3138
	getContainer: function () {                                                                                           // 3139
		return this._container;                                                                                              // 3140
	},                                                                                                                    // 3141
                                                                                                                       // 3142
                                                                                                                       // 3143
	// @section Conversion Methods                                                                                        // 3144
                                                                                                                       // 3145
	// @method getZoomScale(toZoom: Number, fromZoom: Number): Number                                                     // 3146
	// Returns the scale factor to be applied to a map transition from zoom level                                         // 3147
	// `fromZoom` to `toZoom`. Used internally to help with zoom animations.                                              // 3148
	getZoomScale: function (toZoom, fromZoom) {                                                                           // 3149
		// TODO replace with universal implementation after refactoring projections                                          // 3150
		var crs = this.options.crs;                                                                                          // 3151
		fromZoom = fromZoom === undefined ? this._zoom : fromZoom;                                                           // 3152
		return crs.scale(toZoom) / crs.scale(fromZoom);                                                                      // 3153
	},                                                                                                                    // 3154
                                                                                                                       // 3155
	// @method getScaleZoom(scale: Number, fromZoom: Number): Number                                                      // 3156
	// Returns the zoom level that the map would end up at, if it is at `fromZoom`                                        // 3157
	// level and everything is scaled by a factor of `scale`. Inverse of                                                  // 3158
	// [`getZoomScale`](#map-getZoomScale).                                                                               // 3159
	getScaleZoom: function (scale, fromZoom) {                                                                            // 3160
		var crs = this.options.crs;                                                                                          // 3161
		fromZoom = fromZoom === undefined ? this._zoom : fromZoom;                                                           // 3162
		var zoom = crs.zoom(scale * crs.scale(fromZoom));                                                                    // 3163
		return isNaN(zoom) ? Infinity : zoom;                                                                                // 3164
	},                                                                                                                    // 3165
                                                                                                                       // 3166
	// @method project(latlng: LatLng, zoom: Number): Point                                                               // 3167
	// Projects a geographical coordinate `LatLng` according to the projection                                            // 3168
	// of the map's CRS, then scales it according to `zoom` and the CRS's                                                 // 3169
	// `Transformation`. The result is pixel coordinate relative to                                                       // 3170
	// the CRS origin.                                                                                                    // 3171
	project: function (latlng, zoom) {                                                                                    // 3172
		zoom = zoom === undefined ? this._zoom : zoom;                                                                       // 3173
		return this.options.crs.latLngToPoint(L.latLng(latlng), zoom);                                                       // 3174
	},                                                                                                                    // 3175
                                                                                                                       // 3176
	// @method unproject(point: Point, zoom: Number): LatLng                                                              // 3177
	// Inverse of [`project`](#map-project).                                                                              // 3178
	unproject: function (point, zoom) {                                                                                   // 3179
		zoom = zoom === undefined ? this._zoom : zoom;                                                                       // 3180
		return this.options.crs.pointToLatLng(L.point(point), zoom);                                                         // 3181
	},                                                                                                                    // 3182
                                                                                                                       // 3183
	// @method layerPointToLatLng(point: Point): LatLng                                                                   // 3184
	// Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),                                      // 3185
	// returns the corresponding geographical coordinate (for the current zoom level).                                    // 3186
	layerPointToLatLng: function (point) {                                                                                // 3187
		var projectedPoint = L.point(point).add(this.getPixelOrigin());                                                      // 3188
		return this.unproject(projectedPoint);                                                                               // 3189
	},                                                                                                                    // 3190
                                                                                                                       // 3191
	// @method latLngToLayerPoint(latlng: LatLng): Point                                                                  // 3192
	// Given a geographical coordinate, returns the corresponding pixel coordinate                                        // 3193
	// relative to the [origin pixel](#map-getpixelorigin).                                                               // 3194
	latLngToLayerPoint: function (latlng) {                                                                               // 3195
		var projectedPoint = this.project(L.latLng(latlng))._round();                                                        // 3196
		return projectedPoint._subtract(this.getPixelOrigin());                                                              // 3197
	},                                                                                                                    // 3198
                                                                                                                       // 3199
	// @method wrapLatLng(latlng: LatLng): LatLng                                                                         // 3200
	// Returns a `LatLng` where `lat` and `lng` has been wrapped according to the                                         // 3201
	// map's CRS's `wrapLat` and `wrapLng` properties, if they are outside the                                            // 3202
	// CRS's bounds.                                                                                                      // 3203
	// By default this means longitude is wrapped around the dateline so its                                              // 3204
	// value is between -180 and +180 degrees.                                                                            // 3205
	wrapLatLng: function (latlng) {                                                                                       // 3206
		return this.options.crs.wrapLatLng(L.latLng(latlng));                                                                // 3207
	},                                                                                                                    // 3208
                                                                                                                       // 3209
	// @method wrapLatLngBounds(bounds: LatLngBounds): LatLngBounds                                                       // 3210
	// Returns a `LatLngBounds` with the same size as the given one, ensuring that                                        // 3211
	// its center is within the CRS's bounds.                                                                             // 3212
	// By default this means the center longitude is wrapped around the dateline so its                                   // 3213
	// value is between -180 and +180 degrees, and the majority of the bounds                                             // 3214
	// overlaps the CRS's bounds.                                                                                         // 3215
	wrapLatLngBounds: function (latlng) {                                                                                 // 3216
		return this.options.crs.wrapLatLngBounds(L.latLngBounds(latlng));                                                    // 3217
	},                                                                                                                    // 3218
                                                                                                                       // 3219
	// @method distance(latlng1: LatLng, latlng2: LatLng): Number                                                         // 3220
	// Returns the distance between two geographical coordinates according to                                             // 3221
	// the map's CRS. By default this measures distance in meters.                                                        // 3222
	distance: function (latlng1, latlng2) {                                                                               // 3223
		return this.options.crs.distance(L.latLng(latlng1), L.latLng(latlng2));                                              // 3224
	},                                                                                                                    // 3225
                                                                                                                       // 3226
	// @method containerPointToLayerPoint(point: Point): Point                                                            // 3227
	// Given a pixel coordinate relative to the map container, returns the corresponding                                  // 3228
	// pixel coordinate relative to the [origin pixel](#map-getpixelorigin).                                              // 3229
	containerPointToLayerPoint: function (point) { // (Point)                                                             // 3230
		return L.point(point).subtract(this._getMapPanePos());                                                               // 3231
	},                                                                                                                    // 3232
                                                                                                                       // 3233
	// @method layerPointToContainerPoint(point: Point): Point                                                            // 3234
	// Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),                                      // 3235
	// returns the corresponding pixel coordinate relative to the map container.                                          // 3236
	layerPointToContainerPoint: function (point) { // (Point)                                                             // 3237
		return L.point(point).add(this._getMapPanePos());                                                                    // 3238
	},                                                                                                                    // 3239
                                                                                                                       // 3240
	// @method containerPointToLatLng(point: Point): LatLng                                                               // 3241
	// Given a pixel coordinate relative to the map container, returns                                                    // 3242
	// the corresponding geographical coordinate (for the current zoom level).                                            // 3243
	containerPointToLatLng: function (point) {                                                                            // 3244
		var layerPoint = this.containerPointToLayerPoint(L.point(point));                                                    // 3245
		return this.layerPointToLatLng(layerPoint);                                                                          // 3246
	},                                                                                                                    // 3247
                                                                                                                       // 3248
	// @method latLngToContainerPoint(latlng: LatLng): Point                                                              // 3249
	// Given a geographical coordinate, returns the corresponding pixel coordinate                                        // 3250
	// relative to the map container.                                                                                     // 3251
	latLngToContainerPoint: function (latlng) {                                                                           // 3252
		return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(latlng)));                                   // 3253
	},                                                                                                                    // 3254
                                                                                                                       // 3255
	// @method mouseEventToContainerPoint(ev: MouseEvent): Point                                                          // 3256
	// Given a MouseEvent object, returns the pixel coordinate relative to the                                            // 3257
	// map container where the event took place.                                                                          // 3258
	mouseEventToContainerPoint: function (e) {                                                                            // 3259
		return L.DomEvent.getMousePosition(e, this._container);                                                              // 3260
	},                                                                                                                    // 3261
                                                                                                                       // 3262
	// @method mouseEventToLayerPoint(ev: MouseEvent): Point                                                              // 3263
	// Given a MouseEvent object, returns the pixel coordinate relative to                                                // 3264
	// the [origin pixel](#map-getpixelorigin) where the event took place.                                                // 3265
	mouseEventToLayerPoint: function (e) {                                                                                // 3266
		return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));                                          // 3267
	},                                                                                                                    // 3268
                                                                                                                       // 3269
	// @method mouseEventToLatLng(ev: MouseEvent): LatLng                                                                 // 3270
	// Given a MouseEvent object, returns geographical coordinate where the                                               // 3271
	// event took place.                                                                                                  // 3272
	mouseEventToLatLng: function (e) { // (MouseEvent)                                                                    // 3273
		return this.layerPointToLatLng(this.mouseEventToLayerPoint(e));                                                      // 3274
	},                                                                                                                    // 3275
                                                                                                                       // 3276
                                                                                                                       // 3277
	// map initialization methods                                                                                         // 3278
                                                                                                                       // 3279
	_initContainer: function (id) {                                                                                       // 3280
		var container = this._container = L.DomUtil.get(id);                                                                 // 3281
                                                                                                                       // 3282
		if (!container) {                                                                                                    // 3283
			throw new Error('Map container not found.');                                                                        // 3284
		} else if (container._leaflet_id) {                                                                                  // 3285
			throw new Error('Map container is already initialized.');                                                           // 3286
		}                                                                                                                    // 3287
                                                                                                                       // 3288
		L.DomEvent.addListener(container, 'scroll', this._onScroll, this);                                                   // 3289
		this._containerId = L.Util.stamp(container);                                                                         // 3290
	},                                                                                                                    // 3291
                                                                                                                       // 3292
	_initLayout: function () {                                                                                            // 3293
		var container = this._container;                                                                                     // 3294
                                                                                                                       // 3295
		this._fadeAnimated = this.options.fadeAnimation && L.Browser.any3d;                                                  // 3296
                                                                                                                       // 3297
		L.DomUtil.addClass(container, 'leaflet-container' +                                                                  // 3298
			(L.Browser.touch ? ' leaflet-touch' : '') +                                                                         // 3299
			(L.Browser.retina ? ' leaflet-retina' : '') +                                                                       // 3300
			(L.Browser.ielt9 ? ' leaflet-oldie' : '') +                                                                         // 3301
			(L.Browser.safari ? ' leaflet-safari' : '') +                                                                       // 3302
			(this._fadeAnimated ? ' leaflet-fade-anim' : ''));                                                                  // 3303
                                                                                                                       // 3304
		var position = L.DomUtil.getStyle(container, 'position');                                                            // 3305
                                                                                                                       // 3306
		if (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {                                    // 3307
			container.style.position = 'relative';                                                                              // 3308
		}                                                                                                                    // 3309
                                                                                                                       // 3310
		this._initPanes();                                                                                                   // 3311
                                                                                                                       // 3312
		if (this._initControlPos) {                                                                                          // 3313
			this._initControlPos();                                                                                             // 3314
		}                                                                                                                    // 3315
	},                                                                                                                    // 3316
                                                                                                                       // 3317
	_initPanes: function () {                                                                                             // 3318
		var panes = this._panes = {};                                                                                        // 3319
		this._paneRenderers = {};                                                                                            // 3320
                                                                                                                       // 3321
		// @section                                                                                                          // 3322
		//                                                                                                                   // 3323
		// Panes are DOM elements used to control the ordering of layers on the map. You                                     // 3324
		// can access panes with [`map.getPane`](#map-getpane) or                                                            // 3325
		// [`map.getPanes`](#map-getpanes) methods. New panes can be created with the                                        // 3326
		// [`map.createPane`](#map-createpane) method.                                                                       // 3327
		//                                                                                                                   // 3328
		// Every map has the following default panes that differ only in zIndex.                                             // 3329
		//                                                                                                                   // 3330
		// @pane mapPane: HTMLElement = 'auto'                                                                               // 3331
		// Pane that contains all other map panes                                                                            // 3332
                                                                                                                       // 3333
		this._mapPane = this.createPane('mapPane', this._container);                                                         // 3334
		L.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));                                                             // 3335
                                                                                                                       // 3336
		// @pane tilePane: HTMLElement = 200                                                                                 // 3337
		// Pane for `GridLayer`s and `TileLayer`s                                                                            // 3338
		this.createPane('tilePane');                                                                                         // 3339
		// @pane overlayPane: HTMLElement = 400                                                                              // 3340
		// Pane for vector overlays (`Path`s), like `Polyline`s and `Polygon`s                                               // 3341
		this.createPane('shadowPane');                                                                                       // 3342
		// @pane shadowPane: HTMLElement = 500                                                                               // 3343
		// Pane for overlay shadows (e.g. `Marker` shadows)                                                                  // 3344
		this.createPane('overlayPane');                                                                                      // 3345
		// @pane markerPane: HTMLElement = 600                                                                               // 3346
		// Pane for `Icon`s of `Marker`s                                                                                     // 3347
		this.createPane('markerPane');                                                                                       // 3348
		// @pane tooltipPane: HTMLElement = 650                                                                              // 3349
		// Pane for tooltip.                                                                                                 // 3350
		this.createPane('tooltipPane');                                                                                      // 3351
		// @pane popupPane: HTMLElement = 700                                                                                // 3352
		// Pane for `Popup`s.                                                                                                // 3353
		this.createPane('popupPane');                                                                                        // 3354
                                                                                                                       // 3355
		if (!this.options.markerZoomAnimation) {                                                                             // 3356
			L.DomUtil.addClass(panes.markerPane, 'leaflet-zoom-hide');                                                          // 3357
			L.DomUtil.addClass(panes.shadowPane, 'leaflet-zoom-hide');                                                          // 3358
		}                                                                                                                    // 3359
	},                                                                                                                    // 3360
                                                                                                                       // 3361
                                                                                                                       // 3362
	// private methods that modify map state                                                                              // 3363
                                                                                                                       // 3364
	// @section Map state change events                                                                                   // 3365
	_resetView: function (center, zoom) {                                                                                 // 3366
		L.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));                                                             // 3367
                                                                                                                       // 3368
		var loading = !this._loaded;                                                                                         // 3369
		this._loaded = true;                                                                                                 // 3370
		zoom = this._limitZoom(zoom);                                                                                        // 3371
                                                                                                                       // 3372
		this.fire('viewprereset');                                                                                           // 3373
                                                                                                                       // 3374
		var zoomChanged = this._zoom !== zoom;                                                                               // 3375
		this                                                                                                                 // 3376
			._moveStart(zoomChanged)                                                                                            // 3377
			._move(center, zoom)                                                                                                // 3378
			._moveEnd(zoomChanged);                                                                                             // 3379
                                                                                                                       // 3380
		// @event viewreset: Event                                                                                           // 3381
		// Fired when the map needs to redraw its content (this usually happens                                              // 3382
		// on map zoom or load). Very useful for creating custom overlays.                                                   // 3383
		this.fire('viewreset');                                                                                              // 3384
                                                                                                                       // 3385
		// @event load: Event                                                                                                // 3386
		// Fired when the map is initialized (when its center and zoom are set                                               // 3387
		// for the first time).                                                                                              // 3388
		if (loading) {                                                                                                       // 3389
			this.fire('load');                                                                                                  // 3390
		}                                                                                                                    // 3391
	},                                                                                                                    // 3392
                                                                                                                       // 3393
	_moveStart: function (zoomChanged) {                                                                                  // 3394
		// @event zoomstart: Event                                                                                           // 3395
		// Fired when the map zoom is about to change (e.g. before zoom animation).                                          // 3396
		// @event movestart: Event                                                                                           // 3397
		// Fired when the view of the map starts changing (e.g. user starts dragging the map).                               // 3398
		if (zoomChanged) {                                                                                                   // 3399
			this.fire('zoomstart');                                                                                             // 3400
		}                                                                                                                    // 3401
		return this.fire('movestart');                                                                                       // 3402
	},                                                                                                                    // 3403
                                                                                                                       // 3404
	_move: function (center, zoom, data) {                                                                                // 3405
		if (zoom === undefined) {                                                                                            // 3406
			zoom = this._zoom;                                                                                                  // 3407
		}                                                                                                                    // 3408
		var zoomChanged = this._zoom !== zoom;                                                                               // 3409
                                                                                                                       // 3410
		this._zoom = zoom;                                                                                                   // 3411
		this._lastCenter = center;                                                                                           // 3412
		this._pixelOrigin = this._getNewPixelOrigin(center);                                                                 // 3413
                                                                                                                       // 3414
		// @event zoom: Event                                                                                                // 3415
		// Fired repeatedly during any change in zoom level, including zoom                                                  // 3416
		// and fly animations.                                                                                               // 3417
		if (zoomChanged || (data && data.pinch)) {	// Always fire 'zoom' if pinching because #3530                           // 3418
			this.fire('zoom', data);                                                                                            // 3419
		}                                                                                                                    // 3420
                                                                                                                       // 3421
		// @event move: Event                                                                                                // 3422
		// Fired repeatedly during any movement of the map, including pan and                                                // 3423
		// fly animations.                                                                                                   // 3424
		return this.fire('move', data);                                                                                      // 3425
	},                                                                                                                    // 3426
                                                                                                                       // 3427
	_moveEnd: function (zoomChanged) {                                                                                    // 3428
		// @event zoomend: Event                                                                                             // 3429
		// Fired when the map has changed, after any animations.                                                             // 3430
		if (zoomChanged) {                                                                                                   // 3431
			this.fire('zoomend');                                                                                               // 3432
		}                                                                                                                    // 3433
                                                                                                                       // 3434
		// @event moveend: Event                                                                                             // 3435
		// Fired when the center of the map stops changing (e.g. user stopped                                                // 3436
		// dragging the map).                                                                                                // 3437
		return this.fire('moveend');                                                                                         // 3438
	},                                                                                                                    // 3439
                                                                                                                       // 3440
	_stop: function () {                                                                                                  // 3441
		L.Util.cancelAnimFrame(this._flyToFrame);                                                                            // 3442
		if (this._panAnim) {                                                                                                 // 3443
			this._panAnim.stop();                                                                                               // 3444
		}                                                                                                                    // 3445
		return this;                                                                                                         // 3446
	},                                                                                                                    // 3447
                                                                                                                       // 3448
	_rawPanBy: function (offset) {                                                                                        // 3449
		L.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(offset));                                        // 3450
	},                                                                                                                    // 3451
                                                                                                                       // 3452
	_getZoomSpan: function () {                                                                                           // 3453
		return this.getMaxZoom() - this.getMinZoom();                                                                        // 3454
	},                                                                                                                    // 3455
                                                                                                                       // 3456
	_panInsideMaxBounds: function () {                                                                                    // 3457
		if (!this._enforcingBounds) {                                                                                        // 3458
			this.panInsideBounds(this.options.maxBounds);                                                                       // 3459
		}                                                                                                                    // 3460
	},                                                                                                                    // 3461
                                                                                                                       // 3462
	_checkIfLoaded: function () {                                                                                         // 3463
		if (!this._loaded) {                                                                                                 // 3464
			throw new Error('Set map center and zoom first.');                                                                  // 3465
		}                                                                                                                    // 3466
	},                                                                                                                    // 3467
                                                                                                                       // 3468
	// DOM event handling                                                                                                 // 3469
                                                                                                                       // 3470
	// @section Interaction events                                                                                        // 3471
	_initEvents: function (remove) {                                                                                      // 3472
		if (!L.DomEvent) { return; }                                                                                         // 3473
                                                                                                                       // 3474
		this._targets = {};                                                                                                  // 3475
		this._targets[L.stamp(this._container)] = this;                                                                      // 3476
                                                                                                                       // 3477
		var onOff = remove ? 'off' : 'on';                                                                                   // 3478
                                                                                                                       // 3479
		// @event click: MouseEvent                                                                                          // 3480
		// Fired when the user clicks (or taps) the map.                                                                     // 3481
		// @event dblclick: MouseEvent                                                                                       // 3482
		// Fired when the user double-clicks (or double-taps) the map.                                                       // 3483
		// @event mousedown: MouseEvent                                                                                      // 3484
		// Fired when the user pushes the mouse button on the map.                                                           // 3485
		// @event mouseup: MouseEvent                                                                                        // 3486
		// Fired when the user releases the mouse button on the map.                                                         // 3487
		// @event mouseover: MouseEvent                                                                                      // 3488
		// Fired when the mouse enters the map.                                                                              // 3489
		// @event mouseout: MouseEvent                                                                                       // 3490
		// Fired when the mouse leaves the map.                                                                              // 3491
		// @event mousemove: MouseEvent                                                                                      // 3492
		// Fired while the mouse moves over the map.                                                                         // 3493
		// @event contextmenu: MouseEvent                                                                                    // 3494
		// Fired when the user pushes the right mouse button on the map, prevents                                            // 3495
		// default browser context menu from showing if there are listeners on                                               // 3496
		// this event. Also fired on mobile when the user holds a single touch                                               // 3497
		// for a second (also called long press).                                                                            // 3498
		// @event keypress: KeyboardEvent                                                                                    // 3499
		// Fired when the user presses a key from the keyboard while the map is focused.                                     // 3500
		L.DomEvent[onOff](this._container, 'click dblclick mousedown mouseup ' +                                             // 3501
			'mouseover mouseout mousemove contextmenu keypress', this._handleDOMEvent, this);                                   // 3502
                                                                                                                       // 3503
		if (this.options.trackResize) {                                                                                      // 3504
			L.DomEvent[onOff](window, 'resize', this._onResize, this);                                                          // 3505
		}                                                                                                                    // 3506
                                                                                                                       // 3507
		if (L.Browser.any3d && this.options.transform3DLimit) {                                                              // 3508
			this[onOff]('moveend', this._onMoveEnd);                                                                            // 3509
		}                                                                                                                    // 3510
	},                                                                                                                    // 3511
                                                                                                                       // 3512
	_onResize: function () {                                                                                              // 3513
		L.Util.cancelAnimFrame(this._resizeRequest);                                                                         // 3514
		this._resizeRequest = L.Util.requestAnimFrame(                                                                       // 3515
		        function () { this.invalidateSize({debounceMoveend: true}); }, this);                                        // 3516
	},                                                                                                                    // 3517
                                                                                                                       // 3518
	_onScroll: function () {                                                                                              // 3519
		this._container.scrollTop  = 0;                                                                                      // 3520
		this._container.scrollLeft = 0;                                                                                      // 3521
	},                                                                                                                    // 3522
                                                                                                                       // 3523
	_onMoveEnd: function () {                                                                                             // 3524
		var pos = this._getMapPanePos();                                                                                     // 3525
		if (Math.max(Math.abs(pos.x), Math.abs(pos.y)) >= this.options.transform3DLimit) {                                   // 3526
			// https://bugzilla.mozilla.org/show_bug.cgi?id=1203873 but Webkit also have                                        // 3527
			// a pixel offset on very high values, see: http://jsfiddle.net/dg6r5hhb/                                           // 3528
			this._resetView(this.getCenter(), this.getZoom());                                                                  // 3529
		}                                                                                                                    // 3530
	},                                                                                                                    // 3531
                                                                                                                       // 3532
	_findEventTargets: function (e, type) {                                                                               // 3533
		var targets = [],                                                                                                    // 3534
		    target,                                                                                                          // 3535
		    isHover = type === 'mouseout' || type === 'mouseover',                                                           // 3536
		    src = e.target || e.srcElement,                                                                                  // 3537
		    dragging = false;                                                                                                // 3538
                                                                                                                       // 3539
		while (src) {                                                                                                        // 3540
			target = this._targets[L.stamp(src)];                                                                               // 3541
			if (target && (type === 'click' || type === 'preclick') && !e._simulated && this._draggableMoved(target)) {         // 3542
				// Prevent firing click after you just dragged an object.                                                          // 3543
				dragging = true;                                                                                                   // 3544
				break;                                                                                                             // 3545
			}                                                                                                                   // 3546
			if (target && target.listens(type, true)) {                                                                         // 3547
				if (isHover && !L.DomEvent._isExternalTarget(src, e)) { break; }                                                   // 3548
				targets.push(target);                                                                                              // 3549
				if (isHover) { break; }                                                                                            // 3550
			}                                                                                                                   // 3551
			if (src === this._container) { break; }                                                                             // 3552
			src = src.parentNode;                                                                                               // 3553
		}                                                                                                                    // 3554
		if (!targets.length && !dragging && !isHover && L.DomEvent._isExternalTarget(src, e)) {                              // 3555
			targets = [this];                                                                                                   // 3556
		}                                                                                                                    // 3557
		return targets;                                                                                                      // 3558
	},                                                                                                                    // 3559
                                                                                                                       // 3560
	_handleDOMEvent: function (e) {                                                                                       // 3561
		if (!this._loaded || L.DomEvent._skipped(e)) { return; }                                                             // 3562
                                                                                                                       // 3563
		var type = e.type === 'keypress' && e.keyCode === 13 ? 'click' : e.type;                                             // 3564
                                                                                                                       // 3565
		if (type === 'mousedown') {                                                                                          // 3566
			// prevents outline when clicking on keyboard-focusable element                                                     // 3567
			L.DomUtil.preventOutline(e.target || e.srcElement);                                                                 // 3568
		}                                                                                                                    // 3569
                                                                                                                       // 3570
		this._fireDOMEvent(e, type);                                                                                         // 3571
	},                                                                                                                    // 3572
                                                                                                                       // 3573
	_fireDOMEvent: function (e, type, targets) {                                                                          // 3574
                                                                                                                       // 3575
		if (e.type === 'click') {                                                                                            // 3576
			// Fire a synthetic 'preclick' event which propagates up (mainly for closing popups).                               // 3577
			// @event preclick: MouseEvent                                                                                      // 3578
			// Fired before mouse click on the map (sometimes useful when you                                                   // 3579
			// want something to happen on click before any existing click                                                      // 3580
			// handlers start running).                                                                                         // 3581
			var synth = L.Util.extend({}, e);                                                                                   // 3582
			synth.type = 'preclick';                                                                                            // 3583
			this._fireDOMEvent(synth, synth.type, targets);                                                                     // 3584
		}                                                                                                                    // 3585
                                                                                                                       // 3586
		if (e._stopped) { return; }                                                                                          // 3587
                                                                                                                       // 3588
		// Find the layer the event is propagating from and its parents.                                                     // 3589
		targets = (targets || []).concat(this._findEventTargets(e, type));                                                   // 3590
                                                                                                                       // 3591
		if (!targets.length) { return; }                                                                                     // 3592
                                                                                                                       // 3593
		var target = targets[0];                                                                                             // 3594
		if (type === 'contextmenu' && target.listens(type, true)) {                                                          // 3595
			L.DomEvent.preventDefault(e);                                                                                       // 3596
		}                                                                                                                    // 3597
                                                                                                                       // 3598
		var data = {                                                                                                         // 3599
			originalEvent: e                                                                                                    // 3600
		};                                                                                                                   // 3601
                                                                                                                       // 3602
		if (e.type !== 'keypress') {                                                                                         // 3603
			var isMarker = target instanceof L.Marker;                                                                          // 3604
			data.containerPoint = isMarker ?                                                                                    // 3605
					this.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);                             // 3606
			data.layerPoint = this.containerPointToLayerPoint(data.containerPoint);                                             // 3607
			data.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);                             // 3608
		}                                                                                                                    // 3609
                                                                                                                       // 3610
		for (var i = 0; i < targets.length; i++) {                                                                           // 3611
			targets[i].fire(type, data, true);                                                                                  // 3612
			if (data.originalEvent._stopped ||                                                                                  // 3613
				(targets[i].options.nonBubblingEvents && L.Util.indexOf(targets[i].options.nonBubblingEvents, type) !== -1)) { return; }
		}                                                                                                                    // 3615
	},                                                                                                                    // 3616
                                                                                                                       // 3617
	_draggableMoved: function (obj) {                                                                                     // 3618
		obj = obj.dragging && obj.dragging.enabled() ? obj : this;                                                           // 3619
		return (obj.dragging && obj.dragging.moved()) || (this.boxZoom && this.boxZoom.moved());                             // 3620
	},                                                                                                                    // 3621
                                                                                                                       // 3622
	_clearHandlers: function () {                                                                                         // 3623
		for (var i = 0, len = this._handlers.length; i < len; i++) {                                                         // 3624
			this._handlers[i].disable();                                                                                        // 3625
		}                                                                                                                    // 3626
	},                                                                                                                    // 3627
                                                                                                                       // 3628
	// @section Other Methods                                                                                             // 3629
                                                                                                                       // 3630
	// @method whenReady(fn: Function, context?: Object): this                                                            // 3631
	// Runs the given function `fn` when the map gets initialized with                                                    // 3632
	// a view (center and zoom) and at least one layer, or immediately                                                    // 3633
	// if it's already initialized, optionally passing a function context.                                                // 3634
	whenReady: function (callback, context) {                                                                             // 3635
		if (this._loaded) {                                                                                                  // 3636
			callback.call(context || this, {target: this});                                                                     // 3637
		} else {                                                                                                             // 3638
			this.on('load', callback, context);                                                                                 // 3639
		}                                                                                                                    // 3640
		return this;                                                                                                         // 3641
	},                                                                                                                    // 3642
                                                                                                                       // 3643
                                                                                                                       // 3644
	// private methods for getting map state                                                                              // 3645
                                                                                                                       // 3646
	_getMapPanePos: function () {                                                                                         // 3647
		return L.DomUtil.getPosition(this._mapPane) || new L.Point(0, 0);                                                    // 3648
	},                                                                                                                    // 3649
                                                                                                                       // 3650
	_moved: function () {                                                                                                 // 3651
		var pos = this._getMapPanePos();                                                                                     // 3652
		return pos && !pos.equals([0, 0]);                                                                                   // 3653
	},                                                                                                                    // 3654
                                                                                                                       // 3655
	_getTopLeftPoint: function (center, zoom) {                                                                           // 3656
		var pixelOrigin = center && zoom !== undefined ?                                                                     // 3657
			this._getNewPixelOrigin(center, zoom) :                                                                             // 3658
			this.getPixelOrigin();                                                                                              // 3659
		return pixelOrigin.subtract(this._getMapPanePos());                                                                  // 3660
	},                                                                                                                    // 3661
                                                                                                                       // 3662
	_getNewPixelOrigin: function (center, zoom) {                                                                         // 3663
		var viewHalf = this.getSize()._divideBy(2);                                                                          // 3664
		return this.project(center, zoom)._subtract(viewHalf)._add(this._getMapPanePos())._round();                          // 3665
	},                                                                                                                    // 3666
                                                                                                                       // 3667
	_latLngToNewLayerPoint: function (latlng, zoom, center) {                                                             // 3668
		var topLeft = this._getNewPixelOrigin(center, zoom);                                                                 // 3669
		return this.project(latlng, zoom)._subtract(topLeft);                                                                // 3670
	},                                                                                                                    // 3671
                                                                                                                       // 3672
	_latLngBoundsToNewLayerBounds: function (latLngBounds, zoom, center) {                                                // 3673
		var topLeft = this._getNewPixelOrigin(center, zoom);                                                                 // 3674
		return L.bounds([                                                                                                    // 3675
			this.project(latLngBounds.getSouthWest(), zoom)._subtract(topLeft),                                                 // 3676
			this.project(latLngBounds.getNorthWest(), zoom)._subtract(topLeft),                                                 // 3677
			this.project(latLngBounds.getSouthEast(), zoom)._subtract(topLeft),                                                 // 3678
			this.project(latLngBounds.getNorthEast(), zoom)._subtract(topLeft)                                                  // 3679
		]);                                                                                                                  // 3680
	},                                                                                                                    // 3681
                                                                                                                       // 3682
	// layer point of the current center                                                                                  // 3683
	_getCenterLayerPoint: function () {                                                                                   // 3684
		return this.containerPointToLayerPoint(this.getSize()._divideBy(2));                                                 // 3685
	},                                                                                                                    // 3686
                                                                                                                       // 3687
	// offset of the specified place to the current center in pixels                                                      // 3688
	_getCenterOffset: function (latlng) {                                                                                 // 3689
		return this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());                                        // 3690
	},                                                                                                                    // 3691
                                                                                                                       // 3692
	// adjust center for view to get inside bounds                                                                        // 3693
	_limitCenter: function (center, zoom, bounds) {                                                                       // 3694
                                                                                                                       // 3695
		if (!bounds) { return center; }                                                                                      // 3696
                                                                                                                       // 3697
		var centerPoint = this.project(center, zoom),                                                                        // 3698
		    viewHalf = this.getSize().divideBy(2),                                                                           // 3699
		    viewBounds = new L.Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),                            // 3700
		    offset = this._getBoundsOffset(viewBounds, bounds, zoom);                                                        // 3701
                                                                                                                       // 3702
		// If offset is less than a pixel, ignore.                                                                           // 3703
		// This prevents unstable projections from getting into                                                              // 3704
		// an infinite loop of tiny offsets.                                                                                 // 3705
		if (offset.round().equals([0, 0])) {                                                                                 // 3706
			return center;                                                                                                      // 3707
		}                                                                                                                    // 3708
                                                                                                                       // 3709
		return this.unproject(centerPoint.add(offset), zoom);                                                                // 3710
	},                                                                                                                    // 3711
                                                                                                                       // 3712
	// adjust offset for view to get inside bounds                                                                        // 3713
	_limitOffset: function (offset, bounds) {                                                                             // 3714
		if (!bounds) { return offset; }                                                                                      // 3715
                                                                                                                       // 3716
		var viewBounds = this.getPixelBounds(),                                                                              // 3717
		    newBounds = new L.Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));                                // 3718
                                                                                                                       // 3719
		return offset.add(this._getBoundsOffset(newBounds, bounds));                                                         // 3720
	},                                                                                                                    // 3721
                                                                                                                       // 3722
	// returns offset needed for pxBounds to get inside maxBounds at a specified zoom                                     // 3723
	_getBoundsOffset: function (pxBounds, maxBounds, zoom) {                                                              // 3724
		var projectedMaxBounds = L.bounds(                                                                                   // 3725
		        this.project(maxBounds.getNorthEast(), zoom),                                                                // 3726
		        this.project(maxBounds.getSouthWest(), zoom)                                                                 // 3727
		    ),                                                                                                               // 3728
		    minOffset = projectedMaxBounds.min.subtract(pxBounds.min),                                                       // 3729
		    maxOffset = projectedMaxBounds.max.subtract(pxBounds.max),                                                       // 3730
                                                                                                                       // 3731
		    dx = this._rebound(minOffset.x, -maxOffset.x),                                                                   // 3732
		    dy = this._rebound(minOffset.y, -maxOffset.y);                                                                   // 3733
                                                                                                                       // 3734
		return new L.Point(dx, dy);                                                                                          // 3735
	},                                                                                                                    // 3736
                                                                                                                       // 3737
	_rebound: function (left, right) {                                                                                    // 3738
		return left + right > 0 ?                                                                                            // 3739
			Math.round(left - right) / 2 :                                                                                      // 3740
			Math.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));                                                      // 3741
	},                                                                                                                    // 3742
                                                                                                                       // 3743
	_limitZoom: function (zoom) {                                                                                         // 3744
		var min = this.getMinZoom(),                                                                                         // 3745
		    max = this.getMaxZoom(),                                                                                         // 3746
		    snap = L.Browser.any3d ? this.options.zoomSnap : 1;                                                              // 3747
		if (snap) {                                                                                                          // 3748
			zoom = Math.round(zoom / snap) * snap;                                                                              // 3749
		}                                                                                                                    // 3750
		return Math.max(min, Math.min(max, zoom));                                                                           // 3751
	},                                                                                                                    // 3752
                                                                                                                       // 3753
	_onPanTransitionStep: function () {                                                                                   // 3754
		this.fire('move');                                                                                                   // 3755
	},                                                                                                                    // 3756
                                                                                                                       // 3757
	_onPanTransitionEnd: function () {                                                                                    // 3758
		L.DomUtil.removeClass(this._mapPane, 'leaflet-pan-anim');                                                            // 3759
		this.fire('moveend');                                                                                                // 3760
	},                                                                                                                    // 3761
                                                                                                                       // 3762
	_tryAnimatedPan: function (center, options) {                                                                         // 3763
		// difference between the new and current centers in pixels                                                          // 3764
		var offset = this._getCenterOffset(center)._floor();                                                                 // 3765
                                                                                                                       // 3766
		// don't animate too far unless animate: true specified in options                                                   // 3767
		if ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }                     // 3768
                                                                                                                       // 3769
		this.panBy(offset, options);                                                                                         // 3770
                                                                                                                       // 3771
		return true;                                                                                                         // 3772
	},                                                                                                                    // 3773
                                                                                                                       // 3774
	_createAnimProxy: function () {                                                                                       // 3775
                                                                                                                       // 3776
		var proxy = this._proxy = L.DomUtil.create('div', 'leaflet-proxy leaflet-zoom-animated');                            // 3777
		this._panes.mapPane.appendChild(proxy);                                                                              // 3778
                                                                                                                       // 3779
		this.on('zoomanim', function (e) {                                                                                   // 3780
			var prop = L.DomUtil.TRANSFORM,                                                                                     // 3781
			    transform = proxy.style[prop];                                                                                  // 3782
                                                                                                                       // 3783
			L.DomUtil.setTransform(proxy, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1));                        // 3784
                                                                                                                       // 3785
			// workaround for case when transform is the same and so transitionend event is not fired                           // 3786
			if (transform === proxy.style[prop] && this._animatingZoom) {                                                       // 3787
				this._onZoomTransitionEnd();                                                                                       // 3788
			}                                                                                                                   // 3789
		}, this);                                                                                                            // 3790
                                                                                                                       // 3791
		this.on('load moveend', function () {                                                                                // 3792
			var c = this.getCenter(),                                                                                           // 3793
			    z = this.getZoom();                                                                                             // 3794
			L.DomUtil.setTransform(proxy, this.project(c, z), this.getZoomScale(z, 1));                                         // 3795
		}, this);                                                                                                            // 3796
	},                                                                                                                    // 3797
                                                                                                                       // 3798
	_catchTransitionEnd: function (e) {                                                                                   // 3799
		if (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {                                               // 3800
			this._onZoomTransitionEnd();                                                                                        // 3801
		}                                                                                                                    // 3802
	},                                                                                                                    // 3803
                                                                                                                       // 3804
	_nothingToAnimate: function () {                                                                                      // 3805
		return !this._container.getElementsByClassName('leaflet-zoom-animated').length;                                      // 3806
	},                                                                                                                    // 3807
                                                                                                                       // 3808
	_tryAnimatedZoom: function (center, zoom, options) {                                                                  // 3809
                                                                                                                       // 3810
		if (this._animatingZoom) { return true; }                                                                            // 3811
                                                                                                                       // 3812
		options = options || {};                                                                                             // 3813
                                                                                                                       // 3814
		// don't animate if disabled, not supported or zoom difference is too large                                          // 3815
		if (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||                                  // 3816
		        Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }                         // 3817
                                                                                                                       // 3818
		// offset is the pixel coords of the zoom origin relative to the current center                                      // 3819
		var scale = this.getZoomScale(zoom),                                                                                 // 3820
		    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale);                                                 // 3821
                                                                                                                       // 3822
		// don't animate if the zoom origin isn't within one screen from the current center, unless forced                   // 3823
		if (options.animate !== true && !this.getSize().contains(offset)) { return false; }                                  // 3824
                                                                                                                       // 3825
		L.Util.requestAnimFrame(function () {                                                                                // 3826
			this                                                                                                                // 3827
			    ._moveStart(true)                                                                                               // 3828
			    ._animateZoom(center, zoom, true);                                                                              // 3829
		}, this);                                                                                                            // 3830
                                                                                                                       // 3831
		return true;                                                                                                         // 3832
	},                                                                                                                    // 3833
                                                                                                                       // 3834
	_animateZoom: function (center, zoom, startAnim, noUpdate) {                                                          // 3835
		if (startAnim) {                                                                                                     // 3836
			this._animatingZoom = true;                                                                                         // 3837
                                                                                                                       // 3838
			// remember what center/zoom to set after animation                                                                 // 3839
			this._animateToCenter = center;                                                                                     // 3840
			this._animateToZoom = zoom;                                                                                         // 3841
                                                                                                                       // 3842
			L.DomUtil.addClass(this._mapPane, 'leaflet-zoom-anim');                                                             // 3843
		}                                                                                                                    // 3844
                                                                                                                       // 3845
		// @event zoomanim: ZoomAnimEvent                                                                                    // 3846
		// Fired on every frame of a zoom animation                                                                          // 3847
		this.fire('zoomanim', {                                                                                              // 3848
			center: center,                                                                                                     // 3849
			zoom: zoom,                                                                                                         // 3850
			noUpdate: noUpdate                                                                                                  // 3851
		});                                                                                                                  // 3852
                                                                                                                       // 3853
		// Work around webkit not firing 'transitionend', see https://github.com/Leaflet/Leaflet/issues/3689, 2693           // 3854
		setTimeout(L.bind(this._onZoomTransitionEnd, this), 250);                                                            // 3855
	},                                                                                                                    // 3856
                                                                                                                       // 3857
	_onZoomTransitionEnd: function () {                                                                                   // 3858
		if (!this._animatingZoom) { return; }                                                                                // 3859
                                                                                                                       // 3860
		L.DomUtil.removeClass(this._mapPane, 'leaflet-zoom-anim');                                                           // 3861
                                                                                                                       // 3862
		this._animatingZoom = false;                                                                                         // 3863
                                                                                                                       // 3864
		this._move(this._animateToCenter, this._animateToZoom);                                                              // 3865
                                                                                                                       // 3866
		// This anim frame should prevent an obscure iOS webkit tile loading race condition.                                 // 3867
		L.Util.requestAnimFrame(function () {                                                                                // 3868
			this._moveEnd(true);                                                                                                // 3869
		}, this);                                                                                                            // 3870
	}                                                                                                                     // 3871
});                                                                                                                    // 3872
                                                                                                                       // 3873
// @section                                                                                                            // 3874
                                                                                                                       // 3875
// @factory L.map(id: String, options?: Map options)                                                                   // 3876
// Instantiates a map object given the DOM ID of a `<div>` element                                                     // 3877
// and optionally an object literal with `Map options`.                                                                // 3878
//                                                                                                                     // 3879
// @alternative                                                                                                        // 3880
// @factory L.map(el: HTMLElement, options?: Map options)                                                              // 3881
// Instantiates a map object given an instance of a `<div>` HTML element                                               // 3882
// and optionally an object literal with `Map options`.                                                                // 3883
L.map = function (id, options) {                                                                                       // 3884
	return new L.Map(id, options);                                                                                        // 3885
};                                                                                                                     // 3886
                                                                                                                       // 3887
                                                                                                                       // 3888
                                                                                                                       // 3889
                                                                                                                       // 3890
/*                                                                                                                     // 3891
 * @class Layer                                                                                                        // 3892
 * @inherits Evented                                                                                                   // 3893
 * @aka L.Layer                                                                                                        // 3894
 * @aka ILayer                                                                                                         // 3895
 *                                                                                                                     // 3896
 * A set of methods from the Layer base class that all Leaflet layers use.                                             // 3897
 * Inherits all methods, options and events from `L.Evented`.                                                          // 3898
 *                                                                                                                     // 3899
 * @example                                                                                                            // 3900
 *                                                                                                                     // 3901
 * ```js                                                                                                               // 3902
 * var layer = L.Marker(latlng).addTo(map);                                                                            // 3903
 * layer.addTo(map);                                                                                                   // 3904
 * layer.remove();                                                                                                     // 3905
 * ```                                                                                                                 // 3906
 *                                                                                                                     // 3907
 * @event add: Event                                                                                                   // 3908
 * Fired after the layer is added to a map                                                                             // 3909
 *                                                                                                                     // 3910
 * @event remove: Event                                                                                                // 3911
 * Fired after the layer is removed from a map                                                                         // 3912
 */                                                                                                                    // 3913
                                                                                                                       // 3914
                                                                                                                       // 3915
L.Layer = L.Evented.extend({                                                                                           // 3916
                                                                                                                       // 3917
	// Classes extending `L.Layer` will inherit the following options:                                                    // 3918
	options: {                                                                                                            // 3919
		// @option pane: String = 'overlayPane'                                                                              // 3920
		// By default the layer will be added to the map's [overlay pane](#map-overlaypane). Overriding this option will cause the layer to be placed on another pane by default.
		pane: 'overlayPane',                                                                                                 // 3922
		nonBubblingEvents: [],  // Array of events that should not be bubbled to DOM parents (like the map),                 // 3923
                                                                                                                       // 3924
		// @option attribution: String = null                                                                                // 3925
		// String to be shown in the attribution control, describes the layer data, e.g. "© Mapbox".                         // 3926
		attribution: null                                                                                                    // 3927
	},                                                                                                                    // 3928
                                                                                                                       // 3929
	/* @section                                                                                                           // 3930
	 * Classes extending `L.Layer` will inherit the following methods:                                                    // 3931
	 *                                                                                                                    // 3932
	 * @method addTo(map: Map): this                                                                                      // 3933
	 * Adds the layer to the given map                                                                                    // 3934
	 */                                                                                                                   // 3935
	addTo: function (map) {                                                                                               // 3936
		map.addLayer(this);                                                                                                  // 3937
		return this;                                                                                                         // 3938
	},                                                                                                                    // 3939
                                                                                                                       // 3940
	// @method remove: this                                                                                               // 3941
	// Removes the layer from the map it is currently active on.                                                          // 3942
	remove: function () {                                                                                                 // 3943
		return this.removeFrom(this._map || this._mapToAdd);                                                                 // 3944
	},                                                                                                                    // 3945
                                                                                                                       // 3946
	// @method removeFrom(map: Map): this                                                                                 // 3947
	// Removes the layer from the given map                                                                               // 3948
	removeFrom: function (obj) {                                                                                          // 3949
		if (obj) {                                                                                                           // 3950
			obj.removeLayer(this);                                                                                              // 3951
		}                                                                                                                    // 3952
		return this;                                                                                                         // 3953
	},                                                                                                                    // 3954
                                                                                                                       // 3955
	// @method getPane(name? : String): HTMLElement                                                                       // 3956
	// Returns the `HTMLElement` representing the named pane on the map. If `name` is omitted, returns the pane for this layer.
	getPane: function (name) {                                                                                            // 3958
		return this._map.getPane(name ? (this.options[name] || name) : this.options.pane);                                   // 3959
	},                                                                                                                    // 3960
                                                                                                                       // 3961
	addInteractiveTarget: function (targetEl) {                                                                           // 3962
		this._map._targets[L.stamp(targetEl)] = this;                                                                        // 3963
		return this;                                                                                                         // 3964
	},                                                                                                                    // 3965
                                                                                                                       // 3966
	removeInteractiveTarget: function (targetEl) {                                                                        // 3967
		delete this._map._targets[L.stamp(targetEl)];                                                                        // 3968
		return this;                                                                                                         // 3969
	},                                                                                                                    // 3970
                                                                                                                       // 3971
	// @method getAttribution: String                                                                                     // 3972
	// Used by the `attribution control`, returns the [attribution option](#gridlayer-attribution).                       // 3973
	getAttribution: function () {                                                                                         // 3974
		return this.options.attribution;                                                                                     // 3975
	},                                                                                                                    // 3976
                                                                                                                       // 3977
	_layerAdd: function (e) {                                                                                             // 3978
		var map = e.target;                                                                                                  // 3979
                                                                                                                       // 3980
		// check in case layer gets added and then removed before the map is ready                                           // 3981
		if (!map.hasLayer(this)) { return; }                                                                                 // 3982
                                                                                                                       // 3983
		this._map = map;                                                                                                     // 3984
		this._zoomAnimated = map._zoomAnimated;                                                                              // 3985
                                                                                                                       // 3986
		if (this.getEvents) {                                                                                                // 3987
			var events = this.getEvents();                                                                                      // 3988
			map.on(events, this);                                                                                               // 3989
			this.once('remove', function () {                                                                                   // 3990
				map.off(events, this);                                                                                             // 3991
			}, this);                                                                                                           // 3992
		}                                                                                                                    // 3993
                                                                                                                       // 3994
		this.onAdd(map);                                                                                                     // 3995
                                                                                                                       // 3996
		if (this.getAttribution && map.attributionControl) {                                                                 // 3997
			map.attributionControl.addAttribution(this.getAttribution());                                                       // 3998
		}                                                                                                                    // 3999
                                                                                                                       // 4000
		this.fire('add');                                                                                                    // 4001
		map.fire('layeradd', {layer: this});                                                                                 // 4002
	}                                                                                                                     // 4003
});                                                                                                                    // 4004
                                                                                                                       // 4005
/* @section Extension methods                                                                                          // 4006
 * @uninheritable                                                                                                      // 4007
 *                                                                                                                     // 4008
 * Every layer should extend from `L.Layer` and (re-)implement the following methods.                                  // 4009
 *                                                                                                                     // 4010
 * @method onAdd(map: Map): this                                                                                       // 4011
 * Should contain code that creates DOM elements for the layer, adds them to `map panes` where they should belong and puts listeners on relevant map events. Called on [`map.addLayer(layer)`](#map-addlayer).
 *                                                                                                                     // 4013
 * @method onRemove(map: Map): this                                                                                    // 4014
 * Should contain all clean up code that removes the layer's elements from the DOM and removes listeners previously added in [`onAdd`](#layer-onadd). Called on [`map.removeLayer(layer)`](#map-removelayer).
 *                                                                                                                     // 4016
 * @method getEvents(): Object                                                                                         // 4017
 * This optional method should return an object like `{ viewreset: this._reset }` for [`addEventListener`](#evented-addeventlistener). The event handlers in this object will be automatically added and removed from the map with your layer.
 *                                                                                                                     // 4019
 * @method getAttribution(): String                                                                                    // 4020
 * This optional method should return a string containing HTML to be shown on the `Attribution control` whenever the layer is visible.
 *                                                                                                                     // 4022
 * @method beforeAdd(map: Map): this                                                                                   // 4023
 * Optional method. Called on [`map.addLayer(layer)`](#map-addlayer), before the layer is added to the map, before events are initialized, without waiting until the map is in a usable state. Use for early initialization only.
 */                                                                                                                    // 4025
                                                                                                                       // 4026
                                                                                                                       // 4027
/* @namespace Map                                                                                                      // 4028
 * @section Layer events                                                                                               // 4029
 *                                                                                                                     // 4030
 * @event layeradd: LayerEvent                                                                                         // 4031
 * Fired when a new layer is added to the map.                                                                         // 4032
 *                                                                                                                     // 4033
 * @event layerremove: LayerEvent                                                                                      // 4034
 * Fired when some layer is removed from the map                                                                       // 4035
 *                                                                                                                     // 4036
 * @section Methods for Layers and Controls                                                                            // 4037
 */                                                                                                                    // 4038
L.Map.include({                                                                                                        // 4039
	// @method addLayer(layer: Layer): this                                                                               // 4040
	// Adds the given layer to the map                                                                                    // 4041
	addLayer: function (layer) {                                                                                          // 4042
		var id = L.stamp(layer);                                                                                             // 4043
		if (this._layers[id]) { return this; }                                                                               // 4044
		this._layers[id] = layer;                                                                                            // 4045
                                                                                                                       // 4046
		layer._mapToAdd = this;                                                                                              // 4047
                                                                                                                       // 4048
		if (layer.beforeAdd) {                                                                                               // 4049
			layer.beforeAdd(this);                                                                                              // 4050
		}                                                                                                                    // 4051
                                                                                                                       // 4052
		this.whenReady(layer._layerAdd, layer);                                                                              // 4053
                                                                                                                       // 4054
		return this;                                                                                                         // 4055
	},                                                                                                                    // 4056
                                                                                                                       // 4057
	// @method removeLayer(layer: Layer): this                                                                            // 4058
	// Removes the given layer from the map.                                                                              // 4059
	removeLayer: function (layer) {                                                                                       // 4060
		var id = L.stamp(layer);                                                                                             // 4061
                                                                                                                       // 4062
		if (!this._layers[id]) { return this; }                                                                              // 4063
                                                                                                                       // 4064
		if (this._loaded) {                                                                                                  // 4065
			layer.onRemove(this);                                                                                               // 4066
		}                                                                                                                    // 4067
                                                                                                                       // 4068
		if (layer.getAttribution && this.attributionControl) {                                                               // 4069
			this.attributionControl.removeAttribution(layer.getAttribution());                                                  // 4070
		}                                                                                                                    // 4071
                                                                                                                       // 4072
		delete this._layers[id];                                                                                             // 4073
                                                                                                                       // 4074
		if (this._loaded) {                                                                                                  // 4075
			this.fire('layerremove', {layer: layer});                                                                           // 4076
			layer.fire('remove');                                                                                               // 4077
		}                                                                                                                    // 4078
                                                                                                                       // 4079
		layer._map = layer._mapToAdd = null;                                                                                 // 4080
                                                                                                                       // 4081
		return this;                                                                                                         // 4082
	},                                                                                                                    // 4083
                                                                                                                       // 4084
	// @method hasLayer(layer: Layer): Boolean                                                                            // 4085
	// Returns `true` if the given layer is currently added to the map                                                    // 4086
	hasLayer: function (layer) {                                                                                          // 4087
		return !!layer && (L.stamp(layer) in this._layers);                                                                  // 4088
	},                                                                                                                    // 4089
                                                                                                                       // 4090
	/* @method eachLayer(fn: Function, context?: Object): this                                                            // 4091
	 * Iterates over the layers of the map, optionally specifying context of the iterator function.                       // 4092
	 * ```                                                                                                                // 4093
	 * map.eachLayer(function(layer){                                                                                     // 4094
	 *     layer.bindPopup('Hello');                                                                                      // 4095
	 * });                                                                                                                // 4096
	 * ```                                                                                                                // 4097
	 */                                                                                                                   // 4098
	eachLayer: function (method, context) {                                                                               // 4099
		for (var i in this._layers) {                                                                                        // 4100
			method.call(context, this._layers[i]);                                                                              // 4101
		}                                                                                                                    // 4102
		return this;                                                                                                         // 4103
	},                                                                                                                    // 4104
                                                                                                                       // 4105
	_addLayers: function (layers) {                                                                                       // 4106
		layers = layers ? (L.Util.isArray(layers) ? layers : [layers]) : [];                                                 // 4107
                                                                                                                       // 4108
		for (var i = 0, len = layers.length; i < len; i++) {                                                                 // 4109
			this.addLayer(layers[i]);                                                                                           // 4110
		}                                                                                                                    // 4111
	},                                                                                                                    // 4112
                                                                                                                       // 4113
	_addZoomLimit: function (layer) {                                                                                     // 4114
		if (isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom)) {                                                 // 4115
			this._zoomBoundLayers[L.stamp(layer)] = layer;                                                                      // 4116
			this._updateZoomLevels();                                                                                           // 4117
		}                                                                                                                    // 4118
	},                                                                                                                    // 4119
                                                                                                                       // 4120
	_removeZoomLimit: function (layer) {                                                                                  // 4121
		var id = L.stamp(layer);                                                                                             // 4122
                                                                                                                       // 4123
		if (this._zoomBoundLayers[id]) {                                                                                     // 4124
			delete this._zoomBoundLayers[id];                                                                                   // 4125
			this._updateZoomLevels();                                                                                           // 4126
		}                                                                                                                    // 4127
	},                                                                                                                    // 4128
                                                                                                                       // 4129
	_updateZoomLevels: function () {                                                                                      // 4130
		var minZoom = Infinity,                                                                                              // 4131
		    maxZoom = -Infinity,                                                                                             // 4132
		    oldZoomSpan = this._getZoomSpan();                                                                               // 4133
                                                                                                                       // 4134
		for (var i in this._zoomBoundLayers) {                                                                               // 4135
			var options = this._zoomBoundLayers[i].options;                                                                     // 4136
                                                                                                                       // 4137
			minZoom = options.minZoom === undefined ? minZoom : Math.min(minZoom, options.minZoom);                             // 4138
			maxZoom = options.maxZoom === undefined ? maxZoom : Math.max(maxZoom, options.maxZoom);                             // 4139
		}                                                                                                                    // 4140
                                                                                                                       // 4141
		this._layersMaxZoom = maxZoom === -Infinity ? undefined : maxZoom;                                                   // 4142
		this._layersMinZoom = minZoom === Infinity ? undefined : minZoom;                                                    // 4143
                                                                                                                       // 4144
		// @section Map state change events                                                                                  // 4145
		// @event zoomlevelschange: Event                                                                                    // 4146
		// Fired when the number of zoomlevels on the map is changed due                                                     // 4147
		// to adding or removing a layer.                                                                                    // 4148
		if (oldZoomSpan !== this._getZoomSpan()) {                                                                           // 4149
			this.fire('zoomlevelschange');                                                                                      // 4150
		}                                                                                                                    // 4151
                                                                                                                       // 4152
		if (this.options.maxZoom === undefined && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom) {             // 4153
			this.setZoom(this._layersMaxZoom);                                                                                  // 4154
		}                                                                                                                    // 4155
		if (this.options.minZoom === undefined && this._layersMinZoom && this.getZoom() < this._layersMinZoom) {             // 4156
			this.setZoom(this._layersMinZoom);                                                                                  // 4157
		}                                                                                                                    // 4158
	}                                                                                                                     // 4159
});                                                                                                                    // 4160
                                                                                                                       // 4161
                                                                                                                       // 4162
                                                                                                                       // 4163
/*                                                                                                                     // 4164
 * @namespace DomEvent                                                                                                 // 4165
 * Utility functions to work with the [DOM events](https://developer.mozilla.org/docs/Web/API/Event), used by Leaflet internally.
 */                                                                                                                    // 4167
                                                                                                                       // 4168
// Inspired by John Resig, Dean Edwards and YUI addEvent implementations.                                              // 4169
                                                                                                                       // 4170
                                                                                                                       // 4171
                                                                                                                       // 4172
var eventsKey = '_leaflet_events';                                                                                     // 4173
                                                                                                                       // 4174
L.DomEvent = {                                                                                                         // 4175
                                                                                                                       // 4176
	// @function on(el: HTMLElement, types: String, fn: Function, context?: Object): this                                 // 4177
	// Adds a listener function (`fn`) to a particular DOM event type of the                                              // 4178
	// element `el`. You can optionally specify the context of the listener                                               // 4179
	// (object the `this` keyword will point to). You can also pass several                                               // 4180
	// space-separated types (e.g. `'click dblclick'`).                                                                   // 4181
                                                                                                                       // 4182
	// @alternative                                                                                                       // 4183
	// @function on(el: HTMLElement, eventMap: Object, context?: Object): this                                            // 4184
	// Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`                                 // 4185
	on: function (obj, types, fn, context) {                                                                              // 4186
                                                                                                                       // 4187
		if (typeof types === 'object') {                                                                                     // 4188
			for (var type in types) {                                                                                           // 4189
				this._on(obj, type, types[type], fn);                                                                              // 4190
			}                                                                                                                   // 4191
		} else {                                                                                                             // 4192
			types = L.Util.splitWords(types);                                                                                   // 4193
                                                                                                                       // 4194
			for (var i = 0, len = types.length; i < len; i++) {                                                                 // 4195
				this._on(obj, types[i], fn, context);                                                                              // 4196
			}                                                                                                                   // 4197
		}                                                                                                                    // 4198
                                                                                                                       // 4199
		return this;                                                                                                         // 4200
	},                                                                                                                    // 4201
                                                                                                                       // 4202
	// @function off(el: HTMLElement, types: String, fn: Function, context?: Object): this                                // 4203
	// Removes a previously added listener function. If no function is specified,                                         // 4204
	// it will remove all the listeners of that particular DOM event from the element.                                    // 4205
	// Note that if you passed a custom context to on, you must pass the same                                             // 4206
	// context to `off` in order to remove the listener.                                                                  // 4207
                                                                                                                       // 4208
	// @alternative                                                                                                       // 4209
	// @function off(el: HTMLElement, eventMap: Object, context?: Object): this                                           // 4210
	// Removes a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`                              // 4211
	off: function (obj, types, fn, context) {                                                                             // 4212
                                                                                                                       // 4213
		if (typeof types === 'object') {                                                                                     // 4214
			for (var type in types) {                                                                                           // 4215
				this._off(obj, type, types[type], fn);                                                                             // 4216
			}                                                                                                                   // 4217
		} else {                                                                                                             // 4218
			types = L.Util.splitWords(types);                                                                                   // 4219
                                                                                                                       // 4220
			for (var i = 0, len = types.length; i < len; i++) {                                                                 // 4221
				this._off(obj, types[i], fn, context);                                                                             // 4222
			}                                                                                                                   // 4223
		}                                                                                                                    // 4224
                                                                                                                       // 4225
		return this;                                                                                                         // 4226
	},                                                                                                                    // 4227
                                                                                                                       // 4228
	_on: function (obj, type, fn, context) {                                                                              // 4229
		var id = type + L.stamp(fn) + (context ? '_' + L.stamp(context) : '');                                               // 4230
                                                                                                                       // 4231
		if (obj[eventsKey] && obj[eventsKey][id]) { return this; }                                                           // 4232
                                                                                                                       // 4233
		var handler = function (e) {                                                                                         // 4234
			return fn.call(context || obj, e || window.event);                                                                  // 4235
		};                                                                                                                   // 4236
                                                                                                                       // 4237
		var originalHandler = handler;                                                                                       // 4238
                                                                                                                       // 4239
		if (L.Browser.pointer && type.indexOf('touch') === 0) {                                                              // 4240
			this.addPointerListener(obj, type, handler, id);                                                                    // 4241
                                                                                                                       // 4242
		} else if (L.Browser.touch && (type === 'dblclick') && this.addDoubleTapListener &&                                  // 4243
		           !(L.Browser.pointer && L.Browser.chrome)) {                                                               // 4244
			// Chrome >55 does not need the synthetic dblclicks from addDoubleTapListener                                       // 4245
			// See #5180                                                                                                        // 4246
			this.addDoubleTapListener(obj, handler, id);                                                                        // 4247
                                                                                                                       // 4248
		} else if ('addEventListener' in obj) {                                                                              // 4249
                                                                                                                       // 4250
			if (type === 'mousewheel') {                                                                                        // 4251
				obj.addEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);                                   // 4252
                                                                                                                       // 4253
			} else if ((type === 'mouseenter') || (type === 'mouseleave')) {                                                    // 4254
				handler = function (e) {                                                                                           // 4255
					e = e || window.event;                                                                                            // 4256
					if (L.DomEvent._isExternalTarget(obj, e)) {                                                                       // 4257
						originalHandler(e);                                                                                              // 4258
					}                                                                                                                 // 4259
				};                                                                                                                 // 4260
				obj.addEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);                            // 4261
                                                                                                                       // 4262
			} else {                                                                                                            // 4263
				if (type === 'click' && L.Browser.android) {                                                                       // 4264
					handler = function (e) {                                                                                          // 4265
						return L.DomEvent._filterClick(e, originalHandler);                                                              // 4266
					};                                                                                                                // 4267
				}                                                                                                                  // 4268
				obj.addEventListener(type, handler, false);                                                                        // 4269
			}                                                                                                                   // 4270
                                                                                                                       // 4271
		} else if ('attachEvent' in obj) {                                                                                   // 4272
			obj.attachEvent('on' + type, handler);                                                                              // 4273
		}                                                                                                                    // 4274
                                                                                                                       // 4275
		obj[eventsKey] = obj[eventsKey] || {};                                                                               // 4276
		obj[eventsKey][id] = handler;                                                                                        // 4277
                                                                                                                       // 4278
		return this;                                                                                                         // 4279
	},                                                                                                                    // 4280
                                                                                                                       // 4281
	_off: function (obj, type, fn, context) {                                                                             // 4282
                                                                                                                       // 4283
		var id = type + L.stamp(fn) + (context ? '_' + L.stamp(context) : ''),                                               // 4284
		    handler = obj[eventsKey] && obj[eventsKey][id];                                                                  // 4285
                                                                                                                       // 4286
		if (!handler) { return this; }                                                                                       // 4287
                                                                                                                       // 4288
		if (L.Browser.pointer && type.indexOf('touch') === 0) {                                                              // 4289
			this.removePointerListener(obj, type, id);                                                                          // 4290
                                                                                                                       // 4291
		} else if (L.Browser.touch && (type === 'dblclick') && this.removeDoubleTapListener) {                               // 4292
			this.removeDoubleTapListener(obj, id);                                                                              // 4293
                                                                                                                       // 4294
		} else if ('removeEventListener' in obj) {                                                                           // 4295
                                                                                                                       // 4296
			if (type === 'mousewheel') {                                                                                        // 4297
				obj.removeEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);                                // 4298
                                                                                                                       // 4299
			} else {                                                                                                            // 4300
				obj.removeEventListener(                                                                                           // 4301
					type === 'mouseenter' ? 'mouseover' :                                                                             // 4302
					type === 'mouseleave' ? 'mouseout' : type, handler, false);                                                       // 4303
			}                                                                                                                   // 4304
                                                                                                                       // 4305
		} else if ('detachEvent' in obj) {                                                                                   // 4306
			obj.detachEvent('on' + type, handler);                                                                              // 4307
		}                                                                                                                    // 4308
                                                                                                                       // 4309
		obj[eventsKey][id] = null;                                                                                           // 4310
                                                                                                                       // 4311
		return this;                                                                                                         // 4312
	},                                                                                                                    // 4313
                                                                                                                       // 4314
	// @function stopPropagation(ev: DOMEvent): this                                                                      // 4315
	// Stop the given event from propagation to parent elements. Used inside the listener functions:                      // 4316
	// ```js                                                                                                              // 4317
	// L.DomEvent.on(div, 'click', function (ev) {                                                                        // 4318
	// 	L.DomEvent.stopPropagation(ev);                                                                                   // 4319
	// });                                                                                                                // 4320
	// ```                                                                                                                // 4321
	stopPropagation: function (e) {                                                                                       // 4322
                                                                                                                       // 4323
		if (e.stopPropagation) {                                                                                             // 4324
			e.stopPropagation();                                                                                                // 4325
		} else if (e.originalEvent) {  // In case of Leaflet event.                                                          // 4326
			e.originalEvent._stopped = true;                                                                                    // 4327
		} else {                                                                                                             // 4328
			e.cancelBubble = true;                                                                                              // 4329
		}                                                                                                                    // 4330
		L.DomEvent._skipped(e);                                                                                              // 4331
                                                                                                                       // 4332
		return this;                                                                                                         // 4333
	},                                                                                                                    // 4334
                                                                                                                       // 4335
	// @function disableScrollPropagation(el: HTMLElement): this                                                          // 4336
	// Adds `stopPropagation` to the element's `'mousewheel'` events (plus browser variants).                             // 4337
	disableScrollPropagation: function (el) {                                                                             // 4338
		return L.DomEvent.on(el, 'mousewheel', L.DomEvent.stopPropagation);                                                  // 4339
	},                                                                                                                    // 4340
                                                                                                                       // 4341
	// @function disableClickPropagation(el: HTMLElement): this                                                           // 4342
	// Adds `stopPropagation` to the element's `'click'`, `'doubleclick'`,                                                // 4343
	// `'mousedown'` and `'touchstart'` events (plus browser variants).                                                   // 4344
	disableClickPropagation: function (el) {                                                                              // 4345
		var stop = L.DomEvent.stopPropagation;                                                                               // 4346
                                                                                                                       // 4347
		L.DomEvent.on(el, L.Draggable.START.join(' '), stop);                                                                // 4348
                                                                                                                       // 4349
		return L.DomEvent.on(el, {                                                                                           // 4350
			click: L.DomEvent._fakeStop,                                                                                        // 4351
			dblclick: stop                                                                                                      // 4352
		});                                                                                                                  // 4353
	},                                                                                                                    // 4354
                                                                                                                       // 4355
	// @function preventDefault(ev: DOMEvent): this                                                                       // 4356
	// Prevents the default action of the DOM Event `ev` from happening (such as                                          // 4357
	// following a link in the href of the a element, or doing a POST request                                             // 4358
	// with page reload when a `<form>` is submitted).                                                                    // 4359
	// Use it inside listener functions.                                                                                  // 4360
	preventDefault: function (e) {                                                                                        // 4361
                                                                                                                       // 4362
		if (e.preventDefault) {                                                                                              // 4363
			e.preventDefault();                                                                                                 // 4364
		} else {                                                                                                             // 4365
			e.returnValue = false;                                                                                              // 4366
		}                                                                                                                    // 4367
		return this;                                                                                                         // 4368
	},                                                                                                                    // 4369
                                                                                                                       // 4370
	// @function stop(ev): this                                                                                           // 4371
	// Does `stopPropagation` and `preventDefault` at the same time.                                                      // 4372
	stop: function (e) {                                                                                                  // 4373
		return L.DomEvent                                                                                                    // 4374
			.preventDefault(e)                                                                                                  // 4375
			.stopPropagation(e);                                                                                                // 4376
	},                                                                                                                    // 4377
                                                                                                                       // 4378
	// @function getMousePosition(ev: DOMEvent, container?: HTMLElement): Point                                           // 4379
	// Gets normalized mouse position from a DOM event relative to the                                                    // 4380
	// `container` or to the whole page if not specified.                                                                 // 4381
	getMousePosition: function (e, container) {                                                                           // 4382
		if (!container) {                                                                                                    // 4383
			return new L.Point(e.clientX, e.clientY);                                                                           // 4384
		}                                                                                                                    // 4385
                                                                                                                       // 4386
		var rect = container.getBoundingClientRect();                                                                        // 4387
                                                                                                                       // 4388
		return new L.Point(                                                                                                  // 4389
			e.clientX - rect.left - container.clientLeft,                                                                       // 4390
			e.clientY - rect.top - container.clientTop);                                                                        // 4391
	},                                                                                                                    // 4392
                                                                                                                       // 4393
	// Chrome on Win scrolls double the pixels as in other platforms (see #4538),                                         // 4394
	// and Firefox scrolls device pixels, not CSS pixels                                                                  // 4395
	_wheelPxFactor: (L.Browser.win && L.Browser.chrome) ? 2 :                                                             // 4396
	                L.Browser.gecko ? window.devicePixelRatio :                                                           // 4397
	                1,                                                                                                    // 4398
                                                                                                                       // 4399
	// @function getWheelDelta(ev: DOMEvent): Number                                                                      // 4400
	// Gets normalized wheel delta from a mousewheel DOM event, in vertical                                               // 4401
	// pixels scrolled (negative if scrolling down).                                                                      // 4402
	// Events from pointing devices without precise scrolling are mapped to                                               // 4403
	// a best guess of 60 pixels.                                                                                         // 4404
	getWheelDelta: function (e) {                                                                                         // 4405
		return (L.Browser.edge) ? e.wheelDeltaY / 2 : // Don't trust window-geometry-based delta                             // 4406
		       (e.deltaY && e.deltaMode === 0) ? -e.deltaY / L.DomEvent._wheelPxFactor : // Pixels                           // 4407
		       (e.deltaY && e.deltaMode === 1) ? -e.deltaY * 20 : // Lines                                                   // 4408
		       (e.deltaY && e.deltaMode === 2) ? -e.deltaY * 60 : // Pages                                                   // 4409
		       (e.deltaX || e.deltaZ) ? 0 :	// Skip horizontal/depth wheel events                                            // 4410
		       e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : // Legacy IE pixels                                      // 4411
		       (e.detail && Math.abs(e.detail) < 32765) ? -e.detail * 20 : // Legacy Moz lines                               // 4412
		       e.detail ? e.detail / -32765 * 60 : // Legacy Moz pages                                                       // 4413
		       0;                                                                                                            // 4414
	},                                                                                                                    // 4415
                                                                                                                       // 4416
	_skipEvents: {},                                                                                                      // 4417
                                                                                                                       // 4418
	_fakeStop: function (e) {                                                                                             // 4419
		// fakes stopPropagation by setting a special event flag, checked/reset with L.DomEvent._skipped(e)                  // 4420
		L.DomEvent._skipEvents[e.type] = true;                                                                               // 4421
	},                                                                                                                    // 4422
                                                                                                                       // 4423
	_skipped: function (e) {                                                                                              // 4424
		var skipped = this._skipEvents[e.type];                                                                              // 4425
		// reset when checking, as it's only used in map container and propagates outside of the map                         // 4426
		this._skipEvents[e.type] = false;                                                                                    // 4427
		return skipped;                                                                                                      // 4428
	},                                                                                                                    // 4429
                                                                                                                       // 4430
	// check if element really left/entered the event target (for mouseenter/mouseleave)                                  // 4431
	_isExternalTarget: function (el, e) {                                                                                 // 4432
                                                                                                                       // 4433
		var related = e.relatedTarget;                                                                                       // 4434
                                                                                                                       // 4435
		if (!related) { return true; }                                                                                       // 4436
                                                                                                                       // 4437
		try {                                                                                                                // 4438
			while (related && (related !== el)) {                                                                               // 4439
				related = related.parentNode;                                                                                      // 4440
			}                                                                                                                   // 4441
		} catch (err) {                                                                                                      // 4442
			return false;                                                                                                       // 4443
		}                                                                                                                    // 4444
		return (related !== el);                                                                                             // 4445
	},                                                                                                                    // 4446
                                                                                                                       // 4447
	// this is a horrible workaround for a bug in Android where a single touch triggers two click events                  // 4448
	_filterClick: function (e, handler) {                                                                                 // 4449
		var timeStamp = (e.timeStamp || (e.originalEvent && e.originalEvent.timeStamp)),                                     // 4450
		    elapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);                                          // 4451
                                                                                                                       // 4452
		// are they closer together than 500ms yet more than 100ms?                                                          // 4453
		// Android typically triggers them ~300ms apart while multiple listeners                                             // 4454
		// on the same event should be triggered far faster;                                                                 // 4455
		// or check if click is simulated on the element, and if it is, reject any non-simulated events                      // 4456
                                                                                                                       // 4457
		if ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {                    // 4458
			L.DomEvent.stop(e);                                                                                                 // 4459
			return;                                                                                                             // 4460
		}                                                                                                                    // 4461
		L.DomEvent._lastClick = timeStamp;                                                                                   // 4462
                                                                                                                       // 4463
		handler(e);                                                                                                          // 4464
	}                                                                                                                     // 4465
};                                                                                                                     // 4466
                                                                                                                       // 4467
// @function addListener(…): this                                                                                      // 4468
// Alias to [`L.DomEvent.on`](#domevent-on)                                                                            // 4469
L.DomEvent.addListener = L.DomEvent.on;                                                                                // 4470
                                                                                                                       // 4471
// @function removeListener(…): this                                                                                   // 4472
// Alias to [`L.DomEvent.off`](#domevent-off)                                                                          // 4473
L.DomEvent.removeListener = L.DomEvent.off;                                                                            // 4474
                                                                                                                       // 4475
                                                                                                                       // 4476
                                                                                                                       // 4477
/*                                                                                                                     // 4478
 * @class PosAnimation                                                                                                 // 4479
 * @aka L.PosAnimation                                                                                                 // 4480
 * @inherits Evented                                                                                                   // 4481
 * Used internally for panning animations, utilizing CSS3 Transitions for modern browsers and a timer fallback for IE6-9.
 *                                                                                                                     // 4483
 * @example                                                                                                            // 4484
 * ```js                                                                                                               // 4485
 * var fx = new L.PosAnimation();                                                                                      // 4486
 * fx.run(el, [300, 500], 0.5);                                                                                        // 4487
 * ```                                                                                                                 // 4488
 *                                                                                                                     // 4489
 * @constructor L.PosAnimation()                                                                                       // 4490
 * Creates a `PosAnimation` object.                                                                                    // 4491
 *                                                                                                                     // 4492
 */                                                                                                                    // 4493
                                                                                                                       // 4494
L.PosAnimation = L.Evented.extend({                                                                                    // 4495
                                                                                                                       // 4496
	// @method run(el: HTMLElement, newPos: Point, duration?: Number, easeLinearity?: Number)                             // 4497
	// Run an animation of a given element to a new position, optionally setting                                          // 4498
	// duration in seconds (`0.25` by default) and easing linearity factor (3rd                                           // 4499
	// argument of the [cubic bezier curve](http://cubic-bezier.com/#0,0,.5,1),                                           // 4500
	// `0.5` by default).                                                                                                 // 4501
	run: function (el, newPos, duration, easeLinearity) {                                                                 // 4502
		this.stop();                                                                                                         // 4503
                                                                                                                       // 4504
		this._el = el;                                                                                                       // 4505
		this._inProgress = true;                                                                                             // 4506
		this._duration = duration || 0.25;                                                                                   // 4507
		this._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);                                                        // 4508
                                                                                                                       // 4509
		this._startPos = L.DomUtil.getPosition(el);                                                                          // 4510
		this._offset = newPos.subtract(this._startPos);                                                                      // 4511
		this._startTime = +new Date();                                                                                       // 4512
                                                                                                                       // 4513
		// @event start: Event                                                                                               // 4514
		// Fired when the animation starts                                                                                   // 4515
		this.fire('start');                                                                                                  // 4516
                                                                                                                       // 4517
		this._animate();                                                                                                     // 4518
	},                                                                                                                    // 4519
                                                                                                                       // 4520
	// @method stop()                                                                                                     // 4521
	// Stops the animation (if currently running).                                                                        // 4522
	stop: function () {                                                                                                   // 4523
		if (!this._inProgress) { return; }                                                                                   // 4524
                                                                                                                       // 4525
		this._step(true);                                                                                                    // 4526
		this._complete();                                                                                                    // 4527
	},                                                                                                                    // 4528
                                                                                                                       // 4529
	_animate: function () {                                                                                               // 4530
		// animation loop                                                                                                    // 4531
		this._animId = L.Util.requestAnimFrame(this._animate, this);                                                         // 4532
		this._step();                                                                                                        // 4533
	},                                                                                                                    // 4534
                                                                                                                       // 4535
	_step: function (round) {                                                                                             // 4536
		var elapsed = (+new Date()) - this._startTime,                                                                       // 4537
		    duration = this._duration * 1000;                                                                                // 4538
                                                                                                                       // 4539
		if (elapsed < duration) {                                                                                            // 4540
			this._runFrame(this._easeOut(elapsed / duration), round);                                                           // 4541
		} else {                                                                                                             // 4542
			this._runFrame(1);                                                                                                  // 4543
			this._complete();                                                                                                   // 4544
		}                                                                                                                    // 4545
	},                                                                                                                    // 4546
                                                                                                                       // 4547
	_runFrame: function (progress, round) {                                                                               // 4548
		var pos = this._startPos.add(this._offset.multiplyBy(progress));                                                     // 4549
		if (round) {                                                                                                         // 4550
			pos._round();                                                                                                       // 4551
		}                                                                                                                    // 4552
		L.DomUtil.setPosition(this._el, pos);                                                                                // 4553
                                                                                                                       // 4554
		// @event step: Event                                                                                                // 4555
		// Fired continuously during the animation.                                                                          // 4556
		this.fire('step');                                                                                                   // 4557
	},                                                                                                                    // 4558
                                                                                                                       // 4559
	_complete: function () {                                                                                              // 4560
		L.Util.cancelAnimFrame(this._animId);                                                                                // 4561
                                                                                                                       // 4562
		this._inProgress = false;                                                                                            // 4563
		// @event end: Event                                                                                                 // 4564
		// Fired when the animation ends.                                                                                    // 4565
		this.fire('end');                                                                                                    // 4566
	},                                                                                                                    // 4567
                                                                                                                       // 4568
	_easeOut: function (t) {                                                                                              // 4569
		return 1 - Math.pow(1 - t, this._easeOutPower);                                                                      // 4570
	}                                                                                                                     // 4571
});                                                                                                                    // 4572
                                                                                                                       // 4573
                                                                                                                       // 4574
                                                                                                                       // 4575
/*                                                                                                                     // 4576
 * @namespace Projection                                                                                               // 4577
 * @projection L.Projection.Mercator                                                                                   // 4578
 *                                                                                                                     // 4579
 * Elliptical Mercator projection — more complex than Spherical Mercator. Takes into account that Earth is a geoid, not a perfect sphere. Used by the EPSG:3395 CRS.
 */                                                                                                                    // 4581
                                                                                                                       // 4582
L.Projection.Mercator = {                                                                                              // 4583
	R: 6378137,                                                                                                           // 4584
	R_MINOR: 6356752.314245179,                                                                                           // 4585
                                                                                                                       // 4586
	bounds: L.bounds([-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]),                               // 4587
                                                                                                                       // 4588
	project: function (latlng) {                                                                                          // 4589
		var d = Math.PI / 180,                                                                                               // 4590
		    r = this.R,                                                                                                      // 4591
		    y = latlng.lat * d,                                                                                              // 4592
		    tmp = this.R_MINOR / r,                                                                                          // 4593
		    e = Math.sqrt(1 - tmp * tmp),                                                                                    // 4594
		    con = e * Math.sin(y);                                                                                           // 4595
                                                                                                                       // 4596
		var ts = Math.tan(Math.PI / 4 - y / 2) / Math.pow((1 - con) / (1 + con), e / 2);                                     // 4597
		y = -r * Math.log(Math.max(ts, 1E-10));                                                                              // 4598
                                                                                                                       // 4599
		return new L.Point(latlng.lng * d * r, y);                                                                           // 4600
	},                                                                                                                    // 4601
                                                                                                                       // 4602
	unproject: function (point) {                                                                                         // 4603
		var d = 180 / Math.PI,                                                                                               // 4604
		    r = this.R,                                                                                                      // 4605
		    tmp = this.R_MINOR / r,                                                                                          // 4606
		    e = Math.sqrt(1 - tmp * tmp),                                                                                    // 4607
		    ts = Math.exp(-point.y / r),                                                                                     // 4608
		    phi = Math.PI / 2 - 2 * Math.atan(ts);                                                                           // 4609
                                                                                                                       // 4610
		for (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {                                             // 4611
			con = e * Math.sin(phi);                                                                                            // 4612
			con = Math.pow((1 - con) / (1 + con), e / 2);                                                                       // 4613
			dphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi;                                                                 // 4614
			phi += dphi;                                                                                                        // 4615
		}                                                                                                                    // 4616
                                                                                                                       // 4617
		return new L.LatLng(phi * d, point.x * d / r);                                                                       // 4618
	}                                                                                                                     // 4619
};                                                                                                                     // 4620
                                                                                                                       // 4621
                                                                                                                       // 4622
                                                                                                                       // 4623
/*                                                                                                                     // 4624
 * @namespace CRS                                                                                                      // 4625
 * @crs L.CRS.EPSG3395                                                                                                 // 4626
 *                                                                                                                     // 4627
 * Rarely used by some commercial tile providers. Uses Elliptical Mercator projection.                                 // 4628
 */                                                                                                                    // 4629
                                                                                                                       // 4630
L.CRS.EPSG3395 = L.extend({}, L.CRS.Earth, {                                                                           // 4631
	code: 'EPSG:3395',                                                                                                    // 4632
	projection: L.Projection.Mercator,                                                                                    // 4633
                                                                                                                       // 4634
	transformation: (function () {                                                                                        // 4635
		var scale = 0.5 / (Math.PI * L.Projection.Mercator.R);                                                               // 4636
		return new L.Transformation(scale, 0.5, -scale, 0.5);                                                                // 4637
	}())                                                                                                                  // 4638
});                                                                                                                    // 4639
                                                                                                                       // 4640
                                                                                                                       // 4641
                                                                                                                       // 4642
/*                                                                                                                     // 4643
 * @class GridLayer                                                                                                    // 4644
 * @inherits Layer                                                                                                     // 4645
 * @aka L.GridLayer                                                                                                    // 4646
 *                                                                                                                     // 4647
 * Generic class for handling a tiled grid of HTML elements. This is the base class for all tile layers and replaces `TileLayer.Canvas`.
 * GridLayer can be extended to create a tiled grid of HTML elements like `<canvas>`, `<img>` or `<div>`. GridLayer will handle creating and animating these DOM elements for you.
 *                                                                                                                     // 4650
 *                                                                                                                     // 4651
 * @section Synchronous usage                                                                                          // 4652
 * @example                                                                                                            // 4653
 *                                                                                                                     // 4654
 * To create a custom layer, extend GridLayer and implement the `createTile()` method, which will be passed a `Point` object with the `x`, `y`, and `z` (zoom level) coordinates to draw your tile.
 *                                                                                                                     // 4656
 * ```js                                                                                                               // 4657
 * var CanvasLayer = L.GridLayer.extend({                                                                              // 4658
 *     createTile: function(coords){                                                                                   // 4659
 *         // create a <canvas> element for drawing                                                                    // 4660
 *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');                                                      // 4661
 *                                                                                                                     // 4662
 *         // setup tile width and height according to the options                                                     // 4663
 *         var size = this.getTileSize();                                                                              // 4664
 *         tile.width = size.x;                                                                                        // 4665
 *         tile.height = size.y;                                                                                       // 4666
 *                                                                                                                     // 4667
 *         // get a canvas context and draw something on it using coords.x, coords.y and coords.z                      // 4668
 *         var ctx = tile.getContext('2d');                                                                            // 4669
 *                                                                                                                     // 4670
 *         // return the tile so it can be rendered on screen                                                          // 4671
 *         return tile;                                                                                                // 4672
 *     }                                                                                                               // 4673
 * });                                                                                                                 // 4674
 * ```                                                                                                                 // 4675
 *                                                                                                                     // 4676
 * @section Asynchronous usage                                                                                         // 4677
 * @example                                                                                                            // 4678
 *                                                                                                                     // 4679
 * Tile creation can also be asynchronous, this is useful when using a third-party drawing library. Once the tile is finished drawing it can be passed to the `done()` callback.
 *                                                                                                                     // 4681
 * ```js                                                                                                               // 4682
 * var CanvasLayer = L.GridLayer.extend({                                                                              // 4683
 *     createTile: function(coords, done){                                                                             // 4684
 *         var error;                                                                                                  // 4685
 *                                                                                                                     // 4686
 *         // create a <canvas> element for drawing                                                                    // 4687
 *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');                                                      // 4688
 *                                                                                                                     // 4689
 *         // setup tile width and height according to the options                                                     // 4690
 *         var size = this.getTileSize();                                                                              // 4691
 *         tile.width = size.x;                                                                                        // 4692
 *         tile.height = size.y;                                                                                       // 4693
 *                                                                                                                     // 4694
 *         // draw something asynchronously and pass the tile to the done() callback                                   // 4695
 *         setTimeout(function() {                                                                                     // 4696
 *             done(error, tile);                                                                                      // 4697
 *         }, 1000);                                                                                                   // 4698
 *                                                                                                                     // 4699
 *         return tile;                                                                                                // 4700
 *     }                                                                                                               // 4701
 * });                                                                                                                 // 4702
 * ```                                                                                                                 // 4703
 *                                                                                                                     // 4704
 * @section                                                                                                            // 4705
 */                                                                                                                    // 4706
                                                                                                                       // 4707
                                                                                                                       // 4708
L.GridLayer = L.Layer.extend({                                                                                         // 4709
                                                                                                                       // 4710
	// @section                                                                                                           // 4711
	// @aka GridLayer options                                                                                             // 4712
	options: {                                                                                                            // 4713
		// @option tileSize: Number|Point = 256                                                                              // 4714
		// Width and height of tiles in the grid. Use a number if width and height are equal, or `L.point(width, height)` otherwise.
		tileSize: 256,                                                                                                       // 4716
                                                                                                                       // 4717
		// @option opacity: Number = 1.0                                                                                     // 4718
		// Opacity of the tiles. Can be used in the `createTile()` function.                                                 // 4719
		opacity: 1,                                                                                                          // 4720
                                                                                                                       // 4721
		// @option updateWhenIdle: Boolean = depends                                                                         // 4722
		// If `false`, new tiles are loaded during panning, otherwise only after it (for better performance). `true` by default on mobile browsers, otherwise `false`.
		updateWhenIdle: L.Browser.mobile,                                                                                    // 4724
                                                                                                                       // 4725
		// @option updateWhenZooming: Boolean = true                                                                         // 4726
		// By default, a smooth zoom animation (during a [touch zoom](#map-touchzoom) or a [`flyTo()`](#map-flyto)) will update grid layers every integer zoom level. Setting this option to `false` will update the grid layer only when the smooth animation ends.
		updateWhenZooming: true,                                                                                             // 4728
                                                                                                                       // 4729
		// @option updateInterval: Number = 200                                                                              // 4730
		// Tiles will not update more than once every `updateInterval` milliseconds when panning.                            // 4731
		updateInterval: 200,                                                                                                 // 4732
                                                                                                                       // 4733
		// @option zIndex: Number = 1                                                                                        // 4734
		// The explicit zIndex of the tile layer.                                                                            // 4735
		zIndex: 1,                                                                                                           // 4736
                                                                                                                       // 4737
		// @option bounds: LatLngBounds = undefined                                                                          // 4738
		// If set, tiles will only be loaded inside the set `LatLngBounds`.                                                  // 4739
		bounds: null,                                                                                                        // 4740
                                                                                                                       // 4741
		// @option minZoom: Number = 0                                                                                       // 4742
		// The minimum zoom level that tiles will be loaded at. By default the entire map.                                   // 4743
		minZoom: 0,                                                                                                          // 4744
                                                                                                                       // 4745
		// @option maxZoom: Number = undefined                                                                               // 4746
		// The maximum zoom level that tiles will be loaded at.                                                              // 4747
		maxZoom: undefined,                                                                                                  // 4748
                                                                                                                       // 4749
		// @option noWrap: Boolean = false                                                                                   // 4750
		// Whether the layer is wrapped around the antimeridian. If `true`, the                                              // 4751
		// GridLayer will only be displayed once at low zoom levels. Has no                                                  // 4752
		// effect when the [map CRS](#map-crs) doesn't wrap around. Can be used                                              // 4753
		// in combination with [`bounds`](#gridlayer-bounds) to prevent requesting                                           // 4754
		// tiles outside the CRS limits.                                                                                     // 4755
		noWrap: false,                                                                                                       // 4756
                                                                                                                       // 4757
		// @option pane: String = 'tilePane'                                                                                 // 4758
		// `Map pane` where the grid layer will be added.                                                                    // 4759
		pane: 'tilePane',                                                                                                    // 4760
                                                                                                                       // 4761
		// @option className: String = ''                                                                                    // 4762
		// A custom class name to assign to the tile layer. Empty by default.                                                // 4763
		className: '',                                                                                                       // 4764
                                                                                                                       // 4765
		// @option keepBuffer: Number = 2                                                                                    // 4766
		// When panning the map, keep this many rows and columns of tiles before unloading them.                             // 4767
		keepBuffer: 2                                                                                                        // 4768
	},                                                                                                                    // 4769
                                                                                                                       // 4770
	initialize: function (options) {                                                                                      // 4771
		L.setOptions(this, options);                                                                                         // 4772
	},                                                                                                                    // 4773
                                                                                                                       // 4774
	onAdd: function () {                                                                                                  // 4775
		this._initContainer();                                                                                               // 4776
                                                                                                                       // 4777
		this._levels = {};                                                                                                   // 4778
		this._tiles = {};                                                                                                    // 4779
                                                                                                                       // 4780
		this._resetView();                                                                                                   // 4781
		this._update();                                                                                                      // 4782
	},                                                                                                                    // 4783
                                                                                                                       // 4784
	beforeAdd: function (map) {                                                                                           // 4785
		map._addZoomLimit(this);                                                                                             // 4786
	},                                                                                                                    // 4787
                                                                                                                       // 4788
	onRemove: function (map) {                                                                                            // 4789
		this._removeAllTiles();                                                                                              // 4790
		L.DomUtil.remove(this._container);                                                                                   // 4791
		map._removeZoomLimit(this);                                                                                          // 4792
		this._container = null;                                                                                              // 4793
		this._tileZoom = null;                                                                                               // 4794
	},                                                                                                                    // 4795
                                                                                                                       // 4796
	// @method bringToFront: this                                                                                         // 4797
	// Brings the tile layer to the top of all tile layers.                                                               // 4798
	bringToFront: function () {                                                                                           // 4799
		if (this._map) {                                                                                                     // 4800
			L.DomUtil.toFront(this._container);                                                                                 // 4801
			this._setAutoZIndex(Math.max);                                                                                      // 4802
		}                                                                                                                    // 4803
		return this;                                                                                                         // 4804
	},                                                                                                                    // 4805
                                                                                                                       // 4806
	// @method bringToBack: this                                                                                          // 4807
	// Brings the tile layer to the bottom of all tile layers.                                                            // 4808
	bringToBack: function () {                                                                                            // 4809
		if (this._map) {                                                                                                     // 4810
			L.DomUtil.toBack(this._container);                                                                                  // 4811
			this._setAutoZIndex(Math.min);                                                                                      // 4812
		}                                                                                                                    // 4813
		return this;                                                                                                         // 4814
	},                                                                                                                    // 4815
                                                                                                                       // 4816
	// @method getContainer: HTMLElement                                                                                  // 4817
	// Returns the HTML element that contains the tiles for this layer.                                                   // 4818
	getContainer: function () {                                                                                           // 4819
		return this._container;                                                                                              // 4820
	},                                                                                                                    // 4821
                                                                                                                       // 4822
	// @method setOpacity(opacity: Number): this                                                                          // 4823
	// Changes the [opacity](#gridlayer-opacity) of the grid layer.                                                       // 4824
	setOpacity: function (opacity) {                                                                                      // 4825
		this.options.opacity = opacity;                                                                                      // 4826
		this._updateOpacity();                                                                                               // 4827
		return this;                                                                                                         // 4828
	},                                                                                                                    // 4829
                                                                                                                       // 4830
	// @method setZIndex(zIndex: Number): this                                                                            // 4831
	// Changes the [zIndex](#gridlayer-zindex) of the grid layer.                                                         // 4832
	setZIndex: function (zIndex) {                                                                                        // 4833
		this.options.zIndex = zIndex;                                                                                        // 4834
		this._updateZIndex();                                                                                                // 4835
                                                                                                                       // 4836
		return this;                                                                                                         // 4837
	},                                                                                                                    // 4838
                                                                                                                       // 4839
	// @method isLoading: Boolean                                                                                         // 4840
	// Returns `true` if any tile in the grid layer has not finished loading.                                             // 4841
	isLoading: function () {                                                                                              // 4842
		return this._loading;                                                                                                // 4843
	},                                                                                                                    // 4844
                                                                                                                       // 4845
	// @method redraw: this                                                                                               // 4846
	// Causes the layer to clear all the tiles and request them again.                                                    // 4847
	redraw: function () {                                                                                                 // 4848
		if (this._map) {                                                                                                     // 4849
			this._removeAllTiles();                                                                                             // 4850
			this._update();                                                                                                     // 4851
		}                                                                                                                    // 4852
		return this;                                                                                                         // 4853
	},                                                                                                                    // 4854
                                                                                                                       // 4855
	getEvents: function () {                                                                                              // 4856
		var events = {                                                                                                       // 4857
			viewprereset: this._invalidateAll,                                                                                  // 4858
			viewreset: this._resetView,                                                                                         // 4859
			zoom: this._resetView,                                                                                              // 4860
			moveend: this._onMoveEnd                                                                                            // 4861
		};                                                                                                                   // 4862
                                                                                                                       // 4863
		if (!this.options.updateWhenIdle) {                                                                                  // 4864
			// update tiles on move, but not more often than once per given interval                                            // 4865
			if (!this._onMove) {                                                                                                // 4866
				this._onMove = L.Util.throttle(this._onMoveEnd, this.options.updateInterval, this);                                // 4867
			}                                                                                                                   // 4868
                                                                                                                       // 4869
			events.move = this._onMove;                                                                                         // 4870
		}                                                                                                                    // 4871
                                                                                                                       // 4872
		if (this._zoomAnimated) {                                                                                            // 4873
			events.zoomanim = this._animateZoom;                                                                                // 4874
		}                                                                                                                    // 4875
                                                                                                                       // 4876
		return events;                                                                                                       // 4877
	},                                                                                                                    // 4878
                                                                                                                       // 4879
	// @section Extension methods                                                                                         // 4880
	// Layers extending `GridLayer` shall reimplement the following method.                                               // 4881
	// @method createTile(coords: Object, done?: Function): HTMLElement                                                   // 4882
	// Called only internally, must be overriden by classes extending `GridLayer`.                                        // 4883
	// Returns the `HTMLElement` corresponding to the given `coords`. If the `done` callback                              // 4884
	// is specified, it must be called when the tile has finished loading and drawing.                                    // 4885
	createTile: function () {                                                                                             // 4886
		return document.createElement('div');                                                                                // 4887
	},                                                                                                                    // 4888
                                                                                                                       // 4889
	// @section                                                                                                           // 4890
	// @method getTileSize: Point                                                                                         // 4891
	// Normalizes the [tileSize option](#gridlayer-tilesize) into a point. Used by the `createTile()` method.             // 4892
	getTileSize: function () {                                                                                            // 4893
		var s = this.options.tileSize;                                                                                       // 4894
		return s instanceof L.Point ? s : new L.Point(s, s);                                                                 // 4895
	},                                                                                                                    // 4896
                                                                                                                       // 4897
	_updateZIndex: function () {                                                                                          // 4898
		if (this._container && this.options.zIndex !== undefined && this.options.zIndex !== null) {                          // 4899
			this._container.style.zIndex = this.options.zIndex;                                                                 // 4900
		}                                                                                                                    // 4901
	},                                                                                                                    // 4902
                                                                                                                       // 4903
	_setAutoZIndex: function (compare) {                                                                                  // 4904
		// go through all other layers of the same pane, set zIndex to max + 1 (front) or min - 1 (back)                     // 4905
                                                                                                                       // 4906
		var layers = this.getPane().children,                                                                                // 4907
		    edgeZIndex = -compare(-Infinity, Infinity); // -Infinity for max, Infinity for min                               // 4908
                                                                                                                       // 4909
		for (var i = 0, len = layers.length, zIndex; i < len; i++) {                                                         // 4910
                                                                                                                       // 4911
			zIndex = layers[i].style.zIndex;                                                                                    // 4912
                                                                                                                       // 4913
			if (layers[i] !== this._container && zIndex) {                                                                      // 4914
				edgeZIndex = compare(edgeZIndex, +zIndex);                                                                         // 4915
			}                                                                                                                   // 4916
		}                                                                                                                    // 4917
                                                                                                                       // 4918
		if (isFinite(edgeZIndex)) {                                                                                          // 4919
			this.options.zIndex = edgeZIndex + compare(-1, 1);                                                                  // 4920
			this._updateZIndex();                                                                                               // 4921
		}                                                                                                                    // 4922
	},                                                                                                                    // 4923
                                                                                                                       // 4924
	_updateOpacity: function () {                                                                                         // 4925
		if (!this._map) { return; }                                                                                          // 4926
                                                                                                                       // 4927
		// IE doesn't inherit filter opacity properly, so we're forced to set it on tiles                                    // 4928
		if (L.Browser.ielt9) { return; }                                                                                     // 4929
                                                                                                                       // 4930
		L.DomUtil.setOpacity(this._container, this.options.opacity);                                                         // 4931
                                                                                                                       // 4932
		var now = +new Date(),                                                                                               // 4933
		    nextFrame = false,                                                                                               // 4934
		    willPrune = false;                                                                                               // 4935
                                                                                                                       // 4936
		for (var key in this._tiles) {                                                                                       // 4937
			var tile = this._tiles[key];                                                                                        // 4938
			if (!tile.current || !tile.loaded) { continue; }                                                                    // 4939
                                                                                                                       // 4940
			var fade = Math.min(1, (now - tile.loaded) / 200);                                                                  // 4941
                                                                                                                       // 4942
			L.DomUtil.setOpacity(tile.el, fade);                                                                                // 4943
			if (fade < 1) {                                                                                                     // 4944
				nextFrame = true;                                                                                                  // 4945
			} else {                                                                                                            // 4946
				if (tile.active) { willPrune = true; }                                                                             // 4947
				tile.active = true;                                                                                                // 4948
			}                                                                                                                   // 4949
		}                                                                                                                    // 4950
                                                                                                                       // 4951
		if (willPrune && !this._noPrune) { this._pruneTiles(); }                                                             // 4952
                                                                                                                       // 4953
		if (nextFrame) {                                                                                                     // 4954
			L.Util.cancelAnimFrame(this._fadeFrame);                                                                            // 4955
			this._fadeFrame = L.Util.requestAnimFrame(this._updateOpacity, this);                                               // 4956
		}                                                                                                                    // 4957
	},                                                                                                                    // 4958
                                                                                                                       // 4959
	_initContainer: function () {                                                                                         // 4960
		if (this._container) { return; }                                                                                     // 4961
                                                                                                                       // 4962
		this._container = L.DomUtil.create('div', 'leaflet-layer ' + (this.options.className || ''));                        // 4963
		this._updateZIndex();                                                                                                // 4964
                                                                                                                       // 4965
		if (this.options.opacity < 1) {                                                                                      // 4966
			this._updateOpacity();                                                                                              // 4967
		}                                                                                                                    // 4968
                                                                                                                       // 4969
		this.getPane().appendChild(this._container);                                                                         // 4970
	},                                                                                                                    // 4971
                                                                                                                       // 4972
	_updateLevels: function () {                                                                                          // 4973
                                                                                                                       // 4974
		var zoom = this._tileZoom,                                                                                           // 4975
		    maxZoom = this.options.maxZoom;                                                                                  // 4976
                                                                                                                       // 4977
		if (zoom === undefined) { return undefined; }                                                                        // 4978
                                                                                                                       // 4979
		for (var z in this._levels) {                                                                                        // 4980
			if (this._levels[z].el.children.length || z === zoom) {                                                             // 4981
				this._levels[z].el.style.zIndex = maxZoom - Math.abs(zoom - z);                                                    // 4982
			} else {                                                                                                            // 4983
				L.DomUtil.remove(this._levels[z].el);                                                                              // 4984
				this._removeTilesAtZoom(z);                                                                                        // 4985
				delete this._levels[z];                                                                                            // 4986
			}                                                                                                                   // 4987
		}                                                                                                                    // 4988
                                                                                                                       // 4989
		var level = this._levels[zoom],                                                                                      // 4990
		    map = this._map;                                                                                                 // 4991
                                                                                                                       // 4992
		if (!level) {                                                                                                        // 4993
			level = this._levels[zoom] = {};                                                                                    // 4994
                                                                                                                       // 4995
			level.el = L.DomUtil.create('div', 'leaflet-tile-container leaflet-zoom-animated', this._container);                // 4996
			level.el.style.zIndex = maxZoom;                                                                                    // 4997
                                                                                                                       // 4998
			level.origin = map.project(map.unproject(map.getPixelOrigin()), zoom).round();                                      // 4999
			level.zoom = zoom;                                                                                                  // 5000
                                                                                                                       // 5001
			this._setZoomTransform(level, map.getCenter(), map.getZoom());                                                      // 5002
                                                                                                                       // 5003
			// force the browser to consider the newly added element for transition                                             // 5004
			L.Util.falseFn(level.el.offsetWidth);                                                                               // 5005
		}                                                                                                                    // 5006
                                                                                                                       // 5007
		this._level = level;                                                                                                 // 5008
                                                                                                                       // 5009
		return level;                                                                                                        // 5010
	},                                                                                                                    // 5011
                                                                                                                       // 5012
	_pruneTiles: function () {                                                                                            // 5013
		if (!this._map) {                                                                                                    // 5014
			return;                                                                                                             // 5015
		}                                                                                                                    // 5016
                                                                                                                       // 5017
		var key, tile;                                                                                                       // 5018
                                                                                                                       // 5019
		var zoom = this._map.getZoom();                                                                                      // 5020
		if (zoom > this.options.maxZoom ||                                                                                   // 5021
			zoom < this.options.minZoom) {                                                                                      // 5022
			this._removeAllTiles();                                                                                             // 5023
			return;                                                                                                             // 5024
		}                                                                                                                    // 5025
                                                                                                                       // 5026
		for (key in this._tiles) {                                                                                           // 5027
			tile = this._tiles[key];                                                                                            // 5028
			tile.retain = tile.current;                                                                                         // 5029
		}                                                                                                                    // 5030
                                                                                                                       // 5031
		for (key in this._tiles) {                                                                                           // 5032
			tile = this._tiles[key];                                                                                            // 5033
			if (tile.current && !tile.active) {                                                                                 // 5034
				var coords = tile.coords;                                                                                          // 5035
				if (!this._retainParent(coords.x, coords.y, coords.z, coords.z - 5)) {                                             // 5036
					this._retainChildren(coords.x, coords.y, coords.z, coords.z + 2);                                                 // 5037
				}                                                                                                                  // 5038
			}                                                                                                                   // 5039
		}                                                                                                                    // 5040
                                                                                                                       // 5041
		for (key in this._tiles) {                                                                                           // 5042
			if (!this._tiles[key].retain) {                                                                                     // 5043
				this._removeTile(key);                                                                                             // 5044
			}                                                                                                                   // 5045
		}                                                                                                                    // 5046
	},                                                                                                                    // 5047
                                                                                                                       // 5048
	_removeTilesAtZoom: function (zoom) {                                                                                 // 5049
		for (var key in this._tiles) {                                                                                       // 5050
			if (this._tiles[key].coords.z !== zoom) {                                                                           // 5051
				continue;                                                                                                          // 5052
			}                                                                                                                   // 5053
			this._removeTile(key);                                                                                              // 5054
		}                                                                                                                    // 5055
	},                                                                                                                    // 5056
                                                                                                                       // 5057
	_removeAllTiles: function () {                                                                                        // 5058
		for (var key in this._tiles) {                                                                                       // 5059
			this._removeTile(key);                                                                                              // 5060
		}                                                                                                                    // 5061
	},                                                                                                                    // 5062
                                                                                                                       // 5063
	_invalidateAll: function () {                                                                                         // 5064
		for (var z in this._levels) {                                                                                        // 5065
			L.DomUtil.remove(this._levels[z].el);                                                                               // 5066
			delete this._levels[z];                                                                                             // 5067
		}                                                                                                                    // 5068
		this._removeAllTiles();                                                                                              // 5069
                                                                                                                       // 5070
		this._tileZoom = null;                                                                                               // 5071
	},                                                                                                                    // 5072
                                                                                                                       // 5073
	_retainParent: function (x, y, z, minZoom) {                                                                          // 5074
		var x2 = Math.floor(x / 2),                                                                                          // 5075
		    y2 = Math.floor(y / 2),                                                                                          // 5076
		    z2 = z - 1,                                                                                                      // 5077
		    coords2 = new L.Point(+x2, +y2);                                                                                 // 5078
		coords2.z = +z2;                                                                                                     // 5079
                                                                                                                       // 5080
		var key = this._tileCoordsToKey(coords2),                                                                            // 5081
		    tile = this._tiles[key];                                                                                         // 5082
                                                                                                                       // 5083
		if (tile && tile.active) {                                                                                           // 5084
			tile.retain = true;                                                                                                 // 5085
			return true;                                                                                                        // 5086
                                                                                                                       // 5087
		} else if (tile && tile.loaded) {                                                                                    // 5088
			tile.retain = true;                                                                                                 // 5089
		}                                                                                                                    // 5090
                                                                                                                       // 5091
		if (z2 > minZoom) {                                                                                                  // 5092
			return this._retainParent(x2, y2, z2, minZoom);                                                                     // 5093
		}                                                                                                                    // 5094
                                                                                                                       // 5095
		return false;                                                                                                        // 5096
	},                                                                                                                    // 5097
                                                                                                                       // 5098
	_retainChildren: function (x, y, z, maxZoom) {                                                                        // 5099
                                                                                                                       // 5100
		for (var i = 2 * x; i < 2 * x + 2; i++) {                                                                            // 5101
			for (var j = 2 * y; j < 2 * y + 2; j++) {                                                                           // 5102
                                                                                                                       // 5103
				var coords = new L.Point(i, j);                                                                                    // 5104
				coords.z = z + 1;                                                                                                  // 5105
                                                                                                                       // 5106
				var key = this._tileCoordsToKey(coords),                                                                           // 5107
				    tile = this._tiles[key];                                                                                       // 5108
                                                                                                                       // 5109
				if (tile && tile.active) {                                                                                         // 5110
					tile.retain = true;                                                                                               // 5111
					continue;                                                                                                         // 5112
                                                                                                                       // 5113
				} else if (tile && tile.loaded) {                                                                                  // 5114
					tile.retain = true;                                                                                               // 5115
				}                                                                                                                  // 5116
                                                                                                                       // 5117
				if (z + 1 < maxZoom) {                                                                                             // 5118
					this._retainChildren(i, j, z + 1, maxZoom);                                                                       // 5119
				}                                                                                                                  // 5120
			}                                                                                                                   // 5121
		}                                                                                                                    // 5122
	},                                                                                                                    // 5123
                                                                                                                       // 5124
	_resetView: function (e) {                                                                                            // 5125
		var animating = e && (e.pinch || e.flyTo);                                                                           // 5126
		this._setView(this._map.getCenter(), this._map.getZoom(), animating, animating);                                     // 5127
	},                                                                                                                    // 5128
                                                                                                                       // 5129
	_animateZoom: function (e) {                                                                                          // 5130
		this._setView(e.center, e.zoom, true, e.noUpdate);                                                                   // 5131
	},                                                                                                                    // 5132
                                                                                                                       // 5133
	_setView: function (center, zoom, noPrune, noUpdate) {                                                                // 5134
		var tileZoom = Math.round(zoom);                                                                                     // 5135
		if ((this.options.maxZoom !== undefined && tileZoom > this.options.maxZoom) ||                                       // 5136
		    (this.options.minZoom !== undefined && tileZoom < this.options.minZoom)) {                                       // 5137
			tileZoom = undefined;                                                                                               // 5138
		}                                                                                                                    // 5139
                                                                                                                       // 5140
		var tileZoomChanged = this.options.updateWhenZooming && (tileZoom !== this._tileZoom);                               // 5141
                                                                                                                       // 5142
		if (!noUpdate || tileZoomChanged) {                                                                                  // 5143
                                                                                                                       // 5144
			this._tileZoom = tileZoom;                                                                                          // 5145
                                                                                                                       // 5146
			if (this._abortLoading) {                                                                                           // 5147
				this._abortLoading();                                                                                              // 5148
			}                                                                                                                   // 5149
                                                                                                                       // 5150
			this._updateLevels();                                                                                               // 5151
			this._resetGrid();                                                                                                  // 5152
                                                                                                                       // 5153
			if (tileZoom !== undefined) {                                                                                       // 5154
				this._update(center);                                                                                              // 5155
			}                                                                                                                   // 5156
                                                                                                                       // 5157
			if (!noPrune) {                                                                                                     // 5158
				this._pruneTiles();                                                                                                // 5159
			}                                                                                                                   // 5160
                                                                                                                       // 5161
			// Flag to prevent _updateOpacity from pruning tiles during                                                         // 5162
			// a zoom anim or a pinch gesture                                                                                   // 5163
			this._noPrune = !!noPrune;                                                                                          // 5164
		}                                                                                                                    // 5165
                                                                                                                       // 5166
		this._setZoomTransforms(center, zoom);                                                                               // 5167
	},                                                                                                                    // 5168
                                                                                                                       // 5169
	_setZoomTransforms: function (center, zoom) {                                                                         // 5170
		for (var i in this._levels) {                                                                                        // 5171
			this._setZoomTransform(this._levels[i], center, zoom);                                                              // 5172
		}                                                                                                                    // 5173
	},                                                                                                                    // 5174
                                                                                                                       // 5175
	_setZoomTransform: function (level, center, zoom) {                                                                   // 5176
		var scale = this._map.getZoomScale(zoom, level.zoom),                                                                // 5177
		    translate = level.origin.multiplyBy(scale)                                                                       // 5178
		        .subtract(this._map._getNewPixelOrigin(center, zoom)).round();                                               // 5179
                                                                                                                       // 5180
		if (L.Browser.any3d) {                                                                                               // 5181
			L.DomUtil.setTransform(level.el, translate, scale);                                                                 // 5182
		} else {                                                                                                             // 5183
			L.DomUtil.setPosition(level.el, translate);                                                                         // 5184
		}                                                                                                                    // 5185
	},                                                                                                                    // 5186
                                                                                                                       // 5187
	_resetGrid: function () {                                                                                             // 5188
		var map = this._map,                                                                                                 // 5189
		    crs = map.options.crs,                                                                                           // 5190
		    tileSize = this._tileSize = this.getTileSize(),                                                                  // 5191
		    tileZoom = this._tileZoom;                                                                                       // 5192
                                                                                                                       // 5193
		var bounds = this._map.getPixelWorldBounds(this._tileZoom);                                                          // 5194
		if (bounds) {                                                                                                        // 5195
			this._globalTileRange = this._pxBoundsToTileRange(bounds);                                                          // 5196
		}                                                                                                                    // 5197
                                                                                                                       // 5198
		this._wrapX = crs.wrapLng && !this.options.noWrap && [                                                               // 5199
			Math.floor(map.project([0, crs.wrapLng[0]], tileZoom).x / tileSize.x),                                              // 5200
			Math.ceil(map.project([0, crs.wrapLng[1]], tileZoom).x / tileSize.y)                                                // 5201
		];                                                                                                                   // 5202
		this._wrapY = crs.wrapLat && !this.options.noWrap && [                                                               // 5203
			Math.floor(map.project([crs.wrapLat[0], 0], tileZoom).y / tileSize.x),                                              // 5204
			Math.ceil(map.project([crs.wrapLat[1], 0], tileZoom).y / tileSize.y)                                                // 5205
		];                                                                                                                   // 5206
	},                                                                                                                    // 5207
                                                                                                                       // 5208
	_onMoveEnd: function () {                                                                                             // 5209
		if (!this._map || this._map._animatingZoom) { return; }                                                              // 5210
                                                                                                                       // 5211
		this._update();                                                                                                      // 5212
	},                                                                                                                    // 5213
                                                                                                                       // 5214
	_getTiledPixelBounds: function (center) {                                                                             // 5215
		var map = this._map,                                                                                                 // 5216
		    mapZoom = map._animatingZoom ? Math.max(map._animateToZoom, map.getZoom()) : map.getZoom(),                      // 5217
		    scale = map.getZoomScale(mapZoom, this._tileZoom),                                                               // 5218
		    pixelCenter = map.project(center, this._tileZoom).floor(),                                                       // 5219
		    halfSize = map.getSize().divideBy(scale * 2);                                                                    // 5220
                                                                                                                       // 5221
		return new L.Bounds(pixelCenter.subtract(halfSize), pixelCenter.add(halfSize));                                      // 5222
	},                                                                                                                    // 5223
                                                                                                                       // 5224
	// Private method to load tiles in the grid's active zoom level according to map bounds                               // 5225
	_update: function (center) {                                                                                          // 5226
		var map = this._map;                                                                                                 // 5227
		if (!map) { return; }                                                                                                // 5228
		var zoom = map.getZoom();                                                                                            // 5229
                                                                                                                       // 5230
		if (center === undefined) { center = map.getCenter(); }                                                              // 5231
		if (this._tileZoom === undefined) { return; }	// if out of minzoom/maxzoom                                           // 5232
                                                                                                                       // 5233
		var pixelBounds = this._getTiledPixelBounds(center),                                                                 // 5234
		    tileRange = this._pxBoundsToTileRange(pixelBounds),                                                              // 5235
		    tileCenter = tileRange.getCenter(),                                                                              // 5236
		    queue = [],                                                                                                      // 5237
		    margin = this.options.keepBuffer,                                                                                // 5238
		    noPruneRange = new L.Bounds(tileRange.getBottomLeft().subtract([margin, -margin]),                               // 5239
		                              tileRange.getTopRight().add([margin, -margin]));                                       // 5240
                                                                                                                       // 5241
		for (var key in this._tiles) {                                                                                       // 5242
			var c = this._tiles[key].coords;                                                                                    // 5243
			if (c.z !== this._tileZoom || !noPruneRange.contains(L.point(c.x, c.y))) {                                          // 5244
				this._tiles[key].current = false;                                                                                  // 5245
			}                                                                                                                   // 5246
		}                                                                                                                    // 5247
                                                                                                                       // 5248
		// _update just loads more tiles. If the tile zoom level differs too much                                            // 5249
		// from the map's, let _setView reset levels and prune old tiles.                                                    // 5250
		if (Math.abs(zoom - this._tileZoom) > 1) { this._setView(center, zoom); return; }                                    // 5251
                                                                                                                       // 5252
		// create a queue of coordinates to load tiles from                                                                  // 5253
		for (var j = tileRange.min.y; j <= tileRange.max.y; j++) {                                                           // 5254
			for (var i = tileRange.min.x; i <= tileRange.max.x; i++) {                                                          // 5255
				var coords = new L.Point(i, j);                                                                                    // 5256
				coords.z = this._tileZoom;                                                                                         // 5257
                                                                                                                       // 5258
				if (!this._isValidTile(coords)) { continue; }                                                                      // 5259
                                                                                                                       // 5260
				var tile = this._tiles[this._tileCoordsToKey(coords)];                                                             // 5261
				if (tile) {                                                                                                        // 5262
					tile.current = true;                                                                                              // 5263
				} else {                                                                                                           // 5264
					queue.push(coords);                                                                                               // 5265
				}                                                                                                                  // 5266
			}                                                                                                                   // 5267
		}                                                                                                                    // 5268
                                                                                                                       // 5269
		// sort tile queue to load tiles in order of their distance to center                                                // 5270
		queue.sort(function (a, b) {                                                                                         // 5271
			return a.distanceTo(tileCenter) - b.distanceTo(tileCenter);                                                         // 5272
		});                                                                                                                  // 5273
                                                                                                                       // 5274
		if (queue.length !== 0) {                                                                                            // 5275
			// if it's the first batch of tiles to load                                                                         // 5276
			if (!this._loading) {                                                                                               // 5277
				this._loading = true;                                                                                              // 5278
				// @event loading: Event                                                                                           // 5279
				// Fired when the grid layer starts loading tiles.                                                                 // 5280
				this.fire('loading');                                                                                              // 5281
			}                                                                                                                   // 5282
                                                                                                                       // 5283
			// create DOM fragment to append tiles in one batch                                                                 // 5284
			var fragment = document.createDocumentFragment();                                                                   // 5285
                                                                                                                       // 5286
			for (i = 0; i < queue.length; i++) {                                                                                // 5287
				this._addTile(queue[i], fragment);                                                                                 // 5288
			}                                                                                                                   // 5289
                                                                                                                       // 5290
			this._level.el.appendChild(fragment);                                                                               // 5291
		}                                                                                                                    // 5292
	},                                                                                                                    // 5293
                                                                                                                       // 5294
	_isValidTile: function (coords) {                                                                                     // 5295
		var crs = this._map.options.crs;                                                                                     // 5296
                                                                                                                       // 5297
		if (!crs.infinite) {                                                                                                 // 5298
			// don't load tile if it's out of bounds and not wrapped                                                            // 5299
			var bounds = this._globalTileRange;                                                                                 // 5300
			if ((!crs.wrapLng && (coords.x < bounds.min.x || coords.x > bounds.max.x)) ||                                       // 5301
			    (!crs.wrapLat && (coords.y < bounds.min.y || coords.y > bounds.max.y))) { return false; }                       // 5302
		}                                                                                                                    // 5303
                                                                                                                       // 5304
		if (!this.options.bounds) { return true; }                                                                           // 5305
                                                                                                                       // 5306
		// don't load tile if it doesn't intersect the bounds in options                                                     // 5307
		var tileBounds = this._tileCoordsToBounds(coords);                                                                   // 5308
		return L.latLngBounds(this.options.bounds).overlaps(tileBounds);                                                     // 5309
	},                                                                                                                    // 5310
                                                                                                                       // 5311
	_keyToBounds: function (key) {                                                                                        // 5312
		return this._tileCoordsToBounds(this._keyToTileCoords(key));                                                         // 5313
	},                                                                                                                    // 5314
                                                                                                                       // 5315
	// converts tile coordinates to its geographical bounds                                                               // 5316
	_tileCoordsToBounds: function (coords) {                                                                              // 5317
                                                                                                                       // 5318
		var map = this._map,                                                                                                 // 5319
		    tileSize = this.getTileSize(),                                                                                   // 5320
                                                                                                                       // 5321
		    nwPoint = coords.scaleBy(tileSize),                                                                              // 5322
		    sePoint = nwPoint.add(tileSize),                                                                                 // 5323
                                                                                                                       // 5324
		    nw = map.unproject(nwPoint, coords.z),                                                                           // 5325
		    se = map.unproject(sePoint, coords.z),                                                                           // 5326
		    bounds = new L.LatLngBounds(nw, se);                                                                             // 5327
                                                                                                                       // 5328
		if (!this.options.noWrap) {                                                                                          // 5329
			map.wrapLatLngBounds(bounds);                                                                                       // 5330
		}                                                                                                                    // 5331
                                                                                                                       // 5332
		return bounds;                                                                                                       // 5333
	},                                                                                                                    // 5334
                                                                                                                       // 5335
	// converts tile coordinates to key for the tile cache                                                                // 5336
	_tileCoordsToKey: function (coords) {                                                                                 // 5337
		return coords.x + ':' + coords.y + ':' + coords.z;                                                                   // 5338
	},                                                                                                                    // 5339
                                                                                                                       // 5340
	// converts tile cache key to coordinates                                                                             // 5341
	_keyToTileCoords: function (key) {                                                                                    // 5342
		var k = key.split(':'),                                                                                              // 5343
		    coords = new L.Point(+k[0], +k[1]);                                                                              // 5344
		coords.z = +k[2];                                                                                                    // 5345
		return coords;                                                                                                       // 5346
	},                                                                                                                    // 5347
                                                                                                                       // 5348
	_removeTile: function (key) {                                                                                         // 5349
		var tile = this._tiles[key];                                                                                         // 5350
		if (!tile) { return; }                                                                                               // 5351
                                                                                                                       // 5352
		L.DomUtil.remove(tile.el);                                                                                           // 5353
                                                                                                                       // 5354
		delete this._tiles[key];                                                                                             // 5355
                                                                                                                       // 5356
		// @event tileunload: TileEvent                                                                                      // 5357
		// Fired when a tile is removed (e.g. when a tile goes off the screen).                                              // 5358
		this.fire('tileunload', {                                                                                            // 5359
			tile: tile.el,                                                                                                      // 5360
			coords: this._keyToTileCoords(key)                                                                                  // 5361
		});                                                                                                                  // 5362
	},                                                                                                                    // 5363
                                                                                                                       // 5364
	_initTile: function (tile) {                                                                                          // 5365
		L.DomUtil.addClass(tile, 'leaflet-tile');                                                                            // 5366
                                                                                                                       // 5367
		var tileSize = this.getTileSize();                                                                                   // 5368
		tile.style.width = tileSize.x + 'px';                                                                                // 5369
		tile.style.height = tileSize.y + 'px';                                                                               // 5370
                                                                                                                       // 5371
		tile.onselectstart = L.Util.falseFn;                                                                                 // 5372
		tile.onmousemove = L.Util.falseFn;                                                                                   // 5373
                                                                                                                       // 5374
		// update opacity on tiles in IE7-8 because of filter inheritance problems                                           // 5375
		if (L.Browser.ielt9 && this.options.opacity < 1) {                                                                   // 5376
			L.DomUtil.setOpacity(tile, this.options.opacity);                                                                   // 5377
		}                                                                                                                    // 5378
                                                                                                                       // 5379
		// without this hack, tiles disappear after zoom on Chrome for Android                                               // 5380
		// https://github.com/Leaflet/Leaflet/issues/2078                                                                    // 5381
		if (L.Browser.android && !L.Browser.android23) {                                                                     // 5382
			tile.style.WebkitBackfaceVisibility = 'hidden';                                                                     // 5383
		}                                                                                                                    // 5384
	},                                                                                                                    // 5385
                                                                                                                       // 5386
	_addTile: function (coords, container) {                                                                              // 5387
		var tilePos = this._getTilePos(coords),                                                                              // 5388
		    key = this._tileCoordsToKey(coords);                                                                             // 5389
                                                                                                                       // 5390
		var tile = this.createTile(this._wrapCoords(coords), L.bind(this._tileReady, this, coords));                         // 5391
                                                                                                                       // 5392
		this._initTile(tile);                                                                                                // 5393
                                                                                                                       // 5394
		// if createTile is defined with a second argument ("done" callback),                                                // 5395
		// we know that tile is async and will be ready later; otherwise                                                     // 5396
		if (this.createTile.length < 2) {                                                                                    // 5397
			// mark tile as ready, but delay one frame for opacity animation to happen                                          // 5398
			L.Util.requestAnimFrame(L.bind(this._tileReady, this, coords, null, tile));                                         // 5399
		}                                                                                                                    // 5400
                                                                                                                       // 5401
		L.DomUtil.setPosition(tile, tilePos);                                                                                // 5402
                                                                                                                       // 5403
		// save tile in cache                                                                                                // 5404
		this._tiles[key] = {                                                                                                 // 5405
			el: tile,                                                                                                           // 5406
			coords: coords,                                                                                                     // 5407
			current: true                                                                                                       // 5408
		};                                                                                                                   // 5409
                                                                                                                       // 5410
		container.appendChild(tile);                                                                                         // 5411
		// @event tileloadstart: TileEvent                                                                                   // 5412
		// Fired when a tile is requested and starts loading.                                                                // 5413
		this.fire('tileloadstart', {                                                                                         // 5414
			tile: tile,                                                                                                         // 5415
			coords: coords                                                                                                      // 5416
		});                                                                                                                  // 5417
	},                                                                                                                    // 5418
                                                                                                                       // 5419
	_tileReady: function (coords, err, tile) {                                                                            // 5420
		if (!this._map) { return; }                                                                                          // 5421
                                                                                                                       // 5422
		if (err) {                                                                                                           // 5423
			// @event tileerror: TileErrorEvent                                                                                 // 5424
			// Fired when there is an error loading a tile.                                                                     // 5425
			this.fire('tileerror', {                                                                                            // 5426
				error: err,                                                                                                        // 5427
				tile: tile,                                                                                                        // 5428
				coords: coords                                                                                                     // 5429
			});                                                                                                                 // 5430
		}                                                                                                                    // 5431
                                                                                                                       // 5432
		var key = this._tileCoordsToKey(coords);                                                                             // 5433
                                                                                                                       // 5434
		tile = this._tiles[key];                                                                                             // 5435
		if (!tile) { return; }                                                                                               // 5436
                                                                                                                       // 5437
		tile.loaded = +new Date();                                                                                           // 5438
		if (this._map._fadeAnimated) {                                                                                       // 5439
			L.DomUtil.setOpacity(tile.el, 0);                                                                                   // 5440
			L.Util.cancelAnimFrame(this._fadeFrame);                                                                            // 5441
			this._fadeFrame = L.Util.requestAnimFrame(this._updateOpacity, this);                                               // 5442
		} else {                                                                                                             // 5443
			tile.active = true;                                                                                                 // 5444
			this._pruneTiles();                                                                                                 // 5445
		}                                                                                                                    // 5446
                                                                                                                       // 5447
		if (!err) {                                                                                                          // 5448
			L.DomUtil.addClass(tile.el, 'leaflet-tile-loaded');                                                                 // 5449
                                                                                                                       // 5450
			// @event tileload: TileEvent                                                                                       // 5451
			// Fired when a tile loads.                                                                                         // 5452
			this.fire('tileload', {                                                                                             // 5453
				tile: tile.el,                                                                                                     // 5454
				coords: coords                                                                                                     // 5455
			});                                                                                                                 // 5456
		}                                                                                                                    // 5457
                                                                                                                       // 5458
		if (this._noTilesToLoad()) {                                                                                         // 5459
			this._loading = false;                                                                                              // 5460
			// @event load: Event                                                                                               // 5461
			// Fired when the grid layer loaded all visible tiles.                                                              // 5462
			this.fire('load');                                                                                                  // 5463
                                                                                                                       // 5464
			if (L.Browser.ielt9 || !this._map._fadeAnimated) {                                                                  // 5465
				L.Util.requestAnimFrame(this._pruneTiles, this);                                                                   // 5466
			} else {                                                                                                            // 5467
				// Wait a bit more than 0.2 secs (the duration of the tile fade-in)                                                // 5468
				// to trigger a pruning.                                                                                           // 5469
				setTimeout(L.bind(this._pruneTiles, this), 250);                                                                   // 5470
			}                                                                                                                   // 5471
		}                                                                                                                    // 5472
	},                                                                                                                    // 5473
                                                                                                                       // 5474
	_getTilePos: function (coords) {                                                                                      // 5475
		return coords.scaleBy(this.getTileSize()).subtract(this._level.origin);                                              // 5476
	},                                                                                                                    // 5477
                                                                                                                       // 5478
	_wrapCoords: function (coords) {                                                                                      // 5479
		var newCoords = new L.Point(                                                                                         // 5480
			this._wrapX ? L.Util.wrapNum(coords.x, this._wrapX) : coords.x,                                                     // 5481
			this._wrapY ? L.Util.wrapNum(coords.y, this._wrapY) : coords.y);                                                    // 5482
		newCoords.z = coords.z;                                                                                              // 5483
		return newCoords;                                                                                                    // 5484
	},                                                                                                                    // 5485
                                                                                                                       // 5486
	_pxBoundsToTileRange: function (bounds) {                                                                             // 5487
		var tileSize = this.getTileSize();                                                                                   // 5488
		return new L.Bounds(                                                                                                 // 5489
			bounds.min.unscaleBy(tileSize).floor(),                                                                             // 5490
			bounds.max.unscaleBy(tileSize).ceil().subtract([1, 1]));                                                            // 5491
	},                                                                                                                    // 5492
                                                                                                                       // 5493
	_noTilesToLoad: function () {                                                                                         // 5494
		for (var key in this._tiles) {                                                                                       // 5495
			if (!this._tiles[key].loaded) { return false; }                                                                     // 5496
		}                                                                                                                    // 5497
		return true;                                                                                                         // 5498
	}                                                                                                                     // 5499
});                                                                                                                    // 5500
                                                                                                                       // 5501
// @factory L.gridLayer(options?: GridLayer options)                                                                   // 5502
// Creates a new instance of GridLayer with the supplied options.                                                      // 5503
L.gridLayer = function (options) {                                                                                     // 5504
	return new L.GridLayer(options);                                                                                      // 5505
};                                                                                                                     // 5506
                                                                                                                       // 5507
                                                                                                                       // 5508
                                                                                                                       // 5509
/*                                                                                                                     // 5510
 * @class TileLayer                                                                                                    // 5511
 * @inherits GridLayer                                                                                                 // 5512
 * @aka L.TileLayer                                                                                                    // 5513
 * Used to load and display tile layers on the map. Extends `GridLayer`.                                               // 5514
 *                                                                                                                     // 5515
 * @example                                                                                                            // 5516
 *                                                                                                                     // 5517
 * ```js                                                                                                               // 5518
 * L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', {foo: 'bar'}).addTo(map);                    // 5519
 * ```                                                                                                                 // 5520
 *                                                                                                                     // 5521
 * @section URL template                                                                                               // 5522
 * @example                                                                                                            // 5523
 *                                                                                                                     // 5524
 * A string of the following form:                                                                                     // 5525
 *                                                                                                                     // 5526
 * ```                                                                                                                 // 5527
 * 'http://{s}.somedomain.com/blabla/{z}/{x}/{y}{r}.png'                                                               // 5528
 * ```                                                                                                                 // 5529
 *                                                                                                                     // 5530
 * `{s}` means one of the available subdomains (used sequentially to help with browser parallel requests per domain limitation; subdomain values are specified in options; `a`, `b` or `c` by default, can be omitted), `{z}` — zoom level, `{x}` and `{y}` — tile coordinates. `{r}` can be used to add @2x to the URL to load retina tiles.
 *                                                                                                                     // 5532
 * You can use custom keys in the template, which will be [evaluated](#util-template) from TileLayer options, like this:
 *                                                                                                                     // 5534
 * ```                                                                                                                 // 5535
 * L.tileLayer('http://{s}.somedomain.com/{foo}/{z}/{x}/{y}.png', {foo: 'bar'});                                       // 5536
 * ```                                                                                                                 // 5537
 */                                                                                                                    // 5538
                                                                                                                       // 5539
                                                                                                                       // 5540
L.TileLayer = L.GridLayer.extend({                                                                                     // 5541
                                                                                                                       // 5542
	// @section                                                                                                           // 5543
	// @aka TileLayer options                                                                                             // 5544
	options: {                                                                                                            // 5545
		// @option minZoom: Number = 0                                                                                       // 5546
		// Minimum zoom number.                                                                                              // 5547
		minZoom: 0,                                                                                                          // 5548
                                                                                                                       // 5549
		// @option maxZoom: Number = 18                                                                                      // 5550
		// Maximum zoom number.                                                                                              // 5551
		maxZoom: 18,                                                                                                         // 5552
                                                                                                                       // 5553
		// @option maxNativeZoom: Number = null                                                                              // 5554
		// Maximum zoom number the tile source has available. If it is specified,                                            // 5555
		// the tiles on all zoom levels higher than `maxNativeZoom` will be loaded                                           // 5556
		// from `maxNativeZoom` level and auto-scaled.                                                                       // 5557
		maxNativeZoom: null,                                                                                                 // 5558
                                                                                                                       // 5559
		// @option minNativeZoom: Number = null                                                                              // 5560
		// Minimum zoom number the tile source has available. If it is specified,                                            // 5561
		// the tiles on all zoom levels lower than `minNativeZoom` will be loaded                                            // 5562
		// from `minNativeZoom` level and auto-scaled.                                                                       // 5563
		minNativeZoom: null,                                                                                                 // 5564
                                                                                                                       // 5565
		// @option subdomains: String|String[] = 'abc'                                                                       // 5566
		// Subdomains of the tile service. Can be passed in the form of one string (where each letter is a subdomain name) or an array of strings.
		subdomains: 'abc',                                                                                                   // 5568
                                                                                                                       // 5569
		// @option errorTileUrl: String = ''                                                                                 // 5570
		// URL to the tile image to show in place of the tile that failed to load.                                           // 5571
		errorTileUrl: '',                                                                                                    // 5572
                                                                                                                       // 5573
		// @option zoomOffset: Number = 0                                                                                    // 5574
		// The zoom number used in tile URLs will be offset with this value.                                                 // 5575
		zoomOffset: 0,                                                                                                       // 5576
                                                                                                                       // 5577
		// @option tms: Boolean = false                                                                                      // 5578
		// If `true`, inverses Y axis numbering for tiles (turn this on for [TMS](https://en.wikipedia.org/wiki/Tile_Map_Service) services).
		tms: false,                                                                                                          // 5580
                                                                                                                       // 5581
		// @option zoomReverse: Boolean = false                                                                              // 5582
		// If set to true, the zoom number used in tile URLs will be reversed (`maxZoom - zoom` instead of `zoom`)           // 5583
		zoomReverse: false,                                                                                                  // 5584
                                                                                                                       // 5585
		// @option detectRetina: Boolean = false                                                                             // 5586
		// If `true` and user is on a retina display, it will request four tiles of half the specified size and a bigger zoom level in place of one to utilize the high resolution.
		detectRetina: false,                                                                                                 // 5588
                                                                                                                       // 5589
		// @option crossOrigin: Boolean = false                                                                              // 5590
		// If true, all tiles will have their crossOrigin attribute set to ''. This is needed if you want to access tile pixel data.
		crossOrigin: false                                                                                                   // 5592
	},                                                                                                                    // 5593
                                                                                                                       // 5594
	initialize: function (url, options) {                                                                                 // 5595
                                                                                                                       // 5596
		this._url = url;                                                                                                     // 5597
                                                                                                                       // 5598
		options = L.setOptions(this, options);                                                                               // 5599
                                                                                                                       // 5600
		// detecting retina displays, adjusting tileSize and zoom levels                                                     // 5601
		if (options.detectRetina && L.Browser.retina && options.maxZoom > 0) {                                               // 5602
                                                                                                                       // 5603
			options.tileSize = Math.floor(options.tileSize / 2);                                                                // 5604
                                                                                                                       // 5605
			if (!options.zoomReverse) {                                                                                         // 5606
				options.zoomOffset++;                                                                                              // 5607
				options.maxZoom--;                                                                                                 // 5608
			} else {                                                                                                            // 5609
				options.zoomOffset--;                                                                                              // 5610
				options.minZoom++;                                                                                                 // 5611
			}                                                                                                                   // 5612
                                                                                                                       // 5613
			options.minZoom = Math.max(0, options.minZoom);                                                                     // 5614
		}                                                                                                                    // 5615
                                                                                                                       // 5616
		if (typeof options.subdomains === 'string') {                                                                        // 5617
			options.subdomains = options.subdomains.split('');                                                                  // 5618
		}                                                                                                                    // 5619
                                                                                                                       // 5620
		// for https://github.com/Leaflet/Leaflet/issues/137                                                                 // 5621
		if (!L.Browser.android) {                                                                                            // 5622
			this.on('tileunload', this._onTileRemove);                                                                          // 5623
		}                                                                                                                    // 5624
	},                                                                                                                    // 5625
                                                                                                                       // 5626
	// @method setUrl(url: String, noRedraw?: Boolean): this                                                              // 5627
	// Updates the layer's URL template and redraws it (unless `noRedraw` is set to `true`).                              // 5628
	setUrl: function (url, noRedraw) {                                                                                    // 5629
		this._url = url;                                                                                                     // 5630
                                                                                                                       // 5631
		if (!noRedraw) {                                                                                                     // 5632
			this.redraw();                                                                                                      // 5633
		}                                                                                                                    // 5634
		return this;                                                                                                         // 5635
	},                                                                                                                    // 5636
                                                                                                                       // 5637
	// @method createTile(coords: Object, done?: Function): HTMLElement                                                   // 5638
	// Called only internally, overrides GridLayer's [`createTile()`](#gridlayer-createtile)                              // 5639
	// to return an `<img>` HTML element with the appropiate image URL given `coords`. The `done`                         // 5640
	// callback is called when the tile has been loaded.                                                                  // 5641
	createTile: function (coords, done) {                                                                                 // 5642
		var tile = document.createElement('img');                                                                            // 5643
                                                                                                                       // 5644
		L.DomEvent.on(tile, 'load', L.bind(this._tileOnLoad, this, done, tile));                                             // 5645
		L.DomEvent.on(tile, 'error', L.bind(this._tileOnError, this, done, tile));                                           // 5646
                                                                                                                       // 5647
		if (this.options.crossOrigin) {                                                                                      // 5648
			tile.crossOrigin = '';                                                                                              // 5649
		}                                                                                                                    // 5650
                                                                                                                       // 5651
		/*                                                                                                                   // 5652
		 Alt tag is set to empty string to keep screen readers from reading URL and for compliance reasons                   // 5653
		 http://www.w3.org/TR/WCAG20-TECHS/H67                                                                               // 5654
		*/                                                                                                                   // 5655
		tile.alt = '';                                                                                                       // 5656
                                                                                                                       // 5657
		/*                                                                                                                   // 5658
		 Set role="presentation" to force screen readers to ignore this                                                      // 5659
		 https://www.w3.org/TR/wai-aria/roles#textalternativecomputation                                                     // 5660
		*/                                                                                                                   // 5661
		tile.setAttribute('role', 'presentation');                                                                           // 5662
                                                                                                                       // 5663
		tile.src = this.getTileUrl(coords);                                                                                  // 5664
                                                                                                                       // 5665
		return tile;                                                                                                         // 5666
	},                                                                                                                    // 5667
                                                                                                                       // 5668
	// @section Extension methods                                                                                         // 5669
	// @uninheritable                                                                                                     // 5670
	// Layers extending `TileLayer` might reimplement the following method.                                               // 5671
	// @method getTileUrl(coords: Object): String                                                                         // 5672
	// Called only internally, returns the URL for a tile given its coordinates.                                          // 5673
	// Classes extending `TileLayer` can override this function to provide custom tile URL naming schemes.                // 5674
	getTileUrl: function (coords) {                                                                                       // 5675
		var data = {                                                                                                         // 5676
			r: L.Browser.retina ? '@2x' : '',                                                                                   // 5677
			s: this._getSubdomain(coords),                                                                                      // 5678
			x: coords.x,                                                                                                        // 5679
			y: coords.y,                                                                                                        // 5680
			z: this._getZoomForUrl()                                                                                            // 5681
		};                                                                                                                   // 5682
		if (this._map && !this._map.options.crs.infinite) {                                                                  // 5683
			var invertedY = this._globalTileRange.max.y - coords.y;                                                             // 5684
			if (this.options.tms) {                                                                                             // 5685
				data['y'] = invertedY;                                                                                             // 5686
			}                                                                                                                   // 5687
			data['-y'] = invertedY;                                                                                             // 5688
		}                                                                                                                    // 5689
                                                                                                                       // 5690
		return L.Util.template(this._url, L.extend(data, this.options));                                                     // 5691
	},                                                                                                                    // 5692
                                                                                                                       // 5693
	_tileOnLoad: function (done, tile) {                                                                                  // 5694
		// For https://github.com/Leaflet/Leaflet/issues/3332                                                                // 5695
		if (L.Browser.ielt9) {                                                                                               // 5696
			setTimeout(L.bind(done, this, null, tile), 0);                                                                      // 5697
		} else {                                                                                                             // 5698
			done(null, tile);                                                                                                   // 5699
		}                                                                                                                    // 5700
	},                                                                                                                    // 5701
                                                                                                                       // 5702
	_tileOnError: function (done, tile, e) {                                                                              // 5703
		var errorUrl = this.options.errorTileUrl;                                                                            // 5704
		if (errorUrl && tile.src !== errorUrl) {                                                                             // 5705
			tile.src = errorUrl;                                                                                                // 5706
		}                                                                                                                    // 5707
		done(e, tile);                                                                                                       // 5708
	},                                                                                                                    // 5709
                                                                                                                       // 5710
	getTileSize: function () {                                                                                            // 5711
		var map = this._map,                                                                                                 // 5712
		tileSize = L.GridLayer.prototype.getTileSize.call(this),                                                             // 5713
		zoom = this._tileZoom + this.options.zoomOffset,                                                                     // 5714
		minNativeZoom = this.options.minNativeZoom,                                                                          // 5715
		maxNativeZoom = this.options.maxNativeZoom;                                                                          // 5716
                                                                                                                       // 5717
		// decrease tile size when scaling below minNativeZoom                                                               // 5718
		if (minNativeZoom !== null && zoom < minNativeZoom) {                                                                // 5719
			return tileSize.divideBy(map.getZoomScale(minNativeZoom, zoom)).round();                                            // 5720
		}                                                                                                                    // 5721
                                                                                                                       // 5722
		// increase tile size when scaling above maxNativeZoom                                                               // 5723
		if (maxNativeZoom !== null && zoom > maxNativeZoom) {                                                                // 5724
			return tileSize.divideBy(map.getZoomScale(maxNativeZoom, zoom)).round();                                            // 5725
		}                                                                                                                    // 5726
                                                                                                                       // 5727
		return tileSize;                                                                                                     // 5728
	},                                                                                                                    // 5729
                                                                                                                       // 5730
	_onTileRemove: function (e) {                                                                                         // 5731
		e.tile.onload = null;                                                                                                // 5732
	},                                                                                                                    // 5733
                                                                                                                       // 5734
	_getZoomForUrl: function () {                                                                                         // 5735
		var zoom = this._tileZoom,                                                                                           // 5736
		maxZoom = this.options.maxZoom,                                                                                      // 5737
		zoomReverse = this.options.zoomReverse,                                                                              // 5738
		zoomOffset = this.options.zoomOffset,                                                                                // 5739
		minNativeZoom = this.options.minNativeZoom,                                                                          // 5740
		maxNativeZoom = this.options.maxNativeZoom;                                                                          // 5741
                                                                                                                       // 5742
		if (zoomReverse) {                                                                                                   // 5743
			zoom = maxZoom - zoom;                                                                                              // 5744
		}                                                                                                                    // 5745
                                                                                                                       // 5746
		zoom += zoomOffset;                                                                                                  // 5747
                                                                                                                       // 5748
		if (minNativeZoom !== null && zoom < minNativeZoom) {                                                                // 5749
			return minNativeZoom;                                                                                               // 5750
		}                                                                                                                    // 5751
                                                                                                                       // 5752
		if (maxNativeZoom !== null && zoom > maxNativeZoom) {                                                                // 5753
			return maxNativeZoom;                                                                                               // 5754
		}                                                                                                                    // 5755
                                                                                                                       // 5756
		return zoom;                                                                                                         // 5757
	},                                                                                                                    // 5758
                                                                                                                       // 5759
	_getSubdomain: function (tilePoint) {                                                                                 // 5760
		var index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;                                    // 5761
		return this.options.subdomains[index];                                                                               // 5762
	},                                                                                                                    // 5763
                                                                                                                       // 5764
	// stops loading all tiles in the background layer                                                                    // 5765
	_abortLoading: function () {                                                                                          // 5766
		var i, tile;                                                                                                         // 5767
		for (i in this._tiles) {                                                                                             // 5768
			if (this._tiles[i].coords.z !== this._tileZoom) {                                                                   // 5769
				tile = this._tiles[i].el;                                                                                          // 5770
                                                                                                                       // 5771
				tile.onload = L.Util.falseFn;                                                                                      // 5772
				tile.onerror = L.Util.falseFn;                                                                                     // 5773
                                                                                                                       // 5774
				if (!tile.complete) {                                                                                              // 5775
					tile.src = L.Util.emptyImageUrl;                                                                                  // 5776
					L.DomUtil.remove(tile);                                                                                           // 5777
				}                                                                                                                  // 5778
			}                                                                                                                   // 5779
		}                                                                                                                    // 5780
	}                                                                                                                     // 5781
});                                                                                                                    // 5782
                                                                                                                       // 5783
                                                                                                                       // 5784
// @factory L.tilelayer(urlTemplate: String, options?: TileLayer options)                                              // 5785
// Instantiates a tile layer object given a `URL template` and optionally an options object.                           // 5786
                                                                                                                       // 5787
L.tileLayer = function (url, options) {                                                                                // 5788
	return new L.TileLayer(url, options);                                                                                 // 5789
};                                                                                                                     // 5790
                                                                                                                       // 5791
                                                                                                                       // 5792
                                                                                                                       // 5793
/*                                                                                                                     // 5794
 * @class TileLayer.WMS                                                                                                // 5795
 * @inherits TileLayer                                                                                                 // 5796
 * @aka L.TileLayer.WMS                                                                                                // 5797
 * Used to display [WMS](https://en.wikipedia.org/wiki/Web_Map_Service) services as tile layers on the map. Extends `TileLayer`.
 *                                                                                                                     // 5799
 * @example                                                                                                            // 5800
 *                                                                                                                     // 5801
 * ```js                                                                                                               // 5802
 * var nexrad = L.tileLayer.wms("http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi", {                       // 5803
 * 	layers: 'nexrad-n0r-900913',                                                                                       // 5804
 * 	format: 'image/png',                                                                                               // 5805
 * 	transparent: true,                                                                                                 // 5806
 * 	attribution: "Weather data © 2012 IEM Nexrad"                                                                      // 5807
 * });                                                                                                                 // 5808
 * ```                                                                                                                 // 5809
 */                                                                                                                    // 5810
                                                                                                                       // 5811
L.TileLayer.WMS = L.TileLayer.extend({                                                                                 // 5812
                                                                                                                       // 5813
	// @section                                                                                                           // 5814
	// @aka TileLayer.WMS options                                                                                         // 5815
	// If any custom options not documented here are used, they will be sent to the                                       // 5816
	// WMS server as extra parameters in each request URL. This can be useful for                                         // 5817
	// [non-standard vendor WMS parameters](http://docs.geoserver.org/stable/en/user/services/wms/vendor.html).           // 5818
	defaultWmsParams: {                                                                                                   // 5819
		service: 'WMS',                                                                                                      // 5820
		request: 'GetMap',                                                                                                   // 5821
                                                                                                                       // 5822
		// @option layers: String = ''                                                                                       // 5823
		// **(required)** Comma-separated list of WMS layers to show.                                                        // 5824
		layers: '',                                                                                                          // 5825
                                                                                                                       // 5826
		// @option styles: String = ''                                                                                       // 5827
		// Comma-separated list of WMS styles.                                                                               // 5828
		styles: '',                                                                                                          // 5829
                                                                                                                       // 5830
		// @option format: String = 'image/jpeg'                                                                             // 5831
		// WMS image format (use `'image/png'` for layers with transparency).                                                // 5832
		format: 'image/jpeg',                                                                                                // 5833
                                                                                                                       // 5834
		// @option transparent: Boolean = false                                                                              // 5835
		// If `true`, the WMS service will return images with transparency.                                                  // 5836
		transparent: false,                                                                                                  // 5837
                                                                                                                       // 5838
		// @option version: String = '1.1.1'                                                                                 // 5839
		// Version of the WMS service to use                                                                                 // 5840
		version: '1.1.1'                                                                                                     // 5841
	},                                                                                                                    // 5842
                                                                                                                       // 5843
	options: {                                                                                                            // 5844
		// @option crs: CRS = null                                                                                           // 5845
		// Coordinate Reference System to use for the WMS requests, defaults to                                              // 5846
		// map CRS. Don't change this if you're not sure what it means.                                                      // 5847
		crs: null,                                                                                                           // 5848
                                                                                                                       // 5849
		// @option uppercase: Boolean = false                                                                                // 5850
		// If `true`, WMS request parameter keys will be uppercase.                                                          // 5851
		uppercase: false                                                                                                     // 5852
	},                                                                                                                    // 5853
                                                                                                                       // 5854
	initialize: function (url, options) {                                                                                 // 5855
                                                                                                                       // 5856
		this._url = url;                                                                                                     // 5857
                                                                                                                       // 5858
		var wmsParams = L.extend({}, this.defaultWmsParams);                                                                 // 5859
                                                                                                                       // 5860
		// all keys that are not TileLayer options go to WMS params                                                          // 5861
		for (var i in options) {                                                                                             // 5862
			if (!(i in this.options)) {                                                                                         // 5863
				wmsParams[i] = options[i];                                                                                         // 5864
			}                                                                                                                   // 5865
		}                                                                                                                    // 5866
                                                                                                                       // 5867
		options = L.setOptions(this, options);                                                                               // 5868
                                                                                                                       // 5869
		wmsParams.width = wmsParams.height = options.tileSize * (options.detectRetina && L.Browser.retina ? 2 : 1);          // 5870
                                                                                                                       // 5871
		this.wmsParams = wmsParams;                                                                                          // 5872
	},                                                                                                                    // 5873
                                                                                                                       // 5874
	onAdd: function (map) {                                                                                               // 5875
                                                                                                                       // 5876
		this._crs = this.options.crs || map.options.crs;                                                                     // 5877
		this._wmsVersion = parseFloat(this.wmsParams.version);                                                               // 5878
                                                                                                                       // 5879
		var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';                                                         // 5880
		this.wmsParams[projectionKey] = this._crs.code;                                                                      // 5881
                                                                                                                       // 5882
		L.TileLayer.prototype.onAdd.call(this, map);                                                                         // 5883
	},                                                                                                                    // 5884
                                                                                                                       // 5885
	getTileUrl: function (coords) {                                                                                       // 5886
                                                                                                                       // 5887
		var tileBounds = this._tileCoordsToBounds(coords),                                                                   // 5888
		    nw = this._crs.project(tileBounds.getNorthWest()),                                                               // 5889
		    se = this._crs.project(tileBounds.getSouthEast()),                                                               // 5890
                                                                                                                       // 5891
		    bbox = (this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ?                                                // 5892
			    [se.y, nw.x, nw.y, se.x] :                                                                                      // 5893
			    [nw.x, se.y, se.x, nw.y]).join(','),                                                                            // 5894
                                                                                                                       // 5895
		    url = L.TileLayer.prototype.getTileUrl.call(this, coords);                                                       // 5896
                                                                                                                       // 5897
		return url +                                                                                                         // 5898
			L.Util.getParamString(this.wmsParams, url, this.options.uppercase) +                                                // 5899
			(this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;                                                              // 5900
	},                                                                                                                    // 5901
                                                                                                                       // 5902
	// @method setParams(params: Object, noRedraw?: Boolean): this                                                        // 5903
	// Merges an object with the new parameters and re-requests tiles on the current screen (unless `noRedraw` was set to true).
	setParams: function (params, noRedraw) {                                                                              // 5905
                                                                                                                       // 5906
		L.extend(this.wmsParams, params);                                                                                    // 5907
                                                                                                                       // 5908
		if (!noRedraw) {                                                                                                     // 5909
			this.redraw();                                                                                                      // 5910
		}                                                                                                                    // 5911
                                                                                                                       // 5912
		return this;                                                                                                         // 5913
	}                                                                                                                     // 5914
});                                                                                                                    // 5915
                                                                                                                       // 5916
                                                                                                                       // 5917
// @factory L.tileLayer.wms(baseUrl: String, options: TileLayer.WMS options)                                           // 5918
// Instantiates a WMS tile layer object given a base URL of the WMS service and a WMS parameters/options object.       // 5919
L.tileLayer.wms = function (url, options) {                                                                            // 5920
	return new L.TileLayer.WMS(url, options);                                                                             // 5921
};                                                                                                                     // 5922
                                                                                                                       // 5923
                                                                                                                       // 5924
                                                                                                                       // 5925
/*                                                                                                                     // 5926
 * @class ImageOverlay                                                                                                 // 5927
 * @aka L.ImageOverlay                                                                                                 // 5928
 * @inherits Interactive layer                                                                                         // 5929
 *                                                                                                                     // 5930
 * Used to load and display a single image over specific bounds of the map. Extends `Layer`.                           // 5931
 *                                                                                                                     // 5932
 * @example                                                                                                            // 5933
 *                                                                                                                     // 5934
 * ```js                                                                                                               // 5935
 * var imageUrl = 'http://www.lib.utexas.edu/maps/historical/newark_nj_1922.jpg',                                      // 5936
 * 	imageBounds = [[40.712216, -74.22655], [40.773941, -74.12544]];                                                    // 5937
 * L.imageOverlay(imageUrl, imageBounds).addTo(map);                                                                   // 5938
 * ```                                                                                                                 // 5939
 */                                                                                                                    // 5940
                                                                                                                       // 5941
L.ImageOverlay = L.Layer.extend({                                                                                      // 5942
                                                                                                                       // 5943
	// @section                                                                                                           // 5944
	// @aka ImageOverlay options                                                                                          // 5945
	options: {                                                                                                            // 5946
		// @option opacity: Number = 1.0                                                                                     // 5947
		// The opacity of the image overlay.                                                                                 // 5948
		opacity: 1,                                                                                                          // 5949
                                                                                                                       // 5950
		// @option alt: String = ''                                                                                          // 5951
		// Text for the `alt` attribute of the image (useful for accessibility).                                             // 5952
		alt: '',                                                                                                             // 5953
                                                                                                                       // 5954
		// @option interactive: Boolean = false                                                                              // 5955
		// If `true`, the image overlay will emit [mouse events](#interactive-layer) when clicked or hovered.                // 5956
		interactive: false,                                                                                                  // 5957
                                                                                                                       // 5958
		// @option crossOrigin: Boolean = false                                                                              // 5959
		// If true, the image will have its crossOrigin attribute set to ''. This is needed if you want to access image pixel data.
		crossOrigin: false                                                                                                   // 5961
	},                                                                                                                    // 5962
                                                                                                                       // 5963
	initialize: function (url, bounds, options) { // (String, LatLngBounds, Object)                                       // 5964
		this._url = url;                                                                                                     // 5965
		this._bounds = L.latLngBounds(bounds);                                                                               // 5966
                                                                                                                       // 5967
		L.setOptions(this, options);                                                                                         // 5968
	},                                                                                                                    // 5969
                                                                                                                       // 5970
	onAdd: function () {                                                                                                  // 5971
		if (!this._image) {                                                                                                  // 5972
			this._initImage();                                                                                                  // 5973
                                                                                                                       // 5974
			if (this.options.opacity < 1) {                                                                                     // 5975
				this._updateOpacity();                                                                                             // 5976
			}                                                                                                                   // 5977
		}                                                                                                                    // 5978
                                                                                                                       // 5979
		if (this.options.interactive) {                                                                                      // 5980
			L.DomUtil.addClass(this._image, 'leaflet-interactive');                                                             // 5981
			this.addInteractiveTarget(this._image);                                                                             // 5982
		}                                                                                                                    // 5983
                                                                                                                       // 5984
		this.getPane().appendChild(this._image);                                                                             // 5985
		this._reset();                                                                                                       // 5986
	},                                                                                                                    // 5987
                                                                                                                       // 5988
	onRemove: function () {                                                                                               // 5989
		L.DomUtil.remove(this._image);                                                                                       // 5990
		if (this.options.interactive) {                                                                                      // 5991
			this.removeInteractiveTarget(this._image);                                                                          // 5992
		}                                                                                                                    // 5993
	},                                                                                                                    // 5994
                                                                                                                       // 5995
	// @method setOpacity(opacity: Number): this                                                                          // 5996
	// Sets the opacity of the overlay.                                                                                   // 5997
	setOpacity: function (opacity) {                                                                                      // 5998
		this.options.opacity = opacity;                                                                                      // 5999
                                                                                                                       // 6000
		if (this._image) {                                                                                                   // 6001
			this._updateOpacity();                                                                                              // 6002
		}                                                                                                                    // 6003
		return this;                                                                                                         // 6004
	},                                                                                                                    // 6005
                                                                                                                       // 6006
	setStyle: function (styleOpts) {                                                                                      // 6007
		if (styleOpts.opacity) {                                                                                             // 6008
			this.setOpacity(styleOpts.opacity);                                                                                 // 6009
		}                                                                                                                    // 6010
		return this;                                                                                                         // 6011
	},                                                                                                                    // 6012
                                                                                                                       // 6013
	// @method bringToFront(): this                                                                                       // 6014
	// Brings the layer to the top of all overlays.                                                                       // 6015
	bringToFront: function () {                                                                                           // 6016
		if (this._map) {                                                                                                     // 6017
			L.DomUtil.toFront(this._image);                                                                                     // 6018
		}                                                                                                                    // 6019
		return this;                                                                                                         // 6020
	},                                                                                                                    // 6021
                                                                                                                       // 6022
	// @method bringToBack(): this                                                                                        // 6023
	// Brings the layer to the bottom of all overlays.                                                                    // 6024
	bringToBack: function () {                                                                                            // 6025
		if (this._map) {                                                                                                     // 6026
			L.DomUtil.toBack(this._image);                                                                                      // 6027
		}                                                                                                                    // 6028
		return this;                                                                                                         // 6029
	},                                                                                                                    // 6030
                                                                                                                       // 6031
	// @method setUrl(url: String): this                                                                                  // 6032
	// Changes the URL of the image.                                                                                      // 6033
	setUrl: function (url) {                                                                                              // 6034
		this._url = url;                                                                                                     // 6035
                                                                                                                       // 6036
		if (this._image) {                                                                                                   // 6037
			this._image.src = url;                                                                                              // 6038
		}                                                                                                                    // 6039
		return this;                                                                                                         // 6040
	},                                                                                                                    // 6041
                                                                                                                       // 6042
	// @method setBounds(bounds: LatLngBounds): this                                                                      // 6043
	// Update the bounds that this ImageOverlay covers                                                                    // 6044
	setBounds: function (bounds) {                                                                                        // 6045
		this._bounds = bounds;                                                                                               // 6046
                                                                                                                       // 6047
		if (this._map) {                                                                                                     // 6048
			this._reset();                                                                                                      // 6049
		}                                                                                                                    // 6050
		return this;                                                                                                         // 6051
	},                                                                                                                    // 6052
                                                                                                                       // 6053
	getEvents: function () {                                                                                              // 6054
		var events = {                                                                                                       // 6055
			zoom: this._reset,                                                                                                  // 6056
			viewreset: this._reset                                                                                              // 6057
		};                                                                                                                   // 6058
                                                                                                                       // 6059
		if (this._zoomAnimated) {                                                                                            // 6060
			events.zoomanim = this._animateZoom;                                                                                // 6061
		}                                                                                                                    // 6062
                                                                                                                       // 6063
		return events;                                                                                                       // 6064
	},                                                                                                                    // 6065
                                                                                                                       // 6066
	// @method getBounds(): LatLngBounds                                                                                  // 6067
	// Get the bounds that this ImageOverlay covers                                                                       // 6068
	getBounds: function () {                                                                                              // 6069
		return this._bounds;                                                                                                 // 6070
	},                                                                                                                    // 6071
                                                                                                                       // 6072
	// @method getElement(): HTMLElement                                                                                  // 6073
	// Get the img element that represents the ImageOverlay on the map                                                    // 6074
	getElement: function () {                                                                                             // 6075
		return this._image;                                                                                                  // 6076
	},                                                                                                                    // 6077
                                                                                                                       // 6078
	_initImage: function () {                                                                                             // 6079
		var img = this._image = L.DomUtil.create('img',                                                                      // 6080
				'leaflet-image-layer ' + (this._zoomAnimated ? 'leaflet-zoom-animated' : ''));                                     // 6081
                                                                                                                       // 6082
		img.onselectstart = L.Util.falseFn;                                                                                  // 6083
		img.onmousemove = L.Util.falseFn;                                                                                    // 6084
                                                                                                                       // 6085
		img.onload = L.bind(this.fire, this, 'load');                                                                        // 6086
                                                                                                                       // 6087
		if (this.options.crossOrigin) {                                                                                      // 6088
			img.crossOrigin = '';                                                                                               // 6089
		}                                                                                                                    // 6090
                                                                                                                       // 6091
		img.src = this._url;                                                                                                 // 6092
		img.alt = this.options.alt;                                                                                          // 6093
	},                                                                                                                    // 6094
                                                                                                                       // 6095
	_animateZoom: function (e) {                                                                                          // 6096
		var scale = this._map.getZoomScale(e.zoom),                                                                          // 6097
		    offset = this._map._latLngBoundsToNewLayerBounds(this._bounds, e.zoom, e.center).min;                            // 6098
                                                                                                                       // 6099
		L.DomUtil.setTransform(this._image, offset, scale);                                                                  // 6100
	},                                                                                                                    // 6101
                                                                                                                       // 6102
	_reset: function () {                                                                                                 // 6103
		var image = this._image,                                                                                             // 6104
		    bounds = new L.Bounds(                                                                                           // 6105
		        this._map.latLngToLayerPoint(this._bounds.getNorthWest()),                                                   // 6106
		        this._map.latLngToLayerPoint(this._bounds.getSouthEast())),                                                  // 6107
		    size = bounds.getSize();                                                                                         // 6108
                                                                                                                       // 6109
		L.DomUtil.setPosition(image, bounds.min);                                                                            // 6110
                                                                                                                       // 6111
		image.style.width  = size.x + 'px';                                                                                  // 6112
		image.style.height = size.y + 'px';                                                                                  // 6113
	},                                                                                                                    // 6114
                                                                                                                       // 6115
	_updateOpacity: function () {                                                                                         // 6116
		L.DomUtil.setOpacity(this._image, this.options.opacity);                                                             // 6117
	}                                                                                                                     // 6118
});                                                                                                                    // 6119
                                                                                                                       // 6120
// @factory L.imageOverlay(imageUrl: String, bounds: LatLngBounds, options?: ImageOverlay options)                     // 6121
// Instantiates an image overlay object given the URL of the image and the                                             // 6122
// geographical bounds it is tied to.                                                                                  // 6123
L.imageOverlay = function (url, bounds, options) {                                                                     // 6124
	return new L.ImageOverlay(url, bounds, options);                                                                      // 6125
};                                                                                                                     // 6126
                                                                                                                       // 6127
                                                                                                                       // 6128
                                                                                                                       // 6129
/*                                                                                                                     // 6130
 * @class Icon                                                                                                         // 6131
 * @aka L.Icon                                                                                                         // 6132
 * @inherits Layer                                                                                                     // 6133
 *                                                                                                                     // 6134
 * Represents an icon to provide when creating a marker.                                                               // 6135
 *                                                                                                                     // 6136
 * @example                                                                                                            // 6137
 *                                                                                                                     // 6138
 * ```js                                                                                                               // 6139
 * var myIcon = L.icon({                                                                                               // 6140
 *     iconUrl: 'my-icon.png',                                                                                         // 6141
 *     iconRetinaUrl: 'my-icon@2x.png',                                                                                // 6142
 *     iconSize: [38, 95],                                                                                             // 6143
 *     iconAnchor: [22, 94],                                                                                           // 6144
 *     popupAnchor: [-3, -76],                                                                                         // 6145
 *     shadowUrl: 'my-icon-shadow.png',                                                                                // 6146
 *     shadowRetinaUrl: 'my-icon-shadow@2x.png',                                                                       // 6147
 *     shadowSize: [68, 95],                                                                                           // 6148
 *     shadowAnchor: [22, 94]                                                                                          // 6149
 * });                                                                                                                 // 6150
 *                                                                                                                     // 6151
 * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);                                                               // 6152
 * ```                                                                                                                 // 6153
 *                                                                                                                     // 6154
 * `L.Icon.Default` extends `L.Icon` and is the blue icon Leaflet uses for markers by default.                         // 6155
 *                                                                                                                     // 6156
 */                                                                                                                    // 6157
                                                                                                                       // 6158
L.Icon = L.Class.extend({                                                                                              // 6159
                                                                                                                       // 6160
	/* @section                                                                                                           // 6161
	 * @aka Icon options                                                                                                  // 6162
	 *                                                                                                                    // 6163
	 * @option iconUrl: String = null                                                                                     // 6164
	 * **(required)** The URL to the icon image (absolute or relative to your script path).                               // 6165
	 *                                                                                                                    // 6166
	 * @option iconRetinaUrl: String = null                                                                               // 6167
	 * The URL to a retina sized version of the icon image (absolute or relative to your                                  // 6168
	 * script path). Used for Retina screen devices.                                                                      // 6169
	 *                                                                                                                    // 6170
	 * @option iconSize: Point = null                                                                                     // 6171
	 * Size of the icon image in pixels.                                                                                  // 6172
	 *                                                                                                                    // 6173
	 * @option iconAnchor: Point = null                                                                                   // 6174
	 * The coordinates of the "tip" of the icon (relative to its top left corner). The icon                               // 6175
	 * will be aligned so that this point is at the marker's geographical location. Centered                              // 6176
	 * by default if size is specified, also can be set in CSS with negative margins.                                     // 6177
	 *                                                                                                                    // 6178
	 * @option popupAnchor: Point = null                                                                                  // 6179
	 * The coordinates of the point from which popups will "open", relative to the icon anchor.                           // 6180
	 *                                                                                                                    // 6181
	 * @option shadowUrl: String = null                                                                                   // 6182
	 * The URL to the icon shadow image. If not specified, no shadow image will be created.                               // 6183
	 *                                                                                                                    // 6184
	 * @option shadowRetinaUrl: String = null                                                                             // 6185
	 *                                                                                                                    // 6186
	 * @option shadowSize: Point = null                                                                                   // 6187
	 * Size of the shadow image in pixels.                                                                                // 6188
	 *                                                                                                                    // 6189
	 * @option shadowAnchor: Point = null                                                                                 // 6190
	 * The coordinates of the "tip" of the shadow (relative to its top left corner) (the same                             // 6191
	 * as iconAnchor if not specified).                                                                                   // 6192
	 *                                                                                                                    // 6193
	 * @option className: String = ''                                                                                     // 6194
	 * A custom class name to assign to both icon and shadow images. Empty by default.                                    // 6195
	 */                                                                                                                   // 6196
                                                                                                                       // 6197
	initialize: function (options) {                                                                                      // 6198
		L.setOptions(this, options);                                                                                         // 6199
	},                                                                                                                    // 6200
                                                                                                                       // 6201
	// @method createIcon(oldIcon?: HTMLElement): HTMLElement                                                             // 6202
	// Called internally when the icon has to be shown, returns a `<img>` HTML element                                    // 6203
	// styled according to the options.                                                                                   // 6204
	createIcon: function (oldIcon) {                                                                                      // 6205
		return this._createIcon('icon', oldIcon);                                                                            // 6206
	},                                                                                                                    // 6207
                                                                                                                       // 6208
	// @method createShadow(oldIcon?: HTMLElement): HTMLElement                                                           // 6209
	// As `createIcon`, but for the shadow beneath it.                                                                    // 6210
	createShadow: function (oldIcon) {                                                                                    // 6211
		return this._createIcon('shadow', oldIcon);                                                                          // 6212
	},                                                                                                                    // 6213
                                                                                                                       // 6214
	_createIcon: function (name, oldIcon) {                                                                               // 6215
		var src = this._getIconUrl(name);                                                                                    // 6216
                                                                                                                       // 6217
		if (!src) {                                                                                                          // 6218
			if (name === 'icon') {                                                                                              // 6219
				throw new Error('iconUrl not set in Icon options (see the docs).');                                                // 6220
			}                                                                                                                   // 6221
			return null;                                                                                                        // 6222
		}                                                                                                                    // 6223
                                                                                                                       // 6224
		var img = this._createImg(src, oldIcon && oldIcon.tagName === 'IMG' ? oldIcon : null);                               // 6225
		this._setIconStyles(img, name);                                                                                      // 6226
                                                                                                                       // 6227
		return img;                                                                                                          // 6228
	},                                                                                                                    // 6229
                                                                                                                       // 6230
	_setIconStyles: function (img, name) {                                                                                // 6231
		var options = this.options;                                                                                          // 6232
		var sizeOption = options[name + 'Size'];                                                                             // 6233
                                                                                                                       // 6234
		if (typeof sizeOption === 'number') {                                                                                // 6235
			sizeOption = [sizeOption, sizeOption];                                                                              // 6236
		}                                                                                                                    // 6237
                                                                                                                       // 6238
		var size = L.point(sizeOption),                                                                                      // 6239
		    anchor = L.point(name === 'shadow' && options.shadowAnchor || options.iconAnchor ||                              // 6240
		            size && size.divideBy(2, true));                                                                         // 6241
                                                                                                                       // 6242
		img.className = 'leaflet-marker-' + name + ' ' + (options.className || '');                                          // 6243
                                                                                                                       // 6244
		if (anchor) {                                                                                                        // 6245
			img.style.marginLeft = (-anchor.x) + 'px';                                                                          // 6246
			img.style.marginTop  = (-anchor.y) + 'px';                                                                          // 6247
		}                                                                                                                    // 6248
                                                                                                                       // 6249
		if (size) {                                                                                                          // 6250
			img.style.width  = size.x + 'px';                                                                                   // 6251
			img.style.height = size.y + 'px';                                                                                   // 6252
		}                                                                                                                    // 6253
	},                                                                                                                    // 6254
                                                                                                                       // 6255
	_createImg: function (src, el) {                                                                                      // 6256
		el = el || document.createElement('img');                                                                            // 6257
		el.src = src;                                                                                                        // 6258
		return el;                                                                                                           // 6259
	},                                                                                                                    // 6260
                                                                                                                       // 6261
	_getIconUrl: function (name) {                                                                                        // 6262
		return L.Browser.retina && this.options[name + 'RetinaUrl'] || this.options[name + 'Url'];                           // 6263
	}                                                                                                                     // 6264
});                                                                                                                    // 6265
                                                                                                                       // 6266
                                                                                                                       // 6267
// @factory L.icon(options: Icon options)                                                                              // 6268
// Creates an icon instance with the given options.                                                                    // 6269
L.icon = function (options) {                                                                                          // 6270
	return new L.Icon(options);                                                                                           // 6271
};                                                                                                                     // 6272
                                                                                                                       // 6273
                                                                                                                       // 6274
                                                                                                                       // 6275
/*                                                                                                                     // 6276
 * @miniclass Icon.Default (Icon)                                                                                      // 6277
 * @aka L.Icon.Default                                                                                                 // 6278
 * @section                                                                                                            // 6279
 *                                                                                                                     // 6280
 * A trivial subclass of `Icon`, represents the icon to use in `Marker`s when                                          // 6281
 * no icon is specified. Points to the blue marker image distributed with Leaflet                                      // 6282
 * releases.                                                                                                           // 6283
 *                                                                                                                     // 6284
 * In order to customize the default icon, just change the properties of `L.Icon.Default.prototype.options`            // 6285
 * (which is a set of `Icon options`).                                                                                 // 6286
 *                                                                                                                     // 6287
 * If you want to _completely_ replace the default icon, override the                                                  // 6288
 * `L.Marker.prototype.options.icon` with your own icon instead.                                                       // 6289
 */                                                                                                                    // 6290
                                                                                                                       // 6291
L.Icon.Default = L.Icon.extend({                                                                                       // 6292
                                                                                                                       // 6293
	options: {                                                                                                            // 6294
		iconUrl:       'marker-icon.png',                                                                                    // 6295
		iconRetinaUrl: 'marker-icon-2x.png',                                                                                 // 6296
		shadowUrl:     'marker-shadow.png',                                                                                  // 6297
		iconSize:    [25, 41],                                                                                               // 6298
		iconAnchor:  [12, 41],                                                                                               // 6299
		popupAnchor: [1, -34],                                                                                               // 6300
		tooltipAnchor: [16, -28],                                                                                            // 6301
		shadowSize:  [41, 41]                                                                                                // 6302
	},                                                                                                                    // 6303
                                                                                                                       // 6304
	_getIconUrl: function (name) {                                                                                        // 6305
		if (!L.Icon.Default.imagePath) {	// Deprecated, backwards-compatibility only                                         // 6306
			L.Icon.Default.imagePath = this._detectIconPath();                                                                  // 6307
		}                                                                                                                    // 6308
                                                                                                                       // 6309
		// @option imagePath: String                                                                                         // 6310
		// `L.Icon.Default` will try to auto-detect the absolute location of the                                             // 6311
		// blue icon images. If you are placing these images in a non-standard                                               // 6312
		// way, set this option to point to the right absolute path.                                                         // 6313
		return (this.options.imagePath || L.Icon.Default.imagePath) + L.Icon.prototype._getIconUrl.call(this, name);         // 6314
	},                                                                                                                    // 6315
                                                                                                                       // 6316
	_detectIconPath: function () {                                                                                        // 6317
		var el = L.DomUtil.create('div',  'leaflet-default-icon-path', document.body);                                       // 6318
		var path = L.DomUtil.getStyle(el, 'background-image') ||                                                             // 6319
		           L.DomUtil.getStyle(el, 'backgroundImage');	// IE8                                                         // 6320
                                                                                                                       // 6321
		document.body.removeChild(el);                                                                                       // 6322
                                                                                                                       // 6323
		return path.indexOf('url') === 0 ?                                                                                   // 6324
			path.replace(/^url\([\"\']?/, '').replace(/marker-icon\.png[\"\']?\)$/, '') : '';                                   // 6325
	}                                                                                                                     // 6326
});                                                                                                                    // 6327
                                                                                                                       // 6328
                                                                                                                       // 6329
                                                                                                                       // 6330
/*                                                                                                                     // 6331
 * @class Marker                                                                                                       // 6332
 * @inherits Interactive layer                                                                                         // 6333
 * @aka L.Marker                                                                                                       // 6334
 * L.Marker is used to display clickable/draggable icons on the map. Extends `Layer`.                                  // 6335
 *                                                                                                                     // 6336
 * @example                                                                                                            // 6337
 *                                                                                                                     // 6338
 * ```js                                                                                                               // 6339
 * L.marker([50.5, 30.5]).addTo(map);                                                                                  // 6340
 * ```                                                                                                                 // 6341
 */                                                                                                                    // 6342
                                                                                                                       // 6343
L.Marker = L.Layer.extend({                                                                                            // 6344
                                                                                                                       // 6345
	// @section                                                                                                           // 6346
	// @aka Marker options                                                                                                // 6347
	options: {                                                                                                            // 6348
		// @option icon: Icon = *                                                                                            // 6349
		// Icon class to use for rendering the marker. See [Icon documentation](#L.Icon) for details on how to customize the marker icon. If not specified, a new `L.Icon.Default` is used.
		icon: new L.Icon.Default(),                                                                                          // 6351
                                                                                                                       // 6352
		// Option inherited from "Interactive layer" abstract class                                                          // 6353
		interactive: true,                                                                                                   // 6354
                                                                                                                       // 6355
		// @option draggable: Boolean = false                                                                                // 6356
		// Whether the marker is draggable with mouse/touch or not.                                                          // 6357
		draggable: false,                                                                                                    // 6358
                                                                                                                       // 6359
		// @option keyboard: Boolean = true                                                                                  // 6360
		// Whether the marker can be tabbed to with a keyboard and clicked by pressing enter.                                // 6361
		keyboard: true,                                                                                                      // 6362
                                                                                                                       // 6363
		// @option title: String = ''                                                                                        // 6364
		// Text for the browser tooltip that appear on marker hover (no tooltip by default).                                 // 6365
		title: '',                                                                                                           // 6366
                                                                                                                       // 6367
		// @option alt: String = ''                                                                                          // 6368
		// Text for the `alt` attribute of the icon image (useful for accessibility).                                        // 6369
		alt: '',                                                                                                             // 6370
                                                                                                                       // 6371
		// @option zIndexOffset: Number = 0                                                                                  // 6372
		// By default, marker images zIndex is set automatically based on its latitude. Use this option if you want to put the marker on top of all others (or below), specifying a high value like `1000` (or high negative value, respectively).
		zIndexOffset: 0,                                                                                                     // 6374
                                                                                                                       // 6375
		// @option opacity: Number = 1.0                                                                                     // 6376
		// The opacity of the marker.                                                                                        // 6377
		opacity: 1,                                                                                                          // 6378
                                                                                                                       // 6379
		// @option riseOnHover: Boolean = false                                                                              // 6380
		// If `true`, the marker will get on top of others when you hover the mouse over it.                                 // 6381
		riseOnHover: false,                                                                                                  // 6382
                                                                                                                       // 6383
		// @option riseOffset: Number = 250                                                                                  // 6384
		// The z-index offset used for the `riseOnHover` feature.                                                            // 6385
		riseOffset: 250,                                                                                                     // 6386
                                                                                                                       // 6387
		// @option pane: String = 'markerPane'                                                                               // 6388
		// `Map pane` where the markers icon will be added.                                                                  // 6389
		pane: 'markerPane',                                                                                                  // 6390
                                                                                                                       // 6391
		// FIXME: shadowPane is no longer a valid option                                                                     // 6392
		nonBubblingEvents: ['click', 'dblclick', 'mouseover', 'mouseout', 'contextmenu']                                     // 6393
	},                                                                                                                    // 6394
                                                                                                                       // 6395
	/* @section                                                                                                           // 6396
	 *                                                                                                                    // 6397
	 * In addition to [shared layer methods](#Layer) like `addTo()` and `remove()` and [popup methods](#Popup) like bindPopup() you can also use the following methods:
	 */                                                                                                                   // 6399
                                                                                                                       // 6400
	initialize: function (latlng, options) {                                                                              // 6401
		L.setOptions(this, options);                                                                                         // 6402
		this._latlng = L.latLng(latlng);                                                                                     // 6403
	},                                                                                                                    // 6404
                                                                                                                       // 6405
	onAdd: function (map) {                                                                                               // 6406
		this._zoomAnimated = this._zoomAnimated && map.options.markerZoomAnimation;                                          // 6407
                                                                                                                       // 6408
		if (this._zoomAnimated) {                                                                                            // 6409
			map.on('zoomanim', this._animateZoom, this);                                                                        // 6410
		}                                                                                                                    // 6411
                                                                                                                       // 6412
		this._initIcon();                                                                                                    // 6413
		this.update();                                                                                                       // 6414
	},                                                                                                                    // 6415
                                                                                                                       // 6416
	onRemove: function (map) {                                                                                            // 6417
		if (this.dragging && this.dragging.enabled()) {                                                                      // 6418
			this.options.draggable = true;                                                                                      // 6419
			this.dragging.removeHooks();                                                                                        // 6420
		}                                                                                                                    // 6421
                                                                                                                       // 6422
		if (this._zoomAnimated) {                                                                                            // 6423
			map.off('zoomanim', this._animateZoom, this);                                                                       // 6424
		}                                                                                                                    // 6425
                                                                                                                       // 6426
		this._removeIcon();                                                                                                  // 6427
		this._removeShadow();                                                                                                // 6428
	},                                                                                                                    // 6429
                                                                                                                       // 6430
	getEvents: function () {                                                                                              // 6431
		return {                                                                                                             // 6432
			zoom: this.update,                                                                                                  // 6433
			viewreset: this.update                                                                                              // 6434
		};                                                                                                                   // 6435
	},                                                                                                                    // 6436
                                                                                                                       // 6437
	// @method getLatLng: LatLng                                                                                          // 6438
	// Returns the current geographical position of the marker.                                                           // 6439
	getLatLng: function () {                                                                                              // 6440
		return this._latlng;                                                                                                 // 6441
	},                                                                                                                    // 6442
                                                                                                                       // 6443
	// @method setLatLng(latlng: LatLng): this                                                                            // 6444
	// Changes the marker position to the given point.                                                                    // 6445
	setLatLng: function (latlng) {                                                                                        // 6446
		var oldLatLng = this._latlng;                                                                                        // 6447
		this._latlng = L.latLng(latlng);                                                                                     // 6448
		this.update();                                                                                                       // 6449
                                                                                                                       // 6450
		// @event move: Event                                                                                                // 6451
		// Fired when the marker is moved via [`setLatLng`](#marker-setlatlng) or by [dragging](#marker-dragging). Old and new coordinates are included in event arguments as `oldLatLng`, `latlng`.
		return this.fire('move', {oldLatLng: oldLatLng, latlng: this._latlng});                                              // 6453
	},                                                                                                                    // 6454
                                                                                                                       // 6455
	// @method setZIndexOffset(offset: Number): this                                                                      // 6456
	// Changes the [zIndex offset](#marker-zindexoffset) of the marker.                                                   // 6457
	setZIndexOffset: function (offset) {                                                                                  // 6458
		this.options.zIndexOffset = offset;                                                                                  // 6459
		return this.update();                                                                                                // 6460
	},                                                                                                                    // 6461
                                                                                                                       // 6462
	// @method setIcon(icon: Icon): this                                                                                  // 6463
	// Changes the marker icon.                                                                                           // 6464
	setIcon: function (icon) {                                                                                            // 6465
                                                                                                                       // 6466
		this.options.icon = icon;                                                                                            // 6467
                                                                                                                       // 6468
		if (this._map) {                                                                                                     // 6469
			this._initIcon();                                                                                                   // 6470
			this.update();                                                                                                      // 6471
		}                                                                                                                    // 6472
                                                                                                                       // 6473
		if (this._popup) {                                                                                                   // 6474
			this.bindPopup(this._popup, this._popup.options);                                                                   // 6475
		}                                                                                                                    // 6476
                                                                                                                       // 6477
		return this;                                                                                                         // 6478
	},                                                                                                                    // 6479
                                                                                                                       // 6480
	getElement: function () {                                                                                             // 6481
		return this._icon;                                                                                                   // 6482
	},                                                                                                                    // 6483
                                                                                                                       // 6484
	update: function () {                                                                                                 // 6485
                                                                                                                       // 6486
		if (this._icon) {                                                                                                    // 6487
			var pos = this._map.latLngToLayerPoint(this._latlng).round();                                                       // 6488
			this._setPos(pos);                                                                                                  // 6489
		}                                                                                                                    // 6490
                                                                                                                       // 6491
		return this;                                                                                                         // 6492
	},                                                                                                                    // 6493
                                                                                                                       // 6494
	_initIcon: function () {                                                                                              // 6495
		var options = this.options,                                                                                          // 6496
		    classToAdd = 'leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');                                       // 6497
                                                                                                                       // 6498
		var icon = options.icon.createIcon(this._icon),                                                                      // 6499
		    addIcon = false;                                                                                                 // 6500
                                                                                                                       // 6501
		// if we're not reusing the icon, remove the old one and init new one                                                // 6502
		if (icon !== this._icon) {                                                                                           // 6503
			if (this._icon) {                                                                                                   // 6504
				this._removeIcon();                                                                                                // 6505
			}                                                                                                                   // 6506
			addIcon = true;                                                                                                     // 6507
                                                                                                                       // 6508
			if (options.title) {                                                                                                // 6509
				icon.title = options.title;                                                                                        // 6510
			}                                                                                                                   // 6511
			if (options.alt) {                                                                                                  // 6512
				icon.alt = options.alt;                                                                                            // 6513
			}                                                                                                                   // 6514
		}                                                                                                                    // 6515
                                                                                                                       // 6516
		L.DomUtil.addClass(icon, classToAdd);                                                                                // 6517
                                                                                                                       // 6518
		if (options.keyboard) {                                                                                              // 6519
			icon.tabIndex = '0';                                                                                                // 6520
		}                                                                                                                    // 6521
                                                                                                                       // 6522
		this._icon = icon;                                                                                                   // 6523
                                                                                                                       // 6524
		if (options.riseOnHover) {                                                                                           // 6525
			this.on({                                                                                                           // 6526
				mouseover: this._bringToFront,                                                                                     // 6527
				mouseout: this._resetZIndex                                                                                        // 6528
			});                                                                                                                 // 6529
		}                                                                                                                    // 6530
                                                                                                                       // 6531
		var newShadow = options.icon.createShadow(this._shadow),                                                             // 6532
		    addShadow = false;                                                                                               // 6533
                                                                                                                       // 6534
		if (newShadow !== this._shadow) {                                                                                    // 6535
			this._removeShadow();                                                                                               // 6536
			addShadow = true;                                                                                                   // 6537
		}                                                                                                                    // 6538
                                                                                                                       // 6539
		if (newShadow) {                                                                                                     // 6540
			L.DomUtil.addClass(newShadow, classToAdd);                                                                          // 6541
			newShadow.alt = '';                                                                                                 // 6542
		}                                                                                                                    // 6543
		this._shadow = newShadow;                                                                                            // 6544
                                                                                                                       // 6545
                                                                                                                       // 6546
		if (options.opacity < 1) {                                                                                           // 6547
			this._updateOpacity();                                                                                              // 6548
		}                                                                                                                    // 6549
                                                                                                                       // 6550
                                                                                                                       // 6551
		if (addIcon) {                                                                                                       // 6552
			this.getPane().appendChild(this._icon);                                                                             // 6553
		}                                                                                                                    // 6554
		this._initInteraction();                                                                                             // 6555
		if (newShadow && addShadow) {                                                                                        // 6556
			this.getPane('shadowPane').appendChild(this._shadow);                                                               // 6557
		}                                                                                                                    // 6558
	},                                                                                                                    // 6559
                                                                                                                       // 6560
	_removeIcon: function () {                                                                                            // 6561
		if (this.options.riseOnHover) {                                                                                      // 6562
			this.off({                                                                                                          // 6563
				mouseover: this._bringToFront,                                                                                     // 6564
				mouseout: this._resetZIndex                                                                                        // 6565
			});                                                                                                                 // 6566
		}                                                                                                                    // 6567
                                                                                                                       // 6568
		L.DomUtil.remove(this._icon);                                                                                        // 6569
		this.removeInteractiveTarget(this._icon);                                                                            // 6570
                                                                                                                       // 6571
		this._icon = null;                                                                                                   // 6572
	},                                                                                                                    // 6573
                                                                                                                       // 6574
	_removeShadow: function () {                                                                                          // 6575
		if (this._shadow) {                                                                                                  // 6576
			L.DomUtil.remove(this._shadow);                                                                                     // 6577
		}                                                                                                                    // 6578
		this._shadow = null;                                                                                                 // 6579
	},                                                                                                                    // 6580
                                                                                                                       // 6581
	_setPos: function (pos) {                                                                                             // 6582
		L.DomUtil.setPosition(this._icon, pos);                                                                              // 6583
                                                                                                                       // 6584
		if (this._shadow) {                                                                                                  // 6585
			L.DomUtil.setPosition(this._shadow, pos);                                                                           // 6586
		}                                                                                                                    // 6587
                                                                                                                       // 6588
		this._zIndex = pos.y + this.options.zIndexOffset;                                                                    // 6589
                                                                                                                       // 6590
		this._resetZIndex();                                                                                                 // 6591
	},                                                                                                                    // 6592
                                                                                                                       // 6593
	_updateZIndex: function (offset) {                                                                                    // 6594
		this._icon.style.zIndex = this._zIndex + offset;                                                                     // 6595
	},                                                                                                                    // 6596
                                                                                                                       // 6597
	_animateZoom: function (opt) {                                                                                        // 6598
		var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();                              // 6599
                                                                                                                       // 6600
		this._setPos(pos);                                                                                                   // 6601
	},                                                                                                                    // 6602
                                                                                                                       // 6603
	_initInteraction: function () {                                                                                       // 6604
                                                                                                                       // 6605
		if (!this.options.interactive) { return; }                                                                           // 6606
                                                                                                                       // 6607
		L.DomUtil.addClass(this._icon, 'leaflet-interactive');                                                               // 6608
                                                                                                                       // 6609
		this.addInteractiveTarget(this._icon);                                                                               // 6610
                                                                                                                       // 6611
		if (L.Handler.MarkerDrag) {                                                                                          // 6612
			var draggable = this.options.draggable;                                                                             // 6613
			if (this.dragging) {                                                                                                // 6614
				draggable = this.dragging.enabled();                                                                               // 6615
				this.dragging.disable();                                                                                           // 6616
			}                                                                                                                   // 6617
                                                                                                                       // 6618
			this.dragging = new L.Handler.MarkerDrag(this);                                                                     // 6619
                                                                                                                       // 6620
			if (draggable) {                                                                                                    // 6621
				this.dragging.enable();                                                                                            // 6622
			}                                                                                                                   // 6623
		}                                                                                                                    // 6624
	},                                                                                                                    // 6625
                                                                                                                       // 6626
	// @method setOpacity(opacity: Number): this                                                                          // 6627
	// Changes the opacity of the marker.                                                                                 // 6628
	setOpacity: function (opacity) {                                                                                      // 6629
		this.options.opacity = opacity;                                                                                      // 6630
		if (this._map) {                                                                                                     // 6631
			this._updateOpacity();                                                                                              // 6632
		}                                                                                                                    // 6633
                                                                                                                       // 6634
		return this;                                                                                                         // 6635
	},                                                                                                                    // 6636
                                                                                                                       // 6637
	_updateOpacity: function () {                                                                                         // 6638
		var opacity = this.options.opacity;                                                                                  // 6639
                                                                                                                       // 6640
		L.DomUtil.setOpacity(this._icon, opacity);                                                                           // 6641
                                                                                                                       // 6642
		if (this._shadow) {                                                                                                  // 6643
			L.DomUtil.setOpacity(this._shadow, opacity);                                                                        // 6644
		}                                                                                                                    // 6645
	},                                                                                                                    // 6646
                                                                                                                       // 6647
	_bringToFront: function () {                                                                                          // 6648
		this._updateZIndex(this.options.riseOffset);                                                                         // 6649
	},                                                                                                                    // 6650
                                                                                                                       // 6651
	_resetZIndex: function () {                                                                                           // 6652
		this._updateZIndex(0);                                                                                               // 6653
	},                                                                                                                    // 6654
                                                                                                                       // 6655
	_getPopupAnchor: function () {                                                                                        // 6656
		return this.options.icon.options.popupAnchor || [0, 0];                                                              // 6657
	},                                                                                                                    // 6658
                                                                                                                       // 6659
	_getTooltipAnchor: function () {                                                                                      // 6660
		return this.options.icon.options.tooltipAnchor || [0, 0];                                                            // 6661
	}                                                                                                                     // 6662
});                                                                                                                    // 6663
                                                                                                                       // 6664
                                                                                                                       // 6665
// factory L.marker(latlng: LatLng, options? : Marker options)                                                         // 6666
                                                                                                                       // 6667
// @factory L.marker(latlng: LatLng, options? : Marker options)                                                        // 6668
// Instantiates a Marker object given a geographical point and optionally an options object.                           // 6669
L.marker = function (latlng, options) {                                                                                // 6670
	return new L.Marker(latlng, options);                                                                                 // 6671
};                                                                                                                     // 6672
                                                                                                                       // 6673
                                                                                                                       // 6674
                                                                                                                       // 6675
/*                                                                                                                     // 6676
 * @class DivIcon                                                                                                      // 6677
 * @aka L.DivIcon                                                                                                      // 6678
 * @inherits Icon                                                                                                      // 6679
 *                                                                                                                     // 6680
 * Represents a lightweight icon for markers that uses a simple `<div>`                                                // 6681
 * element instead of an image. Inherits from `Icon` but ignores the `iconUrl` and shadow options.                     // 6682
 *                                                                                                                     // 6683
 * @example                                                                                                            // 6684
 * ```js                                                                                                               // 6685
 * var myIcon = L.divIcon({className: 'my-div-icon'});                                                                 // 6686
 * // you can set .my-div-icon styles in CSS                                                                           // 6687
 *                                                                                                                     // 6688
 * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);                                                               // 6689
 * ```                                                                                                                 // 6690
 *                                                                                                                     // 6691
 * By default, it has a 'leaflet-div-icon' CSS class and is styled as a little white square with a shadow.             // 6692
 */                                                                                                                    // 6693
                                                                                                                       // 6694
L.DivIcon = L.Icon.extend({                                                                                            // 6695
	options: {                                                                                                            // 6696
		// @section                                                                                                          // 6697
		// @aka DivIcon options                                                                                              // 6698
		iconSize: [12, 12], // also can be set through CSS                                                                   // 6699
                                                                                                                       // 6700
		// iconAnchor: (Point),                                                                                              // 6701
		// popupAnchor: (Point),                                                                                             // 6702
                                                                                                                       // 6703
		// @option html: String = ''                                                                                         // 6704
		// Custom HTML code to put inside the div element, empty by default.                                                 // 6705
		html: false,                                                                                                         // 6706
                                                                                                                       // 6707
		// @option bgPos: Point = [0, 0]                                                                                     // 6708
		// Optional relative position of the background, in pixels                                                           // 6709
		bgPos: null,                                                                                                         // 6710
                                                                                                                       // 6711
		className: 'leaflet-div-icon'                                                                                        // 6712
	},                                                                                                                    // 6713
                                                                                                                       // 6714
	createIcon: function (oldIcon) {                                                                                      // 6715
		var div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),                          // 6716
		    options = this.options;                                                                                          // 6717
                                                                                                                       // 6718
		div.innerHTML = options.html !== false ? options.html : '';                                                          // 6719
                                                                                                                       // 6720
		if (options.bgPos) {                                                                                                 // 6721
			var bgPos = L.point(options.bgPos);                                                                                 // 6722
			div.style.backgroundPosition = (-bgPos.x) + 'px ' + (-bgPos.y) + 'px';                                              // 6723
		}                                                                                                                    // 6724
		this._setIconStyles(div, 'icon');                                                                                    // 6725
                                                                                                                       // 6726
		return div;                                                                                                          // 6727
	},                                                                                                                    // 6728
                                                                                                                       // 6729
	createShadow: function () {                                                                                           // 6730
		return null;                                                                                                         // 6731
	}                                                                                                                     // 6732
});                                                                                                                    // 6733
                                                                                                                       // 6734
// @factory L.divIcon(options: DivIcon options)                                                                        // 6735
// Creates a `DivIcon` instance with the given options.                                                                // 6736
L.divIcon = function (options) {                                                                                       // 6737
	return new L.DivIcon(options);                                                                                        // 6738
};                                                                                                                     // 6739
                                                                                                                       // 6740
                                                                                                                       // 6741
                                                                                                                       // 6742
/*                                                                                                                     // 6743
 * @class DivOverlay                                                                                                   // 6744
 * @inherits Layer                                                                                                     // 6745
 * @aka L.DivOverlay                                                                                                   // 6746
 * Base model for L.Popup and L.Tooltip. Inherit from it for custom popup like plugins.                                // 6747
 */                                                                                                                    // 6748
                                                                                                                       // 6749
// @namespace DivOverlay                                                                                               // 6750
L.DivOverlay = L.Layer.extend({                                                                                        // 6751
                                                                                                                       // 6752
	// @section                                                                                                           // 6753
	// @aka DivOverlay options                                                                                            // 6754
	options: {                                                                                                            // 6755
		// @option offset: Point = Point(0, 7)                                                                               // 6756
		// The offset of the popup position. Useful to control the anchor                                                    // 6757
		// of the popup when opening it on some overlays.                                                                    // 6758
		offset: [0, 7],                                                                                                      // 6759
                                                                                                                       // 6760
		// @option className: String = ''                                                                                    // 6761
		// A custom CSS class name to assign to the popup.                                                                   // 6762
		className: '',                                                                                                       // 6763
                                                                                                                       // 6764
		// @option pane: String = 'popupPane'                                                                                // 6765
		// `Map pane` where the popup will be added.                                                                         // 6766
		pane: 'popupPane'                                                                                                    // 6767
	},                                                                                                                    // 6768
                                                                                                                       // 6769
	initialize: function (options, source) {                                                                              // 6770
		L.setOptions(this, options);                                                                                         // 6771
                                                                                                                       // 6772
		this._source = source;                                                                                               // 6773
	},                                                                                                                    // 6774
                                                                                                                       // 6775
	onAdd: function (map) {                                                                                               // 6776
		this._zoomAnimated = map._zoomAnimated;                                                                              // 6777
                                                                                                                       // 6778
		if (!this._container) {                                                                                              // 6779
			this._initLayout();                                                                                                 // 6780
		}                                                                                                                    // 6781
                                                                                                                       // 6782
		if (map._fadeAnimated) {                                                                                             // 6783
			L.DomUtil.setOpacity(this._container, 0);                                                                           // 6784
		}                                                                                                                    // 6785
                                                                                                                       // 6786
		clearTimeout(this._removeTimeout);                                                                                   // 6787
		this.getPane().appendChild(this._container);                                                                         // 6788
		this.update();                                                                                                       // 6789
                                                                                                                       // 6790
		if (map._fadeAnimated) {                                                                                             // 6791
			L.DomUtil.setOpacity(this._container, 1);                                                                           // 6792
		}                                                                                                                    // 6793
                                                                                                                       // 6794
		this.bringToFront();                                                                                                 // 6795
	},                                                                                                                    // 6796
                                                                                                                       // 6797
	onRemove: function (map) {                                                                                            // 6798
		if (map._fadeAnimated) {                                                                                             // 6799
			L.DomUtil.setOpacity(this._container, 0);                                                                           // 6800
			this._removeTimeout = setTimeout(L.bind(L.DomUtil.remove, L.DomUtil, this._container), 200);                        // 6801
		} else {                                                                                                             // 6802
			L.DomUtil.remove(this._container);                                                                                  // 6803
		}                                                                                                                    // 6804
	},                                                                                                                    // 6805
                                                                                                                       // 6806
	// @namespace Popup                                                                                                   // 6807
	// @method getLatLng: LatLng                                                                                          // 6808
	// Returns the geographical point of popup.                                                                           // 6809
	getLatLng: function () {                                                                                              // 6810
		return this._latlng;                                                                                                 // 6811
	},                                                                                                                    // 6812
                                                                                                                       // 6813
	// @method setLatLng(latlng: LatLng): this                                                                            // 6814
	// Sets the geographical point where the popup will open.                                                             // 6815
	setLatLng: function (latlng) {                                                                                        // 6816
		this._latlng = L.latLng(latlng);                                                                                     // 6817
		if (this._map) {                                                                                                     // 6818
			this._updatePosition();                                                                                             // 6819
			this._adjustPan();                                                                                                  // 6820
		}                                                                                                                    // 6821
		return this;                                                                                                         // 6822
	},                                                                                                                    // 6823
                                                                                                                       // 6824
	// @method getContent: String|HTMLElement                                                                             // 6825
	// Returns the content of the popup.                                                                                  // 6826
	getContent: function () {                                                                                             // 6827
		return this._content;                                                                                                // 6828
	},                                                                                                                    // 6829
                                                                                                                       // 6830
	// @method setContent(htmlContent: String|HTMLElement|Function): this                                                 // 6831
	// Sets the HTML content of the popup. If a function is passed the source layer will be passed to the function. The function should return a `String` or `HTMLElement` to be used in the popup.
	setContent: function (content) {                                                                                      // 6833
		this._content = content;                                                                                             // 6834
		this.update();                                                                                                       // 6835
		return this;                                                                                                         // 6836
	},                                                                                                                    // 6837
                                                                                                                       // 6838
	// @method getElement: String|HTMLElement                                                                             // 6839
	// Alias for [getContent()](#popup-getcontent)                                                                        // 6840
	getElement: function () {                                                                                             // 6841
		return this._container;                                                                                              // 6842
	},                                                                                                                    // 6843
                                                                                                                       // 6844
	// @method update: null                                                                                               // 6845
	// Updates the popup content, layout and position. Useful for updating the popup after something inside changed, e.g. image loaded.
	update: function () {                                                                                                 // 6847
		if (!this._map) { return; }                                                                                          // 6848
                                                                                                                       // 6849
		this._container.style.visibility = 'hidden';                                                                         // 6850
                                                                                                                       // 6851
		this._updateContent();                                                                                               // 6852
		this._updateLayout();                                                                                                // 6853
		this._updatePosition();                                                                                              // 6854
                                                                                                                       // 6855
		this._container.style.visibility = '';                                                                               // 6856
                                                                                                                       // 6857
		this._adjustPan();                                                                                                   // 6858
	},                                                                                                                    // 6859
                                                                                                                       // 6860
	getEvents: function () {                                                                                              // 6861
		var events = {                                                                                                       // 6862
			zoom: this._updatePosition,                                                                                         // 6863
			viewreset: this._updatePosition                                                                                     // 6864
		};                                                                                                                   // 6865
                                                                                                                       // 6866
		if (this._zoomAnimated) {                                                                                            // 6867
			events.zoomanim = this._animateZoom;                                                                                // 6868
		}                                                                                                                    // 6869
		return events;                                                                                                       // 6870
	},                                                                                                                    // 6871
                                                                                                                       // 6872
	// @method isOpen: Boolean                                                                                            // 6873
	// Returns `true` when the popup is visible on the map.                                                               // 6874
	isOpen: function () {                                                                                                 // 6875
		return !!this._map && this._map.hasLayer(this);                                                                      // 6876
	},                                                                                                                    // 6877
                                                                                                                       // 6878
	// @method bringToFront: this                                                                                         // 6879
	// Brings this popup in front of other popups (in the same map pane).                                                 // 6880
	bringToFront: function () {                                                                                           // 6881
		if (this._map) {                                                                                                     // 6882
			L.DomUtil.toFront(this._container);                                                                                 // 6883
		}                                                                                                                    // 6884
		return this;                                                                                                         // 6885
	},                                                                                                                    // 6886
                                                                                                                       // 6887
	// @method bringToBack: this                                                                                          // 6888
	// Brings this popup to the back of other popups (in the same map pane).                                              // 6889
	bringToBack: function () {                                                                                            // 6890
		if (this._map) {                                                                                                     // 6891
			L.DomUtil.toBack(this._container);                                                                                  // 6892
		}                                                                                                                    // 6893
		return this;                                                                                                         // 6894
	},                                                                                                                    // 6895
                                                                                                                       // 6896
	_updateContent: function () {                                                                                         // 6897
		if (!this._content) { return; }                                                                                      // 6898
                                                                                                                       // 6899
		var node = this._contentNode;                                                                                        // 6900
		var content = (typeof this._content === 'function') ? this._content(this._source || this) : this._content;           // 6901
                                                                                                                       // 6902
		if (typeof content === 'string') {                                                                                   // 6903
			node.innerHTML = content;                                                                                           // 6904
		} else {                                                                                                             // 6905
			while (node.hasChildNodes()) {                                                                                      // 6906
				node.removeChild(node.firstChild);                                                                                 // 6907
			}                                                                                                                   // 6908
			node.appendChild(content);                                                                                          // 6909
		}                                                                                                                    // 6910
		this.fire('contentupdate');                                                                                          // 6911
	},                                                                                                                    // 6912
                                                                                                                       // 6913
	_updatePosition: function () {                                                                                        // 6914
		if (!this._map) { return; }                                                                                          // 6915
                                                                                                                       // 6916
		var pos = this._map.latLngToLayerPoint(this._latlng),                                                                // 6917
		    offset = L.point(this.options.offset),                                                                           // 6918
		    anchor = this._getAnchor();                                                                                      // 6919
                                                                                                                       // 6920
		if (this._zoomAnimated) {                                                                                            // 6921
			L.DomUtil.setPosition(this._container, pos.add(anchor));                                                            // 6922
		} else {                                                                                                             // 6923
			offset = offset.add(pos).add(anchor);                                                                               // 6924
		}                                                                                                                    // 6925
                                                                                                                       // 6926
		var bottom = this._containerBottom = -offset.y,                                                                      // 6927
		    left = this._containerLeft = -Math.round(this._containerWidth / 2) + offset.x;                                   // 6928
                                                                                                                       // 6929
		// bottom position the popup in case the height of the popup changes (images loading etc)                            // 6930
		this._container.style.bottom = bottom + 'px';                                                                        // 6931
		this._container.style.left = left + 'px';                                                                            // 6932
	},                                                                                                                    // 6933
                                                                                                                       // 6934
	_getAnchor: function () {                                                                                             // 6935
		return [0, 0];                                                                                                       // 6936
	}                                                                                                                     // 6937
                                                                                                                       // 6938
});                                                                                                                    // 6939
                                                                                                                       // 6940
                                                                                                                       // 6941
                                                                                                                       // 6942
/*                                                                                                                     // 6943
 * @class Popup                                                                                                        // 6944
 * @inherits DivOverlay                                                                                                // 6945
 * @aka L.Popup                                                                                                        // 6946
 * Used to open popups in certain places of the map. Use [Map.openPopup](#map-openpopup) to                            // 6947
 * open popups while making sure that only one popup is open at one time                                               // 6948
 * (recommended for usability), or use [Map.addLayer](#map-addlayer) to open as many as you want.                      // 6949
 *                                                                                                                     // 6950
 * @example                                                                                                            // 6951
 *                                                                                                                     // 6952
 * If you want to just bind a popup to marker click and then open it, it's really easy:                                // 6953
 *                                                                                                                     // 6954
 * ```js                                                                                                               // 6955
 * marker.bindPopup(popupContent).openPopup();                                                                         // 6956
 * ```                                                                                                                 // 6957
 * Path overlays like polylines also have a `bindPopup` method.                                                        // 6958
 * Here's a more complicated way to open a popup on a map:                                                             // 6959
 *                                                                                                                     // 6960
 * ```js                                                                                                               // 6961
 * var popup = L.popup()                                                                                               // 6962
 * 	.setLatLng(latlng)                                                                                                 // 6963
 * 	.setContent('<p>Hello world!<br />This is a nice popup.</p>')                                                      // 6964
 * 	.openOn(map);                                                                                                      // 6965
 * ```                                                                                                                 // 6966
 */                                                                                                                    // 6967
                                                                                                                       // 6968
                                                                                                                       // 6969
// @namespace Popup                                                                                                    // 6970
L.Popup = L.DivOverlay.extend({                                                                                        // 6971
                                                                                                                       // 6972
	// @section                                                                                                           // 6973
	// @aka Popup options                                                                                                 // 6974
	options: {                                                                                                            // 6975
		// @option maxWidth: Number = 300                                                                                    // 6976
		// Max width of the popup, in pixels.                                                                                // 6977
		maxWidth: 300,                                                                                                       // 6978
                                                                                                                       // 6979
		// @option minWidth: Number = 50                                                                                     // 6980
		// Min width of the popup, in pixels.                                                                                // 6981
		minWidth: 50,                                                                                                        // 6982
                                                                                                                       // 6983
		// @option maxHeight: Number = null                                                                                  // 6984
		// If set, creates a scrollable container of the given height                                                        // 6985
		// inside a popup if its content exceeds it.                                                                         // 6986
		maxHeight: null,                                                                                                     // 6987
                                                                                                                       // 6988
		// @option autoPan: Boolean = true                                                                                   // 6989
		// Set it to `false` if you don't want the map to do panning animation                                               // 6990
		// to fit the opened popup.                                                                                          // 6991
		autoPan: true,                                                                                                       // 6992
                                                                                                                       // 6993
		// @option autoPanPaddingTopLeft: Point = null                                                                       // 6994
		// The margin between the popup and the top left corner of the map                                                   // 6995
		// view after autopanning was performed.                                                                             // 6996
		autoPanPaddingTopLeft: null,                                                                                         // 6997
                                                                                                                       // 6998
		// @option autoPanPaddingBottomRight: Point = null                                                                   // 6999
		// The margin between the popup and the bottom right corner of the map                                               // 7000
		// view after autopanning was performed.                                                                             // 7001
		autoPanPaddingBottomRight: null,                                                                                     // 7002
                                                                                                                       // 7003
		// @option autoPanPadding: Point = Point(5, 5)                                                                       // 7004
		// Equivalent of setting both top left and bottom right autopan padding to the same value.                           // 7005
		autoPanPadding: [5, 5],                                                                                              // 7006
                                                                                                                       // 7007
		// @option keepInView: Boolean = false                                                                               // 7008
		// Set it to `true` if you want to prevent users from panning the popup                                              // 7009
		// off of the screen while it is open.                                                                               // 7010
		keepInView: false,                                                                                                   // 7011
                                                                                                                       // 7012
		// @option closeButton: Boolean = true                                                                               // 7013
		// Controls the presence of a close button in the popup.                                                             // 7014
		closeButton: true,                                                                                                   // 7015
                                                                                                                       // 7016
		// @option autoClose: Boolean = true                                                                                 // 7017
		// Set it to `false` if you want to override the default behavior of                                                 // 7018
		// the popup closing when user clicks the map (set globally by                                                       // 7019
		// the Map's [closePopupOnClick](#map-closepopuponclick) option).                                                    // 7020
		autoClose: true,                                                                                                     // 7021
                                                                                                                       // 7022
		// @option className: String = ''                                                                                    // 7023
		// A custom CSS class name to assign to the popup.                                                                   // 7024
		className: ''                                                                                                        // 7025
	},                                                                                                                    // 7026
                                                                                                                       // 7027
	// @namespace Popup                                                                                                   // 7028
	// @method openOn(map: Map): this                                                                                     // 7029
	// Adds the popup to the map and closes the previous one. The same as `map.openPopup(popup)`.                         // 7030
	openOn: function (map) {                                                                                              // 7031
		map.openPopup(this);                                                                                                 // 7032
		return this;                                                                                                         // 7033
	},                                                                                                                    // 7034
                                                                                                                       // 7035
	onAdd: function (map) {                                                                                               // 7036
		L.DivOverlay.prototype.onAdd.call(this, map);                                                                        // 7037
                                                                                                                       // 7038
		// @namespace Map                                                                                                    // 7039
		// @section Popup events                                                                                             // 7040
		// @event popupopen: PopupEvent                                                                                      // 7041
		// Fired when a popup is opened in the map                                                                           // 7042
		map.fire('popupopen', {popup: this});                                                                                // 7043
                                                                                                                       // 7044
		if (this._source) {                                                                                                  // 7045
			// @namespace Layer                                                                                                 // 7046
			// @section Popup events                                                                                            // 7047
			// @event popupopen: PopupEvent                                                                                     // 7048
			// Fired when a popup bound to this layer is opened                                                                 // 7049
			this._source.fire('popupopen', {popup: this}, true);                                                                // 7050
			// For non-path layers, we toggle the popup when clicking                                                           // 7051
			// again the layer, so prevent the map to reopen it.                                                                // 7052
			if (!(this._source instanceof L.Path)) {                                                                            // 7053
				this._source.on('preclick', L.DomEvent.stopPropagation);                                                           // 7054
			}                                                                                                                   // 7055
		}                                                                                                                    // 7056
	},                                                                                                                    // 7057
                                                                                                                       // 7058
	onRemove: function (map) {                                                                                            // 7059
		L.DivOverlay.prototype.onRemove.call(this, map);                                                                     // 7060
                                                                                                                       // 7061
		// @namespace Map                                                                                                    // 7062
		// @section Popup events                                                                                             // 7063
		// @event popupclose: PopupEvent                                                                                     // 7064
		// Fired when a popup in the map is closed                                                                           // 7065
		map.fire('popupclose', {popup: this});                                                                               // 7066
                                                                                                                       // 7067
		if (this._source) {                                                                                                  // 7068
			// @namespace Layer                                                                                                 // 7069
			// @section Popup events                                                                                            // 7070
			// @event popupclose: PopupEvent                                                                                    // 7071
			// Fired when a popup bound to this layer is closed                                                                 // 7072
			this._source.fire('popupclose', {popup: this}, true);                                                               // 7073
			if (!(this._source instanceof L.Path)) {                                                                            // 7074
				this._source.off('preclick', L.DomEvent.stopPropagation);                                                          // 7075
			}                                                                                                                   // 7076
		}                                                                                                                    // 7077
	},                                                                                                                    // 7078
                                                                                                                       // 7079
	getEvents: function () {                                                                                              // 7080
		var events = L.DivOverlay.prototype.getEvents.call(this);                                                            // 7081
                                                                                                                       // 7082
		if ('closeOnClick' in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) {              // 7083
			events.preclick = this._close;                                                                                      // 7084
		}                                                                                                                    // 7085
                                                                                                                       // 7086
		if (this.options.keepInView) {                                                                                       // 7087
			events.moveend = this._adjustPan;                                                                                   // 7088
		}                                                                                                                    // 7089
                                                                                                                       // 7090
		return events;                                                                                                       // 7091
	},                                                                                                                    // 7092
                                                                                                                       // 7093
	_close: function () {                                                                                                 // 7094
		if (this._map) {                                                                                                     // 7095
			this._map.closePopup(this);                                                                                         // 7096
		}                                                                                                                    // 7097
	},                                                                                                                    // 7098
                                                                                                                       // 7099
	_initLayout: function () {                                                                                            // 7100
		var prefix = 'leaflet-popup',                                                                                        // 7101
		    container = this._container = L.DomUtil.create('div',                                                            // 7102
			prefix + ' ' + (this.options.className || '') +                                                                     // 7103
			' leaflet-zoom-animated');                                                                                          // 7104
                                                                                                                       // 7105
		if (this.options.closeButton) {                                                                                      // 7106
			var closeButton = this._closeButton = L.DomUtil.create('a', prefix + '-close-button', container);                   // 7107
			closeButton.href = '#close';                                                                                        // 7108
			closeButton.innerHTML = '&#215;';                                                                                   // 7109
                                                                                                                       // 7110
			L.DomEvent.on(closeButton, 'click', this._onCloseButtonClick, this);                                                // 7111
		}                                                                                                                    // 7112
                                                                                                                       // 7113
		var wrapper = this._wrapper = L.DomUtil.create('div', prefix + '-content-wrapper', container);                       // 7114
		this._contentNode = L.DomUtil.create('div', prefix + '-content', wrapper);                                           // 7115
                                                                                                                       // 7116
		L.DomEvent                                                                                                           // 7117
			.disableClickPropagation(wrapper)                                                                                   // 7118
			.disableScrollPropagation(this._contentNode)                                                                        // 7119
			.on(wrapper, 'contextmenu', L.DomEvent.stopPropagation);                                                            // 7120
                                                                                                                       // 7121
		this._tipContainer = L.DomUtil.create('div', prefix + '-tip-container', container);                                  // 7122
		this._tip = L.DomUtil.create('div', prefix + '-tip', this._tipContainer);                                            // 7123
	},                                                                                                                    // 7124
                                                                                                                       // 7125
	_updateLayout: function () {                                                                                          // 7126
		var container = this._contentNode,                                                                                   // 7127
		    style = container.style;                                                                                         // 7128
                                                                                                                       // 7129
		style.width = '';                                                                                                    // 7130
		style.whiteSpace = 'nowrap';                                                                                         // 7131
                                                                                                                       // 7132
		var width = container.offsetWidth;                                                                                   // 7133
		width = Math.min(width, this.options.maxWidth);                                                                      // 7134
		width = Math.max(width, this.options.minWidth);                                                                      // 7135
                                                                                                                       // 7136
		style.width = (width + 1) + 'px';                                                                                    // 7137
		style.whiteSpace = '';                                                                                               // 7138
                                                                                                                       // 7139
		style.height = '';                                                                                                   // 7140
                                                                                                                       // 7141
		var height = container.offsetHeight,                                                                                 // 7142
		    maxHeight = this.options.maxHeight,                                                                              // 7143
		    scrolledClass = 'leaflet-popup-scrolled';                                                                        // 7144
                                                                                                                       // 7145
		if (maxHeight && height > maxHeight) {                                                                               // 7146
			style.height = maxHeight + 'px';                                                                                    // 7147
			L.DomUtil.addClass(container, scrolledClass);                                                                       // 7148
		} else {                                                                                                             // 7149
			L.DomUtil.removeClass(container, scrolledClass);                                                                    // 7150
		}                                                                                                                    // 7151
                                                                                                                       // 7152
		this._containerWidth = this._container.offsetWidth;                                                                  // 7153
	},                                                                                                                    // 7154
                                                                                                                       // 7155
	_animateZoom: function (e) {                                                                                          // 7156
		var pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center),                                          // 7157
		    anchor = this._getAnchor();                                                                                      // 7158
		L.DomUtil.setPosition(this._container, pos.add(anchor));                                                             // 7159
	},                                                                                                                    // 7160
                                                                                                                       // 7161
	_adjustPan: function () {                                                                                             // 7162
		if (!this.options.autoPan || (this._map._panAnim && this._map._panAnim._inProgress)) { return; }                     // 7163
                                                                                                                       // 7164
		var map = this._map,                                                                                                 // 7165
		    marginBottom = parseInt(L.DomUtil.getStyle(this._container, 'marginBottom'), 10) || 0,                           // 7166
		    containerHeight = this._container.offsetHeight + marginBottom,                                                   // 7167
		    containerWidth = this._containerWidth,                                                                           // 7168
		    layerPos = new L.Point(this._containerLeft, -containerHeight - this._containerBottom);                           // 7169
                                                                                                                       // 7170
		layerPos._add(L.DomUtil.getPosition(this._container));                                                               // 7171
                                                                                                                       // 7172
		var containerPos = map.layerPointToContainerPoint(layerPos),                                                         // 7173
		    padding = L.point(this.options.autoPanPadding),                                                                  // 7174
		    paddingTL = L.point(this.options.autoPanPaddingTopLeft || padding),                                              // 7175
		    paddingBR = L.point(this.options.autoPanPaddingBottomRight || padding),                                          // 7176
		    size = map.getSize(),                                                                                            // 7177
		    dx = 0,                                                                                                          // 7178
		    dy = 0;                                                                                                          // 7179
                                                                                                                       // 7180
		if (containerPos.x + containerWidth + paddingBR.x > size.x) { // right                                               // 7181
			dx = containerPos.x + containerWidth - size.x + paddingBR.x;                                                        // 7182
		}                                                                                                                    // 7183
		if (containerPos.x - dx - paddingTL.x < 0) { // left                                                                 // 7184
			dx = containerPos.x - paddingTL.x;                                                                                  // 7185
		}                                                                                                                    // 7186
		if (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom                                             // 7187
			dy = containerPos.y + containerHeight - size.y + paddingBR.y;                                                       // 7188
		}                                                                                                                    // 7189
		if (containerPos.y - dy - paddingTL.y < 0) { // top                                                                  // 7190
			dy = containerPos.y - paddingTL.y;                                                                                  // 7191
		}                                                                                                                    // 7192
                                                                                                                       // 7193
		// @namespace Map                                                                                                    // 7194
		// @section Popup events                                                                                             // 7195
		// @event autopanstart: Event                                                                                        // 7196
		// Fired when the map starts autopanning when opening a popup.                                                       // 7197
		if (dx || dy) {                                                                                                      // 7198
			map                                                                                                                 // 7199
			    .fire('autopanstart')                                                                                           // 7200
			    .panBy([dx, dy]);                                                                                               // 7201
		}                                                                                                                    // 7202
	},                                                                                                                    // 7203
                                                                                                                       // 7204
	_onCloseButtonClick: function (e) {                                                                                   // 7205
		this._close();                                                                                                       // 7206
		L.DomEvent.stop(e);                                                                                                  // 7207
	},                                                                                                                    // 7208
                                                                                                                       // 7209
	_getAnchor: function () {                                                                                             // 7210
		// Where should we anchor the popup on the source layer?                                                             // 7211
		return L.point(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0]);              // 7212
	}                                                                                                                     // 7213
                                                                                                                       // 7214
});                                                                                                                    // 7215
                                                                                                                       // 7216
// @namespace Popup                                                                                                    // 7217
// @factory L.popup(options?: Popup options, source?: Layer)                                                           // 7218
// Instantiates a `Popup` object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the popup with a reference to the Layer to which it refers.
L.popup = function (options, source) {                                                                                 // 7220
	return new L.Popup(options, source);                                                                                  // 7221
};                                                                                                                     // 7222
                                                                                                                       // 7223
                                                                                                                       // 7224
/* @namespace Map                                                                                                      // 7225
 * @section Interaction Options                                                                                        // 7226
 * @option closePopupOnClick: Boolean = true                                                                           // 7227
 * Set it to `false` if you don't want popups to close when user clicks the map.                                       // 7228
 */                                                                                                                    // 7229
L.Map.mergeOptions({                                                                                                   // 7230
	closePopupOnClick: true                                                                                               // 7231
});                                                                                                                    // 7232
                                                                                                                       // 7233
                                                                                                                       // 7234
// @namespace Map                                                                                                      // 7235
// @section Methods for Layers and Controls                                                                            // 7236
L.Map.include({                                                                                                        // 7237
	// @method openPopup(popup: Popup): this                                                                              // 7238
	// Opens the specified popup while closing the previously opened (to make sure only one is opened at one time for usability).
	// @alternative                                                                                                       // 7240
	// @method openPopup(content: String|HTMLElement, latlng: LatLng, options?: Popup options): this                      // 7241
	// Creates a popup with the specified content and options and opens it in the given point on a map.                   // 7242
	openPopup: function (popup, latlng, options) {                                                                        // 7243
		if (!(popup instanceof L.Popup)) {                                                                                   // 7244
			popup = new L.Popup(options).setContent(popup);                                                                     // 7245
		}                                                                                                                    // 7246
                                                                                                                       // 7247
		if (latlng) {                                                                                                        // 7248
			popup.setLatLng(latlng);                                                                                            // 7249
		}                                                                                                                    // 7250
                                                                                                                       // 7251
		if (this.hasLayer(popup)) {                                                                                          // 7252
			return this;                                                                                                        // 7253
		}                                                                                                                    // 7254
                                                                                                                       // 7255
		if (this._popup && this._popup.options.autoClose) {                                                                  // 7256
			this.closePopup();                                                                                                  // 7257
		}                                                                                                                    // 7258
                                                                                                                       // 7259
		this._popup = popup;                                                                                                 // 7260
		return this.addLayer(popup);                                                                                         // 7261
	},                                                                                                                    // 7262
                                                                                                                       // 7263
	// @method closePopup(popup?: Popup): this                                                                            // 7264
	// Closes the popup previously opened with [openPopup](#map-openpopup) (or the given one).                            // 7265
	closePopup: function (popup) {                                                                                        // 7266
		if (!popup || popup === this._popup) {                                                                               // 7267
			popup = this._popup;                                                                                                // 7268
			this._popup = null;                                                                                                 // 7269
		}                                                                                                                    // 7270
		if (popup) {                                                                                                         // 7271
			this.removeLayer(popup);                                                                                            // 7272
		}                                                                                                                    // 7273
		return this;                                                                                                         // 7274
	}                                                                                                                     // 7275
});                                                                                                                    // 7276
                                                                                                                       // 7277
/*                                                                                                                     // 7278
 * @namespace Layer                                                                                                    // 7279
 * @section Popup methods example                                                                                      // 7280
 *                                                                                                                     // 7281
 * All layers share a set of methods convenient for binding popups to it.                                              // 7282
 *                                                                                                                     // 7283
 * ```js                                                                                                               // 7284
 * var layer = L.Polygon(latlngs).bindPopup('Hi There!').addTo(map);                                                   // 7285
 * layer.openPopup();                                                                                                  // 7286
 * layer.closePopup();                                                                                                 // 7287
 * ```                                                                                                                 // 7288
 *                                                                                                                     // 7289
 * Popups will also be automatically opened when the layer is clicked on and closed when the layer is removed from the map or another popup is opened.
 */                                                                                                                    // 7291
                                                                                                                       // 7292
// @section Popup methods                                                                                              // 7293
L.Layer.include({                                                                                                      // 7294
                                                                                                                       // 7295
	// @method bindPopup(content: String|HTMLElement|Function|Popup, options?: Popup options): this                       // 7296
	// Binds a popup to the layer with the passed `content` and sets up the                                               // 7297
	// neccessary event listeners. If a `Function` is passed it will receive                                              // 7298
	// the layer as the first argument and should return a `String` or `HTMLElement`.                                     // 7299
	bindPopup: function (content, options) {                                                                              // 7300
                                                                                                                       // 7301
		if (content instanceof L.Popup) {                                                                                    // 7302
			L.setOptions(content, options);                                                                                     // 7303
			this._popup = content;                                                                                              // 7304
			content._source = this;                                                                                             // 7305
		} else {                                                                                                             // 7306
			if (!this._popup || options) {                                                                                      // 7307
				this._popup = new L.Popup(options, this);                                                                          // 7308
			}                                                                                                                   // 7309
			this._popup.setContent(content);                                                                                    // 7310
		}                                                                                                                    // 7311
                                                                                                                       // 7312
		if (!this._popupHandlersAdded) {                                                                                     // 7313
			this.on({                                                                                                           // 7314
				click: this._openPopup,                                                                                            // 7315
				remove: this.closePopup,                                                                                           // 7316
				move: this._movePopup                                                                                              // 7317
			});                                                                                                                 // 7318
			this._popupHandlersAdded = true;                                                                                    // 7319
		}                                                                                                                    // 7320
                                                                                                                       // 7321
		return this;                                                                                                         // 7322
	},                                                                                                                    // 7323
                                                                                                                       // 7324
	// @method unbindPopup(): this                                                                                        // 7325
	// Removes the popup previously bound with `bindPopup`.                                                               // 7326
	unbindPopup: function () {                                                                                            // 7327
		if (this._popup) {                                                                                                   // 7328
			this.off({                                                                                                          // 7329
				click: this._openPopup,                                                                                            // 7330
				remove: this.closePopup,                                                                                           // 7331
				move: this._movePopup                                                                                              // 7332
			});                                                                                                                 // 7333
			this._popupHandlersAdded = false;                                                                                   // 7334
			this._popup = null;                                                                                                 // 7335
		}                                                                                                                    // 7336
		return this;                                                                                                         // 7337
	},                                                                                                                    // 7338
                                                                                                                       // 7339
	// @method openPopup(latlng?: LatLng): this                                                                           // 7340
	// Opens the bound popup at the specificed `latlng` or at the default popup anchor if no `latlng` is passed.          // 7341
	openPopup: function (layer, latlng) {                                                                                 // 7342
		if (!(layer instanceof L.Layer)) {                                                                                   // 7343
			latlng = layer;                                                                                                     // 7344
			layer = this;                                                                                                       // 7345
		}                                                                                                                    // 7346
                                                                                                                       // 7347
		if (layer instanceof L.FeatureGroup) {                                                                               // 7348
			for (var id in this._layers) {                                                                                      // 7349
				layer = this._layers[id];                                                                                          // 7350
				break;                                                                                                             // 7351
			}                                                                                                                   // 7352
		}                                                                                                                    // 7353
                                                                                                                       // 7354
		if (!latlng) {                                                                                                       // 7355
			latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();                                                   // 7356
		}                                                                                                                    // 7357
                                                                                                                       // 7358
		if (this._popup && this._map) {                                                                                      // 7359
			// set popup source to this layer                                                                                   // 7360
			this._popup._source = layer;                                                                                        // 7361
                                                                                                                       // 7362
			// update the popup (content, layout, ect...)                                                                       // 7363
			this._popup.update();                                                                                               // 7364
                                                                                                                       // 7365
			// open the popup on the map                                                                                        // 7366
			this._map.openPopup(this._popup, latlng);                                                                           // 7367
		}                                                                                                                    // 7368
                                                                                                                       // 7369
		return this;                                                                                                         // 7370
	},                                                                                                                    // 7371
                                                                                                                       // 7372
	// @method closePopup(): this                                                                                         // 7373
	// Closes the popup bound to this layer if it is open.                                                                // 7374
	closePopup: function () {                                                                                             // 7375
		if (this._popup) {                                                                                                   // 7376
			this._popup._close();                                                                                               // 7377
		}                                                                                                                    // 7378
		return this;                                                                                                         // 7379
	},                                                                                                                    // 7380
                                                                                                                       // 7381
	// @method togglePopup(): this                                                                                        // 7382
	// Opens or closes the popup bound to this layer depending on its current state.                                      // 7383
	togglePopup: function (target) {                                                                                      // 7384
		if (this._popup) {                                                                                                   // 7385
			if (this._popup._map) {                                                                                             // 7386
				this.closePopup();                                                                                                 // 7387
			} else {                                                                                                            // 7388
				this.openPopup(target);                                                                                            // 7389
			}                                                                                                                   // 7390
		}                                                                                                                    // 7391
		return this;                                                                                                         // 7392
	},                                                                                                                    // 7393
                                                                                                                       // 7394
	// @method isPopupOpen(): boolean                                                                                     // 7395
	// Returns `true` if the popup bound to this layer is currently open.                                                 // 7396
	isPopupOpen: function () {                                                                                            // 7397
		return (this._popup ? this._popup.isOpen() : false);                                                                 // 7398
	},                                                                                                                    // 7399
                                                                                                                       // 7400
	// @method setPopupContent(content: String|HTMLElement|Popup): this                                                   // 7401
	// Sets the content of the popup bound to this layer.                                                                 // 7402
	setPopupContent: function (content) {                                                                                 // 7403
		if (this._popup) {                                                                                                   // 7404
			this._popup.setContent(content);                                                                                    // 7405
		}                                                                                                                    // 7406
		return this;                                                                                                         // 7407
	},                                                                                                                    // 7408
                                                                                                                       // 7409
	// @method getPopup(): Popup                                                                                          // 7410
	// Returns the popup bound to this layer.                                                                             // 7411
	getPopup: function () {                                                                                               // 7412
		return this._popup;                                                                                                  // 7413
	},                                                                                                                    // 7414
                                                                                                                       // 7415
	_openPopup: function (e) {                                                                                            // 7416
		var layer = e.layer || e.target;                                                                                     // 7417
                                                                                                                       // 7418
		if (!this._popup) {                                                                                                  // 7419
			return;                                                                                                             // 7420
		}                                                                                                                    // 7421
                                                                                                                       // 7422
		if (!this._map) {                                                                                                    // 7423
			return;                                                                                                             // 7424
		}                                                                                                                    // 7425
                                                                                                                       // 7426
		// prevent map click                                                                                                 // 7427
		L.DomEvent.stop(e);                                                                                                  // 7428
                                                                                                                       // 7429
		// if this inherits from Path its a vector and we can just                                                           // 7430
		// open the popup at the new location                                                                                // 7431
		if (layer instanceof L.Path) {                                                                                       // 7432
			this.openPopup(e.layer || e.target, e.latlng);                                                                      // 7433
			return;                                                                                                             // 7434
		}                                                                                                                    // 7435
                                                                                                                       // 7436
		// otherwise treat it like a marker and figure out                                                                   // 7437
		// if we should toggle it open/closed                                                                                // 7438
		if (this._map.hasLayer(this._popup) && this._popup._source === layer) {                                              // 7439
			this.closePopup();                                                                                                  // 7440
		} else {                                                                                                             // 7441
			this.openPopup(layer, e.latlng);                                                                                    // 7442
		}                                                                                                                    // 7443
	},                                                                                                                    // 7444
                                                                                                                       // 7445
	_movePopup: function (e) {                                                                                            // 7446
		this._popup.setLatLng(e.latlng);                                                                                     // 7447
	}                                                                                                                     // 7448
});                                                                                                                    // 7449
                                                                                                                       // 7450
                                                                                                                       // 7451
                                                                                                                       // 7452
/*                                                                                                                     // 7453
 * @class Tooltip                                                                                                      // 7454
 * @inherits DivOverlay                                                                                                // 7455
 * @aka L.Tooltip                                                                                                      // 7456
 * Used to display small texts on top of map layers.                                                                   // 7457
 *                                                                                                                     // 7458
 * @example                                                                                                            // 7459
 *                                                                                                                     // 7460
 * ```js                                                                                                               // 7461
 * marker.bindTooltip("my tooltip text").openTooltip();                                                                // 7462
 * ```                                                                                                                 // 7463
 * Note about tooltip offset. Leaflet takes two options in consideration                                               // 7464
 * for computing tooltip offseting:                                                                                    // 7465
 * - the `offset` Tooltip option: it defaults to [0, 0], and it's specific to one tooltip.                             // 7466
 *   Add a positive x offset to move the tooltip to the right, and a positive y offset to                              // 7467
 *   move it to the bottom. Negatives will move to the left and top.                                                   // 7468
 * - the `tooltipAnchor` Icon option: this will only be considered for Marker. You                                     // 7469
 *   should adapt this value if you use a custom icon.                                                                 // 7470
 */                                                                                                                    // 7471
                                                                                                                       // 7472
                                                                                                                       // 7473
// @namespace Tooltip                                                                                                  // 7474
L.Tooltip = L.DivOverlay.extend({                                                                                      // 7475
                                                                                                                       // 7476
	// @section                                                                                                           // 7477
	// @aka Tooltip options                                                                                               // 7478
	options: {                                                                                                            // 7479
		// @option pane: String = 'tooltipPane'                                                                              // 7480
		// `Map pane` where the tooltip will be added.                                                                       // 7481
		pane: 'tooltipPane',                                                                                                 // 7482
                                                                                                                       // 7483
		// @option offset: Point = Point(0, 0)                                                                               // 7484
		// Optional offset of the tooltip position.                                                                          // 7485
		offset: [0, 0],                                                                                                      // 7486
                                                                                                                       // 7487
		// @option direction: String = 'auto'                                                                                // 7488
		// Direction where to open the tooltip. Possible values are: `right`, `left`,                                        // 7489
		// `top`, `bottom`, `center`, `auto`.                                                                                // 7490
		// `auto` will dynamicaly switch between `right` and `left` according to the tooltip                                 // 7491
		// position on the map.                                                                                              // 7492
		direction: 'auto',                                                                                                   // 7493
                                                                                                                       // 7494
		// @option permanent: Boolean = false                                                                                // 7495
		// Whether to open the tooltip permanently or only on mouseover.                                                     // 7496
		permanent: false,                                                                                                    // 7497
                                                                                                                       // 7498
		// @option sticky: Boolean = false                                                                                   // 7499
		// If true, the tooltip will follow the mouse instead of being fixed at the feature center.                          // 7500
		sticky: false,                                                                                                       // 7501
                                                                                                                       // 7502
		// @option interactive: Boolean = false                                                                              // 7503
		// If true, the tooltip will listen to the feature events.                                                           // 7504
		interactive: false,                                                                                                  // 7505
                                                                                                                       // 7506
		// @option opacity: Number = 0.9                                                                                     // 7507
		// Tooltip container opacity.                                                                                        // 7508
		opacity: 0.9                                                                                                         // 7509
	},                                                                                                                    // 7510
                                                                                                                       // 7511
	onAdd: function (map) {                                                                                               // 7512
		L.DivOverlay.prototype.onAdd.call(this, map);                                                                        // 7513
		this.setOpacity(this.options.opacity);                                                                               // 7514
                                                                                                                       // 7515
		// @namespace Map                                                                                                    // 7516
		// @section Tooltip events                                                                                           // 7517
		// @event tooltipopen: TooltipEvent                                                                                  // 7518
		// Fired when a tooltip is opened in the map.                                                                        // 7519
		map.fire('tooltipopen', {tooltip: this});                                                                            // 7520
                                                                                                                       // 7521
		if (this._source) {                                                                                                  // 7522
			// @namespace Layer                                                                                                 // 7523
			// @section Tooltip events                                                                                          // 7524
			// @event tooltipopen: TooltipEvent                                                                                 // 7525
			// Fired when a tooltip bound to this layer is opened.                                                              // 7526
			this._source.fire('tooltipopen', {tooltip: this}, true);                                                            // 7527
		}                                                                                                                    // 7528
	},                                                                                                                    // 7529
                                                                                                                       // 7530
	onRemove: function (map) {                                                                                            // 7531
		L.DivOverlay.prototype.onRemove.call(this, map);                                                                     // 7532
                                                                                                                       // 7533
		// @namespace Map                                                                                                    // 7534
		// @section Tooltip events                                                                                           // 7535
		// @event tooltipclose: TooltipEvent                                                                                 // 7536
		// Fired when a tooltip in the map is closed.                                                                        // 7537
		map.fire('tooltipclose', {tooltip: this});                                                                           // 7538
                                                                                                                       // 7539
		if (this._source) {                                                                                                  // 7540
			// @namespace Layer                                                                                                 // 7541
			// @section Tooltip events                                                                                          // 7542
			// @event tooltipclose: TooltipEvent                                                                                // 7543
			// Fired when a tooltip bound to this layer is closed.                                                              // 7544
			this._source.fire('tooltipclose', {tooltip: this}, true);                                                           // 7545
		}                                                                                                                    // 7546
	},                                                                                                                    // 7547
                                                                                                                       // 7548
	getEvents: function () {                                                                                              // 7549
		var events = L.DivOverlay.prototype.getEvents.call(this);                                                            // 7550
                                                                                                                       // 7551
		if (L.Browser.touch && !this.options.permanent) {                                                                    // 7552
			events.preclick = this._close;                                                                                      // 7553
		}                                                                                                                    // 7554
                                                                                                                       // 7555
		return events;                                                                                                       // 7556
	},                                                                                                                    // 7557
                                                                                                                       // 7558
	_close: function () {                                                                                                 // 7559
		if (this._map) {                                                                                                     // 7560
			this._map.closeTooltip(this);                                                                                       // 7561
		}                                                                                                                    // 7562
	},                                                                                                                    // 7563
                                                                                                                       // 7564
	_initLayout: function () {                                                                                            // 7565
		var prefix = 'leaflet-tooltip',                                                                                      // 7566
		    className = prefix + ' ' + (this.options.className || '') + ' leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');
                                                                                                                       // 7568
		this._contentNode = this._container = L.DomUtil.create('div', className);                                            // 7569
	},                                                                                                                    // 7570
                                                                                                                       // 7571
	_updateLayout: function () {},                                                                                        // 7572
                                                                                                                       // 7573
	_adjustPan: function () {},                                                                                           // 7574
                                                                                                                       // 7575
	_setPosition: function (pos) {                                                                                        // 7576
		var map = this._map,                                                                                                 // 7577
		    container = this._container,                                                                                     // 7578
		    centerPoint = map.latLngToContainerPoint(map.getCenter()),                                                       // 7579
		    tooltipPoint = map.layerPointToContainerPoint(pos),                                                              // 7580
		    direction = this.options.direction,                                                                              // 7581
		    tooltipWidth = container.offsetWidth,                                                                            // 7582
		    tooltipHeight = container.offsetHeight,                                                                          // 7583
		    offset = L.point(this.options.offset),                                                                           // 7584
		    anchor = this._getAnchor();                                                                                      // 7585
                                                                                                                       // 7586
		if (direction === 'top') {                                                                                           // 7587
			pos = pos.add(L.point(-tooltipWidth / 2 + offset.x, -tooltipHeight + offset.y + anchor.y, true));                   // 7588
		} else if (direction === 'bottom') {                                                                                 // 7589
			pos = pos.subtract(L.point(tooltipWidth / 2 - offset.x, -offset.y, true));                                          // 7590
		} else if (direction === 'center') {                                                                                 // 7591
			pos = pos.subtract(L.point(tooltipWidth / 2 + offset.x, tooltipHeight / 2 - anchor.y + offset.y, true));            // 7592
		} else if (direction === 'right' || direction === 'auto' && tooltipPoint.x < centerPoint.x) {                        // 7593
			direction = 'right';                                                                                                // 7594
			pos = pos.add(L.point(offset.x + anchor.x, anchor.y - tooltipHeight / 2 + offset.y, true));                         // 7595
		} else {                                                                                                             // 7596
			direction = 'left';                                                                                                 // 7597
			pos = pos.subtract(L.point(tooltipWidth + anchor.x - offset.x, tooltipHeight / 2 - anchor.y - offset.y, true));     // 7598
		}                                                                                                                    // 7599
                                                                                                                       // 7600
		L.DomUtil.removeClass(container, 'leaflet-tooltip-right');                                                           // 7601
		L.DomUtil.removeClass(container, 'leaflet-tooltip-left');                                                            // 7602
		L.DomUtil.removeClass(container, 'leaflet-tooltip-top');                                                             // 7603
		L.DomUtil.removeClass(container, 'leaflet-tooltip-bottom');                                                          // 7604
		L.DomUtil.addClass(container, 'leaflet-tooltip-' + direction);                                                       // 7605
		L.DomUtil.setPosition(container, pos);                                                                               // 7606
	},                                                                                                                    // 7607
                                                                                                                       // 7608
	_updatePosition: function () {                                                                                        // 7609
		var pos = this._map.latLngToLayerPoint(this._latlng);                                                                // 7610
		this._setPosition(pos);                                                                                              // 7611
	},                                                                                                                    // 7612
                                                                                                                       // 7613
	setOpacity: function (opacity) {                                                                                      // 7614
		this.options.opacity = opacity;                                                                                      // 7615
                                                                                                                       // 7616
		if (this._container) {                                                                                               // 7617
			L.DomUtil.setOpacity(this._container, opacity);                                                                     // 7618
		}                                                                                                                    // 7619
	},                                                                                                                    // 7620
                                                                                                                       // 7621
	_animateZoom: function (e) {                                                                                          // 7622
		var pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center);                                          // 7623
		this._setPosition(pos);                                                                                              // 7624
	},                                                                                                                    // 7625
                                                                                                                       // 7626
	_getAnchor: function () {                                                                                             // 7627
		// Where should we anchor the tooltip on the source layer?                                                           // 7628
		return L.point(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0]);
	}                                                                                                                     // 7630
                                                                                                                       // 7631
});                                                                                                                    // 7632
                                                                                                                       // 7633
// @namespace Tooltip                                                                                                  // 7634
// @factory L.tooltip(options?: Tooltip options, source?: Layer)                                                       // 7635
// Instantiates a Tooltip object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the tooltip with a reference to the Layer to which it refers.
L.tooltip = function (options, source) {                                                                               // 7637
	return new L.Tooltip(options, source);                                                                                // 7638
};                                                                                                                     // 7639
                                                                                                                       // 7640
// @namespace Map                                                                                                      // 7641
// @section Methods for Layers and Controls                                                                            // 7642
L.Map.include({                                                                                                        // 7643
                                                                                                                       // 7644
	// @method openTooltip(tooltip: Tooltip): this                                                                        // 7645
	// Opens the specified tooltip.                                                                                       // 7646
	// @alternative                                                                                                       // 7647
	// @method openTooltip(content: String|HTMLElement, latlng: LatLng, options?: Tooltip options): this                  // 7648
	// Creates a tooltip with the specified content and options and open it.                                              // 7649
	openTooltip: function (tooltip, latlng, options) {                                                                    // 7650
		if (!(tooltip instanceof L.Tooltip)) {                                                                               // 7651
			tooltip = new L.Tooltip(options).setContent(tooltip);                                                               // 7652
		}                                                                                                                    // 7653
                                                                                                                       // 7654
		if (latlng) {                                                                                                        // 7655
			tooltip.setLatLng(latlng);                                                                                          // 7656
		}                                                                                                                    // 7657
                                                                                                                       // 7658
		if (this.hasLayer(tooltip)) {                                                                                        // 7659
			return this;                                                                                                        // 7660
		}                                                                                                                    // 7661
                                                                                                                       // 7662
		return this.addLayer(tooltip);                                                                                       // 7663
	},                                                                                                                    // 7664
                                                                                                                       // 7665
	// @method closeTooltip(tooltip?: Tooltip): this                                                                      // 7666
	// Closes the tooltip given as parameter.                                                                             // 7667
	closeTooltip: function (tooltip) {                                                                                    // 7668
		if (tooltip) {                                                                                                       // 7669
			this.removeLayer(tooltip);                                                                                          // 7670
		}                                                                                                                    // 7671
		return this;                                                                                                         // 7672
	}                                                                                                                     // 7673
                                                                                                                       // 7674
});                                                                                                                    // 7675
                                                                                                                       // 7676
/*                                                                                                                     // 7677
 * @namespace Layer                                                                                                    // 7678
 * @section Tooltip methods example                                                                                    // 7679
 *                                                                                                                     // 7680
 * All layers share a set of methods convenient for binding tooltips to it.                                            // 7681
 *                                                                                                                     // 7682
 * ```js                                                                                                               // 7683
 * var layer = L.Polygon(latlngs).bindTooltip('Hi There!').addTo(map);                                                 // 7684
 * layer.openTooltip();                                                                                                // 7685
 * layer.closeTooltip();                                                                                               // 7686
 * ```                                                                                                                 // 7687
 */                                                                                                                    // 7688
                                                                                                                       // 7689
// @section Tooltip methods                                                                                            // 7690
L.Layer.include({                                                                                                      // 7691
                                                                                                                       // 7692
	// @method bindTooltip(content: String|HTMLElement|Function|Tooltip, options?: Tooltip options): this                 // 7693
	// Binds a tooltip to the layer with the passed `content` and sets up the                                             // 7694
	// neccessary event listeners. If a `Function` is passed it will receive                                              // 7695
	// the layer as the first argument and should return a `String` or `HTMLElement`.                                     // 7696
	bindTooltip: function (content, options) {                                                                            // 7697
                                                                                                                       // 7698
		if (content instanceof L.Tooltip) {                                                                                  // 7699
			L.setOptions(content, options);                                                                                     // 7700
			this._tooltip = content;                                                                                            // 7701
			content._source = this;                                                                                             // 7702
		} else {                                                                                                             // 7703
			if (!this._tooltip || options) {                                                                                    // 7704
				this._tooltip = L.tooltip(options, this);                                                                          // 7705
			}                                                                                                                   // 7706
			this._tooltip.setContent(content);                                                                                  // 7707
                                                                                                                       // 7708
		}                                                                                                                    // 7709
                                                                                                                       // 7710
		this._initTooltipInteractions();                                                                                     // 7711
                                                                                                                       // 7712
		if (this._tooltip.options.permanent && this._map && this._map.hasLayer(this)) {                                      // 7713
			this.openTooltip();                                                                                                 // 7714
		}                                                                                                                    // 7715
                                                                                                                       // 7716
		return this;                                                                                                         // 7717
	},                                                                                                                    // 7718
                                                                                                                       // 7719
	// @method unbindTooltip(): this                                                                                      // 7720
	// Removes the tooltip previously bound with `bindTooltip`.                                                           // 7721
	unbindTooltip: function () {                                                                                          // 7722
		if (this._tooltip) {                                                                                                 // 7723
			this._initTooltipInteractions(true);                                                                                // 7724
			this.closeTooltip();                                                                                                // 7725
			this._tooltip = null;                                                                                               // 7726
		}                                                                                                                    // 7727
		return this;                                                                                                         // 7728
	},                                                                                                                    // 7729
                                                                                                                       // 7730
	_initTooltipInteractions: function (remove) {                                                                         // 7731
		if (!remove && this._tooltipHandlersAdded) { return; }                                                               // 7732
		var onOff = remove ? 'off' : 'on',                                                                                   // 7733
		    events = {                                                                                                       // 7734
			remove: this.closeTooltip,                                                                                          // 7735
			move: this._moveTooltip                                                                                             // 7736
		    };                                                                                                               // 7737
		if (!this._tooltip.options.permanent) {                                                                              // 7738
			events.mouseover = this._openTooltip;                                                                               // 7739
			events.mouseout = this.closeTooltip;                                                                                // 7740
			if (this._tooltip.options.sticky) {                                                                                 // 7741
				events.mousemove = this._moveTooltip;                                                                              // 7742
			}                                                                                                                   // 7743
			if (L.Browser.touch) {                                                                                              // 7744
				events.click = this._openTooltip;                                                                                  // 7745
			}                                                                                                                   // 7746
		} else {                                                                                                             // 7747
			events.add = this._openTooltip;                                                                                     // 7748
		}                                                                                                                    // 7749
		this[onOff](events);                                                                                                 // 7750
		this._tooltipHandlersAdded = !remove;                                                                                // 7751
	},                                                                                                                    // 7752
                                                                                                                       // 7753
	// @method openTooltip(latlng?: LatLng): this                                                                         // 7754
	// Opens the bound tooltip at the specificed `latlng` or at the default tooltip anchor if no `latlng` is passed.      // 7755
	openTooltip: function (layer, latlng) {                                                                               // 7756
		if (!(layer instanceof L.Layer)) {                                                                                   // 7757
			latlng = layer;                                                                                                     // 7758
			layer = this;                                                                                                       // 7759
		}                                                                                                                    // 7760
                                                                                                                       // 7761
		if (layer instanceof L.FeatureGroup) {                                                                               // 7762
			for (var id in this._layers) {                                                                                      // 7763
				layer = this._layers[id];                                                                                          // 7764
				break;                                                                                                             // 7765
			}                                                                                                                   // 7766
		}                                                                                                                    // 7767
                                                                                                                       // 7768
		if (!latlng) {                                                                                                       // 7769
			latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();                                                   // 7770
		}                                                                                                                    // 7771
                                                                                                                       // 7772
		if (this._tooltip && this._map) {                                                                                    // 7773
                                                                                                                       // 7774
			// set tooltip source to this layer                                                                                 // 7775
			this._tooltip._source = layer;                                                                                      // 7776
                                                                                                                       // 7777
			// update the tooltip (content, layout, ect...)                                                                     // 7778
			this._tooltip.update();                                                                                             // 7779
                                                                                                                       // 7780
			// open the tooltip on the map                                                                                      // 7781
			this._map.openTooltip(this._tooltip, latlng);                                                                       // 7782
                                                                                                                       // 7783
			// Tooltip container may not be defined if not permanent and never                                                  // 7784
			// opened.                                                                                                          // 7785
			if (this._tooltip.options.interactive && this._tooltip._container) {                                                // 7786
				L.DomUtil.addClass(this._tooltip._container, 'leaflet-clickable');                                                 // 7787
				this.addInteractiveTarget(this._tooltip._container);                                                               // 7788
			}                                                                                                                   // 7789
		}                                                                                                                    // 7790
                                                                                                                       // 7791
		return this;                                                                                                         // 7792
	},                                                                                                                    // 7793
                                                                                                                       // 7794
	// @method closeTooltip(): this                                                                                       // 7795
	// Closes the tooltip bound to this layer if it is open.                                                              // 7796
	closeTooltip: function () {                                                                                           // 7797
		if (this._tooltip) {                                                                                                 // 7798
			this._tooltip._close();                                                                                             // 7799
			if (this._tooltip.options.interactive && this._tooltip._container) {                                                // 7800
				L.DomUtil.removeClass(this._tooltip._container, 'leaflet-clickable');                                              // 7801
				this.removeInteractiveTarget(this._tooltip._container);                                                            // 7802
			}                                                                                                                   // 7803
		}                                                                                                                    // 7804
		return this;                                                                                                         // 7805
	},                                                                                                                    // 7806
                                                                                                                       // 7807
	// @method toggleTooltip(): this                                                                                      // 7808
	// Opens or closes the tooltip bound to this layer depending on its current state.                                    // 7809
	toggleTooltip: function (target) {                                                                                    // 7810
		if (this._tooltip) {                                                                                                 // 7811
			if (this._tooltip._map) {                                                                                           // 7812
				this.closeTooltip();                                                                                               // 7813
			} else {                                                                                                            // 7814
				this.openTooltip(target);                                                                                          // 7815
			}                                                                                                                   // 7816
		}                                                                                                                    // 7817
		return this;                                                                                                         // 7818
	},                                                                                                                    // 7819
                                                                                                                       // 7820
	// @method isTooltipOpen(): boolean                                                                                   // 7821
	// Returns `true` if the tooltip bound to this layer is currently open.                                               // 7822
	isTooltipOpen: function () {                                                                                          // 7823
		return this._tooltip.isOpen();                                                                                       // 7824
	},                                                                                                                    // 7825
                                                                                                                       // 7826
	// @method setTooltipContent(content: String|HTMLElement|Tooltip): this                                               // 7827
	// Sets the content of the tooltip bound to this layer.                                                               // 7828
	setTooltipContent: function (content) {                                                                               // 7829
		if (this._tooltip) {                                                                                                 // 7830
			this._tooltip.setContent(content);                                                                                  // 7831
		}                                                                                                                    // 7832
		return this;                                                                                                         // 7833
	},                                                                                                                    // 7834
                                                                                                                       // 7835
	// @method getTooltip(): Tooltip                                                                                      // 7836
	// Returns the tooltip bound to this layer.                                                                           // 7837
	getTooltip: function () {                                                                                             // 7838
		return this._tooltip;                                                                                                // 7839
	},                                                                                                                    // 7840
                                                                                                                       // 7841
	_openTooltip: function (e) {                                                                                          // 7842
		var layer = e.layer || e.target;                                                                                     // 7843
                                                                                                                       // 7844
		if (!this._tooltip || !this._map) {                                                                                  // 7845
			return;                                                                                                             // 7846
		}                                                                                                                    // 7847
		this.openTooltip(layer, this._tooltip.options.sticky ? e.latlng : undefined);                                        // 7848
	},                                                                                                                    // 7849
                                                                                                                       // 7850
	_moveTooltip: function (e) {                                                                                          // 7851
		var latlng = e.latlng, containerPoint, layerPoint;                                                                   // 7852
		if (this._tooltip.options.sticky && e.originalEvent) {                                                               // 7853
			containerPoint = this._map.mouseEventToContainerPoint(e.originalEvent);                                             // 7854
			layerPoint = this._map.containerPointToLayerPoint(containerPoint);                                                  // 7855
			latlng = this._map.layerPointToLatLng(layerPoint);                                                                  // 7856
		}                                                                                                                    // 7857
		this._tooltip.setLatLng(latlng);                                                                                     // 7858
	}                                                                                                                     // 7859
});                                                                                                                    // 7860
                                                                                                                       // 7861
                                                                                                                       // 7862
                                                                                                                       // 7863
/*                                                                                                                     // 7864
 * @class LayerGroup                                                                                                   // 7865
 * @aka L.LayerGroup                                                                                                   // 7866
 * @inherits Layer                                                                                                     // 7867
 *                                                                                                                     // 7868
 * Used to group several layers and handle them as one. If you add it to the map,                                      // 7869
 * any layers added or removed from the group will be added/removed on the map as                                      // 7870
 * well. Extends `Layer`.                                                                                              // 7871
 *                                                                                                                     // 7872
 * @example                                                                                                            // 7873
 *                                                                                                                     // 7874
 * ```js                                                                                                               // 7875
 * L.layerGroup([marker1, marker2])                                                                                    // 7876
 * 	.addLayer(polyline)                                                                                                // 7877
 * 	.addTo(map);                                                                                                       // 7878
 * ```                                                                                                                 // 7879
 */                                                                                                                    // 7880
                                                                                                                       // 7881
L.LayerGroup = L.Layer.extend({                                                                                        // 7882
                                                                                                                       // 7883
	initialize: function (layers) {                                                                                       // 7884
		this._layers = {};                                                                                                   // 7885
                                                                                                                       // 7886
		var i, len;                                                                                                          // 7887
                                                                                                                       // 7888
		if (layers) {                                                                                                        // 7889
			for (i = 0, len = layers.length; i < len; i++) {                                                                    // 7890
				this.addLayer(layers[i]);                                                                                          // 7891
			}                                                                                                                   // 7892
		}                                                                                                                    // 7893
	},                                                                                                                    // 7894
                                                                                                                       // 7895
	// @method addLayer(layer: Layer): this                                                                               // 7896
	// Adds the given layer to the group.                                                                                 // 7897
	addLayer: function (layer) {                                                                                          // 7898
		var id = this.getLayerId(layer);                                                                                     // 7899
                                                                                                                       // 7900
		this._layers[id] = layer;                                                                                            // 7901
                                                                                                                       // 7902
		if (this._map) {                                                                                                     // 7903
			this._map.addLayer(layer);                                                                                          // 7904
		}                                                                                                                    // 7905
                                                                                                                       // 7906
		return this;                                                                                                         // 7907
	},                                                                                                                    // 7908
                                                                                                                       // 7909
	// @method removeLayer(layer: Layer): this                                                                            // 7910
	// Removes the given layer from the group.                                                                            // 7911
	// @alternative                                                                                                       // 7912
	// @method removeLayer(id: Number): this                                                                              // 7913
	// Removes the layer with the given internal ID from the group.                                                       // 7914
	removeLayer: function (layer) {                                                                                       // 7915
		var id = layer in this._layers ? layer : this.getLayerId(layer);                                                     // 7916
                                                                                                                       // 7917
		if (this._map && this._layers[id]) {                                                                                 // 7918
			this._map.removeLayer(this._layers[id]);                                                                            // 7919
		}                                                                                                                    // 7920
                                                                                                                       // 7921
		delete this._layers[id];                                                                                             // 7922
                                                                                                                       // 7923
		return this;                                                                                                         // 7924
	},                                                                                                                    // 7925
                                                                                                                       // 7926
	// @method hasLayer(layer: Layer): Boolean                                                                            // 7927
	// Returns `true` if the given layer is currently added to the group.                                                 // 7928
	hasLayer: function (layer) {                                                                                          // 7929
		return !!layer && (layer in this._layers || this.getLayerId(layer) in this._layers);                                 // 7930
	},                                                                                                                    // 7931
                                                                                                                       // 7932
	// @method clearLayers(): this                                                                                        // 7933
	// Removes all the layers from the group.                                                                             // 7934
	clearLayers: function () {                                                                                            // 7935
		for (var i in this._layers) {                                                                                        // 7936
			this.removeLayer(this._layers[i]);                                                                                  // 7937
		}                                                                                                                    // 7938
		return this;                                                                                                         // 7939
	},                                                                                                                    // 7940
                                                                                                                       // 7941
	// @method invoke(methodName: String, …): this                                                                        // 7942
	// Calls `methodName` on every layer contained in this group, passing any                                             // 7943
	// additional parameters. Has no effect if the layers contained do not                                                // 7944
	// implement `methodName`.                                                                                            // 7945
	invoke: function (methodName) {                                                                                       // 7946
		var args = Array.prototype.slice.call(arguments, 1),                                                                 // 7947
		    i, layer;                                                                                                        // 7948
                                                                                                                       // 7949
		for (i in this._layers) {                                                                                            // 7950
			layer = this._layers[i];                                                                                            // 7951
                                                                                                                       // 7952
			if (layer[methodName]) {                                                                                            // 7953
				layer[methodName].apply(layer, args);                                                                              // 7954
			}                                                                                                                   // 7955
		}                                                                                                                    // 7956
                                                                                                                       // 7957
		return this;                                                                                                         // 7958
	},                                                                                                                    // 7959
                                                                                                                       // 7960
	onAdd: function (map) {                                                                                               // 7961
		for (var i in this._layers) {                                                                                        // 7962
			map.addLayer(this._layers[i]);                                                                                      // 7963
		}                                                                                                                    // 7964
	},                                                                                                                    // 7965
                                                                                                                       // 7966
	onRemove: function (map) {                                                                                            // 7967
		for (var i in this._layers) {                                                                                        // 7968
			map.removeLayer(this._layers[i]);                                                                                   // 7969
		}                                                                                                                    // 7970
	},                                                                                                                    // 7971
                                                                                                                       // 7972
	// @method eachLayer(fn: Function, context?: Object): this                                                            // 7973
	// Iterates over the layers of the group, optionally specifying context of the iterator function.                     // 7974
	// ```js                                                                                                              // 7975
	// group.eachLayer(function (layer) {                                                                                 // 7976
	// 	layer.bindPopup('Hello');                                                                                         // 7977
	// });                                                                                                                // 7978
	// ```                                                                                                                // 7979
	eachLayer: function (method, context) {                                                                               // 7980
		for (var i in this._layers) {                                                                                        // 7981
			method.call(context, this._layers[i]);                                                                              // 7982
		}                                                                                                                    // 7983
		return this;                                                                                                         // 7984
	},                                                                                                                    // 7985
                                                                                                                       // 7986
	// @method getLayer(id: Number): Layer                                                                                // 7987
	// Returns the layer with the given internal ID.                                                                      // 7988
	getLayer: function (id) {                                                                                             // 7989
		return this._layers[id];                                                                                             // 7990
	},                                                                                                                    // 7991
                                                                                                                       // 7992
	// @method getLayers(): Layer[]                                                                                       // 7993
	// Returns an array of all the layers added to the group.                                                             // 7994
	getLayers: function () {                                                                                              // 7995
		var layers = [];                                                                                                     // 7996
                                                                                                                       // 7997
		for (var i in this._layers) {                                                                                        // 7998
			layers.push(this._layers[i]);                                                                                       // 7999
		}                                                                                                                    // 8000
		return layers;                                                                                                       // 8001
	},                                                                                                                    // 8002
                                                                                                                       // 8003
	// @method setZIndex(zIndex: Number): this                                                                            // 8004
	// Calls `setZIndex` on every layer contained in this group, passing the z-index.                                     // 8005
	setZIndex: function (zIndex) {                                                                                        // 8006
		return this.invoke('setZIndex', zIndex);                                                                             // 8007
	},                                                                                                                    // 8008
                                                                                                                       // 8009
	// @method getLayerId(layer: Layer): Number                                                                           // 8010
	// Returns the internal ID for a layer                                                                                // 8011
	getLayerId: function (layer) {                                                                                        // 8012
		return L.stamp(layer);                                                                                               // 8013
	}                                                                                                                     // 8014
});                                                                                                                    // 8015
                                                                                                                       // 8016
                                                                                                                       // 8017
// @factory L.layerGroup(layers: Layer[])                                                                              // 8018
// Create a layer group, optionally given an initial set of layers.                                                    // 8019
L.layerGroup = function (layers) {                                                                                     // 8020
	return new L.LayerGroup(layers);                                                                                      // 8021
};                                                                                                                     // 8022
                                                                                                                       // 8023
                                                                                                                       // 8024
                                                                                                                       // 8025
/*                                                                                                                     // 8026
 * @class FeatureGroup                                                                                                 // 8027
 * @aka L.FeatureGroup                                                                                                 // 8028
 * @inherits LayerGroup                                                                                                // 8029
 *                                                                                                                     // 8030
 * Extended `LayerGroup` that makes it easier to do the same thing to all its member layers:                           // 8031
 *  * [`bindPopup`](#layer-bindpopup) binds a popup to all of the layers at once (likewise with [`bindTooltip`](#layer-bindtooltip))
 *  * Events are propagated to the `FeatureGroup`, so if the group has an event                                        // 8033
 * handler, it will handle events from any of the layers. This includes mouse events                                   // 8034
 * and custom events.                                                                                                  // 8035
 *  * Has `layeradd` and `layerremove` events                                                                          // 8036
 *                                                                                                                     // 8037
 * @example                                                                                                            // 8038
 *                                                                                                                     // 8039
 * ```js                                                                                                               // 8040
 * L.featureGroup([marker1, marker2, polyline])                                                                        // 8041
 * 	.bindPopup('Hello world!')                                                                                         // 8042
 * 	.on('click', function() { alert('Clicked on a member of the group!'); })                                           // 8043
 * 	.addTo(map);                                                                                                       // 8044
 * ```                                                                                                                 // 8045
 */                                                                                                                    // 8046
                                                                                                                       // 8047
L.FeatureGroup = L.LayerGroup.extend({                                                                                 // 8048
                                                                                                                       // 8049
	addLayer: function (layer) {                                                                                          // 8050
		if (this.hasLayer(layer)) {                                                                                          // 8051
			return this;                                                                                                        // 8052
		}                                                                                                                    // 8053
                                                                                                                       // 8054
		layer.addEventParent(this);                                                                                          // 8055
                                                                                                                       // 8056
		L.LayerGroup.prototype.addLayer.call(this, layer);                                                                   // 8057
                                                                                                                       // 8058
		// @event layeradd: LayerEvent                                                                                       // 8059
		// Fired when a layer is added to this `FeatureGroup`                                                                // 8060
		return this.fire('layeradd', {layer: layer});                                                                        // 8061
	},                                                                                                                    // 8062
                                                                                                                       // 8063
	removeLayer: function (layer) {                                                                                       // 8064
		if (!this.hasLayer(layer)) {                                                                                         // 8065
			return this;                                                                                                        // 8066
		}                                                                                                                    // 8067
		if (layer in this._layers) {                                                                                         // 8068
			layer = this._layers[layer];                                                                                        // 8069
		}                                                                                                                    // 8070
                                                                                                                       // 8071
		layer.removeEventParent(this);                                                                                       // 8072
                                                                                                                       // 8073
		L.LayerGroup.prototype.removeLayer.call(this, layer);                                                                // 8074
                                                                                                                       // 8075
		// @event layerremove: LayerEvent                                                                                    // 8076
		// Fired when a layer is removed from this `FeatureGroup`                                                            // 8077
		return this.fire('layerremove', {layer: layer});                                                                     // 8078
	},                                                                                                                    // 8079
                                                                                                                       // 8080
	// @method setStyle(style: Path options): this                                                                        // 8081
	// Sets the given path options to each layer of the group that has a `setStyle` method.                               // 8082
	setStyle: function (style) {                                                                                          // 8083
		return this.invoke('setStyle', style);                                                                               // 8084
	},                                                                                                                    // 8085
                                                                                                                       // 8086
	// @method bringToFront(): this                                                                                       // 8087
	// Brings the layer group to the top of all other layers                                                              // 8088
	bringToFront: function () {                                                                                           // 8089
		return this.invoke('bringToFront');                                                                                  // 8090
	},                                                                                                                    // 8091
                                                                                                                       // 8092
	// @method bringToBack(): this                                                                                        // 8093
	// Brings the layer group to the top of all other layers                                                              // 8094
	bringToBack: function () {                                                                                            // 8095
		return this.invoke('bringToBack');                                                                                   // 8096
	},                                                                                                                    // 8097
                                                                                                                       // 8098
	// @method getBounds(): LatLngBounds                                                                                  // 8099
	// Returns the LatLngBounds of the Feature Group (created from bounds and coordinates of its children).               // 8100
	getBounds: function () {                                                                                              // 8101
		var bounds = new L.LatLngBounds();                                                                                   // 8102
                                                                                                                       // 8103
		for (var id in this._layers) {                                                                                       // 8104
			var layer = this._layers[id];                                                                                       // 8105
			bounds.extend(layer.getBounds ? layer.getBounds() : layer.getLatLng());                                             // 8106
		}                                                                                                                    // 8107
		return bounds;                                                                                                       // 8108
	}                                                                                                                     // 8109
});                                                                                                                    // 8110
                                                                                                                       // 8111
// @factory L.featureGroup(layers: Layer[])                                                                            // 8112
// Create a feature group, optionally given an initial set of layers.                                                  // 8113
L.featureGroup = function (layers) {                                                                                   // 8114
	return new L.FeatureGroup(layers);                                                                                    // 8115
};                                                                                                                     // 8116
                                                                                                                       // 8117
                                                                                                                       // 8118
                                                                                                                       // 8119
/*                                                                                                                     // 8120
 * @class Renderer                                                                                                     // 8121
 * @inherits Layer                                                                                                     // 8122
 * @aka L.Renderer                                                                                                     // 8123
 *                                                                                                                     // 8124
 * Base class for vector renderer implementations (`SVG`, `Canvas`). Handles the                                       // 8125
 * DOM container of the renderer, its bounds, and its zoom animation.                                                  // 8126
 *                                                                                                                     // 8127
 * A `Renderer` works as an implicit layer group for all `Path`s - the renderer                                        // 8128
 * itself can be added or removed to the map. All paths use a renderer, which can                                      // 8129
 * be implicit (the map will decide the type of renderer and use it automatically)                                     // 8130
 * or explicit (using the [`renderer`](#path-renderer) option of the path).                                            // 8131
 *                                                                                                                     // 8132
 * Do not use this class directly, use `SVG` and `Canvas` instead.                                                     // 8133
 *                                                                                                                     // 8134
 * @event update: Event                                                                                                // 8135
 * Fired when the renderer updates its bounds, center and zoom, for example when                                       // 8136
 * its map has moved                                                                                                   // 8137
 */                                                                                                                    // 8138
                                                                                                                       // 8139
L.Renderer = L.Layer.extend({                                                                                          // 8140
                                                                                                                       // 8141
	// @section                                                                                                           // 8142
	// @aka Renderer options                                                                                              // 8143
	options: {                                                                                                            // 8144
		// @option padding: Number = 0.1                                                                                     // 8145
		// How much to extend the clip area around the map view (relative to its size)                                       // 8146
		// e.g. 0.1 would be 10% of map view in each direction                                                               // 8147
		padding: 0.1                                                                                                         // 8148
	},                                                                                                                    // 8149
                                                                                                                       // 8150
	initialize: function (options) {                                                                                      // 8151
		L.setOptions(this, options);                                                                                         // 8152
		L.stamp(this);                                                                                                       // 8153
		this._layers = this._layers || {};                                                                                   // 8154
	},                                                                                                                    // 8155
                                                                                                                       // 8156
	onAdd: function () {                                                                                                  // 8157
		if (!this._container) {                                                                                              // 8158
			this._initContainer(); // defined by renderer implementations                                                       // 8159
                                                                                                                       // 8160
			if (this._zoomAnimated) {                                                                                           // 8161
				L.DomUtil.addClass(this._container, 'leaflet-zoom-animated');                                                      // 8162
			}                                                                                                                   // 8163
		}                                                                                                                    // 8164
                                                                                                                       // 8165
		this.getPane().appendChild(this._container);                                                                         // 8166
		this._update();                                                                                                      // 8167
		this.on('update', this._updatePaths, this);                                                                          // 8168
	},                                                                                                                    // 8169
                                                                                                                       // 8170
	onRemove: function () {                                                                                               // 8171
		L.DomUtil.remove(this._container);                                                                                   // 8172
		this.off('update', this._updatePaths, this);                                                                         // 8173
	},                                                                                                                    // 8174
                                                                                                                       // 8175
	getEvents: function () {                                                                                              // 8176
		var events = {                                                                                                       // 8177
			viewreset: this._reset,                                                                                             // 8178
			zoom: this._onZoom,                                                                                                 // 8179
			moveend: this._update,                                                                                              // 8180
			zoomend: this._onZoomEnd                                                                                            // 8181
		};                                                                                                                   // 8182
		if (this._zoomAnimated) {                                                                                            // 8183
			events.zoomanim = this._onAnimZoom;                                                                                 // 8184
		}                                                                                                                    // 8185
		return events;                                                                                                       // 8186
	},                                                                                                                    // 8187
                                                                                                                       // 8188
	_onAnimZoom: function (ev) {                                                                                          // 8189
		this._updateTransform(ev.center, ev.zoom);                                                                           // 8190
	},                                                                                                                    // 8191
                                                                                                                       // 8192
	_onZoom: function () {                                                                                                // 8193
		this._updateTransform(this._map.getCenter(), this._map.getZoom());                                                   // 8194
	},                                                                                                                    // 8195
                                                                                                                       // 8196
	_updateTransform: function (center, zoom) {                                                                           // 8197
		var scale = this._map.getZoomScale(zoom, this._zoom),                                                                // 8198
		    position = L.DomUtil.getPosition(this._container),                                                               // 8199
		    viewHalf = this._map.getSize().multiplyBy(0.5 + this.options.padding),                                           // 8200
		    currentCenterPoint = this._map.project(this._center, zoom),                                                      // 8201
		    destCenterPoint = this._map.project(center, zoom),                                                               // 8202
		    centerOffset = destCenterPoint.subtract(currentCenterPoint),                                                     // 8203
                                                                                                                       // 8204
		    topLeftOffset = viewHalf.multiplyBy(-scale).add(position).add(viewHalf).subtract(centerOffset);                  // 8205
                                                                                                                       // 8206
		if (L.Browser.any3d) {                                                                                               // 8207
			L.DomUtil.setTransform(this._container, topLeftOffset, scale);                                                      // 8208
		} else {                                                                                                             // 8209
			L.DomUtil.setPosition(this._container, topLeftOffset);                                                              // 8210
		}                                                                                                                    // 8211
	},                                                                                                                    // 8212
                                                                                                                       // 8213
	_reset: function () {                                                                                                 // 8214
		this._update();                                                                                                      // 8215
		this._updateTransform(this._center, this._zoom);                                                                     // 8216
                                                                                                                       // 8217
		for (var id in this._layers) {                                                                                       // 8218
			this._layers[id]._reset();                                                                                          // 8219
		}                                                                                                                    // 8220
	},                                                                                                                    // 8221
                                                                                                                       // 8222
	_onZoomEnd: function () {                                                                                             // 8223
		for (var id in this._layers) {                                                                                       // 8224
			this._layers[id]._project();                                                                                        // 8225
		}                                                                                                                    // 8226
	},                                                                                                                    // 8227
                                                                                                                       // 8228
	_updatePaths: function () {                                                                                           // 8229
		for (var id in this._layers) {                                                                                       // 8230
			this._layers[id]._update();                                                                                         // 8231
		}                                                                                                                    // 8232
	},                                                                                                                    // 8233
                                                                                                                       // 8234
	_update: function () {                                                                                                // 8235
		// Update pixel bounds of renderer container (for positioning/sizing/clipping later)                                 // 8236
		// Subclasses are responsible of firing the 'update' event.                                                          // 8237
		var p = this.options.padding,                                                                                        // 8238
		    size = this._map.getSize(),                                                                                      // 8239
		    min = this._map.containerPointToLayerPoint(size.multiplyBy(-p)).round();                                         // 8240
                                                                                                                       // 8241
		this._bounds = new L.Bounds(min, min.add(size.multiplyBy(1 + p * 2)).round());                                       // 8242
                                                                                                                       // 8243
		this._center = this._map.getCenter();                                                                                // 8244
		this._zoom = this._map.getZoom();                                                                                    // 8245
	}                                                                                                                     // 8246
});                                                                                                                    // 8247
                                                                                                                       // 8248
                                                                                                                       // 8249
L.Map.include({                                                                                                        // 8250
	// @namespace Map; @method getRenderer(layer: Path): Renderer                                                         // 8251
	// Returns the instance of `Renderer` that should be used to render the given                                         // 8252
	// `Path`. It will ensure that the `renderer` options of the map and paths                                            // 8253
	// are respected, and that the renderers do exist on the map.                                                         // 8254
	getRenderer: function (layer) {                                                                                       // 8255
		// @namespace Path; @option renderer: Renderer                                                                       // 8256
		// Use this specific instance of `Renderer` for this path. Takes                                                     // 8257
		// precedence over the map's [default renderer](#map-renderer).                                                      // 8258
		var renderer = layer.options.renderer || this._getPaneRenderer(layer.options.pane) || this.options.renderer || this._renderer;
                                                                                                                       // 8260
		if (!renderer) {                                                                                                     // 8261
			// @namespace Map; @option preferCanvas: Boolean = false                                                            // 8262
			// Whether `Path`s should be rendered on a `Canvas` renderer.                                                       // 8263
			// By default, all `Path`s are rendered in a `SVG` renderer.                                                        // 8264
			renderer = this._renderer = (this.options.preferCanvas && L.canvas()) || L.svg();                                   // 8265
		}                                                                                                                    // 8266
                                                                                                                       // 8267
		if (!this.hasLayer(renderer)) {                                                                                      // 8268
			this.addLayer(renderer);                                                                                            // 8269
		}                                                                                                                    // 8270
		return renderer;                                                                                                     // 8271
	},                                                                                                                    // 8272
                                                                                                                       // 8273
	_getPaneRenderer: function (name) {                                                                                   // 8274
		if (name === 'overlayPane' || name === undefined) {                                                                  // 8275
			return false;                                                                                                       // 8276
		}                                                                                                                    // 8277
                                                                                                                       // 8278
		var renderer = this._paneRenderers[name];                                                                            // 8279
		if (renderer === undefined) {                                                                                        // 8280
			renderer = (L.SVG && L.svg({pane: name})) || (L.Canvas && L.canvas({pane: name}));                                  // 8281
			this._paneRenderers[name] = renderer;                                                                               // 8282
		}                                                                                                                    // 8283
		return renderer;                                                                                                     // 8284
	}                                                                                                                     // 8285
});                                                                                                                    // 8286
                                                                                                                       // 8287
                                                                                                                       // 8288
                                                                                                                       // 8289
/*                                                                                                                     // 8290
 * @class Path                                                                                                         // 8291
 * @aka L.Path                                                                                                         // 8292
 * @inherits Interactive layer                                                                                         // 8293
 *                                                                                                                     // 8294
 * An abstract class that contains options and constants shared between vector                                         // 8295
 * overlays (Polygon, Polyline, Circle). Do not use it directly. Extends `Layer`.                                      // 8296
 */                                                                                                                    // 8297
                                                                                                                       // 8298
L.Path = L.Layer.extend({                                                                                              // 8299
                                                                                                                       // 8300
	// @section                                                                                                           // 8301
	// @aka Path options                                                                                                  // 8302
	options: {                                                                                                            // 8303
		// @option stroke: Boolean = true                                                                                    // 8304
		// Whether to draw stroke along the path. Set it to `false` to disable borders on polygons or circles.               // 8305
		stroke: true,                                                                                                        // 8306
                                                                                                                       // 8307
		// @option color: String = '#3388ff'                                                                                 // 8308
		// Stroke color                                                                                                      // 8309
		color: '#3388ff',                                                                                                    // 8310
                                                                                                                       // 8311
		// @option weight: Number = 3                                                                                        // 8312
		// Stroke width in pixels                                                                                            // 8313
		weight: 3,                                                                                                           // 8314
                                                                                                                       // 8315
		// @option opacity: Number = 1.0                                                                                     // 8316
		// Stroke opacity                                                                                                    // 8317
		opacity: 1,                                                                                                          // 8318
                                                                                                                       // 8319
		// @option lineCap: String= 'round'                                                                                  // 8320
		// A string that defines [shape to be used at the end](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linecap) of the stroke.
		lineCap: 'round',                                                                                                    // 8322
                                                                                                                       // 8323
		// @option lineJoin: String = 'round'                                                                                // 8324
		// A string that defines [shape to be used at the corners](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linejoin) of the stroke.
		lineJoin: 'round',                                                                                                   // 8326
                                                                                                                       // 8327
		// @option dashArray: String = null                                                                                  // 8328
		// A string that defines the stroke [dash pattern](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dasharray). Doesn't work on `Canvas`-powered layers in [some old browsers](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility).
		dashArray: null,                                                                                                     // 8330
                                                                                                                       // 8331
		// @option dashOffset: String = null                                                                                 // 8332
		// A string that defines the [distance into the dash pattern to start the dash](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dashoffset). Doesn't work on `Canvas`-powered layers in [some old browsers](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility).
		dashOffset: null,                                                                                                    // 8334
                                                                                                                       // 8335
		// @option fill: Boolean = depends                                                                                   // 8336
		// Whether to fill the path with color. Set it to `false` to disable filling on polygons or circles.                 // 8337
		fill: false,                                                                                                         // 8338
                                                                                                                       // 8339
		// @option fillColor: String = *                                                                                     // 8340
		// Fill color. Defaults to the value of the [`color`](#path-color) option                                            // 8341
		fillColor: null,                                                                                                     // 8342
                                                                                                                       // 8343
		// @option fillOpacity: Number = 0.2                                                                                 // 8344
		// Fill opacity.                                                                                                     // 8345
		fillOpacity: 0.2,                                                                                                    // 8346
                                                                                                                       // 8347
		// @option fillRule: String = 'evenodd'                                                                              // 8348
		// A string that defines [how the inside of a shape](https://developer.mozilla.org/docs/Web/SVG/Attribute/fill-rule) is determined.
		fillRule: 'evenodd',                                                                                                 // 8350
                                                                                                                       // 8351
		// className: '',                                                                                                    // 8352
                                                                                                                       // 8353
		// Option inherited from "Interactive layer" abstract class                                                          // 8354
		interactive: true                                                                                                    // 8355
	},                                                                                                                    // 8356
                                                                                                                       // 8357
	beforeAdd: function (map) {                                                                                           // 8358
		// Renderer is set here because we need to call renderer.getEvents                                                   // 8359
		// before this.getEvents.                                                                                            // 8360
		this._renderer = map.getRenderer(this);                                                                              // 8361
	},                                                                                                                    // 8362
                                                                                                                       // 8363
	onAdd: function () {                                                                                                  // 8364
		this._renderer._initPath(this);                                                                                      // 8365
		this._reset();                                                                                                       // 8366
		this._renderer._addPath(this);                                                                                       // 8367
	},                                                                                                                    // 8368
                                                                                                                       // 8369
	onRemove: function () {                                                                                               // 8370
		this._renderer._removePath(this);                                                                                    // 8371
	},                                                                                                                    // 8372
                                                                                                                       // 8373
	// @method redraw(): this                                                                                             // 8374
	// Redraws the layer. Sometimes useful after you changed the coordinates that the path uses.                          // 8375
	redraw: function () {                                                                                                 // 8376
		if (this._map) {                                                                                                     // 8377
			this._renderer._updatePath(this);                                                                                   // 8378
		}                                                                                                                    // 8379
		return this;                                                                                                         // 8380
	},                                                                                                                    // 8381
                                                                                                                       // 8382
	// @method setStyle(style: Path options): this                                                                        // 8383
	// Changes the appearance of a Path based on the options in the `Path options` object.                                // 8384
	setStyle: function (style) {                                                                                          // 8385
		L.setOptions(this, style);                                                                                           // 8386
		if (this._renderer) {                                                                                                // 8387
			this._renderer._updateStyle(this);                                                                                  // 8388
		}                                                                                                                    // 8389
		return this;                                                                                                         // 8390
	},                                                                                                                    // 8391
                                                                                                                       // 8392
	// @method bringToFront(): this                                                                                       // 8393
	// Brings the layer to the top of all path layers.                                                                    // 8394
	bringToFront: function () {                                                                                           // 8395
		if (this._renderer) {                                                                                                // 8396
			this._renderer._bringToFront(this);                                                                                 // 8397
		}                                                                                                                    // 8398
		return this;                                                                                                         // 8399
	},                                                                                                                    // 8400
                                                                                                                       // 8401
	// @method bringToBack(): this                                                                                        // 8402
	// Brings the layer to the bottom of all path layers.                                                                 // 8403
	bringToBack: function () {                                                                                            // 8404
		if (this._renderer) {                                                                                                // 8405
			this._renderer._bringToBack(this);                                                                                  // 8406
		}                                                                                                                    // 8407
		return this;                                                                                                         // 8408
	},                                                                                                                    // 8409
                                                                                                                       // 8410
	getElement: function () {                                                                                             // 8411
		return this._path;                                                                                                   // 8412
	},                                                                                                                    // 8413
                                                                                                                       // 8414
	_reset: function () {                                                                                                 // 8415
		// defined in children classes                                                                                       // 8416
		this._project();                                                                                                     // 8417
		this._update();                                                                                                      // 8418
	},                                                                                                                    // 8419
                                                                                                                       // 8420
	_clickTolerance: function () {                                                                                        // 8421
		// used when doing hit detection for Canvas layers                                                                   // 8422
		return (this.options.stroke ? this.options.weight / 2 : 0) + (L.Browser.touch ? 10 : 0);                             // 8423
	}                                                                                                                     // 8424
});                                                                                                                    // 8425
                                                                                                                       // 8426
                                                                                                                       // 8427
                                                                                                                       // 8428
/*                                                                                                                     // 8429
 * @namespace LineUtil                                                                                                 // 8430
 *                                                                                                                     // 8431
 * Various utility functions for polyine points processing, used by Leaflet internally to make polylines lightning-fast.
 */                                                                                                                    // 8433
                                                                                                                       // 8434
L.LineUtil = {                                                                                                         // 8435
                                                                                                                       // 8436
	// Simplify polyline with vertex reduction and Douglas-Peucker simplification.                                        // 8437
	// Improves rendering performance dramatically by lessening the number of points to draw.                             // 8438
                                                                                                                       // 8439
	// @function simplify(points: Point[], tolerance: Number): Point[]                                                    // 8440
	// Dramatically reduces the number of points in a polyline while retaining                                            // 8441
	// its shape and returns a new array of simplified points, using the                                                  // 8442
	// [Douglas-Peucker algorithm](http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm).                               // 8443
	// Used for a huge performance boost when processing/displaying Leaflet polylines for                                 // 8444
	// each zoom level and also reducing visual noise. tolerance affects the amount of                                    // 8445
	// simplification (lesser value means higher quality but slower and with more points).                                // 8446
	// Also released as a separated micro-library [Simplify.js](http://mourner.github.com/simplify-js/).                  // 8447
	simplify: function (points, tolerance) {                                                                              // 8448
		if (!tolerance || !points.length) {                                                                                  // 8449
			return points.slice();                                                                                              // 8450
		}                                                                                                                    // 8451
                                                                                                                       // 8452
		var sqTolerance = tolerance * tolerance;                                                                             // 8453
                                                                                                                       // 8454
		// stage 1: vertex reduction                                                                                         // 8455
		points = this._reducePoints(points, sqTolerance);                                                                    // 8456
                                                                                                                       // 8457
		// stage 2: Douglas-Peucker simplification                                                                           // 8458
		points = this._simplifyDP(points, sqTolerance);                                                                      // 8459
                                                                                                                       // 8460
		return points;                                                                                                       // 8461
	},                                                                                                                    // 8462
                                                                                                                       // 8463
	// @function pointToSegmentDistance(p: Point, p1: Point, p2: Point): Number                                           // 8464
	// Returns the distance between point `p` and segment `p1` to `p2`.                                                   // 8465
	pointToSegmentDistance:  function (p, p1, p2) {                                                                       // 8466
		return Math.sqrt(this._sqClosestPointOnSegment(p, p1, p2, true));                                                    // 8467
	},                                                                                                                    // 8468
                                                                                                                       // 8469
	// @function closestPointOnSegment(p: Point, p1: Point, p2: Point): Number                                            // 8470
	// Returns the closest point from a point `p` on a segment `p1` to `p2`.                                              // 8471
	closestPointOnSegment: function (p, p1, p2) {                                                                         // 8472
		return this._sqClosestPointOnSegment(p, p1, p2);                                                                     // 8473
	},                                                                                                                    // 8474
                                                                                                                       // 8475
	// Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm                         // 8476
	_simplifyDP: function (points, sqTolerance) {                                                                         // 8477
                                                                                                                       // 8478
		var len = points.length,                                                                                             // 8479
		    ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,                                    // 8480
		    markers = new ArrayConstructor(len);                                                                             // 8481
                                                                                                                       // 8482
		markers[0] = markers[len - 1] = 1;                                                                                   // 8483
                                                                                                                       // 8484
		this._simplifyDPStep(points, markers, sqTolerance, 0, len - 1);                                                      // 8485
                                                                                                                       // 8486
		var i,                                                                                                               // 8487
		    newPoints = [];                                                                                                  // 8488
                                                                                                                       // 8489
		for (i = 0; i < len; i++) {                                                                                          // 8490
			if (markers[i]) {                                                                                                   // 8491
				newPoints.push(points[i]);                                                                                         // 8492
			}                                                                                                                   // 8493
		}                                                                                                                    // 8494
                                                                                                                       // 8495
		return newPoints;                                                                                                    // 8496
	},                                                                                                                    // 8497
                                                                                                                       // 8498
	_simplifyDPStep: function (points, markers, sqTolerance, first, last) {                                               // 8499
                                                                                                                       // 8500
		var maxSqDist = 0,                                                                                                   // 8501
		    index, i, sqDist;                                                                                                // 8502
                                                                                                                       // 8503
		for (i = first + 1; i <= last - 1; i++) {                                                                            // 8504
			sqDist = this._sqClosestPointOnSegment(points[i], points[first], points[last], true);                               // 8505
                                                                                                                       // 8506
			if (sqDist > maxSqDist) {                                                                                           // 8507
				index = i;                                                                                                         // 8508
				maxSqDist = sqDist;                                                                                                // 8509
			}                                                                                                                   // 8510
		}                                                                                                                    // 8511
                                                                                                                       // 8512
		if (maxSqDist > sqTolerance) {                                                                                       // 8513
			markers[index] = 1;                                                                                                 // 8514
                                                                                                                       // 8515
			this._simplifyDPStep(points, markers, sqTolerance, first, index);                                                   // 8516
			this._simplifyDPStep(points, markers, sqTolerance, index, last);                                                    // 8517
		}                                                                                                                    // 8518
	},                                                                                                                    // 8519
                                                                                                                       // 8520
	// reduce points that are too close to each other to a single point                                                   // 8521
	_reducePoints: function (points, sqTolerance) {                                                                       // 8522
		var reducedPoints = [points[0]];                                                                                     // 8523
                                                                                                                       // 8524
		for (var i = 1, prev = 0, len = points.length; i < len; i++) {                                                       // 8525
			if (this._sqDist(points[i], points[prev]) > sqTolerance) {                                                          // 8526
				reducedPoints.push(points[i]);                                                                                     // 8527
				prev = i;                                                                                                          // 8528
			}                                                                                                                   // 8529
		}                                                                                                                    // 8530
		if (prev < len - 1) {                                                                                                // 8531
			reducedPoints.push(points[len - 1]);                                                                                // 8532
		}                                                                                                                    // 8533
		return reducedPoints;                                                                                                // 8534
	},                                                                                                                    // 8535
                                                                                                                       // 8536
                                                                                                                       // 8537
	// @function clipSegment(a: Point, b: Point, bounds: Bounds, useLastCode?: Boolean, round?: Boolean): Point[]|Boolean
	// Clips the segment a to b by rectangular bounds with the                                                            // 8539
	// [Cohen-Sutherland algorithm](https://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm)                     // 8540
	// (modifying the segment points directly!). Used by Leaflet to only show polyline                                    // 8541
	// points that are on the screen or near, increasing performance.                                                     // 8542
	clipSegment: function (a, b, bounds, useLastCode, round) {                                                            // 8543
		var codeA = useLastCode ? this._lastCode : this._getBitCode(a, bounds),                                              // 8544
		    codeB = this._getBitCode(b, bounds),                                                                             // 8545
                                                                                                                       // 8546
		    codeOut, p, newCode;                                                                                             // 8547
                                                                                                                       // 8548
		// save 2nd code to avoid calculating it on the next segment                                                         // 8549
		this._lastCode = codeB;                                                                                              // 8550
                                                                                                                       // 8551
		while (true) {                                                                                                       // 8552
			// if a,b is inside the clip window (trivial accept)                                                                // 8553
			if (!(codeA | codeB)) {                                                                                             // 8554
				return [a, b];                                                                                                     // 8555
			}                                                                                                                   // 8556
                                                                                                                       // 8557
			// if a,b is outside the clip window (trivial reject)                                                               // 8558
			if (codeA & codeB) {                                                                                                // 8559
				return false;                                                                                                      // 8560
			}                                                                                                                   // 8561
                                                                                                                       // 8562
			// other cases                                                                                                      // 8563
			codeOut = codeA || codeB;                                                                                           // 8564
			p = this._getEdgeIntersection(a, b, codeOut, bounds, round);                                                        // 8565
			newCode = this._getBitCode(p, bounds);                                                                              // 8566
                                                                                                                       // 8567
			if (codeOut === codeA) {                                                                                            // 8568
				a = p;                                                                                                             // 8569
				codeA = newCode;                                                                                                   // 8570
			} else {                                                                                                            // 8571
				b = p;                                                                                                             // 8572
				codeB = newCode;                                                                                                   // 8573
			}                                                                                                                   // 8574
		}                                                                                                                    // 8575
	},                                                                                                                    // 8576
                                                                                                                       // 8577
	_getEdgeIntersection: function (a, b, code, bounds, round) {                                                          // 8578
		var dx = b.x - a.x,                                                                                                  // 8579
		    dy = b.y - a.y,                                                                                                  // 8580
		    min = bounds.min,                                                                                                // 8581
		    max = bounds.max,                                                                                                // 8582
		    x, y;                                                                                                            // 8583
                                                                                                                       // 8584
		if (code & 8) { // top                                                                                               // 8585
			x = a.x + dx * (max.y - a.y) / dy;                                                                                  // 8586
			y = max.y;                                                                                                          // 8587
                                                                                                                       // 8588
		} else if (code & 4) { // bottom                                                                                     // 8589
			x = a.x + dx * (min.y - a.y) / dy;                                                                                  // 8590
			y = min.y;                                                                                                          // 8591
                                                                                                                       // 8592
		} else if (code & 2) { // right                                                                                      // 8593
			x = max.x;                                                                                                          // 8594
			y = a.y + dy * (max.x - a.x) / dx;                                                                                  // 8595
                                                                                                                       // 8596
		} else if (code & 1) { // left                                                                                       // 8597
			x = min.x;                                                                                                          // 8598
			y = a.y + dy * (min.x - a.x) / dx;                                                                                  // 8599
		}                                                                                                                    // 8600
                                                                                                                       // 8601
		return new L.Point(x, y, round);                                                                                     // 8602
	},                                                                                                                    // 8603
                                                                                                                       // 8604
	_getBitCode: function (p, bounds) {                                                                                   // 8605
		var code = 0;                                                                                                        // 8606
                                                                                                                       // 8607
		if (p.x < bounds.min.x) { // left                                                                                    // 8608
			code |= 1;                                                                                                          // 8609
		} else if (p.x > bounds.max.x) { // right                                                                            // 8610
			code |= 2;                                                                                                          // 8611
		}                                                                                                                    // 8612
                                                                                                                       // 8613
		if (p.y < bounds.min.y) { // bottom                                                                                  // 8614
			code |= 4;                                                                                                          // 8615
		} else if (p.y > bounds.max.y) { // top                                                                              // 8616
			code |= 8;                                                                                                          // 8617
		}                                                                                                                    // 8618
                                                                                                                       // 8619
		return code;                                                                                                         // 8620
	},                                                                                                                    // 8621
                                                                                                                       // 8622
	// square distance (to avoid unnecessary Math.sqrt calls)                                                             // 8623
	_sqDist: function (p1, p2) {                                                                                          // 8624
		var dx = p2.x - p1.x,                                                                                                // 8625
		    dy = p2.y - p1.y;                                                                                                // 8626
		return dx * dx + dy * dy;                                                                                            // 8627
	},                                                                                                                    // 8628
                                                                                                                       // 8629
	// return closest point on segment or distance to that point                                                          // 8630
	_sqClosestPointOnSegment: function (p, p1, p2, sqDist) {                                                              // 8631
		var x = p1.x,                                                                                                        // 8632
		    y = p1.y,                                                                                                        // 8633
		    dx = p2.x - x,                                                                                                   // 8634
		    dy = p2.y - y,                                                                                                   // 8635
		    dot = dx * dx + dy * dy,                                                                                         // 8636
		    t;                                                                                                               // 8637
                                                                                                                       // 8638
		if (dot > 0) {                                                                                                       // 8639
			t = ((p.x - x) * dx + (p.y - y) * dy) / dot;                                                                        // 8640
                                                                                                                       // 8641
			if (t > 1) {                                                                                                        // 8642
				x = p2.x;                                                                                                          // 8643
				y = p2.y;                                                                                                          // 8644
			} else if (t > 0) {                                                                                                 // 8645
				x += dx * t;                                                                                                       // 8646
				y += dy * t;                                                                                                       // 8647
			}                                                                                                                   // 8648
		}                                                                                                                    // 8649
                                                                                                                       // 8650
		dx = p.x - x;                                                                                                        // 8651
		dy = p.y - y;                                                                                                        // 8652
                                                                                                                       // 8653
		return sqDist ? dx * dx + dy * dy : new L.Point(x, y);                                                               // 8654
	}                                                                                                                     // 8655
};                                                                                                                     // 8656
                                                                                                                       // 8657
                                                                                                                       // 8658
                                                                                                                       // 8659
/*                                                                                                                     // 8660
 * @class Polyline                                                                                                     // 8661
 * @aka L.Polyline                                                                                                     // 8662
 * @inherits Path                                                                                                      // 8663
 *                                                                                                                     // 8664
 * A class for drawing polyline overlays on a map. Extends `Path`.                                                     // 8665
 *                                                                                                                     // 8666
 * @example                                                                                                            // 8667
 *                                                                                                                     // 8668
 * ```js                                                                                                               // 8669
 * // create a red polyline from an array of LatLng points                                                             // 8670
 * var latlngs = [                                                                                                     // 8671
 * 	[45.51, -122.68],                                                                                                  // 8672
 * 	[37.77, -122.43],                                                                                                  // 8673
 * 	[34.04, -118.2]                                                                                                    // 8674
 * ];                                                                                                                  // 8675
 *                                                                                                                     // 8676
 * var polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);                                                      // 8677
 *                                                                                                                     // 8678
 * // zoom the map to the polyline                                                                                     // 8679
 * map.fitBounds(polyline.getBounds());                                                                                // 8680
 * ```                                                                                                                 // 8681
 *                                                                                                                     // 8682
 * You can also pass a multi-dimensional array to represent a `MultiPolyline` shape:                                   // 8683
 *                                                                                                                     // 8684
 * ```js                                                                                                               // 8685
 * // create a red polyline from an array of arrays of LatLng points                                                   // 8686
 * var latlngs = [                                                                                                     // 8687
 * 	[[45.51, -122.68],                                                                                                 // 8688
 * 	 [37.77, -122.43],                                                                                                 // 8689
 * 	 [34.04, -118.2]],                                                                                                 // 8690
 * 	[[40.78, -73.91],                                                                                                  // 8691
 * 	 [41.83, -87.62],                                                                                                  // 8692
 * 	 [32.76, -96.72]]                                                                                                  // 8693
 * ];                                                                                                                  // 8694
 * ```                                                                                                                 // 8695
 */                                                                                                                    // 8696
                                                                                                                       // 8697
L.Polyline = L.Path.extend({                                                                                           // 8698
                                                                                                                       // 8699
	// @section                                                                                                           // 8700
	// @aka Polyline options                                                                                              // 8701
	options: {                                                                                                            // 8702
		// @option smoothFactor: Number = 1.0                                                                                // 8703
		// How much to simplify the polyline on each zoom level. More means                                                  // 8704
		// better performance and smoother look, and less means more accurate representation.                                // 8705
		smoothFactor: 1.0,                                                                                                   // 8706
                                                                                                                       // 8707
		// @option noClip: Boolean = false                                                                                   // 8708
		// Disable polyline clipping.                                                                                        // 8709
		noClip: false                                                                                                        // 8710
	},                                                                                                                    // 8711
                                                                                                                       // 8712
	initialize: function (latlngs, options) {                                                                             // 8713
		L.setOptions(this, options);                                                                                         // 8714
		this._setLatLngs(latlngs);                                                                                           // 8715
	},                                                                                                                    // 8716
                                                                                                                       // 8717
	// @method getLatLngs(): LatLng[]                                                                                     // 8718
	// Returns an array of the points in the path, or nested arrays of points in case of multi-polyline.                  // 8719
	getLatLngs: function () {                                                                                             // 8720
		return this._latlngs;                                                                                                // 8721
	},                                                                                                                    // 8722
                                                                                                                       // 8723
	// @method setLatLngs(latlngs: LatLng[]): this                                                                        // 8724
	// Replaces all the points in the polyline with the given array of geographical points.                               // 8725
	setLatLngs: function (latlngs) {                                                                                      // 8726
		this._setLatLngs(latlngs);                                                                                           // 8727
		return this.redraw();                                                                                                // 8728
	},                                                                                                                    // 8729
                                                                                                                       // 8730
	// @method isEmpty(): Boolean                                                                                         // 8731
	// Returns `true` if the Polyline has no LatLngs.                                                                     // 8732
	isEmpty: function () {                                                                                                // 8733
		return !this._latlngs.length;                                                                                        // 8734
	},                                                                                                                    // 8735
                                                                                                                       // 8736
	closestLayerPoint: function (p) {                                                                                     // 8737
		var minDistance = Infinity,                                                                                          // 8738
		    minPoint = null,                                                                                                 // 8739
		    closest = L.LineUtil._sqClosestPointOnSegment,                                                                   // 8740
		    p1, p2;                                                                                                          // 8741
                                                                                                                       // 8742
		for (var j = 0, jLen = this._parts.length; j < jLen; j++) {                                                          // 8743
			var points = this._parts[j];                                                                                        // 8744
                                                                                                                       // 8745
			for (var i = 1, len = points.length; i < len; i++) {                                                                // 8746
				p1 = points[i - 1];                                                                                                // 8747
				p2 = points[i];                                                                                                    // 8748
                                                                                                                       // 8749
				var sqDist = closest(p, p1, p2, true);                                                                             // 8750
                                                                                                                       // 8751
				if (sqDist < minDistance) {                                                                                        // 8752
					minDistance = sqDist;                                                                                             // 8753
					minPoint = closest(p, p1, p2);                                                                                    // 8754
				}                                                                                                                  // 8755
			}                                                                                                                   // 8756
		}                                                                                                                    // 8757
		if (minPoint) {                                                                                                      // 8758
			minPoint.distance = Math.sqrt(minDistance);                                                                         // 8759
		}                                                                                                                    // 8760
		return minPoint;                                                                                                     // 8761
	},                                                                                                                    // 8762
                                                                                                                       // 8763
	// @method getCenter(): LatLng                                                                                        // 8764
	// Returns the center ([centroid](http://en.wikipedia.org/wiki/Centroid)) of the polyline.                            // 8765
	getCenter: function () {                                                                                              // 8766
		// throws error when not yet added to map as this center calculation requires projected coordinates                  // 8767
		if (!this._map) {                                                                                                    // 8768
			throw new Error('Must add layer to map before using getCenter()');                                                  // 8769
		}                                                                                                                    // 8770
                                                                                                                       // 8771
		var i, halfDist, segDist, dist, p1, p2, ratio,                                                                       // 8772
		    points = this._rings[0],                                                                                         // 8773
		    len = points.length;                                                                                             // 8774
                                                                                                                       // 8775
		if (!len) { return null; }                                                                                           // 8776
                                                                                                                       // 8777
		// polyline centroid algorithm; only uses the first ring if there are multiple                                       // 8778
                                                                                                                       // 8779
		for (i = 0, halfDist = 0; i < len - 1; i++) {                                                                        // 8780
			halfDist += points[i].distanceTo(points[i + 1]) / 2;                                                                // 8781
		}                                                                                                                    // 8782
                                                                                                                       // 8783
		// The line is so small in the current view that all points are on the same pixel.                                   // 8784
		if (halfDist === 0) {                                                                                                // 8785
			return this._map.layerPointToLatLng(points[0]);                                                                     // 8786
		}                                                                                                                    // 8787
                                                                                                                       // 8788
		for (i = 0, dist = 0; i < len - 1; i++) {                                                                            // 8789
			p1 = points[i];                                                                                                     // 8790
			p2 = points[i + 1];                                                                                                 // 8791
			segDist = p1.distanceTo(p2);                                                                                        // 8792
			dist += segDist;                                                                                                    // 8793
                                                                                                                       // 8794
			if (dist > halfDist) {                                                                                              // 8795
				ratio = (dist - halfDist) / segDist;                                                                               // 8796
				return this._map.layerPointToLatLng([                                                                              // 8797
					p2.x - ratio * (p2.x - p1.x),                                                                                     // 8798
					p2.y - ratio * (p2.y - p1.y)                                                                                      // 8799
				]);                                                                                                                // 8800
			}                                                                                                                   // 8801
		}                                                                                                                    // 8802
	},                                                                                                                    // 8803
                                                                                                                       // 8804
	// @method getBounds(): LatLngBounds                                                                                  // 8805
	// Returns the `LatLngBounds` of the path.                                                                            // 8806
	getBounds: function () {                                                                                              // 8807
		return this._bounds;                                                                                                 // 8808
	},                                                                                                                    // 8809
                                                                                                                       // 8810
	// @method addLatLng(latlng: LatLng, latlngs? LatLng[]): this                                                         // 8811
	// Adds a given point to the polyline. By default, adds to the first ring of                                          // 8812
	// the polyline in case of a multi-polyline, but can be overridden by passing                                         // 8813
	// a specific ring as a LatLng array (that you can earlier access with [`getLatLngs`](#polyline-getlatlngs)).         // 8814
	addLatLng: function (latlng, latlngs) {                                                                               // 8815
		latlngs = latlngs || this._defaultShape();                                                                           // 8816
		latlng = L.latLng(latlng);                                                                                           // 8817
		latlngs.push(latlng);                                                                                                // 8818
		this._bounds.extend(latlng);                                                                                         // 8819
		return this.redraw();                                                                                                // 8820
	},                                                                                                                    // 8821
                                                                                                                       // 8822
	_setLatLngs: function (latlngs) {                                                                                     // 8823
		this._bounds = new L.LatLngBounds();                                                                                 // 8824
		this._latlngs = this._convertLatLngs(latlngs);                                                                       // 8825
	},                                                                                                                    // 8826
                                                                                                                       // 8827
	_defaultShape: function () {                                                                                          // 8828
		return L.Polyline._flat(this._latlngs) ? this._latlngs : this._latlngs[0];                                           // 8829
	},                                                                                                                    // 8830
                                                                                                                       // 8831
	// recursively convert latlngs input into actual LatLng instances; calculate bounds along the way                     // 8832
	_convertLatLngs: function (latlngs) {                                                                                 // 8833
		var result = [],                                                                                                     // 8834
		    flat = L.Polyline._flat(latlngs);                                                                                // 8835
                                                                                                                       // 8836
		for (var i = 0, len = latlngs.length; i < len; i++) {                                                                // 8837
			if (flat) {                                                                                                         // 8838
				result[i] = L.latLng(latlngs[i]);                                                                                  // 8839
				this._bounds.extend(result[i]);                                                                                    // 8840
			} else {                                                                                                            // 8841
				result[i] = this._convertLatLngs(latlngs[i]);                                                                      // 8842
			}                                                                                                                   // 8843
		}                                                                                                                    // 8844
                                                                                                                       // 8845
		return result;                                                                                                       // 8846
	},                                                                                                                    // 8847
                                                                                                                       // 8848
	_project: function () {                                                                                               // 8849
		var pxBounds = new L.Bounds();                                                                                       // 8850
		this._rings = [];                                                                                                    // 8851
		this._projectLatlngs(this._latlngs, this._rings, pxBounds);                                                          // 8852
                                                                                                                       // 8853
		var w = this._clickTolerance(),                                                                                      // 8854
		    p = new L.Point(w, w);                                                                                           // 8855
                                                                                                                       // 8856
		if (this._bounds.isValid() && pxBounds.isValid()) {                                                                  // 8857
			pxBounds.min._subtract(p);                                                                                          // 8858
			pxBounds.max._add(p);                                                                                               // 8859
			this._pxBounds = pxBounds;                                                                                          // 8860
		}                                                                                                                    // 8861
	},                                                                                                                    // 8862
                                                                                                                       // 8863
	// recursively turns latlngs into a set of rings with projected coordinates                                           // 8864
	_projectLatlngs: function (latlngs, result, projectedBounds) {                                                        // 8865
		var flat = latlngs[0] instanceof L.LatLng,                                                                           // 8866
		    len = latlngs.length,                                                                                            // 8867
		    i, ring;                                                                                                         // 8868
                                                                                                                       // 8869
		if (flat) {                                                                                                          // 8870
			ring = [];                                                                                                          // 8871
			for (i = 0; i < len; i++) {                                                                                         // 8872
				ring[i] = this._map.latLngToLayerPoint(latlngs[i]);                                                                // 8873
				projectedBounds.extend(ring[i]);                                                                                   // 8874
			}                                                                                                                   // 8875
			result.push(ring);                                                                                                  // 8876
		} else {                                                                                                             // 8877
			for (i = 0; i < len; i++) {                                                                                         // 8878
				this._projectLatlngs(latlngs[i], result, projectedBounds);                                                         // 8879
			}                                                                                                                   // 8880
		}                                                                                                                    // 8881
	},                                                                                                                    // 8882
                                                                                                                       // 8883
	// clip polyline by renderer bounds so that we have less to render for performance                                    // 8884
	_clipPoints: function () {                                                                                            // 8885
		var bounds = this._renderer._bounds;                                                                                 // 8886
                                                                                                                       // 8887
		this._parts = [];                                                                                                    // 8888
		if (!this._pxBounds || !this._pxBounds.intersects(bounds)) {                                                         // 8889
			return;                                                                                                             // 8890
		}                                                                                                                    // 8891
                                                                                                                       // 8892
		if (this.options.noClip) {                                                                                           // 8893
			this._parts = this._rings;                                                                                          // 8894
			return;                                                                                                             // 8895
		}                                                                                                                    // 8896
                                                                                                                       // 8897
		var parts = this._parts,                                                                                             // 8898
		    i, j, k, len, len2, segment, points;                                                                             // 8899
                                                                                                                       // 8900
		for (i = 0, k = 0, len = this._rings.length; i < len; i++) {                                                         // 8901
			points = this._rings[i];                                                                                            // 8902
                                                                                                                       // 8903
			for (j = 0, len2 = points.length; j < len2 - 1; j++) {                                                              // 8904
				segment = L.LineUtil.clipSegment(points[j], points[j + 1], bounds, j, true);                                       // 8905
                                                                                                                       // 8906
				if (!segment) { continue; }                                                                                        // 8907
                                                                                                                       // 8908
				parts[k] = parts[k] || [];                                                                                         // 8909
				parts[k].push(segment[0]);                                                                                         // 8910
                                                                                                                       // 8911
				// if segment goes out of screen, or it's the last one, it's the end of the line part                              // 8912
				if ((segment[1] !== points[j + 1]) || (j === len2 - 2)) {                                                          // 8913
					parts[k].push(segment[1]);                                                                                        // 8914
					k++;                                                                                                              // 8915
				}                                                                                                                  // 8916
			}                                                                                                                   // 8917
		}                                                                                                                    // 8918
	},                                                                                                                    // 8919
                                                                                                                       // 8920
	// simplify each clipped part of the polyline for performance                                                         // 8921
	_simplifyPoints: function () {                                                                                        // 8922
		var parts = this._parts,                                                                                             // 8923
		    tolerance = this.options.smoothFactor;                                                                           // 8924
                                                                                                                       // 8925
		for (var i = 0, len = parts.length; i < len; i++) {                                                                  // 8926
			parts[i] = L.LineUtil.simplify(parts[i], tolerance);                                                                // 8927
		}                                                                                                                    // 8928
	},                                                                                                                    // 8929
                                                                                                                       // 8930
	_update: function () {                                                                                                // 8931
		if (!this._map) { return; }                                                                                          // 8932
                                                                                                                       // 8933
		this._clipPoints();                                                                                                  // 8934
		this._simplifyPoints();                                                                                              // 8935
		this._updatePath();                                                                                                  // 8936
	},                                                                                                                    // 8937
                                                                                                                       // 8938
	_updatePath: function () {                                                                                            // 8939
		this._renderer._updatePoly(this);                                                                                    // 8940
	}                                                                                                                     // 8941
});                                                                                                                    // 8942
                                                                                                                       // 8943
// @factory L.polyline(latlngs: LatLng[], options?: Polyline options)                                                  // 8944
// Instantiates a polyline object given an array of geographical points and                                            // 8945
// optionally an options object. You can create a `Polyline` object with                                               // 8946
// multiple separate lines (`MultiPolyline`) by passing an array of arrays                                             // 8947
// of geographic points.                                                                                               // 8948
L.polyline = function (latlngs, options) {                                                                             // 8949
	return new L.Polyline(latlngs, options);                                                                              // 8950
};                                                                                                                     // 8951
                                                                                                                       // 8952
L.Polyline._flat = function (latlngs) {                                                                                // 8953
	// true if it's a flat array of latlngs; false if nested                                                              // 8954
	return !L.Util.isArray(latlngs[0]) || (typeof latlngs[0][0] !== 'object' && typeof latlngs[0][0] !== 'undefined');    // 8955
};                                                                                                                     // 8956
                                                                                                                       // 8957
                                                                                                                       // 8958
                                                                                                                       // 8959
/*                                                                                                                     // 8960
 * @namespace PolyUtil                                                                                                 // 8961
 * Various utility functions for polygon geometries.                                                                   // 8962
 */                                                                                                                    // 8963
                                                                                                                       // 8964
L.PolyUtil = {};                                                                                                       // 8965
                                                                                                                       // 8966
/* @function clipPolygon(points: Point[], bounds: Bounds, round?: Boolean): Point[]                                    // 8967
 * Clips the polygon geometry defined by the given `points` by the given bounds (using the [Sutherland-Hodgeman algorithm](https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm)).
 * Used by Leaflet to only show polygon points that are on the screen or near, increasing                              // 8969
 * performance. Note that polygon points needs different algorithm for clipping                                        // 8970
 * than polyline, so there's a seperate method for it.                                                                 // 8971
 */                                                                                                                    // 8972
L.PolyUtil.clipPolygon = function (points, bounds, round) {                                                            // 8973
	var clippedPoints,                                                                                                    // 8974
	    edges = [1, 4, 2, 8],                                                                                             // 8975
	    i, j, k,                                                                                                          // 8976
	    a, b,                                                                                                             // 8977
	    len, edge, p,                                                                                                     // 8978
	    lu = L.LineUtil;                                                                                                  // 8979
                                                                                                                       // 8980
	for (i = 0, len = points.length; i < len; i++) {                                                                      // 8981
		points[i]._code = lu._getBitCode(points[i], bounds);                                                                 // 8982
	}                                                                                                                     // 8983
                                                                                                                       // 8984
	// for each edge (left, bottom, right, top)                                                                           // 8985
	for (k = 0; k < 4; k++) {                                                                                             // 8986
		edge = edges[k];                                                                                                     // 8987
		clippedPoints = [];                                                                                                  // 8988
                                                                                                                       // 8989
		for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {                                                    // 8990
			a = points[i];                                                                                                      // 8991
			b = points[j];                                                                                                      // 8992
                                                                                                                       // 8993
			// if a is inside the clip window                                                                                   // 8994
			if (!(a._code & edge)) {                                                                                            // 8995
				// if b is outside the clip window (a->b goes out of screen)                                                       // 8996
				if (b._code & edge) {                                                                                              // 8997
					p = lu._getEdgeIntersection(b, a, edge, bounds, round);                                                           // 8998
					p._code = lu._getBitCode(p, bounds);                                                                              // 8999
					clippedPoints.push(p);                                                                                            // 9000
				}                                                                                                                  // 9001
				clippedPoints.push(a);                                                                                             // 9002
                                                                                                                       // 9003
			// else if b is inside the clip window (a->b enters the screen)                                                     // 9004
			} else if (!(b._code & edge)) {                                                                                     // 9005
				p = lu._getEdgeIntersection(b, a, edge, bounds, round);                                                            // 9006
				p._code = lu._getBitCode(p, bounds);                                                                               // 9007
				clippedPoints.push(p);                                                                                             // 9008
			}                                                                                                                   // 9009
		}                                                                                                                    // 9010
		points = clippedPoints;                                                                                              // 9011
	}                                                                                                                     // 9012
                                                                                                                       // 9013
	return points;                                                                                                        // 9014
};                                                                                                                     // 9015
                                                                                                                       // 9016
                                                                                                                       // 9017
                                                                                                                       // 9018
/*                                                                                                                     // 9019
 * @class Polygon                                                                                                      // 9020
 * @aka L.Polygon                                                                                                      // 9021
 * @inherits Polyline                                                                                                  // 9022
 *                                                                                                                     // 9023
 * A class for drawing polygon overlays on a map. Extends `Polyline`.                                                  // 9024
 *                                                                                                                     // 9025
 * Note that points you pass when creating a polygon shouldn't have an additional last point equal to the first one — it's better to filter out such points.
 *                                                                                                                     // 9027
 *                                                                                                                     // 9028
 * @example                                                                                                            // 9029
 *                                                                                                                     // 9030
 * ```js                                                                                                               // 9031
 * // create a red polygon from an array of LatLng points                                                              // 9032
 * var latlngs = [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]];                                            // 9033
 *                                                                                                                     // 9034
 * var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);                                                        // 9035
 *                                                                                                                     // 9036
 * // zoom the map to the polygon                                                                                      // 9037
 * map.fitBounds(polygon.getBounds());                                                                                 // 9038
 * ```                                                                                                                 // 9039
 *                                                                                                                     // 9040
 * You can also pass an array of arrays of latlngs, with the first array representing the outer shape and the other arrays representing holes in the outer shape:
 *                                                                                                                     // 9042
 * ```js                                                                                                               // 9043
 * var latlngs = [                                                                                                     // 9044
 *   [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]], // outer ring                                          // 9045
 *   [[37.29, -108.58],[40.71, -108.58],[40.71, -102.50],[37.29, -102.50]] // hole                                     // 9046
 * ];                                                                                                                  // 9047
 * ```                                                                                                                 // 9048
 *                                                                                                                     // 9049
 * Additionally, you can pass a multi-dimensional array to represent a MultiPolygon shape.                             // 9050
 *                                                                                                                     // 9051
 * ```js                                                                                                               // 9052
 * var latlngs = [                                                                                                     // 9053
 *   [ // first polygon                                                                                                // 9054
 *     [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]], // outer ring                                        // 9055
 *     [[37.29, -108.58],[40.71, -108.58],[40.71, -102.50],[37.29, -102.50]] // hole                                   // 9056
 *   ],                                                                                                                // 9057
 *   [ // second polygon                                                                                               // 9058
 *     [[41, -111.03],[45, -111.04],[45, -104.05],[41, -104.05]]                                                       // 9059
 *   ]                                                                                                                 // 9060
 * ];                                                                                                                  // 9061
 * ```                                                                                                                 // 9062
 */                                                                                                                    // 9063
                                                                                                                       // 9064
L.Polygon = L.Polyline.extend({                                                                                        // 9065
                                                                                                                       // 9066
	options: {                                                                                                            // 9067
		fill: true                                                                                                           // 9068
	},                                                                                                                    // 9069
                                                                                                                       // 9070
	isEmpty: function () {                                                                                                // 9071
		return !this._latlngs.length || !this._latlngs[0].length;                                                            // 9072
	},                                                                                                                    // 9073
                                                                                                                       // 9074
	getCenter: function () {                                                                                              // 9075
		// throws error when not yet added to map as this center calculation requires projected coordinates                  // 9076
		if (!this._map) {                                                                                                    // 9077
			throw new Error('Must add layer to map before using getCenter()');                                                  // 9078
		}                                                                                                                    // 9079
                                                                                                                       // 9080
		var i, j, p1, p2, f, area, x, y, center,                                                                             // 9081
		    points = this._rings[0],                                                                                         // 9082
		    len = points.length;                                                                                             // 9083
                                                                                                                       // 9084
		if (!len) { return null; }                                                                                           // 9085
                                                                                                                       // 9086
		// polygon centroid algorithm; only uses the first ring if there are multiple                                        // 9087
                                                                                                                       // 9088
		area = x = y = 0;                                                                                                    // 9089
                                                                                                                       // 9090
		for (i = 0, j = len - 1; i < len; j = i++) {                                                                         // 9091
			p1 = points[i];                                                                                                     // 9092
			p2 = points[j];                                                                                                     // 9093
                                                                                                                       // 9094
			f = p1.y * p2.x - p2.y * p1.x;                                                                                      // 9095
			x += (p1.x + p2.x) * f;                                                                                             // 9096
			y += (p1.y + p2.y) * f;                                                                                             // 9097
			area += f * 3;                                                                                                      // 9098
		}                                                                                                                    // 9099
                                                                                                                       // 9100
		if (area === 0) {                                                                                                    // 9101
			// Polygon is so small that all points are on same pixel.                                                           // 9102
			center = points[0];                                                                                                 // 9103
		} else {                                                                                                             // 9104
			center = [x / area, y / area];                                                                                      // 9105
		}                                                                                                                    // 9106
		return this._map.layerPointToLatLng(center);                                                                         // 9107
	},                                                                                                                    // 9108
                                                                                                                       // 9109
	_convertLatLngs: function (latlngs) {                                                                                 // 9110
		var result = L.Polyline.prototype._convertLatLngs.call(this, latlngs),                                               // 9111
		    len = result.length;                                                                                             // 9112
                                                                                                                       // 9113
		// remove last point if it equals first one                                                                          // 9114
		if (len >= 2 && result[0] instanceof L.LatLng && result[0].equals(result[len - 1])) {                                // 9115
			result.pop();                                                                                                       // 9116
		}                                                                                                                    // 9117
		return result;                                                                                                       // 9118
	},                                                                                                                    // 9119
                                                                                                                       // 9120
	_setLatLngs: function (latlngs) {                                                                                     // 9121
		L.Polyline.prototype._setLatLngs.call(this, latlngs);                                                                // 9122
		if (L.Polyline._flat(this._latlngs)) {                                                                               // 9123
			this._latlngs = [this._latlngs];                                                                                    // 9124
		}                                                                                                                    // 9125
	},                                                                                                                    // 9126
                                                                                                                       // 9127
	_defaultShape: function () {                                                                                          // 9128
		return L.Polyline._flat(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0];                                  // 9129
	},                                                                                                                    // 9130
                                                                                                                       // 9131
	_clipPoints: function () {                                                                                            // 9132
		// polygons need a different clipping algorithm so we redefine that                                                  // 9133
                                                                                                                       // 9134
		var bounds = this._renderer._bounds,                                                                                 // 9135
		    w = this.options.weight,                                                                                         // 9136
		    p = new L.Point(w, w);                                                                                           // 9137
                                                                                                                       // 9138
		// increase clip padding by stroke width to avoid stroke on clip edges                                               // 9139
		bounds = new L.Bounds(bounds.min.subtract(p), bounds.max.add(p));                                                    // 9140
                                                                                                                       // 9141
		this._parts = [];                                                                                                    // 9142
		if (!this._pxBounds || !this._pxBounds.intersects(bounds)) {                                                         // 9143
			return;                                                                                                             // 9144
		}                                                                                                                    // 9145
                                                                                                                       // 9146
		if (this.options.noClip) {                                                                                           // 9147
			this._parts = this._rings;                                                                                          // 9148
			return;                                                                                                             // 9149
		}                                                                                                                    // 9150
                                                                                                                       // 9151
		for (var i = 0, len = this._rings.length, clipped; i < len; i++) {                                                   // 9152
			clipped = L.PolyUtil.clipPolygon(this._rings[i], bounds, true);                                                     // 9153
			if (clipped.length) {                                                                                               // 9154
				this._parts.push(clipped);                                                                                         // 9155
			}                                                                                                                   // 9156
		}                                                                                                                    // 9157
	},                                                                                                                    // 9158
                                                                                                                       // 9159
	_updatePath: function () {                                                                                            // 9160
		this._renderer._updatePoly(this, true);                                                                              // 9161
	}                                                                                                                     // 9162
});                                                                                                                    // 9163
                                                                                                                       // 9164
                                                                                                                       // 9165
// @factory L.polygon(latlngs: LatLng[], options?: Polyline options)                                                   // 9166
L.polygon = function (latlngs, options) {                                                                              // 9167
	return new L.Polygon(latlngs, options);                                                                               // 9168
};                                                                                                                     // 9169
                                                                                                                       // 9170
                                                                                                                       // 9171
                                                                                                                       // 9172
/*                                                                                                                     // 9173
 * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.                              // 9174
 */                                                                                                                    // 9175
                                                                                                                       // 9176
/*                                                                                                                     // 9177
 * @class Rectangle                                                                                                    // 9178
 * @aka L.Retangle                                                                                                     // 9179
 * @inherits Polygon                                                                                                   // 9180
 *                                                                                                                     // 9181
 * A class for drawing rectangle overlays on a map. Extends `Polygon`.                                                 // 9182
 *                                                                                                                     // 9183
 * @example                                                                                                            // 9184
 *                                                                                                                     // 9185
 * ```js                                                                                                               // 9186
 * // define rectangle geographical bounds                                                                             // 9187
 * var bounds = [[54.559322, -5.767822], [56.1210604, -3.021240]];                                                     // 9188
 *                                                                                                                     // 9189
 * // create an orange rectangle                                                                                       // 9190
 * L.rectangle(bounds, {color: "#ff7800", weight: 1}).addTo(map);                                                      // 9191
 *                                                                                                                     // 9192
 * // zoom the map to the rectangle bounds                                                                             // 9193
 * map.fitBounds(bounds);                                                                                              // 9194
 * ```                                                                                                                 // 9195
 *                                                                                                                     // 9196
 */                                                                                                                    // 9197
                                                                                                                       // 9198
                                                                                                                       // 9199
L.Rectangle = L.Polygon.extend({                                                                                       // 9200
	initialize: function (latLngBounds, options) {                                                                        // 9201
		L.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);                             // 9202
	},                                                                                                                    // 9203
                                                                                                                       // 9204
	// @method setBounds(latLngBounds: LatLngBounds): this                                                                // 9205
	// Redraws the rectangle with the passed bounds.                                                                      // 9206
	setBounds: function (latLngBounds) {                                                                                  // 9207
		return this.setLatLngs(this._boundsToLatLngs(latLngBounds));                                                         // 9208
	},                                                                                                                    // 9209
                                                                                                                       // 9210
	_boundsToLatLngs: function (latLngBounds) {                                                                           // 9211
		latLngBounds = L.latLngBounds(latLngBounds);                                                                         // 9212
		return [                                                                                                             // 9213
			latLngBounds.getSouthWest(),                                                                                        // 9214
			latLngBounds.getNorthWest(),                                                                                        // 9215
			latLngBounds.getNorthEast(),                                                                                        // 9216
			latLngBounds.getSouthEast()                                                                                         // 9217
		];                                                                                                                   // 9218
	}                                                                                                                     // 9219
});                                                                                                                    // 9220
                                                                                                                       // 9221
                                                                                                                       // 9222
// @factory L.rectangle(latLngBounds: LatLngBounds, options?: Polyline options)                                        // 9223
L.rectangle = function (latLngBounds, options) {                                                                       // 9224
	return new L.Rectangle(latLngBounds, options);                                                                        // 9225
};                                                                                                                     // 9226
                                                                                                                       // 9227
                                                                                                                       // 9228
                                                                                                                       // 9229
/*                                                                                                                     // 9230
 * @class CircleMarker                                                                                                 // 9231
 * @aka L.CircleMarker                                                                                                 // 9232
 * @inherits Path                                                                                                      // 9233
 *                                                                                                                     // 9234
 * A circle of a fixed size with radius specified in pixels. Extends `Path`.                                           // 9235
 */                                                                                                                    // 9236
                                                                                                                       // 9237
L.CircleMarker = L.Path.extend({                                                                                       // 9238
                                                                                                                       // 9239
	// @section                                                                                                           // 9240
	// @aka CircleMarker options                                                                                          // 9241
	options: {                                                                                                            // 9242
		fill: true,                                                                                                          // 9243
                                                                                                                       // 9244
		// @option radius: Number = 10                                                                                       // 9245
		// Radius of the circle marker, in pixels                                                                            // 9246
		radius: 10                                                                                                           // 9247
	},                                                                                                                    // 9248
                                                                                                                       // 9249
	initialize: function (latlng, options) {                                                                              // 9250
		L.setOptions(this, options);                                                                                         // 9251
		this._latlng = L.latLng(latlng);                                                                                     // 9252
		this._radius = this.options.radius;                                                                                  // 9253
	},                                                                                                                    // 9254
                                                                                                                       // 9255
	// @method setLatLng(latLng: LatLng): this                                                                            // 9256
	// Sets the position of a circle marker to a new location.                                                            // 9257
	setLatLng: function (latlng) {                                                                                        // 9258
		this._latlng = L.latLng(latlng);                                                                                     // 9259
		this.redraw();                                                                                                       // 9260
		return this.fire('move', {latlng: this._latlng});                                                                    // 9261
	},                                                                                                                    // 9262
                                                                                                                       // 9263
	// @method getLatLng(): LatLng                                                                                        // 9264
	// Returns the current geographical position of the circle marker                                                     // 9265
	getLatLng: function () {                                                                                              // 9266
		return this._latlng;                                                                                                 // 9267
	},                                                                                                                    // 9268
                                                                                                                       // 9269
	// @method setRadius(radius: Number): this                                                                            // 9270
	// Sets the radius of a circle marker. Units are in pixels.                                                           // 9271
	setRadius: function (radius) {                                                                                        // 9272
		this.options.radius = this._radius = radius;                                                                         // 9273
		return this.redraw();                                                                                                // 9274
	},                                                                                                                    // 9275
                                                                                                                       // 9276
	// @method getRadius(): Number                                                                                        // 9277
	// Returns the current radius of the circle                                                                           // 9278
	getRadius: function () {                                                                                              // 9279
		return this._radius;                                                                                                 // 9280
	},                                                                                                                    // 9281
                                                                                                                       // 9282
	setStyle : function (options) {                                                                                       // 9283
		var radius = options && options.radius || this._radius;                                                              // 9284
		L.Path.prototype.setStyle.call(this, options);                                                                       // 9285
		this.setRadius(radius);                                                                                              // 9286
		return this;                                                                                                         // 9287
	},                                                                                                                    // 9288
                                                                                                                       // 9289
	_project: function () {                                                                                               // 9290
		this._point = this._map.latLngToLayerPoint(this._latlng);                                                            // 9291
		this._updateBounds();                                                                                                // 9292
	},                                                                                                                    // 9293
                                                                                                                       // 9294
	_updateBounds: function () {                                                                                          // 9295
		var r = this._radius,                                                                                                // 9296
		    r2 = this._radiusY || r,                                                                                         // 9297
		    w = this._clickTolerance(),                                                                                      // 9298
		    p = [r + w, r2 + w];                                                                                             // 9299
		this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));                                          // 9300
	},                                                                                                                    // 9301
                                                                                                                       // 9302
	_update: function () {                                                                                                // 9303
		if (this._map) {                                                                                                     // 9304
			this._updatePath();                                                                                                 // 9305
		}                                                                                                                    // 9306
	},                                                                                                                    // 9307
                                                                                                                       // 9308
	_updatePath: function () {                                                                                            // 9309
		this._renderer._updateCircle(this);                                                                                  // 9310
	},                                                                                                                    // 9311
                                                                                                                       // 9312
	_empty: function () {                                                                                                 // 9313
		return this._radius && !this._renderer._bounds.intersects(this._pxBounds);                                           // 9314
	}                                                                                                                     // 9315
});                                                                                                                    // 9316
                                                                                                                       // 9317
                                                                                                                       // 9318
// @factory L.circleMarker(latlng: LatLng, options?: CircleMarker options)                                             // 9319
// Instantiates a circle marker object given a geographical point, and an optional options object.                     // 9320
L.circleMarker = function (latlng, options) {                                                                          // 9321
	return new L.CircleMarker(latlng, options);                                                                           // 9322
};                                                                                                                     // 9323
                                                                                                                       // 9324
                                                                                                                       // 9325
                                                                                                                       // 9326
/*                                                                                                                     // 9327
 * @class Circle                                                                                                       // 9328
 * @aka L.Circle                                                                                                       // 9329
 * @inherits CircleMarker                                                                                              // 9330
 *                                                                                                                     // 9331
 * A class for drawing circle overlays on a map. Extends `CircleMarker`.                                               // 9332
 *                                                                                                                     // 9333
 * It's an approximation and starts to diverge from a real circle closer to poles (due to projection distortion).      // 9334
 *                                                                                                                     // 9335
 * @example                                                                                                            // 9336
 *                                                                                                                     // 9337
 * ```js                                                                                                               // 9338
 * L.circle([50.5, 30.5], {radius: 200}).addTo(map);                                                                   // 9339
 * ```                                                                                                                 // 9340
 */                                                                                                                    // 9341
                                                                                                                       // 9342
L.Circle = L.CircleMarker.extend({                                                                                     // 9343
                                                                                                                       // 9344
	initialize: function (latlng, options, legacyOptions) {                                                               // 9345
		if (typeof options === 'number') {                                                                                   // 9346
			// Backwards compatibility with 0.7.x factory (latlng, radius, options?)                                            // 9347
			options = L.extend({}, legacyOptions, {radius: options});                                                           // 9348
		}                                                                                                                    // 9349
		L.setOptions(this, options);                                                                                         // 9350
		this._latlng = L.latLng(latlng);                                                                                     // 9351
                                                                                                                       // 9352
		if (isNaN(this.options.radius)) { throw new Error('Circle radius cannot be NaN'); }                                  // 9353
                                                                                                                       // 9354
		// @section                                                                                                          // 9355
		// @aka Circle options                                                                                               // 9356
		// @option radius: Number; Radius of the circle, in meters.                                                          // 9357
		this._mRadius = this.options.radius;                                                                                 // 9358
	},                                                                                                                    // 9359
                                                                                                                       // 9360
	// @method setRadius(radius: Number): this                                                                            // 9361
	// Sets the radius of a circle. Units are in meters.                                                                  // 9362
	setRadius: function (radius) {                                                                                        // 9363
		this._mRadius = radius;                                                                                              // 9364
		return this.redraw();                                                                                                // 9365
	},                                                                                                                    // 9366
                                                                                                                       // 9367
	// @method getRadius(): Number                                                                                        // 9368
	// Returns the current radius of a circle. Units are in meters.                                                       // 9369
	getRadius: function () {                                                                                              // 9370
		return this._mRadius;                                                                                                // 9371
	},                                                                                                                    // 9372
                                                                                                                       // 9373
	// @method getBounds(): LatLngBounds                                                                                  // 9374
	// Returns the `LatLngBounds` of the path.                                                                            // 9375
	getBounds: function () {                                                                                              // 9376
		var half = [this._radius, this._radiusY || this._radius];                                                            // 9377
                                                                                                                       // 9378
		return new L.LatLngBounds(                                                                                           // 9379
			this._map.layerPointToLatLng(this._point.subtract(half)),                                                           // 9380
			this._map.layerPointToLatLng(this._point.add(half)));                                                               // 9381
	},                                                                                                                    // 9382
                                                                                                                       // 9383
	setStyle: L.Path.prototype.setStyle,                                                                                  // 9384
                                                                                                                       // 9385
	_project: function () {                                                                                               // 9386
                                                                                                                       // 9387
		var lng = this._latlng.lng,                                                                                          // 9388
		    lat = this._latlng.lat,                                                                                          // 9389
		    map = this._map,                                                                                                 // 9390
		    crs = map.options.crs;                                                                                           // 9391
                                                                                                                       // 9392
		if (crs.distance === L.CRS.Earth.distance) {                                                                         // 9393
			var d = Math.PI / 180,                                                                                              // 9394
			    latR = (this._mRadius / L.CRS.Earth.R) / d,                                                                     // 9395
			    top = map.project([lat + latR, lng]),                                                                           // 9396
			    bottom = map.project([lat - latR, lng]),                                                                        // 9397
			    p = top.add(bottom).divideBy(2),                                                                                // 9398
			    lat2 = map.unproject(p).lat,                                                                                    // 9399
			    lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) /                                // 9400
			            (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;                                                          // 9401
                                                                                                                       // 9402
			if (isNaN(lngR) || lngR === 0) {                                                                                    // 9403
				lngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425                                      // 9404
			}                                                                                                                   // 9405
                                                                                                                       // 9406
			this._point = p.subtract(map.getPixelOrigin());                                                                     // 9407
			this._radius = isNaN(lngR) ? 0 : Math.max(Math.round(p.x - map.project([lat2, lng - lngR]).x), 1);                  // 9408
			this._radiusY = Math.max(Math.round(p.y - top.y), 1);                                                               // 9409
                                                                                                                       // 9410
		} else {                                                                                                             // 9411
			var latlng2 = crs.unproject(crs.project(this._latlng).subtract([this._mRadius, 0]));                                // 9412
                                                                                                                       // 9413
			this._point = map.latLngToLayerPoint(this._latlng);                                                                 // 9414
			this._radius = this._point.x - map.latLngToLayerPoint(latlng2).x;                                                   // 9415
		}                                                                                                                    // 9416
                                                                                                                       // 9417
		this._updateBounds();                                                                                                // 9418
	}                                                                                                                     // 9419
});                                                                                                                    // 9420
                                                                                                                       // 9421
// @factory L.circle(latlng: LatLng, options?: Circle options)                                                         // 9422
// Instantiates a circle object given a geographical point, and an options object                                      // 9423
// which contains the circle radius.                                                                                   // 9424
// @alternative                                                                                                        // 9425
// @factory L.circle(latlng: LatLng, radius: Number, options?: Circle options)                                         // 9426
// Obsolete way of instantiating a circle, for compatibility with 0.7.x code.                                          // 9427
// Do not use in new applications or plugins.                                                                          // 9428
L.circle = function (latlng, options, legacyOptions) {                                                                 // 9429
	return new L.Circle(latlng, options, legacyOptions);                                                                  // 9430
};                                                                                                                     // 9431
                                                                                                                       // 9432
                                                                                                                       // 9433
                                                                                                                       // 9434
/*                                                                                                                     // 9435
 * @class SVG                                                                                                          // 9436
 * @inherits Renderer                                                                                                  // 9437
 * @aka L.SVG                                                                                                          // 9438
 *                                                                                                                     // 9439
 * Allows vector layers to be displayed with [SVG](https://developer.mozilla.org/docs/Web/SVG).                        // 9440
 * Inherits `Renderer`.                                                                                                // 9441
 *                                                                                                                     // 9442
 * Due to [technical limitations](http://caniuse.com/#search=svg), SVG is not                                          // 9443
 * available in all web browsers, notably Android 2.x and 3.x.                                                         // 9444
 *                                                                                                                     // 9445
 * Although SVG is not available on IE7 and IE8, these browsers support                                                // 9446
 * [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language)                                                         // 9447
 * (a now deprecated technology), and the SVG renderer will fall back to VML in                                        // 9448
 * this case.                                                                                                          // 9449
 *                                                                                                                     // 9450
 * @example                                                                                                            // 9451
 *                                                                                                                     // 9452
 * Use SVG by default for all paths in the map:                                                                        // 9453
 *                                                                                                                     // 9454
 * ```js                                                                                                               // 9455
 * var map = L.map('map', {                                                                                            // 9456
 * 	renderer: L.svg()                                                                                                  // 9457
 * });                                                                                                                 // 9458
 * ```                                                                                                                 // 9459
 *                                                                                                                     // 9460
 * Use a SVG renderer with extra padding for specific vector geometries:                                               // 9461
 *                                                                                                                     // 9462
 * ```js                                                                                                               // 9463
 * var map = L.map('map');                                                                                             // 9464
 * var myRenderer = L.svg({ padding: 0.5 });                                                                           // 9465
 * var line = L.polyline( coordinates, { renderer: myRenderer } );                                                     // 9466
 * var circle = L.circle( center, { renderer: myRenderer } );                                                          // 9467
 * ```                                                                                                                 // 9468
 */                                                                                                                    // 9469
                                                                                                                       // 9470
L.SVG = L.Renderer.extend({                                                                                            // 9471
                                                                                                                       // 9472
	getEvents: function () {                                                                                              // 9473
		var events = L.Renderer.prototype.getEvents.call(this);                                                              // 9474
		events.zoomstart = this._onZoomStart;                                                                                // 9475
		return events;                                                                                                       // 9476
	},                                                                                                                    // 9477
                                                                                                                       // 9478
	_initContainer: function () {                                                                                         // 9479
		this._container = L.SVG.create('svg');                                                                               // 9480
                                                                                                                       // 9481
		// makes it possible to click through svg root; we'll reset it back in individual paths                              // 9482
		this._container.setAttribute('pointer-events', 'none');                                                              // 9483
                                                                                                                       // 9484
		this._rootGroup = L.SVG.create('g');                                                                                 // 9485
		this._container.appendChild(this._rootGroup);                                                                        // 9486
	},                                                                                                                    // 9487
                                                                                                                       // 9488
	_onZoomStart: function () {                                                                                           // 9489
		// Drag-then-pinch interactions might mess up the center and zoom.                                                   // 9490
		// In this case, the easiest way to prevent this is re-do the renderer                                               // 9491
		//   bounds and padding when the zooming starts.                                                                     // 9492
		this._update();                                                                                                      // 9493
	},                                                                                                                    // 9494
                                                                                                                       // 9495
	_update: function () {                                                                                                // 9496
		if (this._map._animatingZoom && this._bounds) { return; }                                                            // 9497
                                                                                                                       // 9498
		L.Renderer.prototype._update.call(this);                                                                             // 9499
                                                                                                                       // 9500
		var b = this._bounds,                                                                                                // 9501
		    size = b.getSize(),                                                                                              // 9502
		    container = this._container;                                                                                     // 9503
                                                                                                                       // 9504
		// set size of svg-container if changed                                                                              // 9505
		if (!this._svgSize || !this._svgSize.equals(size)) {                                                                 // 9506
			this._svgSize = size;                                                                                               // 9507
			container.setAttribute('width', size.x);                                                                            // 9508
			container.setAttribute('height', size.y);                                                                           // 9509
		}                                                                                                                    // 9510
                                                                                                                       // 9511
		// movement: update container viewBox so that we don't have to change coordinates of individual layers               // 9512
		L.DomUtil.setPosition(container, b.min);                                                                             // 9513
		container.setAttribute('viewBox', [b.min.x, b.min.y, size.x, size.y].join(' '));                                     // 9514
                                                                                                                       // 9515
		this.fire('update');                                                                                                 // 9516
	},                                                                                                                    // 9517
                                                                                                                       // 9518
	// methods below are called by vector layers implementations                                                          // 9519
                                                                                                                       // 9520
	_initPath: function (layer) {                                                                                         // 9521
		var path = layer._path = L.SVG.create('path');                                                                       // 9522
                                                                                                                       // 9523
		// @namespace Path                                                                                                   // 9524
		// @option className: String = null                                                                                  // 9525
		// Custom class name set on an element. Only for SVG renderer.                                                       // 9526
		if (layer.options.className) {                                                                                       // 9527
			L.DomUtil.addClass(path, layer.options.className);                                                                  // 9528
		}                                                                                                                    // 9529
                                                                                                                       // 9530
		if (layer.options.interactive) {                                                                                     // 9531
			L.DomUtil.addClass(path, 'leaflet-interactive');                                                                    // 9532
		}                                                                                                                    // 9533
                                                                                                                       // 9534
		this._updateStyle(layer);                                                                                            // 9535
		this._layers[L.stamp(layer)] = layer;                                                                                // 9536
	},                                                                                                                    // 9537
                                                                                                                       // 9538
	_addPath: function (layer) {                                                                                          // 9539
		this._rootGroup.appendChild(layer._path);                                                                            // 9540
		layer.addInteractiveTarget(layer._path);                                                                             // 9541
	},                                                                                                                    // 9542
                                                                                                                       // 9543
	_removePath: function (layer) {                                                                                       // 9544
		L.DomUtil.remove(layer._path);                                                                                       // 9545
		layer.removeInteractiveTarget(layer._path);                                                                          // 9546
		delete this._layers[L.stamp(layer)];                                                                                 // 9547
	},                                                                                                                    // 9548
                                                                                                                       // 9549
	_updatePath: function (layer) {                                                                                       // 9550
		layer._project();                                                                                                    // 9551
		layer._update();                                                                                                     // 9552
	},                                                                                                                    // 9553
                                                                                                                       // 9554
	_updateStyle: function (layer) {                                                                                      // 9555
		var path = layer._path,                                                                                              // 9556
		    options = layer.options;                                                                                         // 9557
                                                                                                                       // 9558
		if (!path) { return; }                                                                                               // 9559
                                                                                                                       // 9560
		if (options.stroke) {                                                                                                // 9561
			path.setAttribute('stroke', options.color);                                                                         // 9562
			path.setAttribute('stroke-opacity', options.opacity);                                                               // 9563
			path.setAttribute('stroke-width', options.weight);                                                                  // 9564
			path.setAttribute('stroke-linecap', options.lineCap);                                                               // 9565
			path.setAttribute('stroke-linejoin', options.lineJoin);                                                             // 9566
                                                                                                                       // 9567
			if (options.dashArray) {                                                                                            // 9568
				path.setAttribute('stroke-dasharray', options.dashArray);                                                          // 9569
			} else {                                                                                                            // 9570
				path.removeAttribute('stroke-dasharray');                                                                          // 9571
			}                                                                                                                   // 9572
                                                                                                                       // 9573
			if (options.dashOffset) {                                                                                           // 9574
				path.setAttribute('stroke-dashoffset', options.dashOffset);                                                        // 9575
			} else {                                                                                                            // 9576
				path.removeAttribute('stroke-dashoffset');                                                                         // 9577
			}                                                                                                                   // 9578
		} else {                                                                                                             // 9579
			path.setAttribute('stroke', 'none');                                                                                // 9580
		}                                                                                                                    // 9581
                                                                                                                       // 9582
		if (options.fill) {                                                                                                  // 9583
			path.setAttribute('fill', options.fillColor || options.color);                                                      // 9584
			path.setAttribute('fill-opacity', options.fillOpacity);                                                             // 9585
			path.setAttribute('fill-rule', options.fillRule || 'evenodd');                                                      // 9586
		} else {                                                                                                             // 9587
			path.setAttribute('fill', 'none');                                                                                  // 9588
		}                                                                                                                    // 9589
	},                                                                                                                    // 9590
                                                                                                                       // 9591
	_updatePoly: function (layer, closed) {                                                                               // 9592
		this._setPath(layer, L.SVG.pointsToPath(layer._parts, closed));                                                      // 9593
	},                                                                                                                    // 9594
                                                                                                                       // 9595
	_updateCircle: function (layer) {                                                                                     // 9596
		var p = layer._point,                                                                                                // 9597
		    r = layer._radius,                                                                                               // 9598
		    r2 = layer._radiusY || r,                                                                                        // 9599
		    arc = 'a' + r + ',' + r2 + ' 0 1,0 ';                                                                            // 9600
                                                                                                                       // 9601
		// drawing a circle with two half-arcs                                                                               // 9602
		var d = layer._empty() ? 'M0 0' :                                                                                    // 9603
				'M' + (p.x - r) + ',' + p.y +                                                                                      // 9604
				arc + (r * 2) + ',0 ' +                                                                                            // 9605
				arc + (-r * 2) + ',0 ';                                                                                            // 9606
                                                                                                                       // 9607
		this._setPath(layer, d);                                                                                             // 9608
	},                                                                                                                    // 9609
                                                                                                                       // 9610
	_setPath: function (layer, path) {                                                                                    // 9611
		layer._path.setAttribute('d', path);                                                                                 // 9612
	},                                                                                                                    // 9613
                                                                                                                       // 9614
	// SVG does not have the concept of zIndex so we resort to changing the DOM order of elements                         // 9615
	_bringToFront: function (layer) {                                                                                     // 9616
		L.DomUtil.toFront(layer._path);                                                                                      // 9617
	},                                                                                                                    // 9618
                                                                                                                       // 9619
	_bringToBack: function (layer) {                                                                                      // 9620
		L.DomUtil.toBack(layer._path);                                                                                       // 9621
	}                                                                                                                     // 9622
});                                                                                                                    // 9623
                                                                                                                       // 9624
                                                                                                                       // 9625
// @namespace SVG; @section                                                                                            // 9626
// There are several static functions which can be called without instantiating L.SVG:                                 // 9627
L.extend(L.SVG, {                                                                                                      // 9628
	// @function create(name: String): SVGElement                                                                         // 9629
	// Returns a instance of [SVGElement](https://developer.mozilla.org/docs/Web/API/SVGElement),                         // 9630
	// corresponding to the class name passed. For example, using 'line' will return                                      // 9631
	// an instance of [SVGLineElement](https://developer.mozilla.org/docs/Web/API/SVGLineElement).                        // 9632
	create: function (name) {                                                                                             // 9633
		return document.createElementNS('http://www.w3.org/2000/svg', name);                                                 // 9634
	},                                                                                                                    // 9635
                                                                                                                       // 9636
	// @function pointsToPath(rings: Point[], closed: Boolean): String                                                    // 9637
	// Generates a SVG path string for multiple rings, with each ring turning                                             // 9638
	// into "M..L..L.." instructions                                                                                      // 9639
	pointsToPath: function (rings, closed) {                                                                              // 9640
		var str = '',                                                                                                        // 9641
		    i, j, len, len2, points, p;                                                                                      // 9642
                                                                                                                       // 9643
		for (i = 0, len = rings.length; i < len; i++) {                                                                      // 9644
			points = rings[i];                                                                                                  // 9645
                                                                                                                       // 9646
			for (j = 0, len2 = points.length; j < len2; j++) {                                                                  // 9647
				p = points[j];                                                                                                     // 9648
				str += (j ? 'L' : 'M') + p.x + ' ' + p.y;                                                                          // 9649
			}                                                                                                                   // 9650
                                                                                                                       // 9651
			// closes the ring for polygons; "x" is VML syntax                                                                  // 9652
			str += closed ? (L.Browser.svg ? 'z' : 'x') : '';                                                                   // 9653
		}                                                                                                                    // 9654
                                                                                                                       // 9655
		// SVG complains about empty path strings                                                                            // 9656
		return str || 'M0 0';                                                                                                // 9657
	}                                                                                                                     // 9658
});                                                                                                                    // 9659
                                                                                                                       // 9660
// @namespace Browser; @property svg: Boolean                                                                          // 9661
// `true` when the browser supports [SVG](https://developer.mozilla.org/docs/Web/SVG).                                 // 9662
L.Browser.svg = !!(document.createElementNS && L.SVG.create('svg').createSVGRect);                                     // 9663
                                                                                                                       // 9664
                                                                                                                       // 9665
// @namespace SVG                                                                                                      // 9666
// @factory L.svg(options?: Renderer options)                                                                          // 9667
// Creates a SVG renderer with the given options.                                                                      // 9668
L.svg = function (options) {                                                                                           // 9669
	return L.Browser.svg || L.Browser.vml ? new L.SVG(options) : null;                                                    // 9670
};                                                                                                                     // 9671
                                                                                                                       // 9672
                                                                                                                       // 9673
                                                                                                                       // 9674
/*                                                                                                                     // 9675
 * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!                                                // 9676
 */                                                                                                                    // 9677
                                                                                                                       // 9678
/*                                                                                                                     // 9679
 * @class SVG                                                                                                          // 9680
 *                                                                                                                     // 9681
 * Although SVG is not available on IE7 and IE8, these browsers support [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language), and the SVG renderer will fall back to VML in this case.
 *                                                                                                                     // 9683
 * VML was deprecated in 2012, which means VML functionality exists only for backwards compatibility                   // 9684
 * with old versions of Internet Explorer.                                                                             // 9685
 */                                                                                                                    // 9686
                                                                                                                       // 9687
// @namespace Browser; @property vml: Boolean                                                                          // 9688
// `true` if the browser supports [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language).                         // 9689
L.Browser.vml = !L.Browser.svg && (function () {                                                                       // 9690
	try {                                                                                                                 // 9691
		var div = document.createElement('div');                                                                             // 9692
		div.innerHTML = '<v:shape adj="1"/>';                                                                                // 9693
                                                                                                                       // 9694
		var shape = div.firstChild;                                                                                          // 9695
		shape.style.behavior = 'url(#default#VML)';                                                                          // 9696
                                                                                                                       // 9697
		return shape && (typeof shape.adj === 'object');                                                                     // 9698
                                                                                                                       // 9699
	} catch (e) {                                                                                                         // 9700
		return false;                                                                                                        // 9701
	}                                                                                                                     // 9702
}());                                                                                                                  // 9703
                                                                                                                       // 9704
// redefine some SVG methods to handle VML syntax which is similar but with some differences                           // 9705
L.SVG.include(!L.Browser.vml ? {} : {                                                                                  // 9706
                                                                                                                       // 9707
	_initContainer: function () {                                                                                         // 9708
		this._container = L.DomUtil.create('div', 'leaflet-vml-container');                                                  // 9709
	},                                                                                                                    // 9710
                                                                                                                       // 9711
	_update: function () {                                                                                                // 9712
		if (this._map._animatingZoom) { return; }                                                                            // 9713
		L.Renderer.prototype._update.call(this);                                                                             // 9714
		this.fire('update');                                                                                                 // 9715
	},                                                                                                                    // 9716
                                                                                                                       // 9717
	_initPath: function (layer) {                                                                                         // 9718
		var container = layer._container = L.SVG.create('shape');                                                            // 9719
                                                                                                                       // 9720
		L.DomUtil.addClass(container, 'leaflet-vml-shape ' + (this.options.className || ''));                                // 9721
                                                                                                                       // 9722
		container.coordsize = '1 1';                                                                                         // 9723
                                                                                                                       // 9724
		layer._path = L.SVG.create('path');                                                                                  // 9725
		container.appendChild(layer._path);                                                                                  // 9726
                                                                                                                       // 9727
		this._updateStyle(layer);                                                                                            // 9728
		this._layers[L.stamp(layer)] = layer;                                                                                // 9729
	},                                                                                                                    // 9730
                                                                                                                       // 9731
	_addPath: function (layer) {                                                                                          // 9732
		var container = layer._container;                                                                                    // 9733
		this._container.appendChild(container);                                                                              // 9734
                                                                                                                       // 9735
		if (layer.options.interactive) {                                                                                     // 9736
			layer.addInteractiveTarget(container);                                                                              // 9737
		}                                                                                                                    // 9738
	},                                                                                                                    // 9739
                                                                                                                       // 9740
	_removePath: function (layer) {                                                                                       // 9741
		var container = layer._container;                                                                                    // 9742
		L.DomUtil.remove(container);                                                                                         // 9743
		layer.removeInteractiveTarget(container);                                                                            // 9744
		delete this._layers[L.stamp(layer)];                                                                                 // 9745
	},                                                                                                                    // 9746
                                                                                                                       // 9747
	_updateStyle: function (layer) {                                                                                      // 9748
		var stroke = layer._stroke,                                                                                          // 9749
		    fill = layer._fill,                                                                                              // 9750
		    options = layer.options,                                                                                         // 9751
		    container = layer._container;                                                                                    // 9752
                                                                                                                       // 9753
		container.stroked = !!options.stroke;                                                                                // 9754
		container.filled = !!options.fill;                                                                                   // 9755
                                                                                                                       // 9756
		if (options.stroke) {                                                                                                // 9757
			if (!stroke) {                                                                                                      // 9758
				stroke = layer._stroke = L.SVG.create('stroke');                                                                   // 9759
			}                                                                                                                   // 9760
			container.appendChild(stroke);                                                                                      // 9761
			stroke.weight = options.weight + 'px';                                                                              // 9762
			stroke.color = options.color;                                                                                       // 9763
			stroke.opacity = options.opacity;                                                                                   // 9764
                                                                                                                       // 9765
			if (options.dashArray) {                                                                                            // 9766
				stroke.dashStyle = L.Util.isArray(options.dashArray) ?                                                             // 9767
				    options.dashArray.join(' ') :                                                                                  // 9768
				    options.dashArray.replace(/( *, *)/g, ' ');                                                                    // 9769
			} else {                                                                                                            // 9770
				stroke.dashStyle = '';                                                                                             // 9771
			}                                                                                                                   // 9772
			stroke.endcap = options.lineCap.replace('butt', 'flat');                                                            // 9773
			stroke.joinstyle = options.lineJoin;                                                                                // 9774
                                                                                                                       // 9775
		} else if (stroke) {                                                                                                 // 9776
			container.removeChild(stroke);                                                                                      // 9777
			layer._stroke = null;                                                                                               // 9778
		}                                                                                                                    // 9779
                                                                                                                       // 9780
		if (options.fill) {                                                                                                  // 9781
			if (!fill) {                                                                                                        // 9782
				fill = layer._fill = L.SVG.create('fill');                                                                         // 9783
			}                                                                                                                   // 9784
			container.appendChild(fill);                                                                                        // 9785
			fill.color = options.fillColor || options.color;                                                                    // 9786
			fill.opacity = options.fillOpacity;                                                                                 // 9787
                                                                                                                       // 9788
		} else if (fill) {                                                                                                   // 9789
			container.removeChild(fill);                                                                                        // 9790
			layer._fill = null;                                                                                                 // 9791
		}                                                                                                                    // 9792
	},                                                                                                                    // 9793
                                                                                                                       // 9794
	_updateCircle: function (layer) {                                                                                     // 9795
		var p = layer._point.round(),                                                                                        // 9796
		    r = Math.round(layer._radius),                                                                                   // 9797
		    r2 = Math.round(layer._radiusY || r);                                                                            // 9798
                                                                                                                       // 9799
		this._setPath(layer, layer._empty() ? 'M0 0' :                                                                       // 9800
				'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r2 + ' 0,' + (65535 * 360));                                             // 9801
	},                                                                                                                    // 9802
                                                                                                                       // 9803
	_setPath: function (layer, path) {                                                                                    // 9804
		layer._path.v = path;                                                                                                // 9805
	},                                                                                                                    // 9806
                                                                                                                       // 9807
	_bringToFront: function (layer) {                                                                                     // 9808
		L.DomUtil.toFront(layer._container);                                                                                 // 9809
	},                                                                                                                    // 9810
                                                                                                                       // 9811
	_bringToBack: function (layer) {                                                                                      // 9812
		L.DomUtil.toBack(layer._container);                                                                                  // 9813
	}                                                                                                                     // 9814
});                                                                                                                    // 9815
                                                                                                                       // 9816
if (L.Browser.vml) {                                                                                                   // 9817
	L.SVG.create = (function () {                                                                                         // 9818
		try {                                                                                                                // 9819
			document.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');                                                   // 9820
			return function (name) {                                                                                            // 9821
				return document.createElement('<lvml:' + name + ' class="lvml">');                                                 // 9822
			};                                                                                                                  // 9823
		} catch (e) {                                                                                                        // 9824
			return function (name) {                                                                                            // 9825
				return document.createElement('<' + name + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');                // 9826
			};                                                                                                                  // 9827
		}                                                                                                                    // 9828
	})();                                                                                                                 // 9829
}                                                                                                                      // 9830
                                                                                                                       // 9831
                                                                                                                       // 9832
                                                                                                                       // 9833
/*                                                                                                                     // 9834
 * @class Canvas                                                                                                       // 9835
 * @inherits Renderer                                                                                                  // 9836
 * @aka L.Canvas                                                                                                       // 9837
 *                                                                                                                     // 9838
 * Allows vector layers to be displayed with [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).      // 9839
 * Inherits `Renderer`.                                                                                                // 9840
 *                                                                                                                     // 9841
 * Due to [technical limitations](http://caniuse.com/#search=canvas), Canvas is not                                    // 9842
 * available in all web browsers, notably IE8, and overlapping geometries might                                        // 9843
 * not display properly in some edge cases.                                                                            // 9844
 *                                                                                                                     // 9845
 * @example                                                                                                            // 9846
 *                                                                                                                     // 9847
 * Use Canvas by default for all paths in the map:                                                                     // 9848
 *                                                                                                                     // 9849
 * ```js                                                                                                               // 9850
 * var map = L.map('map', {                                                                                            // 9851
 * 	renderer: L.canvas()                                                                                               // 9852
 * });                                                                                                                 // 9853
 * ```                                                                                                                 // 9854
 *                                                                                                                     // 9855
 * Use a Canvas renderer with extra padding for specific vector geometries:                                            // 9856
 *                                                                                                                     // 9857
 * ```js                                                                                                               // 9858
 * var map = L.map('map');                                                                                             // 9859
 * var myRenderer = L.canvas({ padding: 0.5 });                                                                        // 9860
 * var line = L.polyline( coordinates, { renderer: myRenderer } );                                                     // 9861
 * var circle = L.circle( center, { renderer: myRenderer } );                                                          // 9862
 * ```                                                                                                                 // 9863
 */                                                                                                                    // 9864
                                                                                                                       // 9865
L.Canvas = L.Renderer.extend({                                                                                         // 9866
	getEvents: function () {                                                                                              // 9867
		var events = L.Renderer.prototype.getEvents.call(this);                                                              // 9868
		events.viewprereset = this._onViewPreReset;                                                                          // 9869
		return events;                                                                                                       // 9870
	},                                                                                                                    // 9871
                                                                                                                       // 9872
	_onViewPreReset: function () {                                                                                        // 9873
		// Set a flag so that a viewprereset+moveend+viewreset only updates&redraws once                                     // 9874
		this._postponeUpdatePaths = true;                                                                                    // 9875
	},                                                                                                                    // 9876
                                                                                                                       // 9877
	onAdd: function () {                                                                                                  // 9878
		L.Renderer.prototype.onAdd.call(this);                                                                               // 9879
                                                                                                                       // 9880
		// Redraw vectors since canvas is cleared upon removal,                                                              // 9881
		// in case of removing the renderer itself from the map.                                                             // 9882
		this._draw();                                                                                                        // 9883
	},                                                                                                                    // 9884
                                                                                                                       // 9885
	_initContainer: function () {                                                                                         // 9886
		var container = this._container = document.createElement('canvas');                                                  // 9887
                                                                                                                       // 9888
		L.DomEvent                                                                                                           // 9889
			.on(container, 'mousemove', L.Util.throttle(this._onMouseMove, 32, this), this)                                     // 9890
			.on(container, 'click dblclick mousedown mouseup contextmenu', this._onClick, this)                                 // 9891
			.on(container, 'mouseout', this._handleMouseOut, this);                                                             // 9892
                                                                                                                       // 9893
		this._ctx = container.getContext('2d');                                                                              // 9894
	},                                                                                                                    // 9895
                                                                                                                       // 9896
	_updatePaths: function () {                                                                                           // 9897
		if (this._postponeUpdatePaths) { return; }                                                                           // 9898
                                                                                                                       // 9899
		var layer;                                                                                                           // 9900
		this._redrawBounds = null;                                                                                           // 9901
		for (var id in this._layers) {                                                                                       // 9902
			layer = this._layers[id];                                                                                           // 9903
			layer._update();                                                                                                    // 9904
		}                                                                                                                    // 9905
		this._redraw();                                                                                                      // 9906
	},                                                                                                                    // 9907
                                                                                                                       // 9908
	_update: function () {                                                                                                // 9909
		if (this._map._animatingZoom && this._bounds) { return; }                                                            // 9910
                                                                                                                       // 9911
		this._drawnLayers = {};                                                                                              // 9912
                                                                                                                       // 9913
		L.Renderer.prototype._update.call(this);                                                                             // 9914
                                                                                                                       // 9915
		var b = this._bounds,                                                                                                // 9916
		    container = this._container,                                                                                     // 9917
		    size = b.getSize(),                                                                                              // 9918
		    m = L.Browser.retina ? 2 : 1;                                                                                    // 9919
                                                                                                                       // 9920
		L.DomUtil.setPosition(container, b.min);                                                                             // 9921
                                                                                                                       // 9922
		// set canvas size (also clearing it); use double size on retina                                                     // 9923
		container.width = m * size.x;                                                                                        // 9924
		container.height = m * size.y;                                                                                       // 9925
		container.style.width = size.x + 'px';                                                                               // 9926
		container.style.height = size.y + 'px';                                                                              // 9927
                                                                                                                       // 9928
		if (L.Browser.retina) {                                                                                              // 9929
			this._ctx.scale(2, 2);                                                                                              // 9930
		}                                                                                                                    // 9931
                                                                                                                       // 9932
		// translate so we use the same path coordinates after canvas element moves                                          // 9933
		this._ctx.translate(-b.min.x, -b.min.y);                                                                             // 9934
                                                                                                                       // 9935
		// Tell paths to redraw themselves                                                                                   // 9936
		this.fire('update');                                                                                                 // 9937
	},                                                                                                                    // 9938
                                                                                                                       // 9939
	_reset: function () {                                                                                                 // 9940
		L.Renderer.prototype._reset.call(this);                                                                              // 9941
                                                                                                                       // 9942
		if (this._postponeUpdatePaths) {                                                                                     // 9943
			this._postponeUpdatePaths = false;                                                                                  // 9944
			this._updatePaths();                                                                                                // 9945
		}                                                                                                                    // 9946
	},                                                                                                                    // 9947
                                                                                                                       // 9948
	_initPath: function (layer) {                                                                                         // 9949
		this._updateDashArray(layer);                                                                                        // 9950
		this._layers[L.stamp(layer)] = layer;                                                                                // 9951
                                                                                                                       // 9952
		var order = layer._order = {                                                                                         // 9953
			layer: layer,                                                                                                       // 9954
			prev: this._drawLast,                                                                                               // 9955
			next: null                                                                                                          // 9956
		};                                                                                                                   // 9957
		if (this._drawLast) { this._drawLast.next = order; }                                                                 // 9958
		this._drawLast = order;                                                                                              // 9959
		this._drawFirst = this._drawFirst || this._drawLast;                                                                 // 9960
	},                                                                                                                    // 9961
                                                                                                                       // 9962
	_addPath: function (layer) {                                                                                          // 9963
		this._requestRedraw(layer);                                                                                          // 9964
	},                                                                                                                    // 9965
                                                                                                                       // 9966
	_removePath: function (layer) {                                                                                       // 9967
		var order = layer._order;                                                                                            // 9968
		var next = order.next;                                                                                               // 9969
		var prev = order.prev;                                                                                               // 9970
                                                                                                                       // 9971
		if (next) {                                                                                                          // 9972
			next.prev = prev;                                                                                                   // 9973
		} else {                                                                                                             // 9974
			this._drawLast = prev;                                                                                              // 9975
		}                                                                                                                    // 9976
		if (prev) {                                                                                                          // 9977
			prev.next = next;                                                                                                   // 9978
		} else {                                                                                                             // 9979
			this._drawFirst = next;                                                                                             // 9980
		}                                                                                                                    // 9981
                                                                                                                       // 9982
		delete layer._order;                                                                                                 // 9983
                                                                                                                       // 9984
		delete this._layers[L.stamp(layer)];                                                                                 // 9985
                                                                                                                       // 9986
		this._requestRedraw(layer);                                                                                          // 9987
	},                                                                                                                    // 9988
                                                                                                                       // 9989
	_updatePath: function (layer) {                                                                                       // 9990
		// Redraw the union of the layer's old pixel                                                                         // 9991
		// bounds and the new pixel bounds.                                                                                  // 9992
		this._extendRedrawBounds(layer);                                                                                     // 9993
		layer._project();                                                                                                    // 9994
		layer._update();                                                                                                     // 9995
		// The redraw will extend the redraw bounds                                                                          // 9996
		// with the new pixel bounds.                                                                                        // 9997
		this._requestRedraw(layer);                                                                                          // 9998
	},                                                                                                                    // 9999
                                                                                                                       // 10000
	_updateStyle: function (layer) {                                                                                      // 10001
		this._updateDashArray(layer);                                                                                        // 10002
		this._requestRedraw(layer);                                                                                          // 10003
	},                                                                                                                    // 10004
                                                                                                                       // 10005
	_updateDashArray: function (layer) {                                                                                  // 10006
		if (layer.options.dashArray) {                                                                                       // 10007
			var parts = layer.options.dashArray.split(','),                                                                     // 10008
			    dashArray = [],                                                                                                 // 10009
			    i;                                                                                                              // 10010
			for (i = 0; i < parts.length; i++) {                                                                                // 10011
				dashArray.push(Number(parts[i]));                                                                                  // 10012
			}                                                                                                                   // 10013
			layer.options._dashArray = dashArray;                                                                               // 10014
		}                                                                                                                    // 10015
	},                                                                                                                    // 10016
                                                                                                                       // 10017
	_requestRedraw: function (layer) {                                                                                    // 10018
		if (!this._map) { return; }                                                                                          // 10019
                                                                                                                       // 10020
		this._extendRedrawBounds(layer);                                                                                     // 10021
		this._redrawRequest = this._redrawRequest || L.Util.requestAnimFrame(this._redraw, this);                            // 10022
	},                                                                                                                    // 10023
                                                                                                                       // 10024
	_extendRedrawBounds: function (layer) {                                                                               // 10025
		var padding = (layer.options.weight || 0) + 1;                                                                       // 10026
		this._redrawBounds = this._redrawBounds || new L.Bounds();                                                           // 10027
		this._redrawBounds.extend(layer._pxBounds.min.subtract([padding, padding]));                                         // 10028
		this._redrawBounds.extend(layer._pxBounds.max.add([padding, padding]));                                              // 10029
	},                                                                                                                    // 10030
                                                                                                                       // 10031
	_redraw: function () {                                                                                                // 10032
		this._redrawRequest = null;                                                                                          // 10033
                                                                                                                       // 10034
		if (this._redrawBounds) {                                                                                            // 10035
			this._redrawBounds.min._floor();                                                                                    // 10036
			this._redrawBounds.max._ceil();                                                                                     // 10037
		}                                                                                                                    // 10038
                                                                                                                       // 10039
		this._clear(); // clear layers in redraw bounds                                                                      // 10040
		this._draw(); // draw layers                                                                                         // 10041
                                                                                                                       // 10042
		this._redrawBounds = null;                                                                                           // 10043
	},                                                                                                                    // 10044
                                                                                                                       // 10045
	_clear: function () {                                                                                                 // 10046
		var bounds = this._redrawBounds;                                                                                     // 10047
		if (bounds) {                                                                                                        // 10048
			var size = bounds.getSize();                                                                                        // 10049
			this._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y);                                                    // 10050
		} else {                                                                                                             // 10051
			this._ctx.clearRect(0, 0, this._container.width, this._container.height);                                           // 10052
		}                                                                                                                    // 10053
	},                                                                                                                    // 10054
                                                                                                                       // 10055
	_draw: function () {                                                                                                  // 10056
		var layer, bounds = this._redrawBounds;                                                                              // 10057
		this._ctx.save();                                                                                                    // 10058
		if (bounds) {                                                                                                        // 10059
			var size = bounds.getSize();                                                                                        // 10060
			this._ctx.beginPath();                                                                                              // 10061
			this._ctx.rect(bounds.min.x, bounds.min.y, size.x, size.y);                                                         // 10062
			this._ctx.clip();                                                                                                   // 10063
		}                                                                                                                    // 10064
                                                                                                                       // 10065
		this._drawing = true;                                                                                                // 10066
                                                                                                                       // 10067
		for (var order = this._drawFirst; order; order = order.next) {                                                       // 10068
			layer = order.layer;                                                                                                // 10069
			if (!bounds || (layer._pxBounds && layer._pxBounds.intersects(bounds))) {                                           // 10070
				layer._updatePath();                                                                                               // 10071
			}                                                                                                                   // 10072
		}                                                                                                                    // 10073
                                                                                                                       // 10074
		this._drawing = false;                                                                                               // 10075
                                                                                                                       // 10076
		this._ctx.restore();  // Restore state before clipping.                                                              // 10077
	},                                                                                                                    // 10078
                                                                                                                       // 10079
	_updatePoly: function (layer, closed) {                                                                               // 10080
		if (!this._drawing) { return; }                                                                                      // 10081
                                                                                                                       // 10082
		var i, j, len2, p,                                                                                                   // 10083
		    parts = layer._parts,                                                                                            // 10084
		    len = parts.length,                                                                                              // 10085
		    ctx = this._ctx;                                                                                                 // 10086
                                                                                                                       // 10087
		if (!len) { return; }                                                                                                // 10088
                                                                                                                       // 10089
		this._drawnLayers[layer._leaflet_id] = layer;                                                                        // 10090
                                                                                                                       // 10091
		ctx.beginPath();                                                                                                     // 10092
                                                                                                                       // 10093
		if (ctx.setLineDash) {                                                                                               // 10094
			ctx.setLineDash(layer.options && layer.options._dashArray || []);                                                   // 10095
		}                                                                                                                    // 10096
                                                                                                                       // 10097
		for (i = 0; i < len; i++) {                                                                                          // 10098
			for (j = 0, len2 = parts[i].length; j < len2; j++) {                                                                // 10099
				p = parts[i][j];                                                                                                   // 10100
				ctx[j ? 'lineTo' : 'moveTo'](p.x, p.y);                                                                            // 10101
			}                                                                                                                   // 10102
			if (closed) {                                                                                                       // 10103
				ctx.closePath();                                                                                                   // 10104
			}                                                                                                                   // 10105
		}                                                                                                                    // 10106
                                                                                                                       // 10107
		this._fillStroke(ctx, layer);                                                                                        // 10108
                                                                                                                       // 10109
		// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature                  // 10110
	},                                                                                                                    // 10111
                                                                                                                       // 10112
	_updateCircle: function (layer) {                                                                                     // 10113
                                                                                                                       // 10114
		if (!this._drawing || layer._empty()) { return; }                                                                    // 10115
                                                                                                                       // 10116
		var p = layer._point,                                                                                                // 10117
		    ctx = this._ctx,                                                                                                 // 10118
		    r = layer._radius,                                                                                               // 10119
		    s = (layer._radiusY || r) / r;                                                                                   // 10120
                                                                                                                       // 10121
		this._drawnLayers[layer._leaflet_id] = layer;                                                                        // 10122
                                                                                                                       // 10123
		if (s !== 1) {                                                                                                       // 10124
			ctx.save();                                                                                                         // 10125
			ctx.scale(1, s);                                                                                                    // 10126
		}                                                                                                                    // 10127
                                                                                                                       // 10128
		ctx.beginPath();                                                                                                     // 10129
		ctx.arc(p.x, p.y / s, r, 0, Math.PI * 2, false);                                                                     // 10130
                                                                                                                       // 10131
		if (s !== 1) {                                                                                                       // 10132
			ctx.restore();                                                                                                      // 10133
		}                                                                                                                    // 10134
                                                                                                                       // 10135
		this._fillStroke(ctx, layer);                                                                                        // 10136
	},                                                                                                                    // 10137
                                                                                                                       // 10138
	_fillStroke: function (ctx, layer) {                                                                                  // 10139
		var options = layer.options;                                                                                         // 10140
                                                                                                                       // 10141
		if (options.fill) {                                                                                                  // 10142
			ctx.globalAlpha = options.fillOpacity;                                                                              // 10143
			ctx.fillStyle = options.fillColor || options.color;                                                                 // 10144
			ctx.fill(options.fillRule || 'evenodd');                                                                            // 10145
		}                                                                                                                    // 10146
                                                                                                                       // 10147
		if (options.stroke && options.weight !== 0) {                                                                        // 10148
			ctx.globalAlpha = options.opacity;                                                                                  // 10149
			ctx.lineWidth = options.weight;                                                                                     // 10150
			ctx.strokeStyle = options.color;                                                                                    // 10151
			ctx.lineCap = options.lineCap;                                                                                      // 10152
			ctx.lineJoin = options.lineJoin;                                                                                    // 10153
			ctx.stroke();                                                                                                       // 10154
		}                                                                                                                    // 10155
	},                                                                                                                    // 10156
                                                                                                                       // 10157
	// Canvas obviously doesn't have mouse events for individual drawn objects,                                           // 10158
	// so we emulate that by calculating what's under the mouse on mousemove/click manually                               // 10159
                                                                                                                       // 10160
	_onClick: function (e) {                                                                                              // 10161
		var point = this._map.mouseEventToLayerPoint(e), layer, clickedLayer;                                                // 10162
                                                                                                                       // 10163
		for (var order = this._drawFirst; order; order = order.next) {                                                       // 10164
			layer = order.layer;                                                                                                // 10165
			if (layer.options.interactive && layer._containsPoint(point) && !this._map._draggableMoved(layer)) {                // 10166
				clickedLayer = layer;                                                                                              // 10167
			}                                                                                                                   // 10168
		}                                                                                                                    // 10169
		if (clickedLayer)  {                                                                                                 // 10170
			L.DomEvent._fakeStop(e);                                                                                            // 10171
			this._fireEvent([clickedLayer], e);                                                                                 // 10172
		}                                                                                                                    // 10173
	},                                                                                                                    // 10174
                                                                                                                       // 10175
	_onMouseMove: function (e) {                                                                                          // 10176
		if (!this._map || this._map.dragging.moving() || this._map._animatingZoom) { return; }                               // 10177
                                                                                                                       // 10178
		var point = this._map.mouseEventToLayerPoint(e);                                                                     // 10179
		this._handleMouseHover(e, point);                                                                                    // 10180
	},                                                                                                                    // 10181
                                                                                                                       // 10182
                                                                                                                       // 10183
	_handleMouseOut: function (e) {                                                                                       // 10184
		var layer = this._hoveredLayer;                                                                                      // 10185
		if (layer) {                                                                                                         // 10186
			// if we're leaving the layer, fire mouseout                                                                        // 10187
			L.DomUtil.removeClass(this._container, 'leaflet-interactive');                                                      // 10188
			this._fireEvent([layer], e, 'mouseout');                                                                            // 10189
			this._hoveredLayer = null;                                                                                          // 10190
		}                                                                                                                    // 10191
	},                                                                                                                    // 10192
                                                                                                                       // 10193
	_handleMouseHover: function (e, point) {                                                                              // 10194
		var layer, candidateHoveredLayer;                                                                                    // 10195
                                                                                                                       // 10196
		for (var order = this._drawFirst; order; order = order.next) {                                                       // 10197
			layer = order.layer;                                                                                                // 10198
			if (layer.options.interactive && layer._containsPoint(point)) {                                                     // 10199
				candidateHoveredLayer = layer;                                                                                     // 10200
			}                                                                                                                   // 10201
		}                                                                                                                    // 10202
                                                                                                                       // 10203
		if (candidateHoveredLayer !== this._hoveredLayer) {                                                                  // 10204
			this._handleMouseOut(e);                                                                                            // 10205
                                                                                                                       // 10206
			if (candidateHoveredLayer) {                                                                                        // 10207
				L.DomUtil.addClass(this._container, 'leaflet-interactive'); // change cursor                                       // 10208
				this._fireEvent([candidateHoveredLayer], e, 'mouseover');                                                          // 10209
				this._hoveredLayer = candidateHoveredLayer;                                                                        // 10210
			}                                                                                                                   // 10211
		}                                                                                                                    // 10212
                                                                                                                       // 10213
		if (this._hoveredLayer) {                                                                                            // 10214
			this._fireEvent([this._hoveredLayer], e);                                                                           // 10215
		}                                                                                                                    // 10216
	},                                                                                                                    // 10217
                                                                                                                       // 10218
	_fireEvent: function (layers, e, type) {                                                                              // 10219
		this._map._fireDOMEvent(e, type || e.type, layers);                                                                  // 10220
	},                                                                                                                    // 10221
                                                                                                                       // 10222
	_bringToFront: function (layer) {                                                                                     // 10223
		var order = layer._order;                                                                                            // 10224
		var next = order.next;                                                                                               // 10225
		var prev = order.prev;                                                                                               // 10226
                                                                                                                       // 10227
		if (next) {                                                                                                          // 10228
			next.prev = prev;                                                                                                   // 10229
		} else {                                                                                                             // 10230
			// Already last                                                                                                     // 10231
			return;                                                                                                             // 10232
		}                                                                                                                    // 10233
		if (prev) {                                                                                                          // 10234
			prev.next = next;                                                                                                   // 10235
		} else if (next) {                                                                                                   // 10236
			// Update first entry unless this is the                                                                            // 10237
			// signle entry                                                                                                     // 10238
			this._drawFirst = next;                                                                                             // 10239
		}                                                                                                                    // 10240
                                                                                                                       // 10241
		order.prev = this._drawLast;                                                                                         // 10242
		this._drawLast.next = order;                                                                                         // 10243
                                                                                                                       // 10244
		order.next = null;                                                                                                   // 10245
		this._drawLast = order;                                                                                              // 10246
                                                                                                                       // 10247
		this._requestRedraw(layer);                                                                                          // 10248
	},                                                                                                                    // 10249
                                                                                                                       // 10250
	_bringToBack: function (layer) {                                                                                      // 10251
		var order = layer._order;                                                                                            // 10252
		var next = order.next;                                                                                               // 10253
		var prev = order.prev;                                                                                               // 10254
                                                                                                                       // 10255
		if (prev) {                                                                                                          // 10256
			prev.next = next;                                                                                                   // 10257
		} else {                                                                                                             // 10258
			// Already first                                                                                                    // 10259
			return;                                                                                                             // 10260
		}                                                                                                                    // 10261
		if (next) {                                                                                                          // 10262
			next.prev = prev;                                                                                                   // 10263
		} else if (prev) {                                                                                                   // 10264
			// Update last entry unless this is the                                                                             // 10265
			// signle entry                                                                                                     // 10266
			this._drawLast = prev;                                                                                              // 10267
		}                                                                                                                    // 10268
                                                                                                                       // 10269
		order.prev = null;                                                                                                   // 10270
                                                                                                                       // 10271
		order.next = this._drawFirst;                                                                                        // 10272
		this._drawFirst.prev = order;                                                                                        // 10273
		this._drawFirst = order;                                                                                             // 10274
                                                                                                                       // 10275
		this._requestRedraw(layer);                                                                                          // 10276
	}                                                                                                                     // 10277
});                                                                                                                    // 10278
                                                                                                                       // 10279
// @namespace Browser; @property canvas: Boolean                                                                       // 10280
// `true` when the browser supports [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).               // 10281
L.Browser.canvas = (function () {                                                                                      // 10282
	return !!document.createElement('canvas').getContext;                                                                 // 10283
}());                                                                                                                  // 10284
                                                                                                                       // 10285
// @namespace Canvas                                                                                                   // 10286
// @factory L.canvas(options?: Renderer options)                                                                       // 10287
// Creates a Canvas renderer with the given options.                                                                   // 10288
L.canvas = function (options) {                                                                                        // 10289
	return L.Browser.canvas ? new L.Canvas(options) : null;                                                               // 10290
};                                                                                                                     // 10291
                                                                                                                       // 10292
L.Polyline.prototype._containsPoint = function (p, closed) {                                                           // 10293
	var i, j, k, len, len2, part,                                                                                         // 10294
	    w = this._clickTolerance();                                                                                       // 10295
                                                                                                                       // 10296
	if (!this._pxBounds.contains(p)) { return false; }                                                                    // 10297
                                                                                                                       // 10298
	// hit detection for polylines                                                                                        // 10299
	for (i = 0, len = this._parts.length; i < len; i++) {                                                                 // 10300
		part = this._parts[i];                                                                                               // 10301
                                                                                                                       // 10302
		for (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {                                                   // 10303
			if (!closed && (j === 0)) { continue; }                                                                             // 10304
                                                                                                                       // 10305
			if (L.LineUtil.pointToSegmentDistance(p, part[k], part[j]) <= w) {                                                  // 10306
				return true;                                                                                                       // 10307
			}                                                                                                                   // 10308
		}                                                                                                                    // 10309
	}                                                                                                                     // 10310
	return false;                                                                                                         // 10311
};                                                                                                                     // 10312
                                                                                                                       // 10313
L.Polygon.prototype._containsPoint = function (p) {                                                                    // 10314
	var inside = false,                                                                                                   // 10315
	    part, p1, p2, i, j, k, len, len2;                                                                                 // 10316
                                                                                                                       // 10317
	if (!this._pxBounds.contains(p)) { return false; }                                                                    // 10318
                                                                                                                       // 10319
	// ray casting algorithm for detecting if point is in polygon                                                         // 10320
	for (i = 0, len = this._parts.length; i < len; i++) {                                                                 // 10321
		part = this._parts[i];                                                                                               // 10322
                                                                                                                       // 10323
		for (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {                                                   // 10324
			p1 = part[j];                                                                                                       // 10325
			p2 = part[k];                                                                                                       // 10326
                                                                                                                       // 10327
			if (((p1.y > p.y) !== (p2.y > p.y)) && (p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {               // 10328
				inside = !inside;                                                                                                  // 10329
			}                                                                                                                   // 10330
		}                                                                                                                    // 10331
	}                                                                                                                     // 10332
                                                                                                                       // 10333
	// also check if it's on polygon stroke                                                                               // 10334
	return inside || L.Polyline.prototype._containsPoint.call(this, p, true);                                             // 10335
};                                                                                                                     // 10336
                                                                                                                       // 10337
L.CircleMarker.prototype._containsPoint = function (p) {                                                               // 10338
	return p.distanceTo(this._point) <= this._radius + this._clickTolerance();                                            // 10339
};                                                                                                                     // 10340
                                                                                                                       // 10341
                                                                                                                       // 10342
                                                                                                                       // 10343
/*                                                                                                                     // 10344
 * @class GeoJSON                                                                                                      // 10345
 * @aka L.GeoJSON                                                                                                      // 10346
 * @inherits FeatureGroup                                                                                              // 10347
 *                                                                                                                     // 10348
 * Represents a GeoJSON object or an array of GeoJSON objects. Allows you to parse                                     // 10349
 * GeoJSON data and display it on the map. Extends `FeatureGroup`.                                                     // 10350
 *                                                                                                                     // 10351
 * @example                                                                                                            // 10352
 *                                                                                                                     // 10353
 * ```js                                                                                                               // 10354
 * L.geoJSON(data, {                                                                                                   // 10355
 * 	style: function (feature) {                                                                                        // 10356
 * 		return {color: feature.properties.color};                                                                         // 10357
 * 	}                                                                                                                  // 10358
 * }).bindPopup(function (layer) {                                                                                     // 10359
 * 	return layer.feature.properties.description;                                                                       // 10360
 * }).addTo(map);                                                                                                      // 10361
 * ```                                                                                                                 // 10362
 */                                                                                                                    // 10363
                                                                                                                       // 10364
L.GeoJSON = L.FeatureGroup.extend({                                                                                    // 10365
                                                                                                                       // 10366
	/* @section                                                                                                           // 10367
	 * @aka GeoJSON options                                                                                               // 10368
	 *                                                                                                                    // 10369
	 * @option pointToLayer: Function = *                                                                                 // 10370
	 * A `Function` defining how GeoJSON points spawn Leaflet layers. It is internally                                    // 10371
	 * called when data is added, passing the GeoJSON point feature and its `LatLng`.                                     // 10372
	 * The default is to spawn a default `Marker`:                                                                        // 10373
	 * ```js                                                                                                              // 10374
	 * function(geoJsonPoint, latlng) {                                                                                   // 10375
	 * 	return L.marker(latlng);                                                                                          // 10376
	 * }                                                                                                                  // 10377
	 * ```                                                                                                                // 10378
	 *                                                                                                                    // 10379
	 * @option style: Function = *                                                                                        // 10380
	 * A `Function` defining the `Path options` for styling GeoJSON lines and polygons,                                   // 10381
	 * called internally when data is added.                                                                              // 10382
	 * The default value is to not override any defaults:                                                                 // 10383
	 * ```js                                                                                                              // 10384
	 * function (geoJsonFeature) {                                                                                        // 10385
	 * 	return {}                                                                                                         // 10386
	 * }                                                                                                                  // 10387
	 * ```                                                                                                                // 10388
	 *                                                                                                                    // 10389
	 * @option onEachFeature: Function = *                                                                                // 10390
	 * A `Function` that will be called once for each created `Feature`, after it has                                     // 10391
	 * been created and styled. Useful for attaching events and popups to features.                                       // 10392
	 * The default is to do nothing with the newly created layers:                                                        // 10393
	 * ```js                                                                                                              // 10394
	 * function (feature, layer) {}                                                                                       // 10395
	 * ```                                                                                                                // 10396
	 *                                                                                                                    // 10397
	 * @option filter: Function = *                                                                                       // 10398
	 * A `Function` that will be used to decide whether to include a feature or not.                                      // 10399
	 * The default is to include all features:                                                                            // 10400
	 * ```js                                                                                                              // 10401
	 * function (geoJsonFeature) {                                                                                        // 10402
	 * 	return true;                                                                                                      // 10403
	 * }                                                                                                                  // 10404
	 * ```                                                                                                                // 10405
	 * Note: dynamically changing the `filter` option will have effect only on newly                                      // 10406
	 * added data. It will _not_ re-evaluate already included features.                                                   // 10407
	 *                                                                                                                    // 10408
	 * @option coordsToLatLng: Function = *                                                                               // 10409
	 * A `Function` that will be used for converting GeoJSON coordinates to `LatLng`s.                                    // 10410
	 * The default is the `coordsToLatLng` static method.                                                                 // 10411
	 */                                                                                                                   // 10412
                                                                                                                       // 10413
	initialize: function (geojson, options) {                                                                             // 10414
		L.setOptions(this, options);                                                                                         // 10415
                                                                                                                       // 10416
		this._layers = {};                                                                                                   // 10417
                                                                                                                       // 10418
		if (geojson) {                                                                                                       // 10419
			this.addData(geojson);                                                                                              // 10420
		}                                                                                                                    // 10421
	},                                                                                                                    // 10422
                                                                                                                       // 10423
	// @method addData( <GeoJSON> data ): this                                                                            // 10424
	// Adds a GeoJSON object to the layer.                                                                                // 10425
	addData: function (geojson) {                                                                                         // 10426
		var features = L.Util.isArray(geojson) ? geojson : geojson.features,                                                 // 10427
		    i, len, feature;                                                                                                 // 10428
                                                                                                                       // 10429
		if (features) {                                                                                                      // 10430
			for (i = 0, len = features.length; i < len; i++) {                                                                  // 10431
				// only add this if geometry or geometries are set and not null                                                    // 10432
				feature = features[i];                                                                                             // 10433
				if (feature.geometries || feature.geometry || feature.features || feature.coordinates) {                           // 10434
					this.addData(feature);                                                                                            // 10435
				}                                                                                                                  // 10436
			}                                                                                                                   // 10437
			return this;                                                                                                        // 10438
		}                                                                                                                    // 10439
                                                                                                                       // 10440
		var options = this.options;                                                                                          // 10441
                                                                                                                       // 10442
		if (options.filter && !options.filter(geojson)) { return this; }                                                     // 10443
                                                                                                                       // 10444
		var layer = L.GeoJSON.geometryToLayer(geojson, options);                                                             // 10445
		if (!layer) {                                                                                                        // 10446
			return this;                                                                                                        // 10447
		}                                                                                                                    // 10448
		layer.feature = L.GeoJSON.asFeature(geojson);                                                                        // 10449
                                                                                                                       // 10450
		layer.defaultOptions = layer.options;                                                                                // 10451
		this.resetStyle(layer);                                                                                              // 10452
                                                                                                                       // 10453
		if (options.onEachFeature) {                                                                                         // 10454
			options.onEachFeature(geojson, layer);                                                                              // 10455
		}                                                                                                                    // 10456
                                                                                                                       // 10457
		return this.addLayer(layer);                                                                                         // 10458
	},                                                                                                                    // 10459
                                                                                                                       // 10460
	// @method resetStyle( <Path> layer ): this                                                                           // 10461
	// Resets the given vector layer's style to the original GeoJSON style, useful for resetting style after hover events.
	resetStyle: function (layer) {                                                                                        // 10463
		// reset any custom styles                                                                                           // 10464
		layer.options = L.Util.extend({}, layer.defaultOptions);                                                             // 10465
		this._setLayerStyle(layer, this.options.style);                                                                      // 10466
		return this;                                                                                                         // 10467
	},                                                                                                                    // 10468
                                                                                                                       // 10469
	// @method setStyle( <Function> style ): this                                                                         // 10470
	// Changes styles of GeoJSON vector layers with the given style function.                                             // 10471
	setStyle: function (style) {                                                                                          // 10472
		return this.eachLayer(function (layer) {                                                                             // 10473
			this._setLayerStyle(layer, style);                                                                                  // 10474
		}, this);                                                                                                            // 10475
	},                                                                                                                    // 10476
                                                                                                                       // 10477
	_setLayerStyle: function (layer, style) {                                                                             // 10478
		if (typeof style === 'function') {                                                                                   // 10479
			style = style(layer.feature);                                                                                       // 10480
		}                                                                                                                    // 10481
		if (layer.setStyle) {                                                                                                // 10482
			layer.setStyle(style);                                                                                              // 10483
		}                                                                                                                    // 10484
	}                                                                                                                     // 10485
});                                                                                                                    // 10486
                                                                                                                       // 10487
// @section                                                                                                            // 10488
// There are several static functions which can be called without instantiating L.GeoJSON:                             // 10489
L.extend(L.GeoJSON, {                                                                                                  // 10490
	// @function geometryToLayer(featureData: Object, options?: GeoJSON options): Layer                                   // 10491
	// Creates a `Layer` from a given GeoJSON feature. Can use a custom                                                   // 10492
	// [`pointToLayer`](#geojson-pointtolayer) and/or [`coordsToLatLng`](#geojson-coordstolatlng)                         // 10493
	// functions if provided as options.                                                                                  // 10494
	geometryToLayer: function (geojson, options) {                                                                        // 10495
                                                                                                                       // 10496
		var geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,                                              // 10497
		    coords = geometry ? geometry.coordinates : null,                                                                 // 10498
		    layers = [],                                                                                                     // 10499
		    pointToLayer = options && options.pointToLayer,                                                                  // 10500
		    coordsToLatLng = options && options.coordsToLatLng || this.coordsToLatLng,                                       // 10501
		    latlng, latlngs, i, len;                                                                                         // 10502
                                                                                                                       // 10503
		if (!coords && !geometry) {                                                                                          // 10504
			return null;                                                                                                        // 10505
		}                                                                                                                    // 10506
                                                                                                                       // 10507
		switch (geometry.type) {                                                                                             // 10508
		case 'Point':                                                                                                        // 10509
			latlng = coordsToLatLng(coords);                                                                                    // 10510
			return pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng);                                         // 10511
                                                                                                                       // 10512
		case 'MultiPoint':                                                                                                   // 10513
			for (i = 0, len = coords.length; i < len; i++) {                                                                    // 10514
				latlng = coordsToLatLng(coords[i]);                                                                                // 10515
				layers.push(pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng));                                  // 10516
			}                                                                                                                   // 10517
			return new L.FeatureGroup(layers);                                                                                  // 10518
                                                                                                                       // 10519
		case 'LineString':                                                                                                   // 10520
		case 'MultiLineString':                                                                                              // 10521
			latlngs = this.coordsToLatLngs(coords, geometry.type === 'LineString' ? 0 : 1, coordsToLatLng);                     // 10522
			return new L.Polyline(latlngs, options);                                                                            // 10523
                                                                                                                       // 10524
		case 'Polygon':                                                                                                      // 10525
		case 'MultiPolygon':                                                                                                 // 10526
			latlngs = this.coordsToLatLngs(coords, geometry.type === 'Polygon' ? 1 : 2, coordsToLatLng);                        // 10527
			return new L.Polygon(latlngs, options);                                                                             // 10528
                                                                                                                       // 10529
		case 'GeometryCollection':                                                                                           // 10530
			for (i = 0, len = geometry.geometries.length; i < len; i++) {                                                       // 10531
				var layer = this.geometryToLayer({                                                                                 // 10532
					geometry: geometry.geometries[i],                                                                                 // 10533
					type: 'Feature',                                                                                                  // 10534
					properties: geojson.properties                                                                                    // 10535
				}, options);                                                                                                       // 10536
                                                                                                                       // 10537
				if (layer) {                                                                                                       // 10538
					layers.push(layer);                                                                                               // 10539
				}                                                                                                                  // 10540
			}                                                                                                                   // 10541
			return new L.FeatureGroup(layers);                                                                                  // 10542
                                                                                                                       // 10543
		default:                                                                                                             // 10544
			throw new Error('Invalid GeoJSON object.');                                                                         // 10545
		}                                                                                                                    // 10546
	},                                                                                                                    // 10547
                                                                                                                       // 10548
	// @function coordsToLatLng(coords: Array): LatLng                                                                    // 10549
	// Creates a `LatLng` object from an array of 2 numbers (longitude, latitude)                                         // 10550
	// or 3 numbers (longitude, latitude, altitude) used in GeoJSON for points.                                           // 10551
	coordsToLatLng: function (coords) {                                                                                   // 10552
		return new L.LatLng(coords[1], coords[0], coords[2]);                                                                // 10553
	},                                                                                                                    // 10554
                                                                                                                       // 10555
	// @function coordsToLatLngs(coords: Array, levelsDeep?: Number, coordsToLatLng?: Function): Array                    // 10556
	// Creates a multidimensional array of `LatLng`s from a GeoJSON coordinates array.                                    // 10557
	// `levelsDeep` specifies the nesting level (0 is for an array of points, 1 for an array of arrays of points, etc., 0 by default).
	// Can use a custom [`coordsToLatLng`](#geojson-coordstolatlng) function.                                             // 10559
	coordsToLatLngs: function (coords, levelsDeep, coordsToLatLng) {                                                      // 10560
		var latlngs = [];                                                                                                    // 10561
                                                                                                                       // 10562
		for (var i = 0, len = coords.length, latlng; i < len; i++) {                                                         // 10563
			latlng = levelsDeep ?                                                                                               // 10564
			        this.coordsToLatLngs(coords[i], levelsDeep - 1, coordsToLatLng) :                                           // 10565
			        (coordsToLatLng || this.coordsToLatLng)(coords[i]);                                                         // 10566
                                                                                                                       // 10567
			latlngs.push(latlng);                                                                                               // 10568
		}                                                                                                                    // 10569
                                                                                                                       // 10570
		return latlngs;                                                                                                      // 10571
	},                                                                                                                    // 10572
                                                                                                                       // 10573
	// @function latLngToCoords(latlng: LatLng): Array                                                                    // 10574
	// Reverse of [`coordsToLatLng`](#geojson-coordstolatlng)                                                             // 10575
	latLngToCoords: function (latlng) {                                                                                   // 10576
		return latlng.alt !== undefined ?                                                                                    // 10577
				[latlng.lng, latlng.lat, latlng.alt] :                                                                             // 10578
				[latlng.lng, latlng.lat];                                                                                          // 10579
	},                                                                                                                    // 10580
                                                                                                                       // 10581
	// @function latLngsToCoords(latlngs: Array, levelsDeep?: Number, closed?: Boolean): Array                            // 10582
	// Reverse of [`coordsToLatLngs`](#geojson-coordstolatlngs)                                                           // 10583
	// `closed` determines whether the first point should be appended to the end of the array to close the feature, only used when `levelsDeep` is 0. False by default.
	latLngsToCoords: function (latlngs, levelsDeep, closed) {                                                             // 10585
		var coords = [];                                                                                                     // 10586
                                                                                                                       // 10587
		for (var i = 0, len = latlngs.length; i < len; i++) {                                                                // 10588
			coords.push(levelsDeep ?                                                                                            // 10589
				L.GeoJSON.latLngsToCoords(latlngs[i], levelsDeep - 1, closed) :                                                    // 10590
				L.GeoJSON.latLngToCoords(latlngs[i]));                                                                             // 10591
		}                                                                                                                    // 10592
                                                                                                                       // 10593
		if (!levelsDeep && closed) {                                                                                         // 10594
			coords.push(coords[0]);                                                                                             // 10595
		}                                                                                                                    // 10596
                                                                                                                       // 10597
		return coords;                                                                                                       // 10598
	},                                                                                                                    // 10599
                                                                                                                       // 10600
	getFeature: function (layer, newGeometry) {                                                                           // 10601
		return layer.feature ?                                                                                               // 10602
				L.extend({}, layer.feature, {geometry: newGeometry}) :                                                             // 10603
				L.GeoJSON.asFeature(newGeometry);                                                                                  // 10604
	},                                                                                                                    // 10605
                                                                                                                       // 10606
	// @function asFeature(geojson: Object): Object                                                                       // 10607
	// Normalize GeoJSON geometries/features into GeoJSON features.                                                       // 10608
	asFeature: function (geojson) {                                                                                       // 10609
		if (geojson.type === 'Feature' || geojson.type === 'FeatureCollection') {                                            // 10610
			return geojson;                                                                                                     // 10611
		}                                                                                                                    // 10612
                                                                                                                       // 10613
		return {                                                                                                             // 10614
			type: 'Feature',                                                                                                    // 10615
			properties: {},                                                                                                     // 10616
			geometry: geojson                                                                                                   // 10617
		};                                                                                                                   // 10618
	}                                                                                                                     // 10619
});                                                                                                                    // 10620
                                                                                                                       // 10621
var PointToGeoJSON = {                                                                                                 // 10622
	toGeoJSON: function () {                                                                                              // 10623
		return L.GeoJSON.getFeature(this, {                                                                                  // 10624
			type: 'Point',                                                                                                      // 10625
			coordinates: L.GeoJSON.latLngToCoords(this.getLatLng())                                                             // 10626
		});                                                                                                                  // 10627
	}                                                                                                                     // 10628
};                                                                                                                     // 10629
                                                                                                                       // 10630
// @namespace Marker                                                                                                   // 10631
// @method toGeoJSON(): Object                                                                                         // 10632
// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the marker (as a GeoJSON `Point` Feature).
L.Marker.include(PointToGeoJSON);                                                                                      // 10634
                                                                                                                       // 10635
// @namespace CircleMarker                                                                                             // 10636
// @method toGeoJSON(): Object                                                                                         // 10637
// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the circle marker (as a GeoJSON `Point` Feature).
L.Circle.include(PointToGeoJSON);                                                                                      // 10639
L.CircleMarker.include(PointToGeoJSON);                                                                                // 10640
                                                                                                                       // 10641
                                                                                                                       // 10642
// @namespace Polyline                                                                                                 // 10643
// @method toGeoJSON(): Object                                                                                         // 10644
// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the polyline (as a GeoJSON `LineString` or `MultiLineString` Feature).
L.Polyline.prototype.toGeoJSON = function () {                                                                         // 10646
	var multi = !L.Polyline._flat(this._latlngs);                                                                         // 10647
                                                                                                                       // 10648
	var coords = L.GeoJSON.latLngsToCoords(this._latlngs, multi ? 1 : 0);                                                 // 10649
                                                                                                                       // 10650
	return L.GeoJSON.getFeature(this, {                                                                                   // 10651
		type: (multi ? 'Multi' : '') + 'LineString',                                                                         // 10652
		coordinates: coords                                                                                                  // 10653
	});                                                                                                                   // 10654
};                                                                                                                     // 10655
                                                                                                                       // 10656
// @namespace Polygon                                                                                                  // 10657
// @method toGeoJSON(): Object                                                                                         // 10658
// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the polygon (as a GeoJSON `Polygon` or `MultiPolygon` Feature).
L.Polygon.prototype.toGeoJSON = function () {                                                                          // 10660
	var holes = !L.Polyline._flat(this._latlngs),                                                                         // 10661
	    multi = holes && !L.Polyline._flat(this._latlngs[0]);                                                             // 10662
                                                                                                                       // 10663
	var coords = L.GeoJSON.latLngsToCoords(this._latlngs, multi ? 2 : holes ? 1 : 0, true);                               // 10664
                                                                                                                       // 10665
	if (!holes) {                                                                                                         // 10666
		coords = [coords];                                                                                                   // 10667
	}                                                                                                                     // 10668
                                                                                                                       // 10669
	return L.GeoJSON.getFeature(this, {                                                                                   // 10670
		type: (multi ? 'Multi' : '') + 'Polygon',                                                                            // 10671
		coordinates: coords                                                                                                  // 10672
	});                                                                                                                   // 10673
};                                                                                                                     // 10674
                                                                                                                       // 10675
                                                                                                                       // 10676
// @namespace LayerGroup                                                                                               // 10677
L.LayerGroup.include({                                                                                                 // 10678
	toMultiPoint: function () {                                                                                           // 10679
		var coords = [];                                                                                                     // 10680
                                                                                                                       // 10681
		this.eachLayer(function (layer) {                                                                                    // 10682
			coords.push(layer.toGeoJSON().geometry.coordinates);                                                                // 10683
		});                                                                                                                  // 10684
                                                                                                                       // 10685
		return L.GeoJSON.getFeature(this, {                                                                                  // 10686
			type: 'MultiPoint',                                                                                                 // 10687
			coordinates: coords                                                                                                 // 10688
		});                                                                                                                  // 10689
	},                                                                                                                    // 10690
                                                                                                                       // 10691
	// @method toGeoJSON(): Object                                                                                        // 10692
	// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the layer group (as a GeoJSON `GeometryCollection`).
	toGeoJSON: function () {                                                                                              // 10694
                                                                                                                       // 10695
		var type = this.feature && this.feature.geometry && this.feature.geometry.type;                                      // 10696
                                                                                                                       // 10697
		if (type === 'MultiPoint') {                                                                                         // 10698
			return this.toMultiPoint();                                                                                         // 10699
		}                                                                                                                    // 10700
                                                                                                                       // 10701
		var isGeometryCollection = type === 'GeometryCollection',                                                            // 10702
		    jsons = [];                                                                                                      // 10703
                                                                                                                       // 10704
		this.eachLayer(function (layer) {                                                                                    // 10705
			if (layer.toGeoJSON) {                                                                                              // 10706
				var json = layer.toGeoJSON();                                                                                      // 10707
				jsons.push(isGeometryCollection ? json.geometry : L.GeoJSON.asFeature(json));                                      // 10708
			}                                                                                                                   // 10709
		});                                                                                                                  // 10710
                                                                                                                       // 10711
		if (isGeometryCollection) {                                                                                          // 10712
			return L.GeoJSON.getFeature(this, {                                                                                 // 10713
				geometries: jsons,                                                                                                 // 10714
				type: 'GeometryCollection'                                                                                         // 10715
			});                                                                                                                 // 10716
		}                                                                                                                    // 10717
                                                                                                                       // 10718
		return {                                                                                                             // 10719
			type: 'FeatureCollection',                                                                                          // 10720
			features: jsons                                                                                                     // 10721
		};                                                                                                                   // 10722
	}                                                                                                                     // 10723
});                                                                                                                    // 10724
                                                                                                                       // 10725
// @namespace GeoJSON                                                                                                  // 10726
// @factory L.geoJSON(geojson?: Object, options?: GeoJSON options)                                                     // 10727
// Creates a GeoJSON layer. Optionally accepts an object in                                                            // 10728
// [GeoJSON format](http://geojson.org/geojson-spec.html) to display on the map                                        // 10729
// (you can alternatively add it later with `addData` method) and an `options` object.                                 // 10730
L.geoJSON = function (geojson, options) {                                                                              // 10731
	return new L.GeoJSON(geojson, options);                                                                               // 10732
};                                                                                                                     // 10733
// Backward compatibility.                                                                                             // 10734
L.geoJson = L.geoJSON;                                                                                                 // 10735
                                                                                                                       // 10736
                                                                                                                       // 10737
                                                                                                                       // 10738
/*                                                                                                                     // 10739
 * @class Draggable                                                                                                    // 10740
 * @aka L.Draggable                                                                                                    // 10741
 * @inherits Evented                                                                                                   // 10742
 *                                                                                                                     // 10743
 * A class for making DOM elements draggable (including touch support).                                                // 10744
 * Used internally for map and marker dragging. Only works for elements                                                // 10745
 * that were positioned with [`L.DomUtil.setPosition`](#domutil-setposition).                                          // 10746
 *                                                                                                                     // 10747
 * @example                                                                                                            // 10748
 * ```js                                                                                                               // 10749
 * var draggable = new L.Draggable(elementToDrag);                                                                     // 10750
 * draggable.enable();                                                                                                 // 10751
 * ```                                                                                                                 // 10752
 */                                                                                                                    // 10753
                                                                                                                       // 10754
L.Draggable = L.Evented.extend({                                                                                       // 10755
                                                                                                                       // 10756
	options: {                                                                                                            // 10757
		// @option clickTolerance: Number = 3                                                                                // 10758
		// The max number of pixels a user can shift the mouse pointer during a click                                        // 10759
		// for it to be considered a valid click (as opposed to a mouse drag).                                               // 10760
		clickTolerance: 3                                                                                                    // 10761
	},                                                                                                                    // 10762
                                                                                                                       // 10763
	statics: {                                                                                                            // 10764
		START: L.Browser.touch ? ['touchstart', 'mousedown'] : ['mousedown'],                                                // 10765
		END: {                                                                                                               // 10766
			mousedown: 'mouseup',                                                                                               // 10767
			touchstart: 'touchend',                                                                                             // 10768
			pointerdown: 'touchend',                                                                                            // 10769
			MSPointerDown: 'touchend'                                                                                           // 10770
		},                                                                                                                   // 10771
		MOVE: {                                                                                                              // 10772
			mousedown: 'mousemove',                                                                                             // 10773
			touchstart: 'touchmove',                                                                                            // 10774
			pointerdown: 'touchmove',                                                                                           // 10775
			MSPointerDown: 'touchmove'                                                                                          // 10776
		}                                                                                                                    // 10777
	},                                                                                                                    // 10778
                                                                                                                       // 10779
	// @constructor L.Draggable(el: HTMLElement, dragHandle?: HTMLElement, preventOutline: Boolean)                       // 10780
	// Creates a `Draggable` object for moving `el` when you start dragging the `dragHandle` element (equals `el` itself by default).
	initialize: function (element, dragStartTarget, preventOutline) {                                                     // 10782
		this._element = element;                                                                                             // 10783
		this._dragStartTarget = dragStartTarget || element;                                                                  // 10784
		this._preventOutline = preventOutline;                                                                               // 10785
	},                                                                                                                    // 10786
                                                                                                                       // 10787
	// @method enable()                                                                                                   // 10788
	// Enables the dragging ability                                                                                       // 10789
	enable: function () {                                                                                                 // 10790
		if (this._enabled) { return; }                                                                                       // 10791
                                                                                                                       // 10792
		L.DomEvent.on(this._dragStartTarget, L.Draggable.START.join(' '), this._onDown, this);                               // 10793
                                                                                                                       // 10794
		this._enabled = true;                                                                                                // 10795
	},                                                                                                                    // 10796
                                                                                                                       // 10797
	// @method disable()                                                                                                  // 10798
	// Disables the dragging ability                                                                                      // 10799
	disable: function () {                                                                                                // 10800
		if (!this._enabled) { return; }                                                                                      // 10801
                                                                                                                       // 10802
		// If we're currently dragging this draggable,                                                                       // 10803
		// disabling it counts as first ending the drag.                                                                     // 10804
		if (L.Draggable._dragging === this) {                                                                                // 10805
			this.finishDrag();                                                                                                  // 10806
		}                                                                                                                    // 10807
                                                                                                                       // 10808
		L.DomEvent.off(this._dragStartTarget, L.Draggable.START.join(' '), this._onDown, this);                              // 10809
                                                                                                                       // 10810
		this._enabled = false;                                                                                               // 10811
		this._moved = false;                                                                                                 // 10812
	},                                                                                                                    // 10813
                                                                                                                       // 10814
	_onDown: function (e) {                                                                                               // 10815
		// Ignore simulated events, since we handle both touch and                                                           // 10816
		// mouse explicitly; otherwise we risk getting duplicates of                                                         // 10817
		// touch events, see #4315.                                                                                          // 10818
		// Also ignore the event if disabled; this happens in IE11                                                           // 10819
		// under some circumstances, see #3666.                                                                              // 10820
		if (e._simulated || !this._enabled) { return; }                                                                      // 10821
                                                                                                                       // 10822
		this._moved = false;                                                                                                 // 10823
                                                                                                                       // 10824
		if (L.DomUtil.hasClass(this._element, 'leaflet-zoom-anim')) { return; }                                              // 10825
                                                                                                                       // 10826
		if (L.Draggable._dragging || e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches)) { return; }          // 10827
		L.Draggable._dragging = this;  // Prevent dragging multiple objects at once.                                         // 10828
                                                                                                                       // 10829
		if (this._preventOutline) {                                                                                          // 10830
			L.DomUtil.preventOutline(this._element);                                                                            // 10831
		}                                                                                                                    // 10832
                                                                                                                       // 10833
		L.DomUtil.disableImageDrag();                                                                                        // 10834
		L.DomUtil.disableTextSelection();                                                                                    // 10835
                                                                                                                       // 10836
		if (this._moving) { return; }                                                                                        // 10837
                                                                                                                       // 10838
		// @event down: Event                                                                                                // 10839
		// Fired when a drag is about to start.                                                                              // 10840
		this.fire('down');                                                                                                   // 10841
                                                                                                                       // 10842
		var first = e.touches ? e.touches[0] : e;                                                                            // 10843
                                                                                                                       // 10844
		this._startPoint = new L.Point(first.clientX, first.clientY);                                                        // 10845
                                                                                                                       // 10846
		L.DomEvent                                                                                                           // 10847
			.on(document, L.Draggable.MOVE[e.type], this._onMove, this)                                                         // 10848
			.on(document, L.Draggable.END[e.type], this._onUp, this);                                                           // 10849
	},                                                                                                                    // 10850
                                                                                                                       // 10851
	_onMove: function (e) {                                                                                               // 10852
		// Ignore simulated events, since we handle both touch and                                                           // 10853
		// mouse explicitly; otherwise we risk getting duplicates of                                                         // 10854
		// touch events, see #4315.                                                                                          // 10855
		// Also ignore the event if disabled; this happens in IE11                                                           // 10856
		// under some circumstances, see #3666.                                                                              // 10857
		if (e._simulated || !this._enabled) { return; }                                                                      // 10858
                                                                                                                       // 10859
		if (e.touches && e.touches.length > 1) {                                                                             // 10860
			this._moved = true;                                                                                                 // 10861
			return;                                                                                                             // 10862
		}                                                                                                                    // 10863
                                                                                                                       // 10864
		var first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),                                                // 10865
		    newPoint = new L.Point(first.clientX, first.clientY),                                                            // 10866
		    offset = newPoint.subtract(this._startPoint);                                                                    // 10867
                                                                                                                       // 10868
		if (!offset.x && !offset.y) { return; }                                                                              // 10869
		if (Math.abs(offset.x) + Math.abs(offset.y) < this.options.clickTolerance) { return; }                               // 10870
                                                                                                                       // 10871
		L.DomEvent.preventDefault(e);                                                                                        // 10872
                                                                                                                       // 10873
		if (!this._moved) {                                                                                                  // 10874
			// @event dragstart: Event                                                                                          // 10875
			// Fired when a drag starts                                                                                         // 10876
			this.fire('dragstart');                                                                                             // 10877
                                                                                                                       // 10878
			this._moved = true;                                                                                                 // 10879
			this._startPos = L.DomUtil.getPosition(this._element).subtract(offset);                                             // 10880
                                                                                                                       // 10881
			L.DomUtil.addClass(document.body, 'leaflet-dragging');                                                              // 10882
                                                                                                                       // 10883
			this._lastTarget = e.target || e.srcElement;                                                                        // 10884
			// IE and Edge do not give the <use> element, so fetch it                                                           // 10885
			// if necessary                                                                                                     // 10886
			if ((window.SVGElementInstance) && (this._lastTarget instanceof SVGElementInstance)) {                              // 10887
				this._lastTarget = this._lastTarget.correspondingUseElement;                                                       // 10888
			}                                                                                                                   // 10889
			L.DomUtil.addClass(this._lastTarget, 'leaflet-drag-target');                                                        // 10890
		}                                                                                                                    // 10891
                                                                                                                       // 10892
		this._newPos = this._startPos.add(offset);                                                                           // 10893
		this._moving = true;                                                                                                 // 10894
                                                                                                                       // 10895
		L.Util.cancelAnimFrame(this._animRequest);                                                                           // 10896
		this._lastEvent = e;                                                                                                 // 10897
		this._animRequest = L.Util.requestAnimFrame(this._updatePosition, this, true);                                       // 10898
	},                                                                                                                    // 10899
                                                                                                                       // 10900
	_updatePosition: function () {                                                                                        // 10901
		var e = {originalEvent: this._lastEvent};                                                                            // 10902
                                                                                                                       // 10903
		// @event predrag: Event                                                                                             // 10904
		// Fired continuously during dragging *before* each corresponding                                                    // 10905
		// update of the element's position.                                                                                 // 10906
		this.fire('predrag', e);                                                                                             // 10907
		L.DomUtil.setPosition(this._element, this._newPos);                                                                  // 10908
                                                                                                                       // 10909
		// @event drag: Event                                                                                                // 10910
		// Fired continuously during dragging.                                                                               // 10911
		this.fire('drag', e);                                                                                                // 10912
	},                                                                                                                    // 10913
                                                                                                                       // 10914
	_onUp: function (e) {                                                                                                 // 10915
		// Ignore simulated events, since we handle both touch and                                                           // 10916
		// mouse explicitly; otherwise we risk getting duplicates of                                                         // 10917
		// touch events, see #4315.                                                                                          // 10918
		// Also ignore the event if disabled; this happens in IE11                                                           // 10919
		// under some circumstances, see #3666.                                                                              // 10920
		if (e._simulated || !this._enabled) { return; }                                                                      // 10921
		this.finishDrag();                                                                                                   // 10922
	},                                                                                                                    // 10923
                                                                                                                       // 10924
	finishDrag: function () {                                                                                             // 10925
		L.DomUtil.removeClass(document.body, 'leaflet-dragging');                                                            // 10926
                                                                                                                       // 10927
		if (this._lastTarget) {                                                                                              // 10928
			L.DomUtil.removeClass(this._lastTarget, 'leaflet-drag-target');                                                     // 10929
			this._lastTarget = null;                                                                                            // 10930
		}                                                                                                                    // 10931
                                                                                                                       // 10932
		for (var i in L.Draggable.MOVE) {                                                                                    // 10933
			L.DomEvent                                                                                                          // 10934
				.off(document, L.Draggable.MOVE[i], this._onMove, this)                                                            // 10935
				.off(document, L.Draggable.END[i], this._onUp, this);                                                              // 10936
		}                                                                                                                    // 10937
                                                                                                                       // 10938
		L.DomUtil.enableImageDrag();                                                                                         // 10939
		L.DomUtil.enableTextSelection();                                                                                     // 10940
                                                                                                                       // 10941
		if (this._moved && this._moving) {                                                                                   // 10942
			// ensure drag is not fired after dragend                                                                           // 10943
			L.Util.cancelAnimFrame(this._animRequest);                                                                          // 10944
                                                                                                                       // 10945
			// @event dragend: DragEndEvent                                                                                     // 10946
			// Fired when the drag ends.                                                                                        // 10947
			this.fire('dragend', {                                                                                              // 10948
				distance: this._newPos.distanceTo(this._startPos)                                                                  // 10949
			});                                                                                                                 // 10950
		}                                                                                                                    // 10951
                                                                                                                       // 10952
		this._moving = false;                                                                                                // 10953
		L.Draggable._dragging = false;                                                                                       // 10954
	}                                                                                                                     // 10955
                                                                                                                       // 10956
});                                                                                                                    // 10957
                                                                                                                       // 10958
                                                                                                                       // 10959
                                                                                                                       // 10960
/*                                                                                                                     // 10961
	L.Handler is a base class for handler classes that are used internally to inject                                      // 10962
	interaction features like dragging to classes like Map and Marker.                                                    // 10963
*/                                                                                                                     // 10964
                                                                                                                       // 10965
// @class Handler                                                                                                      // 10966
// @aka L.Handler                                                                                                      // 10967
// Abstract class for map interaction handlers                                                                         // 10968
                                                                                                                       // 10969
L.Handler = L.Class.extend({                                                                                           // 10970
	initialize: function (map) {                                                                                          // 10971
		this._map = map;                                                                                                     // 10972
	},                                                                                                                    // 10973
                                                                                                                       // 10974
	// @method enable(): this                                                                                             // 10975
	// Enables the handler                                                                                                // 10976
	enable: function () {                                                                                                 // 10977
		if (this._enabled) { return this; }                                                                                  // 10978
                                                                                                                       // 10979
		this._enabled = true;                                                                                                // 10980
		this.addHooks();                                                                                                     // 10981
		return this;                                                                                                         // 10982
	},                                                                                                                    // 10983
                                                                                                                       // 10984
	// @method disable(): this                                                                                            // 10985
	// Disables the handler                                                                                               // 10986
	disable: function () {                                                                                                // 10987
		if (!this._enabled) { return this; }                                                                                 // 10988
                                                                                                                       // 10989
		this._enabled = false;                                                                                               // 10990
		this.removeHooks();                                                                                                  // 10991
		return this;                                                                                                         // 10992
	},                                                                                                                    // 10993
                                                                                                                       // 10994
	// @method enabled(): Boolean                                                                                         // 10995
	// Returns `true` if the handler is enabled                                                                           // 10996
	enabled: function () {                                                                                                // 10997
		return !!this._enabled;                                                                                              // 10998
	}                                                                                                                     // 10999
                                                                                                                       // 11000
	// @section Extension methods                                                                                         // 11001
	// Classes inheriting from `Handler` must implement the two following methods:                                        // 11002
	// @method addHooks()                                                                                                 // 11003
	// Called when the handler is enabled, should add event hooks.                                                        // 11004
	// @method removeHooks()                                                                                              // 11005
	// Called when the handler is disabled, should remove the event hooks added previously.                               // 11006
});                                                                                                                    // 11007
                                                                                                                       // 11008
                                                                                                                       // 11009
                                                                                                                       // 11010
/*                                                                                                                     // 11011
 * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.                     // 11012
 */                                                                                                                    // 11013
                                                                                                                       // 11014
// @namespace Map                                                                                                      // 11015
// @section Interaction Options                                                                                        // 11016
L.Map.mergeOptions({                                                                                                   // 11017
	// @option dragging: Boolean = true                                                                                   // 11018
	// Whether the map be draggable with mouse/touch or not.                                                              // 11019
	dragging: true,                                                                                                       // 11020
                                                                                                                       // 11021
	// @section Panning Inertia Options                                                                                   // 11022
	// @option inertia: Boolean = *                                                                                       // 11023
	// If enabled, panning of the map will have an inertia effect where                                                   // 11024
	// the map builds momentum while dragging and continues moving in                                                     // 11025
	// the same direction for some time. Feels especially nice on touch                                                   // 11026
	// devices. Enabled by default unless running on old Android devices.                                                 // 11027
	inertia: !L.Browser.android23,                                                                                        // 11028
                                                                                                                       // 11029
	// @option inertiaDeceleration: Number = 3000                                                                         // 11030
	// The rate with which the inertial movement slows down, in pixels/second².                                           // 11031
	inertiaDeceleration: 3400, // px/s^2                                                                                  // 11032
                                                                                                                       // 11033
	// @option inertiaMaxSpeed: Number = Infinity                                                                         // 11034
	// Max speed of the inertial movement, in pixels/second.                                                              // 11035
	inertiaMaxSpeed: Infinity, // px/s                                                                                    // 11036
                                                                                                                       // 11037
	// @option easeLinearity: Number = 0.2                                                                                // 11038
	easeLinearity: 0.2,                                                                                                   // 11039
                                                                                                                       // 11040
	// TODO refactor, move to CRS                                                                                         // 11041
	// @option worldCopyJump: Boolean = false                                                                             // 11042
	// With this option enabled, the map tracks when you pan to another "copy"                                            // 11043
	// of the world and seamlessly jumps to the original one so that all overlays                                         // 11044
	// like markers and vector layers are still visible.                                                                  // 11045
	worldCopyJump: false,                                                                                                 // 11046
                                                                                                                       // 11047
	// @option maxBoundsViscosity: Number = 0.0                                                                           // 11048
	// If `maxBounds` is set, this option will control how solid the bounds                                               // 11049
	// are when dragging the map around. The default value of `0.0` allows the                                            // 11050
	// user to drag outside the bounds at normal speed, higher values will                                                // 11051
	// slow down map dragging outside bounds, and `1.0` makes the bounds fully                                            // 11052
	// solid, preventing the user from dragging outside the bounds.                                                       // 11053
	maxBoundsViscosity: 0.0                                                                                               // 11054
});                                                                                                                    // 11055
                                                                                                                       // 11056
L.Map.Drag = L.Handler.extend({                                                                                        // 11057
	addHooks: function () {                                                                                               // 11058
		if (!this._draggable) {                                                                                              // 11059
			var map = this._map;                                                                                                // 11060
                                                                                                                       // 11061
			this._draggable = new L.Draggable(map._mapPane, map._container);                                                    // 11062
                                                                                                                       // 11063
			this._draggable.on({                                                                                                // 11064
				down: this._onDown,                                                                                                // 11065
				dragstart: this._onDragStart,                                                                                      // 11066
				drag: this._onDrag,                                                                                                // 11067
				dragend: this._onDragEnd                                                                                           // 11068
			}, this);                                                                                                           // 11069
                                                                                                                       // 11070
			this._draggable.on('predrag', this._onPreDragLimit, this);                                                          // 11071
			if (map.options.worldCopyJump) {                                                                                    // 11072
				this._draggable.on('predrag', this._onPreDragWrap, this);                                                          // 11073
				map.on('zoomend', this._onZoomEnd, this);                                                                          // 11074
                                                                                                                       // 11075
				map.whenReady(this._onZoomEnd, this);                                                                              // 11076
			}                                                                                                                   // 11077
		}                                                                                                                    // 11078
		L.DomUtil.addClass(this._map._container, 'leaflet-grab leaflet-touch-drag');                                         // 11079
		this._draggable.enable();                                                                                            // 11080
		this._positions = [];                                                                                                // 11081
		this._times = [];                                                                                                    // 11082
	},                                                                                                                    // 11083
                                                                                                                       // 11084
	removeHooks: function () {                                                                                            // 11085
		L.DomUtil.removeClass(this._map._container, 'leaflet-grab');                                                         // 11086
		L.DomUtil.removeClass(this._map._container, 'leaflet-touch-drag');                                                   // 11087
		this._draggable.disable();                                                                                           // 11088
	},                                                                                                                    // 11089
                                                                                                                       // 11090
	moved: function () {                                                                                                  // 11091
		return this._draggable && this._draggable._moved;                                                                    // 11092
	},                                                                                                                    // 11093
                                                                                                                       // 11094
	moving: function () {                                                                                                 // 11095
		return this._draggable && this._draggable._moving;                                                                   // 11096
	},                                                                                                                    // 11097
                                                                                                                       // 11098
	_onDown: function () {                                                                                                // 11099
		this._map._stop();                                                                                                   // 11100
	},                                                                                                                    // 11101
                                                                                                                       // 11102
	_onDragStart: function () {                                                                                           // 11103
		var map = this._map;                                                                                                 // 11104
                                                                                                                       // 11105
		if (this._map.options.maxBounds && this._map.options.maxBoundsViscosity) {                                           // 11106
			var bounds = L.latLngBounds(this._map.options.maxBounds);                                                           // 11107
                                                                                                                       // 11108
			this._offsetLimit = L.bounds(                                                                                       // 11109
				this._map.latLngToContainerPoint(bounds.getNorthWest()).multiplyBy(-1),                                            // 11110
				this._map.latLngToContainerPoint(bounds.getSouthEast()).multiplyBy(-1)                                             // 11111
					.add(this._map.getSize()));                                                                                       // 11112
                                                                                                                       // 11113
			this._viscosity = Math.min(1.0, Math.max(0.0, this._map.options.maxBoundsViscosity));                               // 11114
		} else {                                                                                                             // 11115
			this._offsetLimit = null;                                                                                           // 11116
		}                                                                                                                    // 11117
                                                                                                                       // 11118
		map                                                                                                                  // 11119
		    .fire('movestart')                                                                                               // 11120
		    .fire('dragstart');                                                                                              // 11121
                                                                                                                       // 11122
		if (map.options.inertia) {                                                                                           // 11123
			this._positions = [];                                                                                               // 11124
			this._times = [];                                                                                                   // 11125
		}                                                                                                                    // 11126
	},                                                                                                                    // 11127
                                                                                                                       // 11128
	_onDrag: function (e) {                                                                                               // 11129
		if (this._map.options.inertia) {                                                                                     // 11130
			var time = this._lastTime = +new Date(),                                                                            // 11131
			    pos = this._lastPos = this._draggable._absPos || this._draggable._newPos;                                       // 11132
                                                                                                                       // 11133
			this._positions.push(pos);                                                                                          // 11134
			this._times.push(time);                                                                                             // 11135
                                                                                                                       // 11136
			if (time - this._times[0] > 50) {                                                                                   // 11137
				this._positions.shift();                                                                                           // 11138
				this._times.shift();                                                                                               // 11139
			}                                                                                                                   // 11140
		}                                                                                                                    // 11141
                                                                                                                       // 11142
		this._map                                                                                                            // 11143
		    .fire('move', e)                                                                                                 // 11144
		    .fire('drag', e);                                                                                                // 11145
	},                                                                                                                    // 11146
                                                                                                                       // 11147
	_onZoomEnd: function () {                                                                                             // 11148
		var pxCenter = this._map.getSize().divideBy(2),                                                                      // 11149
		    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);                                                            // 11150
                                                                                                                       // 11151
		this._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;                                                       // 11152
		this._worldWidth = this._map.getPixelWorldBounds().getSize().x;                                                      // 11153
	},                                                                                                                    // 11154
                                                                                                                       // 11155
	_viscousLimit: function (value, threshold) {                                                                          // 11156
		return value - (value - threshold) * this._viscosity;                                                                // 11157
	},                                                                                                                    // 11158
                                                                                                                       // 11159
	_onPreDragLimit: function () {                                                                                        // 11160
		if (!this._viscosity || !this._offsetLimit) { return; }                                                              // 11161
                                                                                                                       // 11162
		var offset = this._draggable._newPos.subtract(this._draggable._startPos);                                            // 11163
                                                                                                                       // 11164
		var limit = this._offsetLimit;                                                                                       // 11165
		if (offset.x < limit.min.x) { offset.x = this._viscousLimit(offset.x, limit.min.x); }                                // 11166
		if (offset.y < limit.min.y) { offset.y = this._viscousLimit(offset.y, limit.min.y); }                                // 11167
		if (offset.x > limit.max.x) { offset.x = this._viscousLimit(offset.x, limit.max.x); }                                // 11168
		if (offset.y > limit.max.y) { offset.y = this._viscousLimit(offset.y, limit.max.y); }                                // 11169
                                                                                                                       // 11170
		this._draggable._newPos = this._draggable._startPos.add(offset);                                                     // 11171
	},                                                                                                                    // 11172
                                                                                                                       // 11173
	_onPreDragWrap: function () {                                                                                         // 11174
		// TODO refactor to be able to adjust map pane position after zoom                                                   // 11175
		var worldWidth = this._worldWidth,                                                                                   // 11176
		    halfWidth = Math.round(worldWidth / 2),                                                                          // 11177
		    dx = this._initialWorldOffset,                                                                                   // 11178
		    x = this._draggable._newPos.x,                                                                                   // 11179
		    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,                                                      // 11180
		    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,                                                      // 11181
		    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;                                              // 11182
                                                                                                                       // 11183
		this._draggable._absPos = this._draggable._newPos.clone();                                                           // 11184
		this._draggable._newPos.x = newX;                                                                                    // 11185
	},                                                                                                                    // 11186
                                                                                                                       // 11187
	_onDragEnd: function (e) {                                                                                            // 11188
		var map = this._map,                                                                                                 // 11189
		    options = map.options,                                                                                           // 11190
                                                                                                                       // 11191
		    noInertia = !options.inertia || this._times.length < 2;                                                          // 11192
                                                                                                                       // 11193
		map.fire('dragend', e);                                                                                              // 11194
                                                                                                                       // 11195
		if (noInertia) {                                                                                                     // 11196
			map.fire('moveend');                                                                                                // 11197
                                                                                                                       // 11198
		} else {                                                                                                             // 11199
                                                                                                                       // 11200
			var direction = this._lastPos.subtract(this._positions[0]),                                                         // 11201
			    duration = (this._lastTime - this._times[0]) / 1000,                                                            // 11202
			    ease = options.easeLinearity,                                                                                   // 11203
                                                                                                                       // 11204
			    speedVector = direction.multiplyBy(ease / duration),                                                            // 11205
			    speed = speedVector.distanceTo([0, 0]),                                                                         // 11206
                                                                                                                       // 11207
			    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),                                                        // 11208
			    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),                                              // 11209
                                                                                                                       // 11210
			    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),                                     // 11211
			    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();                                      // 11212
                                                                                                                       // 11213
			if (!offset.x && !offset.y) {                                                                                       // 11214
				map.fire('moveend');                                                                                               // 11215
                                                                                                                       // 11216
			} else {                                                                                                            // 11217
				offset = map._limitOffset(offset, map.options.maxBounds);                                                          // 11218
                                                                                                                       // 11219
				L.Util.requestAnimFrame(function () {                                                                              // 11220
					map.panBy(offset, {                                                                                               // 11221
						duration: decelerationDuration,                                                                                  // 11222
						easeLinearity: ease,                                                                                             // 11223
						noMoveStart: true,                                                                                               // 11224
						animate: true                                                                                                    // 11225
					});                                                                                                               // 11226
				});                                                                                                                // 11227
			}                                                                                                                   // 11228
		}                                                                                                                    // 11229
	}                                                                                                                     // 11230
});                                                                                                                    // 11231
                                                                                                                       // 11232
// @section Handlers                                                                                                   // 11233
// @property dragging: Handler                                                                                         // 11234
// Map dragging handler (by both mouse and touch).                                                                     // 11235
L.Map.addInitHook('addHandler', 'dragging', L.Map.Drag);                                                               // 11236
                                                                                                                       // 11237
                                                                                                                       // 11238
                                                                                                                       // 11239
/*                                                                                                                     // 11240
 * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.                       // 11241
 */                                                                                                                    // 11242
                                                                                                                       // 11243
// @namespace Map                                                                                                      // 11244
// @section Interaction Options                                                                                        // 11245
                                                                                                                       // 11246
L.Map.mergeOptions({                                                                                                   // 11247
	// @option doubleClickZoom: Boolean|String = true                                                                     // 11248
	// Whether the map can be zoomed in by double clicking on it and                                                      // 11249
	// zoomed out by double clicking while holding shift. If passed                                                       // 11250
	// `'center'`, double-click zoom will zoom to the center of the                                                       // 11251
	//  view regardless of where the mouse was.                                                                           // 11252
	doubleClickZoom: true                                                                                                 // 11253
});                                                                                                                    // 11254
                                                                                                                       // 11255
L.Map.DoubleClickZoom = L.Handler.extend({                                                                             // 11256
	addHooks: function () {                                                                                               // 11257
		this._map.on('dblclick', this._onDoubleClick, this);                                                                 // 11258
	},                                                                                                                    // 11259
                                                                                                                       // 11260
	removeHooks: function () {                                                                                            // 11261
		this._map.off('dblclick', this._onDoubleClick, this);                                                                // 11262
	},                                                                                                                    // 11263
                                                                                                                       // 11264
	_onDoubleClick: function (e) {                                                                                        // 11265
		var map = this._map,                                                                                                 // 11266
		    oldZoom = map.getZoom(),                                                                                         // 11267
		    delta = map.options.zoomDelta,                                                                                   // 11268
		    zoom = e.originalEvent.shiftKey ? oldZoom - delta : oldZoom + delta;                                             // 11269
                                                                                                                       // 11270
		if (map.options.doubleClickZoom === 'center') {                                                                      // 11271
			map.setZoom(zoom);                                                                                                  // 11272
		} else {                                                                                                             // 11273
			map.setZoomAround(e.containerPoint, zoom);                                                                          // 11274
		}                                                                                                                    // 11275
	}                                                                                                                     // 11276
});                                                                                                                    // 11277
                                                                                                                       // 11278
// @section Handlers                                                                                                   // 11279
//                                                                                                                     // 11280
// Map properties include interaction handlers that allow you to control                                               // 11281
// interaction behavior in runtime, enabling or disabling certain features such                                        // 11282
// as dragging or touch zoom (see `Handler` methods). For example:                                                     // 11283
//                                                                                                                     // 11284
// ```js                                                                                                               // 11285
// map.doubleClickZoom.disable();                                                                                      // 11286
// ```                                                                                                                 // 11287
//                                                                                                                     // 11288
// @property doubleClickZoom: Handler                                                                                  // 11289
// Double click zoom handler.                                                                                          // 11290
L.Map.addInitHook('addHandler', 'doubleClickZoom', L.Map.DoubleClickZoom);                                             // 11291
                                                                                                                       // 11292
                                                                                                                       // 11293
                                                                                                                       // 11294
/*                                                                                                                     // 11295
 * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.                            // 11296
 */                                                                                                                    // 11297
                                                                                                                       // 11298
// @namespace Map                                                                                                      // 11299
// @section Interaction Options                                                                                        // 11300
L.Map.mergeOptions({                                                                                                   // 11301
	// @section Mousewheel options                                                                                        // 11302
	// @option scrollWheelZoom: Boolean|String = true                                                                     // 11303
	// Whether the map can be zoomed by using the mouse wheel. If passed `'center'`,                                      // 11304
	// it will zoom to the center of the view regardless of where the mouse was.                                          // 11305
	scrollWheelZoom: true,                                                                                                // 11306
                                                                                                                       // 11307
	// @option wheelDebounceTime: Number = 40                                                                             // 11308
	// Limits the rate at which a wheel can fire (in milliseconds). By default                                            // 11309
	// user can't zoom via wheel more often than once per 40 ms.                                                          // 11310
	wheelDebounceTime: 40,                                                                                                // 11311
                                                                                                                       // 11312
	// @option wheelPxPerZoomLevel: Number = 60                                                                           // 11313
	// How many scroll pixels (as reported by [L.DomEvent.getWheelDelta](#domevent-getwheeldelta))                        // 11314
	// mean a change of one full zoom level. Smaller values will make wheel-zooming                                       // 11315
	// faster (and vice versa).                                                                                           // 11316
	wheelPxPerZoomLevel: 60                                                                                               // 11317
});                                                                                                                    // 11318
                                                                                                                       // 11319
L.Map.ScrollWheelZoom = L.Handler.extend({                                                                             // 11320
	addHooks: function () {                                                                                               // 11321
		L.DomEvent.on(this._map._container, 'mousewheel', this._onWheelScroll, this);                                        // 11322
                                                                                                                       // 11323
		this._delta = 0;                                                                                                     // 11324
	},                                                                                                                    // 11325
                                                                                                                       // 11326
	removeHooks: function () {                                                                                            // 11327
		L.DomEvent.off(this._map._container, 'mousewheel', this._onWheelScroll, this);                                       // 11328
	},                                                                                                                    // 11329
                                                                                                                       // 11330
	_onWheelScroll: function (e) {                                                                                        // 11331
		var delta = L.DomEvent.getWheelDelta(e);                                                                             // 11332
                                                                                                                       // 11333
		var debounce = this._map.options.wheelDebounceTime;                                                                  // 11334
                                                                                                                       // 11335
		this._delta += delta;                                                                                                // 11336
		this._lastMousePos = this._map.mouseEventToContainerPoint(e);                                                        // 11337
                                                                                                                       // 11338
		if (!this._startTime) {                                                                                              // 11339
			this._startTime = +new Date();                                                                                      // 11340
		}                                                                                                                    // 11341
                                                                                                                       // 11342
		var left = Math.max(debounce - (+new Date() - this._startTime), 0);                                                  // 11343
                                                                                                                       // 11344
		clearTimeout(this._timer);                                                                                           // 11345
		this._timer = setTimeout(L.bind(this._performZoom, this), left);                                                     // 11346
                                                                                                                       // 11347
		L.DomEvent.stop(e);                                                                                                  // 11348
	},                                                                                                                    // 11349
                                                                                                                       // 11350
	_performZoom: function () {                                                                                           // 11351
		var map = this._map,                                                                                                 // 11352
		    zoom = map.getZoom(),                                                                                            // 11353
		    snap = this._map.options.zoomSnap || 0;                                                                          // 11354
                                                                                                                       // 11355
		map._stop(); // stop panning and fly animations if any                                                               // 11356
                                                                                                                       // 11357
		// map the delta with a sigmoid function to -4..4 range leaning on -1..1                                             // 11358
		var d2 = this._delta / (this._map.options.wheelPxPerZoomLevel * 4),                                                  // 11359
		    d3 = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(d2)))) / Math.LN2,                                                 // 11360
		    d4 = snap ? Math.ceil(d3 / snap) * snap : d3,                                                                    // 11361
		    delta = map._limitZoom(zoom + (this._delta > 0 ? d4 : -d4)) - zoom;                                              // 11362
                                                                                                                       // 11363
		this._delta = 0;                                                                                                     // 11364
		this._startTime = null;                                                                                              // 11365
                                                                                                                       // 11366
		if (!delta) { return; }                                                                                              // 11367
                                                                                                                       // 11368
		if (map.options.scrollWheelZoom === 'center') {                                                                      // 11369
			map.setZoom(zoom + delta);                                                                                          // 11370
		} else {                                                                                                             // 11371
			map.setZoomAround(this._lastMousePos, zoom + delta);                                                                // 11372
		}                                                                                                                    // 11373
	}                                                                                                                     // 11374
});                                                                                                                    // 11375
                                                                                                                       // 11376
// @section Handlers                                                                                                   // 11377
// @property scrollWheelZoom: Handler                                                                                  // 11378
// Scroll wheel zoom handler.                                                                                          // 11379
L.Map.addInitHook('addHandler', 'scrollWheelZoom', L.Map.ScrollWheelZoom);                                             // 11380
                                                                                                                       // 11381
                                                                                                                       // 11382
                                                                                                                       // 11383
/*                                                                                                                     // 11384
 * Extends the event handling code with double tap support for mobile browsers.                                        // 11385
 */                                                                                                                    // 11386
                                                                                                                       // 11387
L.extend(L.DomEvent, {                                                                                                 // 11388
                                                                                                                       // 11389
	_touchstart: L.Browser.msPointer ? 'MSPointerDown' : L.Browser.pointer ? 'pointerdown' : 'touchstart',                // 11390
	_touchend: L.Browser.msPointer ? 'MSPointerUp' : L.Browser.pointer ? 'pointerup' : 'touchend',                        // 11391
                                                                                                                       // 11392
	// inspired by Zepto touch code by Thomas Fuchs                                                                       // 11393
	addDoubleTapListener: function (obj, handler, id) {                                                                   // 11394
		var last, touch,                                                                                                     // 11395
		    doubleTap = false,                                                                                               // 11396
		    delay = 250;                                                                                                     // 11397
                                                                                                                       // 11398
		function onTouchStart(e) {                                                                                           // 11399
			var count;                                                                                                          // 11400
                                                                                                                       // 11401
			if (L.Browser.pointer) {                                                                                            // 11402
				if ((!L.Browser.edge) || e.pointerType === 'mouse') { return; }                                                    // 11403
				count = L.DomEvent._pointersCount;                                                                                 // 11404
			} else {                                                                                                            // 11405
				count = e.touches.length;                                                                                          // 11406
			}                                                                                                                   // 11407
                                                                                                                       // 11408
			if (count > 1) { return; }                                                                                          // 11409
                                                                                                                       // 11410
			var now = Date.now(),                                                                                               // 11411
			    delta = now - (last || now);                                                                                    // 11412
                                                                                                                       // 11413
			touch = e.touches ? e.touches[0] : e;                                                                               // 11414
			doubleTap = (delta > 0 && delta <= delay);                                                                          // 11415
			last = now;                                                                                                         // 11416
		}                                                                                                                    // 11417
                                                                                                                       // 11418
		function onTouchEnd(e) {                                                                                             // 11419
			if (doubleTap && !touch.cancelBubble) {                                                                             // 11420
				if (L.Browser.pointer) {                                                                                           // 11421
					if ((!L.Browser.edge) || e.pointerType === 'mouse') { return; }                                                   // 11422
                                                                                                                       // 11423
					// work around .type being readonly with MSPointer* events                                                        // 11424
					var newTouch = {},                                                                                                // 11425
					    prop, i;                                                                                                      // 11426
                                                                                                                       // 11427
					for (i in touch) {                                                                                                // 11428
						prop = touch[i];                                                                                                 // 11429
						newTouch[i] = prop && prop.bind ? prop.bind(touch) : prop;                                                       // 11430
					}                                                                                                                 // 11431
					touch = newTouch;                                                                                                 // 11432
				}                                                                                                                  // 11433
				touch.type = 'dblclick';                                                                                           // 11434
				handler(touch);                                                                                                    // 11435
				last = null;                                                                                                       // 11436
			}                                                                                                                   // 11437
		}                                                                                                                    // 11438
                                                                                                                       // 11439
		var pre = '_leaflet_',                                                                                               // 11440
		    touchstart = this._touchstart,                                                                                   // 11441
		    touchend = this._touchend;                                                                                       // 11442
                                                                                                                       // 11443
		obj[pre + touchstart + id] = onTouchStart;                                                                           // 11444
		obj[pre + touchend + id] = onTouchEnd;                                                                               // 11445
		obj[pre + 'dblclick' + id] = handler;                                                                                // 11446
                                                                                                                       // 11447
		obj.addEventListener(touchstart, onTouchStart, false);                                                               // 11448
		obj.addEventListener(touchend, onTouchEnd, false);                                                                   // 11449
                                                                                                                       // 11450
		// On some platforms (notably, chrome<55 on win10 + touchscreen + mouse),                                            // 11451
		// the browser doesn't fire touchend/pointerup events but does fire                                                  // 11452
		// native dblclicks. See #4127.                                                                                      // 11453
		// Edge 14 also fires native dblclicks, but only for pointerType mouse, see #5180.                                   // 11454
		obj.addEventListener('dblclick', handler, false);                                                                    // 11455
                                                                                                                       // 11456
		return this;                                                                                                         // 11457
	},                                                                                                                    // 11458
                                                                                                                       // 11459
	removeDoubleTapListener: function (obj, id) {                                                                         // 11460
		var pre = '_leaflet_',                                                                                               // 11461
		    touchstart = obj[pre + this._touchstart + id],                                                                   // 11462
		    touchend = obj[pre + this._touchend + id],                                                                       // 11463
		    dblclick = obj[pre + 'dblclick' + id];                                                                           // 11464
                                                                                                                       // 11465
		obj.removeEventListener(this._touchstart, touchstart, false);                                                        // 11466
		obj.removeEventListener(this._touchend, touchend, false);                                                            // 11467
		if (!L.Browser.edge) {                                                                                               // 11468
			obj.removeEventListener('dblclick', dblclick, false);                                                               // 11469
		}                                                                                                                    // 11470
                                                                                                                       // 11471
		return this;                                                                                                         // 11472
	}                                                                                                                     // 11473
});                                                                                                                    // 11474
                                                                                                                       // 11475
                                                                                                                       // 11476
                                                                                                                       // 11477
/*                                                                                                                     // 11478
 * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.                        // 11479
 */                                                                                                                    // 11480
                                                                                                                       // 11481
L.extend(L.DomEvent, {                                                                                                 // 11482
                                                                                                                       // 11483
	POINTER_DOWN:   L.Browser.msPointer ? 'MSPointerDown'   : 'pointerdown',                                              // 11484
	POINTER_MOVE:   L.Browser.msPointer ? 'MSPointerMove'   : 'pointermove',                                              // 11485
	POINTER_UP:     L.Browser.msPointer ? 'MSPointerUp'     : 'pointerup',                                                // 11486
	POINTER_CANCEL: L.Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',                                            // 11487
	TAG_WHITE_LIST: ['INPUT', 'SELECT', 'OPTION'],                                                                        // 11488
                                                                                                                       // 11489
	_pointers: {},                                                                                                        // 11490
	_pointersCount: 0,                                                                                                    // 11491
                                                                                                                       // 11492
	// Provides a touch events wrapper for (ms)pointer events.                                                            // 11493
	// ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890                       // 11494
                                                                                                                       // 11495
	addPointerListener: function (obj, type, handler, id) {                                                               // 11496
                                                                                                                       // 11497
		if (type === 'touchstart') {                                                                                         // 11498
			this._addPointerStart(obj, handler, id);                                                                            // 11499
                                                                                                                       // 11500
		} else if (type === 'touchmove') {                                                                                   // 11501
			this._addPointerMove(obj, handler, id);                                                                             // 11502
                                                                                                                       // 11503
		} else if (type === 'touchend') {                                                                                    // 11504
			this._addPointerEnd(obj, handler, id);                                                                              // 11505
		}                                                                                                                    // 11506
                                                                                                                       // 11507
		return this;                                                                                                         // 11508
	},                                                                                                                    // 11509
                                                                                                                       // 11510
	removePointerListener: function (obj, type, id) {                                                                     // 11511
		var handler = obj['_leaflet_' + type + id];                                                                          // 11512
                                                                                                                       // 11513
		if (type === 'touchstart') {                                                                                         // 11514
			obj.removeEventListener(this.POINTER_DOWN, handler, false);                                                         // 11515
                                                                                                                       // 11516
		} else if (type === 'touchmove') {                                                                                   // 11517
			obj.removeEventListener(this.POINTER_MOVE, handler, false);                                                         // 11518
                                                                                                                       // 11519
		} else if (type === 'touchend') {                                                                                    // 11520
			obj.removeEventListener(this.POINTER_UP, handler, false);                                                           // 11521
			obj.removeEventListener(this.POINTER_CANCEL, handler, false);                                                       // 11522
		}                                                                                                                    // 11523
                                                                                                                       // 11524
		return this;                                                                                                         // 11525
	},                                                                                                                    // 11526
                                                                                                                       // 11527
	_addPointerStart: function (obj, handler, id) {                                                                       // 11528
		var onDown = L.bind(function (e) {                                                                                   // 11529
			if (e.pointerType !== 'mouse' && e.MSPOINTER_TYPE_MOUSE && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {              // 11530
				// In IE11, some touch events needs to fire for form controls, or                                                  // 11531
				// the controls will stop working. We keep a whitelist of tag names that                                           // 11532
				// need these events. For other target tags, we prevent default on the event.                                      // 11533
				if (this.TAG_WHITE_LIST.indexOf(e.target.tagName) < 0) {                                                           // 11534
					L.DomEvent.preventDefault(e);                                                                                     // 11535
				} else {                                                                                                           // 11536
					return;                                                                                                           // 11537
				}                                                                                                                  // 11538
			}                                                                                                                   // 11539
                                                                                                                       // 11540
			this._handlePointer(e, handler);                                                                                    // 11541
		}, this);                                                                                                            // 11542
                                                                                                                       // 11543
		obj['_leaflet_touchstart' + id] = onDown;                                                                            // 11544
		obj.addEventListener(this.POINTER_DOWN, onDown, false);                                                              // 11545
                                                                                                                       // 11546
		// need to keep track of what pointers and how many are active to provide e.touches emulation                        // 11547
		if (!this._pointerDocListener) {                                                                                     // 11548
			var pointerUp = L.bind(this._globalPointerUp, this);                                                                // 11549
                                                                                                                       // 11550
			// we listen documentElement as any drags that end by moving the touch off the screen get fired there               // 11551
			document.documentElement.addEventListener(this.POINTER_DOWN, L.bind(this._globalPointerDown, this), true);          // 11552
			document.documentElement.addEventListener(this.POINTER_MOVE, L.bind(this._globalPointerMove, this), true);          // 11553
			document.documentElement.addEventListener(this.POINTER_UP, pointerUp, true);                                        // 11554
			document.documentElement.addEventListener(this.POINTER_CANCEL, pointerUp, true);                                    // 11555
                                                                                                                       // 11556
			this._pointerDocListener = true;                                                                                    // 11557
		}                                                                                                                    // 11558
	},                                                                                                                    // 11559
                                                                                                                       // 11560
	_globalPointerDown: function (e) {                                                                                    // 11561
		this._pointers[e.pointerId] = e;                                                                                     // 11562
		this._pointersCount++;                                                                                               // 11563
	},                                                                                                                    // 11564
                                                                                                                       // 11565
	_globalPointerMove: function (e) {                                                                                    // 11566
		if (this._pointers[e.pointerId]) {                                                                                   // 11567
			this._pointers[e.pointerId] = e;                                                                                    // 11568
		}                                                                                                                    // 11569
	},                                                                                                                    // 11570
                                                                                                                       // 11571
	_globalPointerUp: function (e) {                                                                                      // 11572
		delete this._pointers[e.pointerId];                                                                                  // 11573
		this._pointersCount--;                                                                                               // 11574
	},                                                                                                                    // 11575
                                                                                                                       // 11576
	_handlePointer: function (e, handler) {                                                                               // 11577
		e.touches = [];                                                                                                      // 11578
		for (var i in this._pointers) {                                                                                      // 11579
			e.touches.push(this._pointers[i]);                                                                                  // 11580
		}                                                                                                                    // 11581
		e.changedTouches = [e];                                                                                              // 11582
                                                                                                                       // 11583
		handler(e);                                                                                                          // 11584
	},                                                                                                                    // 11585
                                                                                                                       // 11586
	_addPointerMove: function (obj, handler, id) {                                                                        // 11587
		var onMove = L.bind(function (e) {                                                                                   // 11588
			// don't fire touch moves when mouse isn't down                                                                     // 11589
			if ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }         // 11590
                                                                                                                       // 11591
			this._handlePointer(e, handler);                                                                                    // 11592
		}, this);                                                                                                            // 11593
                                                                                                                       // 11594
		obj['_leaflet_touchmove' + id] = onMove;                                                                             // 11595
		obj.addEventListener(this.POINTER_MOVE, onMove, false);                                                              // 11596
	},                                                                                                                    // 11597
                                                                                                                       // 11598
	_addPointerEnd: function (obj, handler, id) {                                                                         // 11599
		var onUp = L.bind(function (e) {                                                                                     // 11600
			this._handlePointer(e, handler);                                                                                    // 11601
		}, this);                                                                                                            // 11602
                                                                                                                       // 11603
		obj['_leaflet_touchend' + id] = onUp;                                                                                // 11604
		obj.addEventListener(this.POINTER_UP, onUp, false);                                                                  // 11605
		obj.addEventListener(this.POINTER_CANCEL, onUp, false);                                                              // 11606
	}                                                                                                                     // 11607
});                                                                                                                    // 11608
                                                                                                                       // 11609
                                                                                                                       // 11610
                                                                                                                       // 11611
/*                                                                                                                     // 11612
 * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.                                // 11613
 */                                                                                                                    // 11614
                                                                                                                       // 11615
// @namespace Map                                                                                                      // 11616
// @section Interaction Options                                                                                        // 11617
L.Map.mergeOptions({                                                                                                   // 11618
	// @section Touch interaction options                                                                                 // 11619
	// @option touchZoom: Boolean|String = *                                                                              // 11620
	// Whether the map can be zoomed by touch-dragging with two fingers. If                                               // 11621
	// passed `'center'`, it will zoom to the center of the view regardless of                                            // 11622
	// where the touch events (fingers) were. Enabled for touch-capable web                                               // 11623
	// browsers except for old Androids.                                                                                  // 11624
	touchZoom: L.Browser.touch && !L.Browser.android23,                                                                   // 11625
                                                                                                                       // 11626
	// @option bounceAtZoomLimits: Boolean = true                                                                         // 11627
	// Set it to false if you don't want the map to zoom beyond min/max zoom                                              // 11628
	// and then bounce back when pinch-zooming.                                                                           // 11629
	bounceAtZoomLimits: true                                                                                              // 11630
});                                                                                                                    // 11631
                                                                                                                       // 11632
L.Map.TouchZoom = L.Handler.extend({                                                                                   // 11633
	addHooks: function () {                                                                                               // 11634
		L.DomUtil.addClass(this._map._container, 'leaflet-touch-zoom');                                                      // 11635
		L.DomEvent.on(this._map._container, 'touchstart', this._onTouchStart, this);                                         // 11636
	},                                                                                                                    // 11637
                                                                                                                       // 11638
	removeHooks: function () {                                                                                            // 11639
		L.DomUtil.removeClass(this._map._container, 'leaflet-touch-zoom');                                                   // 11640
		L.DomEvent.off(this._map._container, 'touchstart', this._onTouchStart, this);                                        // 11641
	},                                                                                                                    // 11642
                                                                                                                       // 11643
	_onTouchStart: function (e) {                                                                                         // 11644
		var map = this._map;                                                                                                 // 11645
		if (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }                         // 11646
                                                                                                                       // 11647
		var p1 = map.mouseEventToContainerPoint(e.touches[0]),                                                               // 11648
		    p2 = map.mouseEventToContainerPoint(e.touches[1]);                                                               // 11649
                                                                                                                       // 11650
		this._centerPoint = map.getSize()._divideBy(2);                                                                      // 11651
		this._startLatLng = map.containerPointToLatLng(this._centerPoint);                                                   // 11652
		if (map.options.touchZoom !== 'center') {                                                                            // 11653
			this._pinchStartLatLng = map.containerPointToLatLng(p1.add(p2)._divideBy(2));                                       // 11654
		}                                                                                                                    // 11655
                                                                                                                       // 11656
		this._startDist = p1.distanceTo(p2);                                                                                 // 11657
		this._startZoom = map.getZoom();                                                                                     // 11658
                                                                                                                       // 11659
		this._moved = false;                                                                                                 // 11660
		this._zooming = true;                                                                                                // 11661
                                                                                                                       // 11662
		map._stop();                                                                                                         // 11663
                                                                                                                       // 11664
		L.DomEvent                                                                                                           // 11665
		    .on(document, 'touchmove', this._onTouchMove, this)                                                              // 11666
		    .on(document, 'touchend', this._onTouchEnd, this);                                                               // 11667
                                                                                                                       // 11668
		L.DomEvent.preventDefault(e);                                                                                        // 11669
	},                                                                                                                    // 11670
                                                                                                                       // 11671
	_onTouchMove: function (e) {                                                                                          // 11672
		if (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }                                              // 11673
                                                                                                                       // 11674
		var map = this._map,                                                                                                 // 11675
		    p1 = map.mouseEventToContainerPoint(e.touches[0]),                                                               // 11676
		    p2 = map.mouseEventToContainerPoint(e.touches[1]),                                                               // 11677
		    scale = p1.distanceTo(p2) / this._startDist;                                                                     // 11678
                                                                                                                       // 11679
                                                                                                                       // 11680
		this._zoom = map.getScaleZoom(scale, this._startZoom);                                                               // 11681
                                                                                                                       // 11682
		if (!map.options.bounceAtZoomLimits && (                                                                             // 11683
			(this._zoom < map.getMinZoom() && scale < 1) ||                                                                     // 11684
			(this._zoom > map.getMaxZoom() && scale > 1))) {                                                                    // 11685
			this._zoom = map._limitZoom(this._zoom);                                                                            // 11686
		}                                                                                                                    // 11687
                                                                                                                       // 11688
		if (map.options.touchZoom === 'center') {                                                                            // 11689
			this._center = this._startLatLng;                                                                                   // 11690
			if (scale === 1) { return; }                                                                                        // 11691
		} else {                                                                                                             // 11692
			// Get delta from pinch to center, so centerLatLng is delta applied to initial pinchLatLng                          // 11693
			var delta = p1._add(p2)._divideBy(2)._subtract(this._centerPoint);                                                  // 11694
			if (scale === 1 && delta.x === 0 && delta.y === 0) { return; }                                                      // 11695
			this._center = map.unproject(map.project(this._pinchStartLatLng, this._zoom).subtract(delta), this._zoom);          // 11696
		}                                                                                                                    // 11697
                                                                                                                       // 11698
		if (!this._moved) {                                                                                                  // 11699
			map._moveStart(true);                                                                                               // 11700
			this._moved = true;                                                                                                 // 11701
		}                                                                                                                    // 11702
                                                                                                                       // 11703
		L.Util.cancelAnimFrame(this._animRequest);                                                                           // 11704
                                                                                                                       // 11705
		var moveFn = L.bind(map._move, map, this._center, this._zoom, {pinch: true, round: false});                          // 11706
		this._animRequest = L.Util.requestAnimFrame(moveFn, this, true);                                                     // 11707
                                                                                                                       // 11708
		L.DomEvent.preventDefault(e);                                                                                        // 11709
	},                                                                                                                    // 11710
                                                                                                                       // 11711
	_onTouchEnd: function () {                                                                                            // 11712
		if (!this._moved || !this._zooming) {                                                                                // 11713
			this._zooming = false;                                                                                              // 11714
			return;                                                                                                             // 11715
		}                                                                                                                    // 11716
                                                                                                                       // 11717
		this._zooming = false;                                                                                               // 11718
		L.Util.cancelAnimFrame(this._animRequest);                                                                           // 11719
                                                                                                                       // 11720
		L.DomEvent                                                                                                           // 11721
		    .off(document, 'touchmove', this._onTouchMove)                                                                   // 11722
		    .off(document, 'touchend', this._onTouchEnd);                                                                    // 11723
                                                                                                                       // 11724
		// Pinch updates GridLayers' levels only when zoomSnap is off, so zoomSnap becomes noUpdate.                         // 11725
		if (this._map.options.zoomAnimation) {                                                                               // 11726
			this._map._animateZoom(this._center, this._map._limitZoom(this._zoom), true, this._map.options.zoomSnap);           // 11727
		} else {                                                                                                             // 11728
			this._map._resetView(this._center, this._map._limitZoom(this._zoom));                                               // 11729
		}                                                                                                                    // 11730
	}                                                                                                                     // 11731
});                                                                                                                    // 11732
                                                                                                                       // 11733
// @section Handlers                                                                                                   // 11734
// @property touchZoom: Handler                                                                                        // 11735
// Touch zoom handler.                                                                                                 // 11736
L.Map.addInitHook('addHandler', 'touchZoom', L.Map.TouchZoom);                                                         // 11737
                                                                                                                       // 11738
                                                                                                                       // 11739
                                                                                                                       // 11740
/*                                                                                                                     // 11741
 * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.                                             // 11742
 */                                                                                                                    // 11743
                                                                                                                       // 11744
// @namespace Map                                                                                                      // 11745
// @section Interaction Options                                                                                        // 11746
L.Map.mergeOptions({                                                                                                   // 11747
	// @section Touch interaction options                                                                                 // 11748
	// @option tap: Boolean = true                                                                                        // 11749
	// Enables mobile hacks for supporting instant taps (fixing 200ms click                                               // 11750
	// delay on iOS/Android) and touch holds (fired as `contextmenu` events).                                             // 11751
	tap: true,                                                                                                            // 11752
                                                                                                                       // 11753
	// @option tapTolerance: Number = 15                                                                                  // 11754
	// The max number of pixels a user can shift his finger during touch                                                  // 11755
	// for it to be considered a valid tap.                                                                               // 11756
	tapTolerance: 15                                                                                                      // 11757
});                                                                                                                    // 11758
                                                                                                                       // 11759
L.Map.Tap = L.Handler.extend({                                                                                         // 11760
	addHooks: function () {                                                                                               // 11761
		L.DomEvent.on(this._map._container, 'touchstart', this._onDown, this);                                               // 11762
	},                                                                                                                    // 11763
                                                                                                                       // 11764
	removeHooks: function () {                                                                                            // 11765
		L.DomEvent.off(this._map._container, 'touchstart', this._onDown, this);                                              // 11766
	},                                                                                                                    // 11767
                                                                                                                       // 11768
	_onDown: function (e) {                                                                                               // 11769
		if (!e.touches) { return; }                                                                                          // 11770
                                                                                                                       // 11771
		L.DomEvent.preventDefault(e);                                                                                        // 11772
                                                                                                                       // 11773
		this._fireClick = true;                                                                                              // 11774
                                                                                                                       // 11775
		// don't simulate click or track longpress if more than 1 touch                                                      // 11776
		if (e.touches.length > 1) {                                                                                          // 11777
			this._fireClick = false;                                                                                            // 11778
			clearTimeout(this._holdTimeout);                                                                                    // 11779
			return;                                                                                                             // 11780
		}                                                                                                                    // 11781
                                                                                                                       // 11782
		var first = e.touches[0],                                                                                            // 11783
		    el = first.target;                                                                                               // 11784
                                                                                                                       // 11785
		this._startPos = this._newPos = new L.Point(first.clientX, first.clientY);                                           // 11786
                                                                                                                       // 11787
		// if touching a link, highlight it                                                                                  // 11788
		if (el.tagName && el.tagName.toLowerCase() === 'a') {                                                                // 11789
			L.DomUtil.addClass(el, 'leaflet-active');                                                                           // 11790
		}                                                                                                                    // 11791
                                                                                                                       // 11792
		// simulate long hold but setting a timeout                                                                          // 11793
		this._holdTimeout = setTimeout(L.bind(function () {                                                                  // 11794
			if (this._isTapValid()) {                                                                                           // 11795
				this._fireClick = false;                                                                                           // 11796
				this._onUp();                                                                                                      // 11797
				this._simulateEvent('contextmenu', first);                                                                         // 11798
			}                                                                                                                   // 11799
		}, this), 1000);                                                                                                     // 11800
                                                                                                                       // 11801
		this._simulateEvent('mousedown', first);                                                                             // 11802
                                                                                                                       // 11803
		L.DomEvent.on(document, {                                                                                            // 11804
			touchmove: this._onMove,                                                                                            // 11805
			touchend: this._onUp                                                                                                // 11806
		}, this);                                                                                                            // 11807
	},                                                                                                                    // 11808
                                                                                                                       // 11809
	_onUp: function (e) {                                                                                                 // 11810
		clearTimeout(this._holdTimeout);                                                                                     // 11811
                                                                                                                       // 11812
		L.DomEvent.off(document, {                                                                                           // 11813
			touchmove: this._onMove,                                                                                            // 11814
			touchend: this._onUp                                                                                                // 11815
		}, this);                                                                                                            // 11816
                                                                                                                       // 11817
		if (this._fireClick && e && e.changedTouches) {                                                                      // 11818
                                                                                                                       // 11819
			var first = e.changedTouches[0],                                                                                    // 11820
			    el = first.target;                                                                                              // 11821
                                                                                                                       // 11822
			if (el && el.tagName && el.tagName.toLowerCase() === 'a') {                                                         // 11823
				L.DomUtil.removeClass(el, 'leaflet-active');                                                                       // 11824
			}                                                                                                                   // 11825
                                                                                                                       // 11826
			this._simulateEvent('mouseup', first);                                                                              // 11827
                                                                                                                       // 11828
			// simulate click if the touch didn't move too much                                                                 // 11829
			if (this._isTapValid()) {                                                                                           // 11830
				this._simulateEvent('click', first);                                                                               // 11831
			}                                                                                                                   // 11832
		}                                                                                                                    // 11833
	},                                                                                                                    // 11834
                                                                                                                       // 11835
	_isTapValid: function () {                                                                                            // 11836
		return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;                                    // 11837
	},                                                                                                                    // 11838
                                                                                                                       // 11839
	_onMove: function (e) {                                                                                               // 11840
		var first = e.touches[0];                                                                                            // 11841
		this._newPos = new L.Point(first.clientX, first.clientY);                                                            // 11842
		this._simulateEvent('mousemove', first);                                                                             // 11843
	},                                                                                                                    // 11844
                                                                                                                       // 11845
	_simulateEvent: function (type, e) {                                                                                  // 11846
		var simulatedEvent = document.createEvent('MouseEvents');                                                            // 11847
                                                                                                                       // 11848
		simulatedEvent._simulated = true;                                                                                    // 11849
		e.target._simulatedClick = true;                                                                                     // 11850
                                                                                                                       // 11851
		simulatedEvent.initMouseEvent(                                                                                       // 11852
		        type, true, true, window, 1,                                                                                 // 11853
		        e.screenX, e.screenY,                                                                                        // 11854
		        e.clientX, e.clientY,                                                                                        // 11855
		        false, false, false, false, 0, null);                                                                        // 11856
                                                                                                                       // 11857
		e.target.dispatchEvent(simulatedEvent);                                                                              // 11858
	}                                                                                                                     // 11859
});                                                                                                                    // 11860
                                                                                                                       // 11861
// @section Handlers                                                                                                   // 11862
// @property tap: Handler                                                                                              // 11863
// Mobile touch hacks (quick tap and touch hold) handler.                                                              // 11864
if (L.Browser.touch && !L.Browser.pointer) {                                                                           // 11865
	L.Map.addInitHook('addHandler', 'tap', L.Map.Tap);                                                                    // 11866
}                                                                                                                      // 11867
                                                                                                                       // 11868
                                                                                                                       // 11869
                                                                                                                       // 11870
/*                                                                                                                     // 11871
 * L.Handler.BoxZoom is used to add shift-drag zoom interaction to the map                                             // 11872
 * (zoom to a selected bounding box), enabled by default.                                                              // 11873
 */                                                                                                                    // 11874
                                                                                                                       // 11875
// @namespace Map                                                                                                      // 11876
// @section Interaction Options                                                                                        // 11877
L.Map.mergeOptions({                                                                                                   // 11878
	// @option boxZoom: Boolean = true                                                                                    // 11879
	// Whether the map can be zoomed to a rectangular area specified by                                                   // 11880
	// dragging the mouse while pressing the shift key.                                                                   // 11881
	boxZoom: true                                                                                                         // 11882
});                                                                                                                    // 11883
                                                                                                                       // 11884
L.Map.BoxZoom = L.Handler.extend({                                                                                     // 11885
	initialize: function (map) {                                                                                          // 11886
		this._map = map;                                                                                                     // 11887
		this._container = map._container;                                                                                    // 11888
		this._pane = map._panes.overlayPane;                                                                                 // 11889
	},                                                                                                                    // 11890
                                                                                                                       // 11891
	addHooks: function () {                                                                                               // 11892
		L.DomEvent.on(this._container, 'mousedown', this._onMouseDown, this);                                                // 11893
	},                                                                                                                    // 11894
                                                                                                                       // 11895
	removeHooks: function () {                                                                                            // 11896
		L.DomEvent.off(this._container, 'mousedown', this._onMouseDown, this);                                               // 11897
	},                                                                                                                    // 11898
                                                                                                                       // 11899
	moved: function () {                                                                                                  // 11900
		return this._moved;                                                                                                  // 11901
	},                                                                                                                    // 11902
                                                                                                                       // 11903
	_resetState: function () {                                                                                            // 11904
		this._moved = false;                                                                                                 // 11905
	},                                                                                                                    // 11906
                                                                                                                       // 11907
	_onMouseDown: function (e) {                                                                                          // 11908
		if (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }                                          // 11909
                                                                                                                       // 11910
		this._resetState();                                                                                                  // 11911
                                                                                                                       // 11912
		L.DomUtil.disableTextSelection();                                                                                    // 11913
		L.DomUtil.disableImageDrag();                                                                                        // 11914
                                                                                                                       // 11915
		this._startPoint = this._map.mouseEventToContainerPoint(e);                                                          // 11916
                                                                                                                       // 11917
		L.DomEvent.on(document, {                                                                                            // 11918
			contextmenu: L.DomEvent.stop,                                                                                       // 11919
			mousemove: this._onMouseMove,                                                                                       // 11920
			mouseup: this._onMouseUp,                                                                                           // 11921
			keydown: this._onKeyDown                                                                                            // 11922
		}, this);                                                                                                            // 11923
	},                                                                                                                    // 11924
                                                                                                                       // 11925
	_onMouseMove: function (e) {                                                                                          // 11926
		if (!this._moved) {                                                                                                  // 11927
			this._moved = true;                                                                                                 // 11928
                                                                                                                       // 11929
			this._box = L.DomUtil.create('div', 'leaflet-zoom-box', this._container);                                           // 11930
			L.DomUtil.addClass(this._container, 'leaflet-crosshair');                                                           // 11931
                                                                                                                       // 11932
			this._map.fire('boxzoomstart');                                                                                     // 11933
		}                                                                                                                    // 11934
                                                                                                                       // 11935
		this._point = this._map.mouseEventToContainerPoint(e);                                                               // 11936
                                                                                                                       // 11937
		var bounds = new L.Bounds(this._point, this._startPoint),                                                            // 11938
		    size = bounds.getSize();                                                                                         // 11939
                                                                                                                       // 11940
		L.DomUtil.setPosition(this._box, bounds.min);                                                                        // 11941
                                                                                                                       // 11942
		this._box.style.width  = size.x + 'px';                                                                              // 11943
		this._box.style.height = size.y + 'px';                                                                              // 11944
	},                                                                                                                    // 11945
                                                                                                                       // 11946
	_finish: function () {                                                                                                // 11947
		if (this._moved) {                                                                                                   // 11948
			L.DomUtil.remove(this._box);                                                                                        // 11949
			L.DomUtil.removeClass(this._container, 'leaflet-crosshair');                                                        // 11950
		}                                                                                                                    // 11951
                                                                                                                       // 11952
		L.DomUtil.enableTextSelection();                                                                                     // 11953
		L.DomUtil.enableImageDrag();                                                                                         // 11954
                                                                                                                       // 11955
		L.DomEvent.off(document, {                                                                                           // 11956
			contextmenu: L.DomEvent.stop,                                                                                       // 11957
			mousemove: this._onMouseMove,                                                                                       // 11958
			mouseup: this._onMouseUp,                                                                                           // 11959
			keydown: this._onKeyDown                                                                                            // 11960
		}, this);                                                                                                            // 11961
	},                                                                                                                    // 11962
                                                                                                                       // 11963
	_onMouseUp: function (e) {                                                                                            // 11964
		if ((e.which !== 1) && (e.button !== 1)) { return; }                                                                 // 11965
                                                                                                                       // 11966
		this._finish();                                                                                                      // 11967
                                                                                                                       // 11968
		if (!this._moved) { return; }                                                                                        // 11969
		// Postpone to next JS tick so internal click event handling                                                         // 11970
		// still see it as "moved".                                                                                          // 11971
		setTimeout(L.bind(this._resetState, this), 0);                                                                       // 11972
                                                                                                                       // 11973
		var bounds = new L.LatLngBounds(                                                                                     // 11974
		        this._map.containerPointToLatLng(this._startPoint),                                                          // 11975
		        this._map.containerPointToLatLng(this._point));                                                              // 11976
                                                                                                                       // 11977
		this._map                                                                                                            // 11978
			.fitBounds(bounds)                                                                                                  // 11979
			.fire('boxzoomend', {boxZoomBounds: bounds});                                                                       // 11980
	},                                                                                                                    // 11981
                                                                                                                       // 11982
	_onKeyDown: function (e) {                                                                                            // 11983
		if (e.keyCode === 27) {                                                                                              // 11984
			this._finish();                                                                                                     // 11985
		}                                                                                                                    // 11986
	}                                                                                                                     // 11987
});                                                                                                                    // 11988
                                                                                                                       // 11989
// @section Handlers                                                                                                   // 11990
// @property boxZoom: Handler                                                                                          // 11991
// Box (shift-drag with mouse) zoom handler.                                                                           // 11992
L.Map.addInitHook('addHandler', 'boxZoom', L.Map.BoxZoom);                                                             // 11993
                                                                                                                       // 11994
                                                                                                                       // 11995
                                                                                                                       // 11996
/*                                                                                                                     // 11997
 * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.                                   // 11998
 */                                                                                                                    // 11999
                                                                                                                       // 12000
// @namespace Map                                                                                                      // 12001
// @section Keyboard Navigation Options                                                                                // 12002
L.Map.mergeOptions({                                                                                                   // 12003
	// @option keyboard: Boolean = true                                                                                   // 12004
	// Makes the map focusable and allows users to navigate the map with keyboard                                         // 12005
	// arrows and `+`/`-` keys.                                                                                           // 12006
	keyboard: true,                                                                                                       // 12007
                                                                                                                       // 12008
	// @option keyboardPanDelta: Number = 80                                                                              // 12009
	// Amount of pixels to pan when pressing an arrow key.                                                                // 12010
	keyboardPanDelta: 80                                                                                                  // 12011
});                                                                                                                    // 12012
                                                                                                                       // 12013
L.Map.Keyboard = L.Handler.extend({                                                                                    // 12014
                                                                                                                       // 12015
	keyCodes: {                                                                                                           // 12016
		left:    [37],                                                                                                       // 12017
		right:   [39],                                                                                                       // 12018
		down:    [40],                                                                                                       // 12019
		up:      [38],                                                                                                       // 12020
		zoomIn:  [187, 107, 61, 171],                                                                                        // 12021
		zoomOut: [189, 109, 54, 173]                                                                                         // 12022
	},                                                                                                                    // 12023
                                                                                                                       // 12024
	initialize: function (map) {                                                                                          // 12025
		this._map = map;                                                                                                     // 12026
                                                                                                                       // 12027
		this._setPanDelta(map.options.keyboardPanDelta);                                                                     // 12028
		this._setZoomDelta(map.options.zoomDelta);                                                                           // 12029
	},                                                                                                                    // 12030
                                                                                                                       // 12031
	addHooks: function () {                                                                                               // 12032
		var container = this._map._container;                                                                                // 12033
                                                                                                                       // 12034
		// make the container focusable by tabbing                                                                           // 12035
		if (container.tabIndex <= 0) {                                                                                       // 12036
			container.tabIndex = '0';                                                                                           // 12037
		}                                                                                                                    // 12038
                                                                                                                       // 12039
		L.DomEvent.on(container, {                                                                                           // 12040
			focus: this._onFocus,                                                                                               // 12041
			blur: this._onBlur,                                                                                                 // 12042
			mousedown: this._onMouseDown                                                                                        // 12043
		}, this);                                                                                                            // 12044
                                                                                                                       // 12045
		this._map.on({                                                                                                       // 12046
			focus: this._addHooks,                                                                                              // 12047
			blur: this._removeHooks                                                                                             // 12048
		}, this);                                                                                                            // 12049
	},                                                                                                                    // 12050
                                                                                                                       // 12051
	removeHooks: function () {                                                                                            // 12052
		this._removeHooks();                                                                                                 // 12053
                                                                                                                       // 12054
		L.DomEvent.off(this._map._container, {                                                                               // 12055
			focus: this._onFocus,                                                                                               // 12056
			blur: this._onBlur,                                                                                                 // 12057
			mousedown: this._onMouseDown                                                                                        // 12058
		}, this);                                                                                                            // 12059
                                                                                                                       // 12060
		this._map.off({                                                                                                      // 12061
			focus: this._addHooks,                                                                                              // 12062
			blur: this._removeHooks                                                                                             // 12063
		}, this);                                                                                                            // 12064
	},                                                                                                                    // 12065
                                                                                                                       // 12066
	_onMouseDown: function () {                                                                                           // 12067
		if (this._focused) { return; }                                                                                       // 12068
                                                                                                                       // 12069
		var body = document.body,                                                                                            // 12070
		    docEl = document.documentElement,                                                                                // 12071
		    top = body.scrollTop || docEl.scrollTop,                                                                         // 12072
		    left = body.scrollLeft || docEl.scrollLeft;                                                                      // 12073
                                                                                                                       // 12074
		this._map._container.focus();                                                                                        // 12075
                                                                                                                       // 12076
		window.scrollTo(left, top);                                                                                          // 12077
	},                                                                                                                    // 12078
                                                                                                                       // 12079
	_onFocus: function () {                                                                                               // 12080
		this._focused = true;                                                                                                // 12081
		this._map.fire('focus');                                                                                             // 12082
	},                                                                                                                    // 12083
                                                                                                                       // 12084
	_onBlur: function () {                                                                                                // 12085
		this._focused = false;                                                                                               // 12086
		this._map.fire('blur');                                                                                              // 12087
	},                                                                                                                    // 12088
                                                                                                                       // 12089
	_setPanDelta: function (panDelta) {                                                                                   // 12090
		var keys = this._panKeys = {},                                                                                       // 12091
		    codes = this.keyCodes,                                                                                           // 12092
		    i, len;                                                                                                          // 12093
                                                                                                                       // 12094
		for (i = 0, len = codes.left.length; i < len; i++) {                                                                 // 12095
			keys[codes.left[i]] = [-1 * panDelta, 0];                                                                           // 12096
		}                                                                                                                    // 12097
		for (i = 0, len = codes.right.length; i < len; i++) {                                                                // 12098
			keys[codes.right[i]] = [panDelta, 0];                                                                               // 12099
		}                                                                                                                    // 12100
		for (i = 0, len = codes.down.length; i < len; i++) {                                                                 // 12101
			keys[codes.down[i]] = [0, panDelta];                                                                                // 12102
		}                                                                                                                    // 12103
		for (i = 0, len = codes.up.length; i < len; i++) {                                                                   // 12104
			keys[codes.up[i]] = [0, -1 * panDelta];                                                                             // 12105
		}                                                                                                                    // 12106
	},                                                                                                                    // 12107
                                                                                                                       // 12108
	_setZoomDelta: function (zoomDelta) {                                                                                 // 12109
		var keys = this._zoomKeys = {},                                                                                      // 12110
		    codes = this.keyCodes,                                                                                           // 12111
		    i, len;                                                                                                          // 12112
                                                                                                                       // 12113
		for (i = 0, len = codes.zoomIn.length; i < len; i++) {                                                               // 12114
			keys[codes.zoomIn[i]] = zoomDelta;                                                                                  // 12115
		}                                                                                                                    // 12116
		for (i = 0, len = codes.zoomOut.length; i < len; i++) {                                                              // 12117
			keys[codes.zoomOut[i]] = -zoomDelta;                                                                                // 12118
		}                                                                                                                    // 12119
	},                                                                                                                    // 12120
                                                                                                                       // 12121
	_addHooks: function () {                                                                                              // 12122
		L.DomEvent.on(document, 'keydown', this._onKeyDown, this);                                                           // 12123
	},                                                                                                                    // 12124
                                                                                                                       // 12125
	_removeHooks: function () {                                                                                           // 12126
		L.DomEvent.off(document, 'keydown', this._onKeyDown, this);                                                          // 12127
	},                                                                                                                    // 12128
                                                                                                                       // 12129
	_onKeyDown: function (e) {                                                                                            // 12130
		if (e.altKey || e.ctrlKey || e.metaKey) { return; }                                                                  // 12131
                                                                                                                       // 12132
		var key = e.keyCode,                                                                                                 // 12133
		    map = this._map,                                                                                                 // 12134
		    offset;                                                                                                          // 12135
                                                                                                                       // 12136
		if (key in this._panKeys) {                                                                                          // 12137
                                                                                                                       // 12138
			if (map._panAnim && map._panAnim._inProgress) { return; }                                                           // 12139
                                                                                                                       // 12140
			offset = this._panKeys[key];                                                                                        // 12141
			if (e.shiftKey) {                                                                                                   // 12142
				offset = L.point(offset).multiplyBy(3);                                                                            // 12143
			}                                                                                                                   // 12144
                                                                                                                       // 12145
			map.panBy(offset);                                                                                                  // 12146
                                                                                                                       // 12147
			if (map.options.maxBounds) {                                                                                        // 12148
				map.panInsideBounds(map.options.maxBounds);                                                                        // 12149
			}                                                                                                                   // 12150
                                                                                                                       // 12151
		} else if (key in this._zoomKeys) {                                                                                  // 12152
			map.setZoom(map.getZoom() + (e.shiftKey ? 3 : 1) * this._zoomKeys[key]);                                            // 12153
                                                                                                                       // 12154
		} else if (key === 27) {                                                                                             // 12155
			map.closePopup();                                                                                                   // 12156
                                                                                                                       // 12157
		} else {                                                                                                             // 12158
			return;                                                                                                             // 12159
		}                                                                                                                    // 12160
                                                                                                                       // 12161
		L.DomEvent.stop(e);                                                                                                  // 12162
	}                                                                                                                     // 12163
});                                                                                                                    // 12164
                                                                                                                       // 12165
// @section Handlers                                                                                                   // 12166
// @section Handlers                                                                                                   // 12167
// @property keyboard: Handler                                                                                         // 12168
// Keyboard navigation handler.                                                                                        // 12169
L.Map.addInitHook('addHandler', 'keyboard', L.Map.Keyboard);                                                           // 12170
                                                                                                                       // 12171
                                                                                                                       // 12172
                                                                                                                       // 12173
/*                                                                                                                     // 12174
 * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.                                  // 12175
 */                                                                                                                    // 12176
                                                                                                                       // 12177
                                                                                                                       // 12178
/* @namespace Marker                                                                                                   // 12179
 * @section Interaction handlers                                                                                       // 12180
 *                                                                                                                     // 12181
 * Interaction handlers are properties of a marker instance that allow you to control interaction behavior in runtime, enabling or disabling certain features such as dragging (see `Handler` methods). Example:
 *                                                                                                                     // 12183
 * ```js                                                                                                               // 12184
 * marker.dragging.disable();                                                                                          // 12185
 * ```                                                                                                                 // 12186
 *                                                                                                                     // 12187
 * @property dragging: Handler                                                                                         // 12188
 * Marker dragging handler (by both mouse and touch).                                                                  // 12189
 */                                                                                                                    // 12190
                                                                                                                       // 12191
L.Handler.MarkerDrag = L.Handler.extend({                                                                              // 12192
	initialize: function (marker) {                                                                                       // 12193
		this._marker = marker;                                                                                               // 12194
	},                                                                                                                    // 12195
                                                                                                                       // 12196
	addHooks: function () {                                                                                               // 12197
		var icon = this._marker._icon;                                                                                       // 12198
                                                                                                                       // 12199
		if (!this._draggable) {                                                                                              // 12200
			this._draggable = new L.Draggable(icon, icon, true);                                                                // 12201
		}                                                                                                                    // 12202
                                                                                                                       // 12203
		this._draggable.on({                                                                                                 // 12204
			dragstart: this._onDragStart,                                                                                       // 12205
			drag: this._onDrag,                                                                                                 // 12206
			dragend: this._onDragEnd                                                                                            // 12207
		}, this).enable();                                                                                                   // 12208
                                                                                                                       // 12209
		L.DomUtil.addClass(icon, 'leaflet-marker-draggable');                                                                // 12210
	},                                                                                                                    // 12211
                                                                                                                       // 12212
	removeHooks: function () {                                                                                            // 12213
		this._draggable.off({                                                                                                // 12214
			dragstart: this._onDragStart,                                                                                       // 12215
			drag: this._onDrag,                                                                                                 // 12216
			dragend: this._onDragEnd                                                                                            // 12217
		}, this).disable();                                                                                                  // 12218
                                                                                                                       // 12219
		if (this._marker._icon) {                                                                                            // 12220
			L.DomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');                                              // 12221
		}                                                                                                                    // 12222
	},                                                                                                                    // 12223
                                                                                                                       // 12224
	moved: function () {                                                                                                  // 12225
		return this._draggable && this._draggable._moved;                                                                    // 12226
	},                                                                                                                    // 12227
                                                                                                                       // 12228
	_onDragStart: function () {                                                                                           // 12229
		// @section Dragging events                                                                                          // 12230
		// @event dragstart: Event                                                                                           // 12231
		// Fired when the user starts dragging the marker.                                                                   // 12232
                                                                                                                       // 12233
		// @event movestart: Event                                                                                           // 12234
		// Fired when the marker starts moving (because of dragging).                                                        // 12235
                                                                                                                       // 12236
		this._oldLatLng = this._marker.getLatLng();                                                                          // 12237
		this._marker                                                                                                         // 12238
		    .closePopup()                                                                                                    // 12239
		    .fire('movestart')                                                                                               // 12240
		    .fire('dragstart');                                                                                              // 12241
	},                                                                                                                    // 12242
                                                                                                                       // 12243
	_onDrag: function (e) {                                                                                               // 12244
		var marker = this._marker,                                                                                           // 12245
		    shadow = marker._shadow,                                                                                         // 12246
		    iconPos = L.DomUtil.getPosition(marker._icon),                                                                   // 12247
		    latlng = marker._map.layerPointToLatLng(iconPos);                                                                // 12248
                                                                                                                       // 12249
		// update shadow position                                                                                            // 12250
		if (shadow) {                                                                                                        // 12251
			L.DomUtil.setPosition(shadow, iconPos);                                                                             // 12252
		}                                                                                                                    // 12253
                                                                                                                       // 12254
		marker._latlng = latlng;                                                                                             // 12255
		e.latlng = latlng;                                                                                                   // 12256
		e.oldLatLng = this._oldLatLng;                                                                                       // 12257
                                                                                                                       // 12258
		// @event drag: Event                                                                                                // 12259
		// Fired repeatedly while the user drags the marker.                                                                 // 12260
		marker                                                                                                               // 12261
		    .fire('move', e)                                                                                                 // 12262
		    .fire('drag', e);                                                                                                // 12263
	},                                                                                                                    // 12264
                                                                                                                       // 12265
	_onDragEnd: function (e) {                                                                                            // 12266
		// @event dragend: DragEndEvent                                                                                      // 12267
		// Fired when the user stops dragging the marker.                                                                    // 12268
                                                                                                                       // 12269
		// @event moveend: Event                                                                                             // 12270
		// Fired when the marker stops moving (because of dragging).                                                         // 12271
		delete this._oldLatLng;                                                                                              // 12272
		this._marker                                                                                                         // 12273
		    .fire('moveend')                                                                                                 // 12274
		    .fire('dragend', e);                                                                                             // 12275
	}                                                                                                                     // 12276
});                                                                                                                    // 12277
                                                                                                                       // 12278
                                                                                                                       // 12279
                                                                                                                       // 12280
/*                                                                                                                     // 12281
 * @class Control                                                                                                      // 12282
 * @aka L.Control                                                                                                      // 12283
 * @inherits Class                                                                                                     // 12284
 *                                                                                                                     // 12285
 * L.Control is a base class for implementing map controls. Handles positioning.                                       // 12286
 * All other controls extend from this class.                                                                          // 12287
 */                                                                                                                    // 12288
                                                                                                                       // 12289
L.Control = L.Class.extend({                                                                                           // 12290
	// @section                                                                                                           // 12291
	// @aka Control options                                                                                               // 12292
	options: {                                                                                                            // 12293
		// @option position: String = 'topright'                                                                             // 12294
		// The position of the control (one of the map corners). Possible values are `'topleft'`,                            // 12295
		// `'topright'`, `'bottomleft'` or `'bottomright'`                                                                   // 12296
		position: 'topright'                                                                                                 // 12297
	},                                                                                                                    // 12298
                                                                                                                       // 12299
	initialize: function (options) {                                                                                      // 12300
		L.setOptions(this, options);                                                                                         // 12301
	},                                                                                                                    // 12302
                                                                                                                       // 12303
	/* @section                                                                                                           // 12304
	 * Classes extending L.Control will inherit the following methods:                                                    // 12305
	 *                                                                                                                    // 12306
	 * @method getPosition: string                                                                                        // 12307
	 * Returns the position of the control.                                                                               // 12308
	 */                                                                                                                   // 12309
	getPosition: function () {                                                                                            // 12310
		return this.options.position;                                                                                        // 12311
	},                                                                                                                    // 12312
                                                                                                                       // 12313
	// @method setPosition(position: string): this                                                                        // 12314
	// Sets the position of the control.                                                                                  // 12315
	setPosition: function (position) {                                                                                    // 12316
		var map = this._map;                                                                                                 // 12317
                                                                                                                       // 12318
		if (map) {                                                                                                           // 12319
			map.removeControl(this);                                                                                            // 12320
		}                                                                                                                    // 12321
                                                                                                                       // 12322
		this.options.position = position;                                                                                    // 12323
                                                                                                                       // 12324
		if (map) {                                                                                                           // 12325
			map.addControl(this);                                                                                               // 12326
		}                                                                                                                    // 12327
                                                                                                                       // 12328
		return this;                                                                                                         // 12329
	},                                                                                                                    // 12330
                                                                                                                       // 12331
	// @method getContainer: HTMLElement                                                                                  // 12332
	// Returns the HTMLElement that contains the control.                                                                 // 12333
	getContainer: function () {                                                                                           // 12334
		return this._container;                                                                                              // 12335
	},                                                                                                                    // 12336
                                                                                                                       // 12337
	// @method addTo(map: Map): this                                                                                      // 12338
	// Adds the control to the given map.                                                                                 // 12339
	addTo: function (map) {                                                                                               // 12340
		this.remove();                                                                                                       // 12341
		this._map = map;                                                                                                     // 12342
                                                                                                                       // 12343
		var container = this._container = this.onAdd(map),                                                                   // 12344
		    pos = this.getPosition(),                                                                                        // 12345
		    corner = map._controlCorners[pos];                                                                               // 12346
                                                                                                                       // 12347
		L.DomUtil.addClass(container, 'leaflet-control');                                                                    // 12348
                                                                                                                       // 12349
		if (pos.indexOf('bottom') !== -1) {                                                                                  // 12350
			corner.insertBefore(container, corner.firstChild);                                                                  // 12351
		} else {                                                                                                             // 12352
			corner.appendChild(container);                                                                                      // 12353
		}                                                                                                                    // 12354
                                                                                                                       // 12355
		return this;                                                                                                         // 12356
	},                                                                                                                    // 12357
                                                                                                                       // 12358
	// @method remove: this                                                                                               // 12359
	// Removes the control from the map it is currently active on.                                                        // 12360
	remove: function () {                                                                                                 // 12361
		if (!this._map) {                                                                                                    // 12362
			return this;                                                                                                        // 12363
		}                                                                                                                    // 12364
                                                                                                                       // 12365
		L.DomUtil.remove(this._container);                                                                                   // 12366
                                                                                                                       // 12367
		if (this.onRemove) {                                                                                                 // 12368
			this.onRemove(this._map);                                                                                           // 12369
		}                                                                                                                    // 12370
                                                                                                                       // 12371
		this._map = null;                                                                                                    // 12372
                                                                                                                       // 12373
		return this;                                                                                                         // 12374
	},                                                                                                                    // 12375
                                                                                                                       // 12376
	_refocusOnMap: function (e) {                                                                                         // 12377
		// if map exists and event is not a keyboard event                                                                   // 12378
		if (this._map && e && e.screenX > 0 && e.screenY > 0) {                                                              // 12379
			this._map.getContainer().focus();                                                                                   // 12380
		}                                                                                                                    // 12381
	}                                                                                                                     // 12382
});                                                                                                                    // 12383
                                                                                                                       // 12384
L.control = function (options) {                                                                                       // 12385
	return new L.Control(options);                                                                                        // 12386
};                                                                                                                     // 12387
                                                                                                                       // 12388
/* @section Extension methods                                                                                          // 12389
 * @uninheritable                                                                                                      // 12390
 *                                                                                                                     // 12391
 * Every control should extend from `L.Control` and (re-)implement the following methods.                              // 12392
 *                                                                                                                     // 12393
 * @method onAdd(map: Map): HTMLElement                                                                                // 12394
 * Should return the container DOM element for the control and add listeners on relevant map events. Called on [`control.addTo(map)`](#control-addTo).
 *                                                                                                                     // 12396
 * @method onRemove(map: Map)                                                                                          // 12397
 * Optional method. Should contain all clean up code that removes the listeners previously added in [`onAdd`](#control-onadd). Called on [`control.remove()`](#control-remove).
 */                                                                                                                    // 12399
                                                                                                                       // 12400
/* @namespace Map                                                                                                      // 12401
 * @section Methods for Layers and Controls                                                                            // 12402
 */                                                                                                                    // 12403
L.Map.include({                                                                                                        // 12404
	// @method addControl(control: Control): this                                                                         // 12405
	// Adds the given control to the map                                                                                  // 12406
	addControl: function (control) {                                                                                      // 12407
		control.addTo(this);                                                                                                 // 12408
		return this;                                                                                                         // 12409
	},                                                                                                                    // 12410
                                                                                                                       // 12411
	// @method removeControl(control: Control): this                                                                      // 12412
	// Removes the given control from the map                                                                             // 12413
	removeControl: function (control) {                                                                                   // 12414
		control.remove();                                                                                                    // 12415
		return this;                                                                                                         // 12416
	},                                                                                                                    // 12417
                                                                                                                       // 12418
	_initControlPos: function () {                                                                                        // 12419
		var corners = this._controlCorners = {},                                                                             // 12420
		    l = 'leaflet-',                                                                                                  // 12421
		    container = this._controlContainer =                                                                             // 12422
		            L.DomUtil.create('div', l + 'control-container', this._container);                                       // 12423
                                                                                                                       // 12424
		function createCorner(vSide, hSide) {                                                                                // 12425
			var className = l + vSide + ' ' + l + hSide;                                                                        // 12426
                                                                                                                       // 12427
			corners[vSide + hSide] = L.DomUtil.create('div', className, container);                                             // 12428
		}                                                                                                                    // 12429
                                                                                                                       // 12430
		createCorner('top', 'left');                                                                                         // 12431
		createCorner('top', 'right');                                                                                        // 12432
		createCorner('bottom', 'left');                                                                                      // 12433
		createCorner('bottom', 'right');                                                                                     // 12434
	},                                                                                                                    // 12435
                                                                                                                       // 12436
	_clearControlPos: function () {                                                                                       // 12437
		L.DomUtil.remove(this._controlContainer);                                                                            // 12438
	}                                                                                                                     // 12439
});                                                                                                                    // 12440
                                                                                                                       // 12441
                                                                                                                       // 12442
                                                                                                                       // 12443
/*                                                                                                                     // 12444
 * @class Control.Zoom                                                                                                 // 12445
 * @aka L.Control.Zoom                                                                                                 // 12446
 * @inherits Control                                                                                                   // 12447
 *                                                                                                                     // 12448
 * A basic zoom control with two buttons (zoom in and zoom out). It is put on the map by default unless you set its [`zoomControl` option](#map-zoomcontrol) to `false`. Extends `Control`.
 */                                                                                                                    // 12450
                                                                                                                       // 12451
L.Control.Zoom = L.Control.extend({                                                                                    // 12452
	// @section                                                                                                           // 12453
	// @aka Control.Zoom options                                                                                          // 12454
	options: {                                                                                                            // 12455
		position: 'topleft',                                                                                                 // 12456
                                                                                                                       // 12457
		// @option zoomInText: String = '+'                                                                                  // 12458
		// The text set on the 'zoom in' button.                                                                             // 12459
		zoomInText: '+',                                                                                                     // 12460
                                                                                                                       // 12461
		// @option zoomInTitle: String = 'Zoom in'                                                                           // 12462
		// The title set on the 'zoom in' button.                                                                            // 12463
		zoomInTitle: 'Zoom in',                                                                                              // 12464
                                                                                                                       // 12465
		// @option zoomOutText: String = '-'                                                                                 // 12466
		// The text set on the 'zoom out' button.                                                                            // 12467
		zoomOutText: '-',                                                                                                    // 12468
                                                                                                                       // 12469
		// @option zoomOutTitle: String = 'Zoom out'                                                                         // 12470
		// The title set on the 'zoom out' button.                                                                           // 12471
		zoomOutTitle: 'Zoom out'                                                                                             // 12472
	},                                                                                                                    // 12473
                                                                                                                       // 12474
	onAdd: function (map) {                                                                                               // 12475
		var zoomName = 'leaflet-control-zoom',                                                                               // 12476
		    container = L.DomUtil.create('div', zoomName + ' leaflet-bar'),                                                  // 12477
		    options = this.options;                                                                                          // 12478
                                                                                                                       // 12479
		this._zoomInButton  = this._createButton(options.zoomInText, options.zoomInTitle,                                    // 12480
		        zoomName + '-in',  container, this._zoomIn);                                                                 // 12481
		this._zoomOutButton = this._createButton(options.zoomOutText, options.zoomOutTitle,                                  // 12482
		        zoomName + '-out', container, this._zoomOut);                                                                // 12483
                                                                                                                       // 12484
		this._updateDisabled();                                                                                              // 12485
		map.on('zoomend zoomlevelschange', this._updateDisabled, this);                                                      // 12486
                                                                                                                       // 12487
		return container;                                                                                                    // 12488
	},                                                                                                                    // 12489
                                                                                                                       // 12490
	onRemove: function (map) {                                                                                            // 12491
		map.off('zoomend zoomlevelschange', this._updateDisabled, this);                                                     // 12492
	},                                                                                                                    // 12493
                                                                                                                       // 12494
	disable: function () {                                                                                                // 12495
		this._disabled = true;                                                                                               // 12496
		this._updateDisabled();                                                                                              // 12497
		return this;                                                                                                         // 12498
	},                                                                                                                    // 12499
                                                                                                                       // 12500
	enable: function () {                                                                                                 // 12501
		this._disabled = false;                                                                                              // 12502
		this._updateDisabled();                                                                                              // 12503
		return this;                                                                                                         // 12504
	},                                                                                                                    // 12505
                                                                                                                       // 12506
	_zoomIn: function (e) {                                                                                               // 12507
		if (!this._disabled && this._map._zoom < this._map.getMaxZoom()) {                                                   // 12508
			this._map.zoomIn(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));                                               // 12509
		}                                                                                                                    // 12510
	},                                                                                                                    // 12511
                                                                                                                       // 12512
	_zoomOut: function (e) {                                                                                              // 12513
		if (!this._disabled && this._map._zoom > this._map.getMinZoom()) {                                                   // 12514
			this._map.zoomOut(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));                                              // 12515
		}                                                                                                                    // 12516
	},                                                                                                                    // 12517
                                                                                                                       // 12518
	_createButton: function (html, title, className, container, fn) {                                                     // 12519
		var link = L.DomUtil.create('a', className, container);                                                              // 12520
		link.innerHTML = html;                                                                                               // 12521
		link.href = '#';                                                                                                     // 12522
		link.title = title;                                                                                                  // 12523
                                                                                                                       // 12524
		/*                                                                                                                   // 12525
		 * Will force screen readers like VoiceOver to read this as "Zoom in - button"                                       // 12526
		 */                                                                                                                  // 12527
		link.setAttribute('role', 'button');                                                                                 // 12528
		link.setAttribute('aria-label', title);                                                                              // 12529
                                                                                                                       // 12530
		L.DomEvent                                                                                                           // 12531
		    .on(link, 'mousedown dblclick', L.DomEvent.stopPropagation)                                                      // 12532
		    .on(link, 'click', L.DomEvent.stop)                                                                              // 12533
		    .on(link, 'click', fn, this)                                                                                     // 12534
		    .on(link, 'click', this._refocusOnMap, this);                                                                    // 12535
                                                                                                                       // 12536
		return link;                                                                                                         // 12537
	},                                                                                                                    // 12538
                                                                                                                       // 12539
	_updateDisabled: function () {                                                                                        // 12540
		var map = this._map,                                                                                                 // 12541
		    className = 'leaflet-disabled';                                                                                  // 12542
                                                                                                                       // 12543
		L.DomUtil.removeClass(this._zoomInButton, className);                                                                // 12544
		L.DomUtil.removeClass(this._zoomOutButton, className);                                                               // 12545
                                                                                                                       // 12546
		if (this._disabled || map._zoom === map.getMinZoom()) {                                                              // 12547
			L.DomUtil.addClass(this._zoomOutButton, className);                                                                 // 12548
		}                                                                                                                    // 12549
		if (this._disabled || map._zoom === map.getMaxZoom()) {                                                              // 12550
			L.DomUtil.addClass(this._zoomInButton, className);                                                                  // 12551
		}                                                                                                                    // 12552
	}                                                                                                                     // 12553
});                                                                                                                    // 12554
                                                                                                                       // 12555
// @namespace Map                                                                                                      // 12556
// @section Control options                                                                                            // 12557
// @option zoomControl: Boolean = true                                                                                 // 12558
// Whether a [zoom control](#control-zoom) is added to the map by default.                                             // 12559
L.Map.mergeOptions({                                                                                                   // 12560
	zoomControl: true                                                                                                     // 12561
});                                                                                                                    // 12562
                                                                                                                       // 12563
L.Map.addInitHook(function () {                                                                                        // 12564
	if (this.options.zoomControl) {                                                                                       // 12565
		this.zoomControl = new L.Control.Zoom();                                                                             // 12566
		this.addControl(this.zoomControl);                                                                                   // 12567
	}                                                                                                                     // 12568
});                                                                                                                    // 12569
                                                                                                                       // 12570
// @namespace Control.Zoom                                                                                             // 12571
// @factory L.control.zoom(options: Control.Zoom options)                                                              // 12572
// Creates a zoom control                                                                                              // 12573
L.control.zoom = function (options) {                                                                                  // 12574
	return new L.Control.Zoom(options);                                                                                   // 12575
};                                                                                                                     // 12576
                                                                                                                       // 12577
                                                                                                                       // 12578
                                                                                                                       // 12579
/*                                                                                                                     // 12580
 * @class Control.Attribution                                                                                          // 12581
 * @aka L.Control.Attribution                                                                                          // 12582
 * @inherits Control                                                                                                   // 12583
 *                                                                                                                     // 12584
 * The attribution control allows you to display attribution data in a small text box on a map. It is put on the map by default unless you set its [`attributionControl` option](#map-attributioncontrol) to `false`, and it fetches attribution texts from layers with the [`getAttribution` method](#layer-getattribution) automatically. Extends Control.
 */                                                                                                                    // 12586
                                                                                                                       // 12587
L.Control.Attribution = L.Control.extend({                                                                             // 12588
	// @section                                                                                                           // 12589
	// @aka Control.Attribution options                                                                                   // 12590
	options: {                                                                                                            // 12591
		position: 'bottomright',                                                                                             // 12592
                                                                                                                       // 12593
		// @option prefix: String = 'Leaflet'                                                                                // 12594
		// The HTML text shown before the attributions. Pass `false` to disable.                                             // 12595
		prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'                       // 12596
	},                                                                                                                    // 12597
                                                                                                                       // 12598
	initialize: function (options) {                                                                                      // 12599
		L.setOptions(this, options);                                                                                         // 12600
                                                                                                                       // 12601
		this._attributions = {};                                                                                             // 12602
	},                                                                                                                    // 12603
                                                                                                                       // 12604
	onAdd: function (map) {                                                                                               // 12605
		map.attributionControl = this;                                                                                       // 12606
		this._container = L.DomUtil.create('div', 'leaflet-control-attribution');                                            // 12607
		if (L.DomEvent) {                                                                                                    // 12608
			L.DomEvent.disableClickPropagation(this._container);                                                                // 12609
		}                                                                                                                    // 12610
                                                                                                                       // 12611
		// TODO ugly, refactor                                                                                               // 12612
		for (var i in map._layers) {                                                                                         // 12613
			if (map._layers[i].getAttribution) {                                                                                // 12614
				this.addAttribution(map._layers[i].getAttribution());                                                              // 12615
			}                                                                                                                   // 12616
		}                                                                                                                    // 12617
                                                                                                                       // 12618
		this._update();                                                                                                      // 12619
                                                                                                                       // 12620
		return this._container;                                                                                              // 12621
	},                                                                                                                    // 12622
                                                                                                                       // 12623
	// @method setPrefix(prefix: String): this                                                                            // 12624
	// Sets the text before the attributions.                                                                             // 12625
	setPrefix: function (prefix) {                                                                                        // 12626
		this.options.prefix = prefix;                                                                                        // 12627
		this._update();                                                                                                      // 12628
		return this;                                                                                                         // 12629
	},                                                                                                                    // 12630
                                                                                                                       // 12631
	// @method addAttribution(text: String): this                                                                         // 12632
	// Adds an attribution text (e.g. `'Vector data &copy; Mapbox'`).                                                     // 12633
	addAttribution: function (text) {                                                                                     // 12634
		if (!text) { return this; }                                                                                          // 12635
                                                                                                                       // 12636
		if (!this._attributions[text]) {                                                                                     // 12637
			this._attributions[text] = 0;                                                                                       // 12638
		}                                                                                                                    // 12639
		this._attributions[text]++;                                                                                          // 12640
                                                                                                                       // 12641
		this._update();                                                                                                      // 12642
                                                                                                                       // 12643
		return this;                                                                                                         // 12644
	},                                                                                                                    // 12645
                                                                                                                       // 12646
	// @method removeAttribution(text: String): this                                                                      // 12647
	// Removes an attribution text.                                                                                       // 12648
	removeAttribution: function (text) {                                                                                  // 12649
		if (!text) { return this; }                                                                                          // 12650
                                                                                                                       // 12651
		if (this._attributions[text]) {                                                                                      // 12652
			this._attributions[text]--;                                                                                         // 12653
			this._update();                                                                                                     // 12654
		}                                                                                                                    // 12655
                                                                                                                       // 12656
		return this;                                                                                                         // 12657
	},                                                                                                                    // 12658
                                                                                                                       // 12659
	_update: function () {                                                                                                // 12660
		if (!this._map) { return; }                                                                                          // 12661
                                                                                                                       // 12662
		var attribs = [];                                                                                                    // 12663
                                                                                                                       // 12664
		for (var i in this._attributions) {                                                                                  // 12665
			if (this._attributions[i]) {                                                                                        // 12666
				attribs.push(i);                                                                                                   // 12667
			}                                                                                                                   // 12668
		}                                                                                                                    // 12669
                                                                                                                       // 12670
		var prefixAndAttribs = [];                                                                                           // 12671
                                                                                                                       // 12672
		if (this.options.prefix) {                                                                                           // 12673
			prefixAndAttribs.push(this.options.prefix);                                                                         // 12674
		}                                                                                                                    // 12675
		if (attribs.length) {                                                                                                // 12676
			prefixAndAttribs.push(attribs.join(', '));                                                                          // 12677
		}                                                                                                                    // 12678
                                                                                                                       // 12679
		this._container.innerHTML = prefixAndAttribs.join(' | ');                                                            // 12680
	}                                                                                                                     // 12681
});                                                                                                                    // 12682
                                                                                                                       // 12683
// @namespace Map                                                                                                      // 12684
// @section Control options                                                                                            // 12685
// @option attributionControl: Boolean = true                                                                          // 12686
// Whether a [attribution control](#control-attribution) is added to the map by default.                               // 12687
L.Map.mergeOptions({                                                                                                   // 12688
	attributionControl: true                                                                                              // 12689
});                                                                                                                    // 12690
                                                                                                                       // 12691
L.Map.addInitHook(function () {                                                                                        // 12692
	if (this.options.attributionControl) {                                                                                // 12693
		new L.Control.Attribution().addTo(this);                                                                             // 12694
	}                                                                                                                     // 12695
});                                                                                                                    // 12696
                                                                                                                       // 12697
// @namespace Control.Attribution                                                                                      // 12698
// @factory L.control.attribution(options: Control.Attribution options)                                                // 12699
// Creates an attribution control.                                                                                     // 12700
L.control.attribution = function (options) {                                                                           // 12701
	return new L.Control.Attribution(options);                                                                            // 12702
};                                                                                                                     // 12703
                                                                                                                       // 12704
                                                                                                                       // 12705
                                                                                                                       // 12706
/*                                                                                                                     // 12707
 * @class Control.Scale                                                                                                // 12708
 * @aka L.Control.Scale                                                                                                // 12709
 * @inherits Control                                                                                                   // 12710
 *                                                                                                                     // 12711
 * A simple scale control that shows the scale of the current center of screen in metric (m/km) and imperial (mi/ft) systems. Extends `Control`.
 *                                                                                                                     // 12713
 * @example                                                                                                            // 12714
 *                                                                                                                     // 12715
 * ```js                                                                                                               // 12716
 * L.control.scale().addTo(map);                                                                                       // 12717
 * ```                                                                                                                 // 12718
 */                                                                                                                    // 12719
                                                                                                                       // 12720
L.Control.Scale = L.Control.extend({                                                                                   // 12721
	// @section                                                                                                           // 12722
	// @aka Control.Scale options                                                                                         // 12723
	options: {                                                                                                            // 12724
		position: 'bottomleft',                                                                                              // 12725
                                                                                                                       // 12726
		// @option maxWidth: Number = 100                                                                                    // 12727
		// Maximum width of the control in pixels. The width is set dynamically to show round values (e.g. 100, 200, 500).   // 12728
		maxWidth: 100,                                                                                                       // 12729
                                                                                                                       // 12730
		// @option metric: Boolean = True                                                                                    // 12731
		// Whether to show the metric scale line (m/km).                                                                     // 12732
		metric: true,                                                                                                        // 12733
                                                                                                                       // 12734
		// @option imperial: Boolean = True                                                                                  // 12735
		// Whether to show the imperial scale line (mi/ft).                                                                  // 12736
		imperial: true                                                                                                       // 12737
                                                                                                                       // 12738
		// @option updateWhenIdle: Boolean = false                                                                           // 12739
		// If `true`, the control is updated on [`moveend`](#map-moveend), otherwise it's always up-to-date (updated on [`move`](#map-move)).
	},                                                                                                                    // 12741
                                                                                                                       // 12742
	onAdd: function (map) {                                                                                               // 12743
		var className = 'leaflet-control-scale',                                                                             // 12744
		    container = L.DomUtil.create('div', className),                                                                  // 12745
		    options = this.options;                                                                                          // 12746
                                                                                                                       // 12747
		this._addScales(options, className + '-line', container);                                                            // 12748
                                                                                                                       // 12749
		map.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);                                             // 12750
		map.whenReady(this._update, this);                                                                                   // 12751
                                                                                                                       // 12752
		return container;                                                                                                    // 12753
	},                                                                                                                    // 12754
                                                                                                                       // 12755
	onRemove: function (map) {                                                                                            // 12756
		map.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);                                       // 12757
	},                                                                                                                    // 12758
                                                                                                                       // 12759
	_addScales: function (options, className, container) {                                                                // 12760
		if (options.metric) {                                                                                                // 12761
			this._mScale = L.DomUtil.create('div', className, container);                                                       // 12762
		}                                                                                                                    // 12763
		if (options.imperial) {                                                                                              // 12764
			this._iScale = L.DomUtil.create('div', className, container);                                                       // 12765
		}                                                                                                                    // 12766
	},                                                                                                                    // 12767
                                                                                                                       // 12768
	_update: function () {                                                                                                // 12769
		var map = this._map,                                                                                                 // 12770
		    y = map.getSize().y / 2;                                                                                         // 12771
                                                                                                                       // 12772
		var maxMeters = map.distance(                                                                                        // 12773
				map.containerPointToLatLng([0, y]),                                                                                // 12774
				map.containerPointToLatLng([this.options.maxWidth, y]));                                                           // 12775
                                                                                                                       // 12776
		this._updateScales(maxMeters);                                                                                       // 12777
	},                                                                                                                    // 12778
                                                                                                                       // 12779
	_updateScales: function (maxMeters) {                                                                                 // 12780
		if (this.options.metric && maxMeters) {                                                                              // 12781
			this._updateMetric(maxMeters);                                                                                      // 12782
		}                                                                                                                    // 12783
		if (this.options.imperial && maxMeters) {                                                                            // 12784
			this._updateImperial(maxMeters);                                                                                    // 12785
		}                                                                                                                    // 12786
	},                                                                                                                    // 12787
                                                                                                                       // 12788
	_updateMetric: function (maxMeters) {                                                                                 // 12789
		var meters = this._getRoundNum(maxMeters),                                                                           // 12790
		    label = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';                                                 // 12791
                                                                                                                       // 12792
		this._updateScale(this._mScale, label, meters / maxMeters);                                                          // 12793
	},                                                                                                                    // 12794
                                                                                                                       // 12795
	_updateImperial: function (maxMeters) {                                                                               // 12796
		var maxFeet = maxMeters * 3.2808399,                                                                                 // 12797
		    maxMiles, miles, feet;                                                                                           // 12798
                                                                                                                       // 12799
		if (maxFeet > 5280) {                                                                                                // 12800
			maxMiles = maxFeet / 5280;                                                                                          // 12801
			miles = this._getRoundNum(maxMiles);                                                                                // 12802
			this._updateScale(this._iScale, miles + ' mi', miles / maxMiles);                                                   // 12803
                                                                                                                       // 12804
		} else {                                                                                                             // 12805
			feet = this._getRoundNum(maxFeet);                                                                                  // 12806
			this._updateScale(this._iScale, feet + ' ft', feet / maxFeet);                                                      // 12807
		}                                                                                                                    // 12808
	},                                                                                                                    // 12809
                                                                                                                       // 12810
	_updateScale: function (scale, text, ratio) {                                                                         // 12811
		scale.style.width = Math.round(this.options.maxWidth * ratio) + 'px';                                                // 12812
		scale.innerHTML = text;                                                                                              // 12813
	},                                                                                                                    // 12814
                                                                                                                       // 12815
	_getRoundNum: function (num) {                                                                                        // 12816
		var pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),                                                         // 12817
		    d = num / pow10;                                                                                                 // 12818
                                                                                                                       // 12819
		d = d >= 10 ? 10 :                                                                                                   // 12820
		    d >= 5 ? 5 :                                                                                                     // 12821
		    d >= 3 ? 3 :                                                                                                     // 12822
		    d >= 2 ? 2 : 1;                                                                                                  // 12823
                                                                                                                       // 12824
		return pow10 * d;                                                                                                    // 12825
	}                                                                                                                     // 12826
});                                                                                                                    // 12827
                                                                                                                       // 12828
                                                                                                                       // 12829
// @factory L.control.scale(options?: Control.Scale options)                                                           // 12830
// Creates an scale control with the given options.                                                                    // 12831
L.control.scale = function (options) {                                                                                 // 12832
	return new L.Control.Scale(options);                                                                                  // 12833
};                                                                                                                     // 12834
                                                                                                                       // 12835
                                                                                                                       // 12836
                                                                                                                       // 12837
/*                                                                                                                     // 12838
 * @class Control.Layers                                                                                               // 12839
 * @aka L.Control.Layers                                                                                               // 12840
 * @inherits Control                                                                                                   // 12841
 *                                                                                                                     // 12842
 * The layers control gives users the ability to switch between different base layers and switch overlays on/off (check out the [detailed example](http://leafletjs.com/examples/layers-control.html)). Extends `Control`.
 *                                                                                                                     // 12844
 * @example                                                                                                            // 12845
 *                                                                                                                     // 12846
 * ```js                                                                                                               // 12847
 * var baseLayers = {                                                                                                  // 12848
 * 	"Mapbox": mapbox,                                                                                                  // 12849
 * 	"OpenStreetMap": osm                                                                                               // 12850
 * };                                                                                                                  // 12851
 *                                                                                                                     // 12852
 * var overlays = {                                                                                                    // 12853
 * 	"Marker": marker,                                                                                                  // 12854
 * 	"Roads": roadsLayer                                                                                                // 12855
 * };                                                                                                                  // 12856
 *                                                                                                                     // 12857
 * L.control.layers(baseLayers, overlays).addTo(map);                                                                  // 12858
 * ```                                                                                                                 // 12859
 *                                                                                                                     // 12860
 * The `baseLayers` and `overlays` parameters are object literals with layer names as keys and `Layer` objects as values:
 *                                                                                                                     // 12862
 * ```js                                                                                                               // 12863
 * {                                                                                                                   // 12864
 *     "<someName1>": layer1,                                                                                          // 12865
 *     "<someName2>": layer2                                                                                           // 12866
 * }                                                                                                                   // 12867
 * ```                                                                                                                 // 12868
 *                                                                                                                     // 12869
 * The layer names can contain HTML, which allows you to add additional styling to the items:                          // 12870
 *                                                                                                                     // 12871
 * ```js                                                                                                               // 12872
 * {"<img src='my-layer-icon' /> <span class='my-layer-item'>My Layer</span>": myLayer}                                // 12873
 * ```                                                                                                                 // 12874
 */                                                                                                                    // 12875
                                                                                                                       // 12876
                                                                                                                       // 12877
L.Control.Layers = L.Control.extend({                                                                                  // 12878
	// @section                                                                                                           // 12879
	// @aka Control.Layers options                                                                                        // 12880
	options: {                                                                                                            // 12881
		// @option collapsed: Boolean = true                                                                                 // 12882
		// If `true`, the control will be collapsed into an icon and expanded on mouse hover or touch.                       // 12883
		collapsed: true,                                                                                                     // 12884
		position: 'topright',                                                                                                // 12885
                                                                                                                       // 12886
		// @option autoZIndex: Boolean = true                                                                                // 12887
		// If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.
		autoZIndex: true,                                                                                                    // 12889
                                                                                                                       // 12890
		// @option hideSingleBase: Boolean = false                                                                           // 12891
		// If `true`, the base layers in the control will be hidden when there is only one.                                  // 12892
		hideSingleBase: false,                                                                                               // 12893
                                                                                                                       // 12894
		// @option sortLayers: Boolean = false                                                                               // 12895
		// Whether to sort the layers. When `false`, layers will keep the order                                              // 12896
		// in which they were added to the control.                                                                          // 12897
		sortLayers: false,                                                                                                   // 12898
                                                                                                                       // 12899
		// @option sortFunction: Function = *                                                                                // 12900
		// A [compare function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)       // 12901
		// that will be used for sorting the layers, when `sortLayers` is `true`.                                            // 12902
		// The function receives both the `L.Layer` instances and their names, as in                                         // 12903
		// `sortFunction(layerA, layerB, nameA, nameB)`.                                                                     // 12904
		// By default, it sorts layers alphabetically by their name.                                                         // 12905
		sortFunction: function (layerA, layerB, nameA, nameB) {                                                              // 12906
			return nameA < nameB ? -1 : (nameB < nameA ? 1 : 0);                                                                // 12907
		}                                                                                                                    // 12908
	},                                                                                                                    // 12909
                                                                                                                       // 12910
	initialize: function (baseLayers, overlays, options) {                                                                // 12911
		L.setOptions(this, options);                                                                                         // 12912
                                                                                                                       // 12913
		this._layers = [];                                                                                                   // 12914
		this._lastZIndex = 0;                                                                                                // 12915
		this._handlingClick = false;                                                                                         // 12916
                                                                                                                       // 12917
		for (var i in baseLayers) {                                                                                          // 12918
			this._addLayer(baseLayers[i], i);                                                                                   // 12919
		}                                                                                                                    // 12920
                                                                                                                       // 12921
		for (i in overlays) {                                                                                                // 12922
			this._addLayer(overlays[i], i, true);                                                                               // 12923
		}                                                                                                                    // 12924
	},                                                                                                                    // 12925
                                                                                                                       // 12926
	onAdd: function (map) {                                                                                               // 12927
		this._initLayout();                                                                                                  // 12928
		this._update();                                                                                                      // 12929
                                                                                                                       // 12930
		this._map = map;                                                                                                     // 12931
		map.on('zoomend', this._checkDisabledLayers, this);                                                                  // 12932
                                                                                                                       // 12933
		return this._container;                                                                                              // 12934
	},                                                                                                                    // 12935
                                                                                                                       // 12936
	onRemove: function () {                                                                                               // 12937
		this._map.off('zoomend', this._checkDisabledLayers, this);                                                           // 12938
                                                                                                                       // 12939
		for (var i = 0; i < this._layers.length; i++) {                                                                      // 12940
			this._layers[i].layer.off('add remove', this._onLayerChange, this);                                                 // 12941
		}                                                                                                                    // 12942
	},                                                                                                                    // 12943
                                                                                                                       // 12944
	// @method addBaseLayer(layer: Layer, name: String): this                                                             // 12945
	// Adds a base layer (radio button entry) with the given name to the control.                                         // 12946
	addBaseLayer: function (layer, name) {                                                                                // 12947
		this._addLayer(layer, name);                                                                                         // 12948
		return (this._map) ? this._update() : this;                                                                          // 12949
	},                                                                                                                    // 12950
                                                                                                                       // 12951
	// @method addOverlay(layer: Layer, name: String): this                                                               // 12952
	// Adds an overlay (checkbox entry) with the given name to the control.                                               // 12953
	addOverlay: function (layer, name) {                                                                                  // 12954
		this._addLayer(layer, name, true);                                                                                   // 12955
		return (this._map) ? this._update() : this;                                                                          // 12956
	},                                                                                                                    // 12957
                                                                                                                       // 12958
	// @method removeLayer(layer: Layer): this                                                                            // 12959
	// Remove the given layer from the control.                                                                           // 12960
	removeLayer: function (layer) {                                                                                       // 12961
		layer.off('add remove', this._onLayerChange, this);                                                                  // 12962
                                                                                                                       // 12963
		var obj = this._getLayer(L.stamp(layer));                                                                            // 12964
		if (obj) {                                                                                                           // 12965
			this._layers.splice(this._layers.indexOf(obj), 1);                                                                  // 12966
		}                                                                                                                    // 12967
		return (this._map) ? this._update() : this;                                                                          // 12968
	},                                                                                                                    // 12969
                                                                                                                       // 12970
	// @method expand(): this                                                                                             // 12971
	// Expand the control container if collapsed.                                                                         // 12972
	expand: function () {                                                                                                 // 12973
		L.DomUtil.addClass(this._container, 'leaflet-control-layers-expanded');                                              // 12974
		this._form.style.height = null;                                                                                      // 12975
		var acceptableHeight = this._map.getSize().y - (this._container.offsetTop + 50);                                     // 12976
		if (acceptableHeight < this._form.clientHeight) {                                                                    // 12977
			L.DomUtil.addClass(this._form, 'leaflet-control-layers-scrollbar');                                                 // 12978
			this._form.style.height = acceptableHeight + 'px';                                                                  // 12979
		} else {                                                                                                             // 12980
			L.DomUtil.removeClass(this._form, 'leaflet-control-layers-scrollbar');                                              // 12981
		}                                                                                                                    // 12982
		this._checkDisabledLayers();                                                                                         // 12983
		return this;                                                                                                         // 12984
	},                                                                                                                    // 12985
                                                                                                                       // 12986
	// @method collapse(): this                                                                                           // 12987
	// Collapse the control container if expanded.                                                                        // 12988
	collapse: function () {                                                                                               // 12989
		L.DomUtil.removeClass(this._container, 'leaflet-control-layers-expanded');                                           // 12990
		return this;                                                                                                         // 12991
	},                                                                                                                    // 12992
                                                                                                                       // 12993
	_initLayout: function () {                                                                                            // 12994
		var className = 'leaflet-control-layers',                                                                            // 12995
		    container = this._container = L.DomUtil.create('div', className),                                                // 12996
		    collapsed = this.options.collapsed;                                                                              // 12997
                                                                                                                       // 12998
		// makes this work on IE touch devices by stopping it from firing a mouseout event when the touch is released        // 12999
		container.setAttribute('aria-haspopup', true);                                                                       // 13000
                                                                                                                       // 13001
		L.DomEvent.disableClickPropagation(container);                                                                       // 13002
		if (!L.Browser.touch) {                                                                                              // 13003
			L.DomEvent.disableScrollPropagation(container);                                                                     // 13004
		}                                                                                                                    // 13005
                                                                                                                       // 13006
		var form = this._form = L.DomUtil.create('form', className + '-list');                                               // 13007
                                                                                                                       // 13008
		if (collapsed) {                                                                                                     // 13009
			this._map.on('click', this.collapse, this);                                                                         // 13010
                                                                                                                       // 13011
			if (!L.Browser.android) {                                                                                           // 13012
				L.DomEvent.on(container, {                                                                                         // 13013
					mouseenter: this.expand,                                                                                          // 13014
					mouseleave: this.collapse                                                                                         // 13015
				}, this);                                                                                                          // 13016
			}                                                                                                                   // 13017
		}                                                                                                                    // 13018
                                                                                                                       // 13019
		var link = this._layersLink = L.DomUtil.create('a', className + '-toggle', container);                               // 13020
		link.href = '#';                                                                                                     // 13021
		link.title = 'Layers';                                                                                               // 13022
                                                                                                                       // 13023
		if (L.Browser.touch) {                                                                                               // 13024
			L.DomEvent                                                                                                          // 13025
			    .on(link, 'click', L.DomEvent.stop)                                                                             // 13026
			    .on(link, 'click', this.expand, this);                                                                          // 13027
		} else {                                                                                                             // 13028
			L.DomEvent.on(link, 'focus', this.expand, this);                                                                    // 13029
		}                                                                                                                    // 13030
                                                                                                                       // 13031
		// work around for Firefox Android issue https://github.com/Leaflet/Leaflet/issues/2033                              // 13032
		L.DomEvent.on(form, 'click', function () {                                                                           // 13033
			setTimeout(L.bind(this._onInputClick, this), 0);                                                                    // 13034
		}, this);                                                                                                            // 13035
                                                                                                                       // 13036
		// TODO keyboard accessibility                                                                                       // 13037
                                                                                                                       // 13038
		if (!collapsed) {                                                                                                    // 13039
			this.expand();                                                                                                      // 13040
		}                                                                                                                    // 13041
                                                                                                                       // 13042
		this._baseLayersList = L.DomUtil.create('div', className + '-base', form);                                           // 13043
		this._separator = L.DomUtil.create('div', className + '-separator', form);                                           // 13044
		this._overlaysList = L.DomUtil.create('div', className + '-overlays', form);                                         // 13045
                                                                                                                       // 13046
		container.appendChild(form);                                                                                         // 13047
	},                                                                                                                    // 13048
                                                                                                                       // 13049
	_getLayer: function (id) {                                                                                            // 13050
		for (var i = 0; i < this._layers.length; i++) {                                                                      // 13051
                                                                                                                       // 13052
			if (this._layers[i] && L.stamp(this._layers[i].layer) === id) {                                                     // 13053
				return this._layers[i];                                                                                            // 13054
			}                                                                                                                   // 13055
		}                                                                                                                    // 13056
	},                                                                                                                    // 13057
                                                                                                                       // 13058
	_addLayer: function (layer, name, overlay) {                                                                          // 13059
		layer.on('add remove', this._onLayerChange, this);                                                                   // 13060
                                                                                                                       // 13061
		this._layers.push({                                                                                                  // 13062
			layer: layer,                                                                                                       // 13063
			name: name,                                                                                                         // 13064
			overlay: overlay                                                                                                    // 13065
		});                                                                                                                  // 13066
                                                                                                                       // 13067
		if (this.options.sortLayers) {                                                                                       // 13068
			this._layers.sort(L.bind(function (a, b) {                                                                          // 13069
				return this.options.sortFunction(a.layer, b.layer, a.name, b.name);                                                // 13070
			}, this));                                                                                                          // 13071
		}                                                                                                                    // 13072
                                                                                                                       // 13073
		if (this.options.autoZIndex && layer.setZIndex) {                                                                    // 13074
			this._lastZIndex++;                                                                                                 // 13075
			layer.setZIndex(this._lastZIndex);                                                                                  // 13076
		}                                                                                                                    // 13077
	},                                                                                                                    // 13078
                                                                                                                       // 13079
	_update: function () {                                                                                                // 13080
		if (!this._container) { return this; }                                                                               // 13081
                                                                                                                       // 13082
		L.DomUtil.empty(this._baseLayersList);                                                                               // 13083
		L.DomUtil.empty(this._overlaysList);                                                                                 // 13084
                                                                                                                       // 13085
		var baseLayersPresent, overlaysPresent, i, obj, baseLayersCount = 0;                                                 // 13086
                                                                                                                       // 13087
		for (i = 0; i < this._layers.length; i++) {                                                                          // 13088
			obj = this._layers[i];                                                                                              // 13089
			this._addItem(obj);                                                                                                 // 13090
			overlaysPresent = overlaysPresent || obj.overlay;                                                                   // 13091
			baseLayersPresent = baseLayersPresent || !obj.overlay;                                                              // 13092
			baseLayersCount += !obj.overlay ? 1 : 0;                                                                            // 13093
		}                                                                                                                    // 13094
                                                                                                                       // 13095
		// Hide base layers section if there's only one layer.                                                               // 13096
		if (this.options.hideSingleBase) {                                                                                   // 13097
			baseLayersPresent = baseLayersPresent && baseLayersCount > 1;                                                       // 13098
			this._baseLayersList.style.display = baseLayersPresent ? '' : 'none';                                               // 13099
		}                                                                                                                    // 13100
                                                                                                                       // 13101
		this._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';                                  // 13102
                                                                                                                       // 13103
		return this;                                                                                                         // 13104
	},                                                                                                                    // 13105
                                                                                                                       // 13106
	_onLayerChange: function (e) {                                                                                        // 13107
		if (!this._handlingClick) {                                                                                          // 13108
			this._update();                                                                                                     // 13109
		}                                                                                                                    // 13110
                                                                                                                       // 13111
		var obj = this._getLayer(L.stamp(e.target));                                                                         // 13112
                                                                                                                       // 13113
		// @namespace Map                                                                                                    // 13114
		// @section Layer events                                                                                             // 13115
		// @event baselayerchange: LayersControlEvent                                                                        // 13116
		// Fired when the base layer is changed through the [layer control](#control-layers).                                // 13117
		// @event overlayadd: LayersControlEvent                                                                             // 13118
		// Fired when an overlay is selected through the [layer control](#control-layers).                                   // 13119
		// @event overlayremove: LayersControlEvent                                                                          // 13120
		// Fired when an overlay is deselected through the [layer control](#control-layers).                                 // 13121
		// @namespace Control.Layers                                                                                         // 13122
		var type = obj.overlay ?                                                                                             // 13123
			(e.type === 'add' ? 'overlayadd' : 'overlayremove') :                                                               // 13124
			(e.type === 'add' ? 'baselayerchange' : null);                                                                      // 13125
                                                                                                                       // 13126
		if (type) {                                                                                                          // 13127
			this._map.fire(type, obj);                                                                                          // 13128
		}                                                                                                                    // 13129
	},                                                                                                                    // 13130
                                                                                                                       // 13131
	// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)     // 13132
	_createRadioElement: function (name, checked) {                                                                       // 13133
                                                                                                                       // 13134
		var radioHtml = '<input type="radio" class="leaflet-control-layers-selector" name="' +                               // 13135
				name + '"' + (checked ? ' checked="checked"' : '') + '/>';                                                         // 13136
                                                                                                                       // 13137
		var radioFragment = document.createElement('div');                                                                   // 13138
		radioFragment.innerHTML = radioHtml;                                                                                 // 13139
                                                                                                                       // 13140
		return radioFragment.firstChild;                                                                                     // 13141
	},                                                                                                                    // 13142
                                                                                                                       // 13143
	_addItem: function (obj) {                                                                                            // 13144
		var label = document.createElement('label'),                                                                         // 13145
		    checked = this._map.hasLayer(obj.layer),                                                                         // 13146
		    input;                                                                                                           // 13147
                                                                                                                       // 13148
		if (obj.overlay) {                                                                                                   // 13149
			input = document.createElement('input');                                                                            // 13150
			input.type = 'checkbox';                                                                                            // 13151
			input.className = 'leaflet-control-layers-selector';                                                                // 13152
			input.defaultChecked = checked;                                                                                     // 13153
		} else {                                                                                                             // 13154
			input = this._createRadioElement('leaflet-base-layers', checked);                                                   // 13155
		}                                                                                                                    // 13156
                                                                                                                       // 13157
		input.layerId = L.stamp(obj.layer);                                                                                  // 13158
                                                                                                                       // 13159
		L.DomEvent.on(input, 'click', this._onInputClick, this);                                                             // 13160
                                                                                                                       // 13161
		var name = document.createElement('span');                                                                           // 13162
		name.innerHTML = ' ' + obj.name;                                                                                     // 13163
                                                                                                                       // 13164
		// Helps from preventing layer control flicker when checkboxes are disabled                                          // 13165
		// https://github.com/Leaflet/Leaflet/issues/2771                                                                    // 13166
		var holder = document.createElement('div');                                                                          // 13167
                                                                                                                       // 13168
		label.appendChild(holder);                                                                                           // 13169
		holder.appendChild(input);                                                                                           // 13170
		holder.appendChild(name);                                                                                            // 13171
                                                                                                                       // 13172
		var container = obj.overlay ? this._overlaysList : this._baseLayersList;                                             // 13173
		container.appendChild(label);                                                                                        // 13174
                                                                                                                       // 13175
		this._checkDisabledLayers();                                                                                         // 13176
		return label;                                                                                                        // 13177
	},                                                                                                                    // 13178
                                                                                                                       // 13179
	_onInputClick: function () {                                                                                          // 13180
		var inputs = this._form.getElementsByTagName('input'),                                                               // 13181
		    input, layer, hasLayer;                                                                                          // 13182
		var addedLayers = [],                                                                                                // 13183
		    removedLayers = [];                                                                                              // 13184
                                                                                                                       // 13185
		this._handlingClick = true;                                                                                          // 13186
                                                                                                                       // 13187
		for (var i = inputs.length - 1; i >= 0; i--) {                                                                       // 13188
			input = inputs[i];                                                                                                  // 13189
			layer = this._getLayer(input.layerId).layer;                                                                        // 13190
			hasLayer = this._map.hasLayer(layer);                                                                               // 13191
                                                                                                                       // 13192
			if (input.checked && !hasLayer) {                                                                                   // 13193
				addedLayers.push(layer);                                                                                           // 13194
                                                                                                                       // 13195
			} else if (!input.checked && hasLayer) {                                                                            // 13196
				removedLayers.push(layer);                                                                                         // 13197
			}                                                                                                                   // 13198
		}                                                                                                                    // 13199
                                                                                                                       // 13200
		// Bugfix issue 2318: Should remove all old layers before readding new ones                                          // 13201
		for (i = 0; i < removedLayers.length; i++) {                                                                         // 13202
			this._map.removeLayer(removedLayers[i]);                                                                            // 13203
		}                                                                                                                    // 13204
		for (i = 0; i < addedLayers.length; i++) {                                                                           // 13205
			this._map.addLayer(addedLayers[i]);                                                                                 // 13206
		}                                                                                                                    // 13207
                                                                                                                       // 13208
		this._handlingClick = false;                                                                                         // 13209
                                                                                                                       // 13210
		this._refocusOnMap();                                                                                                // 13211
	},                                                                                                                    // 13212
                                                                                                                       // 13213
	_checkDisabledLayers: function () {                                                                                   // 13214
		var inputs = this._form.getElementsByTagName('input'),                                                               // 13215
		    input,                                                                                                           // 13216
		    layer,                                                                                                           // 13217
		    zoom = this._map.getZoom();                                                                                      // 13218
                                                                                                                       // 13219
		for (var i = inputs.length - 1; i >= 0; i--) {                                                                       // 13220
			input = inputs[i];                                                                                                  // 13221
			layer = this._getLayer(input.layerId).layer;                                                                        // 13222
			input.disabled = (layer.options.minZoom !== undefined && zoom < layer.options.minZoom) ||                           // 13223
			                 (layer.options.maxZoom !== undefined && zoom > layer.options.maxZoom);                             // 13224
                                                                                                                       // 13225
		}                                                                                                                    // 13226
	},                                                                                                                    // 13227
                                                                                                                       // 13228
	_expand: function () {                                                                                                // 13229
		// Backward compatibility, remove me in 1.1.                                                                         // 13230
		return this.expand();                                                                                                // 13231
	},                                                                                                                    // 13232
                                                                                                                       // 13233
	_collapse: function () {                                                                                              // 13234
		// Backward compatibility, remove me in 1.1.                                                                         // 13235
		return this.collapse();                                                                                              // 13236
	}                                                                                                                     // 13237
                                                                                                                       // 13238
});                                                                                                                    // 13239
                                                                                                                       // 13240
                                                                                                                       // 13241
// @factory L.control.layers(baselayers?: Object, overlays?: Object, options?: Control.Layers options)                 // 13242
// Creates an attribution control with the given layers. Base layers will be switched with radio buttons, while overlays will be switched with checkboxes. Note that all base layers should be passed in the base layers object, but only one should be added to the map during map instantiation.
L.control.layers = function (baseLayers, overlays, options) {                                                          // 13244
	return new L.Control.Layers(baseLayers, overlays, options);                                                           // 13245
};                                                                                                                     // 13246
                                                                                                                       // 13247
                                                                                                                       // 13248
                                                                                                                       // 13249
}(window, document));                                                                                                  // 13250
//# sourceMappingURL=leaflet-src.map                                                                                   // 13251
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet-providers/leaflet-providers.js                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
(function (root, factory) {                                                                                            // 1
	if (typeof define === 'function' && define.amd) {                                                                     // 2
		// AMD. Register as an anonymous module.                                                                             // 3
		define(['leaflet'], factory);                                                                                        // 4
	} else if (typeof modules === 'object' && module.exports) {                                                           // 5
		// define a Common JS module that relies on 'leaflet'                                                                // 6
		module.exports = factory(require('leaflet'));                                                                        // 7
	} else {                                                                                                              // 8
		// Assume Leaflet is loaded into global object L already                                                             // 9
		factory(L);                                                                                                          // 10
	}                                                                                                                     // 11
}(this, function (L) {                                                                                                 // 12
	'use strict';                                                                                                         // 13
                                                                                                                       // 14
	L.TileLayer.Provider = L.TileLayer.extend({                                                                           // 15
		initialize: function (arg, options) {                                                                                // 16
			var providers = L.TileLayer.Provider.providers;                                                                     // 17
                                                                                                                       // 18
			var parts = arg.split('.');                                                                                         // 19
                                                                                                                       // 20
			var providerName = parts[0];                                                                                        // 21
			var variantName = parts[1];                                                                                         // 22
                                                                                                                       // 23
			if (!providers[providerName]) {                                                                                     // 24
				throw 'No such provider (' + providerName + ')';                                                                   // 25
			}                                                                                                                   // 26
                                                                                                                       // 27
			var provider = {                                                                                                    // 28
				url: providers[providerName].url,                                                                                  // 29
				options: providers[providerName].options                                                                           // 30
			};                                                                                                                  // 31
                                                                                                                       // 32
			// overwrite values in provider from variant.                                                                       // 33
			if (variantName && 'variants' in providers[providerName]) {                                                         // 34
				if (!(variantName in providers[providerName].variants)) {                                                          // 35
					throw 'No such variant of ' + providerName + ' (' + variantName + ')';                                            // 36
				}                                                                                                                  // 37
				var variant = providers[providerName].variants[variantName];                                                       // 38
				var variantOptions;                                                                                                // 39
				if (typeof variant === 'string') {                                                                                 // 40
					variantOptions = {                                                                                                // 41
						variant: variant                                                                                                 // 42
					};                                                                                                                // 43
				} else {                                                                                                           // 44
					variantOptions = variant.options;                                                                                 // 45
				}                                                                                                                  // 46
				provider = {                                                                                                       // 47
					url: variant.url || provider.url,                                                                                 // 48
					options: L.Util.extend({}, provider.options, variantOptions)                                                      // 49
				};                                                                                                                 // 50
			}                                                                                                                   // 51
                                                                                                                       // 52
			var forceHTTP = window.location.protocol === 'file:' || provider.options.forceHTTP;                                 // 53
			if (provider.url.indexOf('//') === 0 && forceHTTP) {                                                                // 54
				provider.url = 'http:' + provider.url;                                                                             // 55
			}                                                                                                                   // 56
                                                                                                                       // 57
			// If retina option is set                                                                                          // 58
			if (provider.options.retina) {                                                                                      // 59
				// Check retina screen                                                                                             // 60
				if (options.detectRetina && L.Browser.retina) {                                                                    // 61
					// The retina option will be active now                                                                           // 62
					// But we need to prevent Leaflet retina mode                                                                     // 63
					options.detectRetina = false;                                                                                     // 64
				} else {                                                                                                           // 65
					// No retina, remove option                                                                                       // 66
					provider.options.retina = '';                                                                                     // 67
				}                                                                                                                  // 68
			}                                                                                                                   // 69
                                                                                                                       // 70
			// replace attribution placeholders with their values from toplevel provider attribution,                           // 71
			// recursively                                                                                                      // 72
			var attributionReplacer = function (attr) {                                                                         // 73
				if (attr.indexOf('{attribution.') === -1) {                                                                        // 74
					return attr;                                                                                                      // 75
				}                                                                                                                  // 76
				return attr.replace(/\{attribution.(\w*)\}/,                                                                       // 77
					function (match, attributionName) {                                                                               // 78
						return attributionReplacer(providers[attributionName].options.attribution);                                      // 79
					}                                                                                                                 // 80
				);                                                                                                                 // 81
			};                                                                                                                  // 82
			provider.options.attribution = attributionReplacer(provider.options.attribution);                                   // 83
                                                                                                                       // 84
			// Compute final options combining provider options with any user overrides                                         // 85
			var layerOpts = L.Util.extend({}, provider.options, options);                                                       // 86
			L.TileLayer.prototype.initialize.call(this, provider.url, layerOpts);                                               // 87
		}                                                                                                                    // 88
	});                                                                                                                   // 89
                                                                                                                       // 90
	/**                                                                                                                   // 91
	 * Definition of providers.                                                                                           // 92
	 * see http://leafletjs.com/reference.html#tilelayer for options in the options map.                                  // 93
	 */                                                                                                                   // 94
                                                                                                                       // 95
	L.TileLayer.Provider.providers = {                                                                                    // 96
		OpenStreetMap: {                                                                                                     // 97
			url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',                                                                // 98
			options: {                                                                                                          // 99
				maxZoom: 19,                                                                                                       // 100
				attribution:                                                                                                       // 101
					'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'                                       // 102
			},                                                                                                                  // 103
			variants: {                                                                                                         // 104
				Mapnik: {},                                                                                                        // 105
				BlackAndWhite: {                                                                                                   // 106
					url: 'http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',                                                    // 107
					options: {                                                                                                        // 108
						maxZoom: 18                                                                                                      // 109
					}                                                                                                                 // 110
				},                                                                                                                 // 111
				DE: {                                                                                                              // 112
					url: 'http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png',                                              // 113
					options: {                                                                                                        // 114
						maxZoom: 18                                                                                                      // 115
					}                                                                                                                 // 116
				},                                                                                                                 // 117
				France: {                                                                                                          // 118
					url: '//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png',                                                         // 119
					options: {                                                                                                        // 120
						maxZoom: 20,                                                                                                     // 121
						attribution: '&copy; Openstreetmap France | {attribution.OpenStreetMap}'                                         // 122
					}                                                                                                                 // 123
				},                                                                                                                 // 124
				HOT: {                                                                                                             // 125
					url: '//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',                                                           // 126
					options: {                                                                                                        // 127
						attribution: '{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'
					}                                                                                                                 // 129
				}                                                                                                                  // 130
			}                                                                                                                   // 131
		},                                                                                                                   // 132
		OpenSeaMap: {                                                                                                        // 133
			url: 'http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png',                                                         // 134
			options: {                                                                                                          // 135
				attribution: 'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'                    // 136
			}                                                                                                                   // 137
		},                                                                                                                   // 138
		OpenTopoMap: {                                                                                                       // 139
			url: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png',                                                                  // 140
			options: {                                                                                                          // 141
				maxZoom: 17,                                                                                                       // 142
				attribution: 'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
			}                                                                                                                   // 144
		},                                                                                                                   // 145
		Thunderforest: {                                                                                                     // 146
			url: '//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}',                                      // 147
			options: {                                                                                                          // 148
				attribution:                                                                                                       // 149
					'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, {attribution.OpenStreetMap}',                  // 150
				variant: 'cycle'                                                                                                   // 151
			},                                                                                                                  // 152
			variants: {                                                                                                         // 153
				OpenCycleMap: 'cycle',                                                                                             // 154
				Transport: {                                                                                                       // 155
					options: {                                                                                                        // 156
						variant: 'transport',                                                                                            // 157
						maxZoom: 19                                                                                                      // 158
					}                                                                                                                 // 159
				},                                                                                                                 // 160
				TransportDark: {                                                                                                   // 161
					options: {                                                                                                        // 162
						variant: 'transport-dark',                                                                                       // 163
						maxZoom: 19                                                                                                      // 164
					}                                                                                                                 // 165
				},                                                                                                                 // 166
				SpinalMap: {                                                                                                       // 167
					options: {                                                                                                        // 168
						variant: 'spinal-map',                                                                                           // 169
						maxZoom: 11                                                                                                      // 170
					}                                                                                                                 // 171
				},                                                                                                                 // 172
				Landscape: 'landscape',                                                                                            // 173
				Outdoors: 'outdoors',                                                                                              // 174
				Pioneer: 'pioneer'                                                                                                 // 175
			}                                                                                                                   // 176
		},                                                                                                                   // 177
		OpenMapSurfer: {                                                                                                     // 178
			url: 'http://korona.geog.uni-heidelberg.de/tiles/{variant}/x={x}&y={y}&z={z}',                                      // 179
			options: {                                                                                                          // 180
				maxZoom: 20,                                                                                                       // 181
				variant: 'roads',                                                                                                  // 182
				attribution: 'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'
			},                                                                                                                  // 184
			variants: {                                                                                                         // 185
				Roads: 'roads',                                                                                                    // 186
				AdminBounds: {                                                                                                     // 187
					options: {                                                                                                        // 188
						variant: 'adminb',                                                                                               // 189
						maxZoom: 19                                                                                                      // 190
					}                                                                                                                 // 191
				},                                                                                                                 // 192
				Grayscale: {                                                                                                       // 193
					options: {                                                                                                        // 194
						variant: 'roadsg',                                                                                               // 195
						maxZoom: 19                                                                                                      // 196
					}                                                                                                                 // 197
				}                                                                                                                  // 198
			}                                                                                                                   // 199
		},                                                                                                                   // 200
		Hydda: {                                                                                                             // 201
			url: '//{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png',                                                 // 202
			options: {                                                                                                          // 203
				variant: 'full',                                                                                                   // 204
				attribution: 'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'
			},                                                                                                                  // 206
			variants: {                                                                                                         // 207
				Full: 'full',                                                                                                      // 208
				Base: 'base',                                                                                                      // 209
				RoadsAndLabels: 'roads_and_labels'                                                                                 // 210
			}                                                                                                                   // 211
		},                                                                                                                   // 212
		MapBox: {                                                                                                            // 213
			url: '//api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',                                   // 214
			options: {                                                                                                          // 215
				attribution:                                                                                                       // 216
					'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; ' +                                      // 217
					'Map data {attribution.OpenStreetMap}',                                                                           // 218
				subdomains: 'abcd'                                                                                                 // 219
			}                                                                                                                   // 220
		},                                                                                                                   // 221
		Stamen: {                                                                                                            // 222
			url: '//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}',                                             // 223
			options: {                                                                                                          // 224
				attribution:                                                                                                       // 225
					'Map tiles by <a href="http://stamen.com">Stamen Design</a>, ' +                                                  // 226
					'<a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; ' +                                   // 227
					'Map data {attribution.OpenStreetMap}',                                                                           // 228
				subdomains: 'abcd',                                                                                                // 229
				minZoom: 0,                                                                                                        // 230
				maxZoom: 20,                                                                                                       // 231
				variant: 'toner',                                                                                                  // 232
				ext: 'png'                                                                                                         // 233
			},                                                                                                                  // 234
			variants: {                                                                                                         // 235
				Toner: 'toner',                                                                                                    // 236
				TonerBackground: 'toner-background',                                                                               // 237
				TonerHybrid: 'toner-hybrid',                                                                                       // 238
				TonerLines: 'toner-lines',                                                                                         // 239
				TonerLabels: 'toner-labels',                                                                                       // 240
				TonerLite: 'toner-lite',                                                                                           // 241
				Watercolor: {                                                                                                      // 242
					options: {                                                                                                        // 243
						variant: 'watercolor',                                                                                           // 244
						minZoom: 1,                                                                                                      // 245
						maxZoom: 16                                                                                                      // 246
					}                                                                                                                 // 247
				},                                                                                                                 // 248
				Terrain: {                                                                                                         // 249
					options: {                                                                                                        // 250
						variant: 'terrain',                                                                                              // 251
						minZoom: 0,                                                                                                      // 252
						maxZoom: 18                                                                                                      // 253
					}                                                                                                                 // 254
				},                                                                                                                 // 255
				TerrainBackground: {                                                                                               // 256
					options: {                                                                                                        // 257
						variant: 'terrain-background',                                                                                   // 258
						minZoom: 0,                                                                                                      // 259
						maxZoom: 18                                                                                                      // 260
					}                                                                                                                 // 261
				},                                                                                                                 // 262
				TopOSMRelief: {                                                                                                    // 263
					options: {                                                                                                        // 264
						variant: 'toposm-color-relief',                                                                                  // 265
						ext: 'jpg',                                                                                                      // 266
						bounds: [[22, -132], [51, -56]]                                                                                  // 267
					}                                                                                                                 // 268
				},                                                                                                                 // 269
				TopOSMFeatures: {                                                                                                  // 270
					options: {                                                                                                        // 271
						variant: 'toposm-features',                                                                                      // 272
						bounds: [[22, -132], [51, -56]],                                                                                 // 273
						opacity: 0.9                                                                                                     // 274
					}                                                                                                                 // 275
				}                                                                                                                  // 276
			}                                                                                                                   // 277
		},                                                                                                                   // 278
		Esri: {                                                                                                              // 279
			url: '//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}',                         // 280
			options: {                                                                                                          // 281
				variant: 'World_Street_Map',                                                                                       // 282
				attribution: 'Tiles &copy; Esri'                                                                                   // 283
			},                                                                                                                  // 284
			variants: {                                                                                                         // 285
				WorldStreetMap: {                                                                                                  // 286
					options: {                                                                                                        // 287
						attribution:                                                                                                     // 288
							'{attribution.Esri} &mdash; ' +                                                                                 // 289
							'Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'
					}                                                                                                                 // 291
				},                                                                                                                 // 292
				DeLorme: {                                                                                                         // 293
					options: {                                                                                                        // 294
						variant: 'Specialty/DeLorme_World_Base_Map',                                                                     // 295
						minZoom: 1,                                                                                                      // 296
						maxZoom: 11,                                                                                                     // 297
						attribution: '{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme'                                          // 298
					}                                                                                                                 // 299
				},                                                                                                                 // 300
				WorldTopoMap: {                                                                                                    // 301
					options: {                                                                                                        // 302
						variant: 'World_Topo_Map',                                                                                       // 303
						attribution:                                                                                                     // 304
							'{attribution.Esri} &mdash; ' +                                                                                 // 305
							'Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
					}                                                                                                                 // 307
				},                                                                                                                 // 308
				WorldImagery: {                                                                                                    // 309
					options: {                                                                                                        // 310
						variant: 'World_Imagery',                                                                                        // 311
						attribution:                                                                                                     // 312
							'{attribution.Esri} &mdash; ' +                                                                                 // 313
							'Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
					}                                                                                                                 // 315
				},                                                                                                                 // 316
				WorldTerrain: {                                                                                                    // 317
					options: {                                                                                                        // 318
						variant: 'World_Terrain_Base',                                                                                   // 319
						maxZoom: 13,                                                                                                     // 320
						attribution:                                                                                                     // 321
							'{attribution.Esri} &mdash; ' +                                                                                 // 322
							'Source: USGS, Esri, TANA, DeLorme, and NPS'                                                                    // 323
					}                                                                                                                 // 324
				},                                                                                                                 // 325
				WorldShadedRelief: {                                                                                               // 326
					options: {                                                                                                        // 327
						variant: 'World_Shaded_Relief',                                                                                  // 328
						maxZoom: 13,                                                                                                     // 329
						attribution: '{attribution.Esri} &mdash; Source: Esri'                                                           // 330
					}                                                                                                                 // 331
				},                                                                                                                 // 332
				WorldPhysical: {                                                                                                   // 333
					options: {                                                                                                        // 334
						variant: 'World_Physical_Map',                                                                                   // 335
						maxZoom: 8,                                                                                                      // 336
						attribution: '{attribution.Esri} &mdash; Source: US National Park Service'                                       // 337
					}                                                                                                                 // 338
				},                                                                                                                 // 339
				OceanBasemap: {                                                                                                    // 340
					options: {                                                                                                        // 341
						variant: 'Ocean_Basemap',                                                                                        // 342
						maxZoom: 13,                                                                                                     // 343
						attribution: '{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri'
					}                                                                                                                 // 345
				},                                                                                                                 // 346
				NatGeoWorldMap: {                                                                                                  // 347
					options: {                                                                                                        // 348
						variant: 'NatGeo_World_Map',                                                                                     // 349
						maxZoom: 16,                                                                                                     // 350
						attribution: '{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC'
					}                                                                                                                 // 352
				},                                                                                                                 // 353
				WorldGrayCanvas: {                                                                                                 // 354
					options: {                                                                                                        // 355
						variant: 'Canvas/World_Light_Gray_Base',                                                                         // 356
						maxZoom: 16,                                                                                                     // 357
						attribution: '{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ'                                                  // 358
					}                                                                                                                 // 359
				}                                                                                                                  // 360
			}                                                                                                                   // 361
		},                                                                                                                   // 362
		OpenWeatherMap: {                                                                                                    // 363
			url: 'http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png',                                            // 364
			options: {                                                                                                          // 365
				maxZoom: 19,                                                                                                       // 366
				attribution: 'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',                             // 367
				opacity: 0.5                                                                                                       // 368
			},                                                                                                                  // 369
			variants: {                                                                                                         // 370
				Clouds: 'clouds',                                                                                                  // 371
				CloudsClassic: 'clouds_cls',                                                                                       // 372
				Precipitation: 'precipitation',                                                                                    // 373
				PrecipitationClassic: 'precipitation_cls',                                                                         // 374
				Rain: 'rain',                                                                                                      // 375
				RainClassic: 'rain_cls',                                                                                           // 376
				Pressure: 'pressure',                                                                                              // 377
				PressureContour: 'pressure_cntr',                                                                                  // 378
				Wind: 'wind',                                                                                                      // 379
				Temperature: 'temp',                                                                                               // 380
				Snow: 'snow'                                                                                                       // 381
			}                                                                                                                   // 382
		},                                                                                                                   // 383
		HERE: {                                                                                                              // 384
			/*                                                                                                                  // 385
			 * HERE maps, formerly Nokia maps.                                                                                  // 386
			 * These basemaps are free, but you need an API key. Please sign up at                                              // 387
			 * http://developer.here.com/getting-started                                                                        // 388
			 *                                                                                                                  // 389
			 * Note that the base urls contain '.cit' whichs is HERE's                                                          // 390
			 * 'Customer Integration Testing' environment. Please remove for production                                         // 391
			 * envirionments.                                                                                                   // 392
			 */                                                                                                                 // 393
			url:                                                                                                                // 394
				'//{s}.{base}.maps.cit.api.here.com/maptile/2.1/' +                                                                // 395
				'{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?' +                                                          // 396
				'app_id={app_id}&app_code={app_code}&lg={language}',                                                               // 397
			options: {                                                                                                          // 398
				attribution:                                                                                                       // 399
					'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',                                              // 400
				subdomains: '1234',                                                                                                // 401
				mapID: 'newest',                                                                                                   // 402
				'app_id': '<insert your app_id here>',                                                                             // 403
				'app_code': '<insert your app_code here>',                                                                         // 404
				base: 'base',                                                                                                      // 405
				variant: 'normal.day',                                                                                             // 406
				maxZoom: 20,                                                                                                       // 407
				type: 'maptile',                                                                                                   // 408
				language: 'eng',                                                                                                   // 409
				format: 'png8',                                                                                                    // 410
				size: '256'                                                                                                        // 411
			},                                                                                                                  // 412
			variants: {                                                                                                         // 413
				normalDay: 'normal.day',                                                                                           // 414
				normalDayCustom: 'normal.day.custom',                                                                              // 415
				normalDayGrey: 'normal.day.grey',                                                                                  // 416
				normalDayMobile: 'normal.day.mobile',                                                                              // 417
				normalDayGreyMobile: 'normal.day.grey.mobile',                                                                     // 418
				normalDayTransit: 'normal.day.transit',                                                                            // 419
				normalDayTransitMobile: 'normal.day.transit.mobile',                                                               // 420
				normalNight: 'normal.night',                                                                                       // 421
				normalNightMobile: 'normal.night.mobile',                                                                          // 422
				normalNightGrey: 'normal.night.grey',                                                                              // 423
				normalNightGreyMobile: 'normal.night.grey.mobile',                                                                 // 424
                                                                                                                       // 425
				basicMap: {                                                                                                        // 426
					options: {                                                                                                        // 427
						type: 'basetile'                                                                                                 // 428
					}                                                                                                                 // 429
				},                                                                                                                 // 430
				mapLabels: {                                                                                                       // 431
					options: {                                                                                                        // 432
						type: 'labeltile',                                                                                               // 433
						format: 'png'                                                                                                    // 434
					}                                                                                                                 // 435
				},                                                                                                                 // 436
				trafficFlow: {                                                                                                     // 437
					options: {                                                                                                        // 438
						base: 'traffic',                                                                                                 // 439
						type: 'flowtile'                                                                                                 // 440
					}                                                                                                                 // 441
				},                                                                                                                 // 442
				carnavDayGrey: 'carnav.day.grey',                                                                                  // 443
				hybridDay: {                                                                                                       // 444
					options: {                                                                                                        // 445
						base: 'aerial',                                                                                                  // 446
						variant: 'hybrid.day'                                                                                            // 447
					}                                                                                                                 // 448
				},                                                                                                                 // 449
				hybridDayMobile: {                                                                                                 // 450
					options: {                                                                                                        // 451
						base: 'aerial',                                                                                                  // 452
						variant: 'hybrid.day.mobile'                                                                                     // 453
					}                                                                                                                 // 454
				},                                                                                                                 // 455
				pedestrianDay: 'pedestrian.day',                                                                                   // 456
				pedestrianNight: 'pedestrian.night',                                                                               // 457
				satelliteDay: {                                                                                                    // 458
					options: {                                                                                                        // 459
						base: 'aerial',                                                                                                  // 460
						variant: 'satellite.day'                                                                                         // 461
					}                                                                                                                 // 462
				},                                                                                                                 // 463
				terrainDay: {                                                                                                      // 464
					options: {                                                                                                        // 465
						base: 'aerial',                                                                                                  // 466
						variant: 'terrain.day'                                                                                           // 467
					}                                                                                                                 // 468
				},                                                                                                                 // 469
				terrainDayMobile: {                                                                                                // 470
					options: {                                                                                                        // 471
						base: 'aerial',                                                                                                  // 472
						variant: 'terrain.day.mobile'                                                                                    // 473
					}                                                                                                                 // 474
				}                                                                                                                  // 475
			}                                                                                                                   // 476
		},                                                                                                                   // 477
		FreeMapSK: {                                                                                                         // 478
			url: 'http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg',                                                                   // 479
			options: {                                                                                                          // 480
				minZoom: 8,                                                                                                        // 481
				maxZoom: 16,                                                                                                       // 482
				subdomains: '1234',                                                                                                // 483
				bounds: [[47.204642, 15.996093], [49.830896, 22.576904]],                                                          // 484
				attribution:                                                                                                       // 485
					'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'              // 486
			}                                                                                                                   // 487
		},                                                                                                                   // 488
		MtbMap: {                                                                                                            // 489
			url: 'http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png',                                                          // 490
			options: {                                                                                                          // 491
				attribution:                                                                                                       // 492
					'{attribution.OpenStreetMap} &amp; USGS'                                                                          // 493
			}                                                                                                                   // 494
		},                                                                                                                   // 495
		CartoDB: {                                                                                                           // 496
			url: 'http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png',                                                  // 497
			options: {                                                                                                          // 498
				attribution: '{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',           // 499
				subdomains: 'abcd',                                                                                                // 500
				maxZoom: 19,                                                                                                       // 501
				variant: 'light_all'                                                                                               // 502
			},                                                                                                                  // 503
			variants: {                                                                                                         // 504
				Positron: 'light_all',                                                                                             // 505
				PositronNoLabels: 'light_nolabels',                                                                                // 506
				PositronOnlyLabels: 'light_only_labels',                                                                           // 507
				DarkMatter: 'dark_all',                                                                                            // 508
				DarkMatterNoLabels: 'dark_nolabels',                                                                               // 509
				DarkMatterOnlyLabels: 'dark_only_labels'                                                                           // 510
			}                                                                                                                   // 511
		},                                                                                                                   // 512
		HikeBike: {                                                                                                          // 513
			url: 'http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png',                                                      // 514
			options: {                                                                                                          // 515
				maxZoom: 19,                                                                                                       // 516
				attribution: '{attribution.OpenStreetMap}',                                                                        // 517
				variant: 'hikebike'                                                                                                // 518
			},                                                                                                                  // 519
			variants: {                                                                                                         // 520
				HikeBike: {},                                                                                                      // 521
				HillShading: {                                                                                                     // 522
					options: {                                                                                                        // 523
						maxZoom: 15,                                                                                                     // 524
						variant: 'hillshading'                                                                                           // 525
					}                                                                                                                 // 526
				}                                                                                                                  // 527
			}                                                                                                                   // 528
		},                                                                                                                   // 529
		BasemapAT: {                                                                                                         // 530
			url: 'https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}',                         // 531
			options: {                                                                                                          // 532
				maxZoom: 19,                                                                                                       // 533
				attribution: 'Datenquelle: <a href="www.basemap.at">basemap.at</a>',                                               // 534
				subdomains: ['', '1', '2', '3', '4'],                                                                              // 535
				format: 'png',                                                                                                     // 536
				bounds: [[46.358770, 8.782379], [49.037872, 17.189532]],                                                           // 537
				variant: 'geolandbasemap'                                                                                          // 538
			},                                                                                                                  // 539
			variants: {                                                                                                         // 540
				basemap: {                                                                                                         // 541
					options: {                                                                                                        // 542
						maxZoom: 20, // currently only in Vienna                                                                         // 543
						variant: 'geolandbasemap'                                                                                        // 544
					}                                                                                                                 // 545
				},                                                                                                                 // 546
				grau: 'bmapgrau',                                                                                                  // 547
				overlay: 'bmapoverlay',                                                                                            // 548
				highdpi: {                                                                                                         // 549
					options: {                                                                                                        // 550
						variant: 'bmaphidpi',                                                                                            // 551
						format: 'jpeg'                                                                                                   // 552
					}                                                                                                                 // 553
				},                                                                                                                 // 554
				orthofoto: {                                                                                                       // 555
					options: {                                                                                                        // 556
						maxZoom: 20, // currently only in Vienna                                                                         // 557
						variant: 'bmaporthofoto30cm',                                                                                    // 558
						format: 'jpeg'                                                                                                   // 559
					}                                                                                                                 // 560
				}                                                                                                                  // 561
			}                                                                                                                   // 562
		},                                                                                                                   // 563
		NASAGIBS: {                                                                                                          // 564
			url: '//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}',
			options: {                                                                                                          // 566
				attribution:                                                                                                       // 567
					'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System ' +
					'(<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',                             // 569
				bounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],                                        // 570
				minZoom: 1,                                                                                                        // 571
				maxZoom: 9,                                                                                                        // 572
				format: 'jpg',                                                                                                     // 573
				time: '',                                                                                                          // 574
				tilematrixset: 'GoogleMapsCompatible_Level'                                                                        // 575
			},                                                                                                                  // 576
			variants: {                                                                                                         // 577
				ModisTerraTrueColorCR: 'MODIS_Terra_CorrectedReflectance_TrueColor',                                               // 578
				ModisTerraBands367CR: 'MODIS_Terra_CorrectedReflectance_Bands367',                                                 // 579
				ViirsEarthAtNight2012: {                                                                                           // 580
					options: {                                                                                                        // 581
						variant: 'VIIRS_CityLights_2012',                                                                                // 582
						maxZoom: 8                                                                                                       // 583
					}                                                                                                                 // 584
				},                                                                                                                 // 585
				ModisTerraLSTDay: {                                                                                                // 586
					options: {                                                                                                        // 587
						variant: 'MODIS_Terra_Land_Surface_Temp_Day',                                                                    // 588
						format: 'png',                                                                                                   // 589
						maxZoom: 7,                                                                                                      // 590
						opacity: 0.75                                                                                                    // 591
					}                                                                                                                 // 592
				},                                                                                                                 // 593
				ModisTerraSnowCover: {                                                                                             // 594
					options: {                                                                                                        // 595
						variant: 'MODIS_Terra_Snow_Cover',                                                                               // 596
						format: 'png',                                                                                                   // 597
						maxZoom: 8,                                                                                                      // 598
						opacity: 0.75                                                                                                    // 599
					}                                                                                                                 // 600
				},                                                                                                                 // 601
				ModisTerraAOD: {                                                                                                   // 602
					options: {                                                                                                        // 603
						variant: 'MODIS_Terra_Aerosol',                                                                                  // 604
						format: 'png',                                                                                                   // 605
						maxZoom: 6,                                                                                                      // 606
						opacity: 0.75                                                                                                    // 607
					}                                                                                                                 // 608
				},                                                                                                                 // 609
				ModisTerraChlorophyll: {                                                                                           // 610
					options: {                                                                                                        // 611
						variant: 'MODIS_Terra_Chlorophyll_A',                                                                            // 612
						format: 'png',                                                                                                   // 613
						maxZoom: 7,                                                                                                      // 614
						opacity: 0.75                                                                                                    // 615
					}                                                                                                                 // 616
				}                                                                                                                  // 617
			}                                                                                                                   // 618
		},                                                                                                                   // 619
		NLS: {                                                                                                               // 620
			// NLS maps are copyright National library of Scotland.                                                             // 621
			// http://maps.nls.uk/projects/api/index.html                                                                       // 622
			// Please contact NLS for anything other than non-commercial low volume usage                                       // 623
			//                                                                                                                  // 624
			// Map sources: Ordnance Survey 1:1m to 1:63K, 1920s-1940s                                                          // 625
			//   z0-9  - 1:1m                                                                                                   // 626
			//  z10-11 - quarter inch (1:253440)                                                                                // 627
			//  z12-18 - one inch (1:63360)                                                                                     // 628
			url: '//nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg',                                                                // 629
			options: {                                                                                                          // 630
				attribution: '<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',                   // 631
				bounds: [[49.6, -12], [61.7, 3]],                                                                                  // 632
				minZoom: 1,                                                                                                        // 633
				maxZoom: 18,                                                                                                       // 634
				subdomains: '0123',                                                                                                // 635
			}                                                                                                                   // 636
		},                                                                                                                   // 637
		JusticeMap: {                                                                                                        // 638
			// Justice Map (http://www.justicemap.org/)                                                                         // 639
			// Visualize race and income data for your community, county and country.                                           // 640
			// Includes tools for data journalists, bloggers and community activists.                                           // 641
			url: 'http://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png',                                             // 642
			options: {                                                                                                          // 643
				attribution: '<a href="http://www.justicemap.org/terms.php">Justice Map</a>',                                      // 644
				// one of 'county', 'tract', 'block'                                                                               // 645
				size: 'county',                                                                                                    // 646
				// Bounds for USA, including Alaska and Hawaii                                                                     // 647
				bounds: [[14, -180], [72, -56]]                                                                                    // 648
			},                                                                                                                  // 649
			variants: {                                                                                                         // 650
				income: 'income',                                                                                                  // 651
				americanIndian: 'indian',                                                                                          // 652
				asian: 'asian',                                                                                                    // 653
				black: 'black',                                                                                                    // 654
				hispanic: 'hispanic',                                                                                              // 655
				multi: 'multi',                                                                                                    // 656
				nonWhite: 'nonwhite',                                                                                              // 657
				white: 'white',                                                                                                    // 658
				plurality: 'plural'                                                                                                // 659
			}                                                                                                                   // 660
		}                                                                                                                    // 661
	};                                                                                                                    // 662
                                                                                                                       // 663
	L.tileLayer.provider = function (provider, options) {                                                                 // 664
		return new L.TileLayer.Provider(provider, options);                                                                  // 665
	};                                                                                                                    // 666
                                                                                                                       // 667
	return L;                                                                                                             // 668
}));                                                                                                                   // 669
                                                                                                                       // 670
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet.markercluster/dist/leaflet.markercluster-src.js        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/*                                                                                                                     // 1
 Leaflet.markercluster, Provides Beautiful Animated Marker Clustering functionality for Leaflet, a JS library for interactive maps.
 https://github.com/Leaflet/Leaflet.markercluster                                                                      // 3
 (c) 2012-2013, Dave Leaver, smartrak                                                                                  // 4
*/                                                                                                                     // 5
(function (window, document, undefined) {/*                                                                            // 6
 * L.MarkerClusterGroup extends L.FeatureGroup by clustering the markers contained within                              // 7
 */                                                                                                                    // 8
                                                                                                                       // 9
L.MarkerClusterGroup = L.FeatureGroup.extend({                                                                         // 10
                                                                                                                       // 11
	options: {                                                                                                            // 12
		maxClusterRadius: 80, //A cluster will cover at most this many pixels from its center                                // 13
		iconCreateFunction: null,                                                                                            // 14
                                                                                                                       // 15
		spiderfyOnMaxZoom: true,                                                                                             // 16
		showCoverageOnHover: true,                                                                                           // 17
		zoomToBoundsOnClick: true,                                                                                           // 18
		singleMarkerMode: false,                                                                                             // 19
                                                                                                                       // 20
		disableClusteringAtZoom: null,                                                                                       // 21
                                                                                                                       // 22
		// Setting this to false prevents the removal of any clusters outside of the viewpoint, which                        // 23
		// is the default behaviour for performance reasons.                                                                 // 24
		removeOutsideVisibleBounds: true,                                                                                    // 25
                                                                                                                       // 26
		// Set to false to disable all animations (zoom and spiderfy).                                                       // 27
		// If false, option animateAddingMarkers below has no effect.                                                        // 28
		// If L.DomUtil.TRANSITION is falsy, this option has no effect.                                                      // 29
		animate: true,                                                                                                       // 30
                                                                                                                       // 31
		//Whether to animate adding markers after adding the MarkerClusterGroup to the map                                   // 32
		// If you are adding individual markers set to true, if adding bulk markers leave false for massive performance gains.
		animateAddingMarkers: false,                                                                                         // 34
                                                                                                                       // 35
		//Increase to increase the distance away that spiderfied markers appear from the center                              // 36
		spiderfyDistanceMultiplier: 1,                                                                                       // 37
                                                                                                                       // 38
		// Make it possible to specify a polyline options on a spider leg                                                    // 39
		spiderLegPolylineOptions: { weight: 1.5, color: '#222', opacity: 0.5 },                                              // 40
                                                                                                                       // 41
		// When bulk adding layers, adds markers in chunks. Means addLayers may not add all the layers in the call, others will be loaded during setTimeouts
		chunkedLoading: false,                                                                                               // 43
		chunkInterval: 200, // process markers for a maximum of ~ n milliseconds (then trigger the chunkProgress callback)   // 44
		chunkDelay: 50, // at the end of each interval, give n milliseconds back to system/browser                           // 45
		chunkProgress: null, // progress callback: function(processed, total, elapsed) (e.g. for a progress indicator)       // 46
                                                                                                                       // 47
		//Options to pass to the L.Polygon constructor                                                                       // 48
		polygonOptions: {}                                                                                                   // 49
	},                                                                                                                    // 50
                                                                                                                       // 51
	initialize: function (options) {                                                                                      // 52
		L.Util.setOptions(this, options);                                                                                    // 53
		if (!this.options.iconCreateFunction) {                                                                              // 54
			this.options.iconCreateFunction = this._defaultIconCreateFunction;                                                  // 55
		}                                                                                                                    // 56
                                                                                                                       // 57
		this._featureGroup = L.featureGroup();                                                                               // 58
		this._featureGroup.addEventParent(this);                                                                             // 59
                                                                                                                       // 60
		this._nonPointGroup = L.featureGroup();                                                                              // 61
		this._nonPointGroup.addEventParent(this);                                                                            // 62
                                                                                                                       // 63
		this._inZoomAnimation = 0;                                                                                           // 64
		this._needsClustering = [];                                                                                          // 65
		this._needsRemoving = []; //Markers removed while we aren't on the map need to be kept track of                      // 66
		//The bounds of the currently shown area (from _getExpandedVisibleBounds) Updated on zoom/move                       // 67
		this._currentShownBounds = null;                                                                                     // 68
                                                                                                                       // 69
		this._queue = [];                                                                                                    // 70
                                                                                                                       // 71
		this._childMarkerEventHandlers = {                                                                                   // 72
			'dragstart': this._childMarkerDragStart,                                                                            // 73
			'move': this._childMarkerMoved,                                                                                     // 74
			'dragend': this._childMarkerDragEnd,                                                                                // 75
		};                                                                                                                   // 76
                                                                                                                       // 77
		// Hook the appropriate animation methods.                                                                           // 78
		var animate = L.DomUtil.TRANSITION && this.options.animate;                                                          // 79
		L.extend(this, animate ? this._withAnimation : this._noAnimation);                                                   // 80
		// Remember which MarkerCluster class to instantiate (animated or not).                                              // 81
		this._markerCluster = animate ? L.MarkerCluster : L.MarkerClusterNonAnimated;                                        // 82
	},                                                                                                                    // 83
                                                                                                                       // 84
	addLayer: function (layer) {                                                                                          // 85
                                                                                                                       // 86
		if (layer instanceof L.LayerGroup) {                                                                                 // 87
			return this.addLayers([layer]);                                                                                     // 88
		}                                                                                                                    // 89
                                                                                                                       // 90
		//Don't cluster non point data                                                                                       // 91
		if (!layer.getLatLng) {                                                                                              // 92
			this._nonPointGroup.addLayer(layer);                                                                                // 93
			this.fire('layeradd', { layer: layer });                                                                            // 94
			return this;                                                                                                        // 95
		}                                                                                                                    // 96
                                                                                                                       // 97
		if (!this._map) {                                                                                                    // 98
			this._needsClustering.push(layer);                                                                                  // 99
			this.fire('layeradd', { layer: layer });                                                                            // 100
			return this;                                                                                                        // 101
		}                                                                                                                    // 102
                                                                                                                       // 103
		if (this.hasLayer(layer)) {                                                                                          // 104
			return this;                                                                                                        // 105
		}                                                                                                                    // 106
                                                                                                                       // 107
                                                                                                                       // 108
		//If we have already clustered we'll need to add this one to a cluster                                               // 109
                                                                                                                       // 110
		if (this._unspiderfy) {                                                                                              // 111
			this._unspiderfy();                                                                                                 // 112
		}                                                                                                                    // 113
                                                                                                                       // 114
		this._addLayer(layer, this._maxZoom);                                                                                // 115
		this.fire('layeradd', { layer: layer });                                                                             // 116
                                                                                                                       // 117
		// Refresh bounds and weighted positions.                                                                            // 118
		this._topClusterLevel._recalculateBounds();                                                                          // 119
                                                                                                                       // 120
		this._refreshClustersIcons();                                                                                        // 121
                                                                                                                       // 122
		//Work out what is visible                                                                                           // 123
		var visibleLayer = layer,                                                                                            // 124
		    currentZoom = this._zoom;                                                                                        // 125
		if (layer.__parent) {                                                                                                // 126
			while (visibleLayer.__parent._zoom >= currentZoom) {                                                                // 127
				visibleLayer = visibleLayer.__parent;                                                                              // 128
			}                                                                                                                   // 129
		}                                                                                                                    // 130
                                                                                                                       // 131
		if (this._currentShownBounds.contains(visibleLayer.getLatLng())) {                                                   // 132
			if (this.options.animateAddingMarkers) {                                                                            // 133
				this._animationAddLayer(layer, visibleLayer);                                                                      // 134
			} else {                                                                                                            // 135
				this._animationAddLayerNonAnimated(layer, visibleLayer);                                                           // 136
			}                                                                                                                   // 137
		}                                                                                                                    // 138
		return this;                                                                                                         // 139
	},                                                                                                                    // 140
                                                                                                                       // 141
	removeLayer: function (layer) {                                                                                       // 142
                                                                                                                       // 143
		if (layer instanceof L.LayerGroup) {                                                                                 // 144
			return this.removeLayers([layer]);                                                                                  // 145
		}                                                                                                                    // 146
                                                                                                                       // 147
		//Non point layers                                                                                                   // 148
		if (!layer.getLatLng) {                                                                                              // 149
			this._nonPointGroup.removeLayer(layer);                                                                             // 150
			this.fire('layerremove', { layer: layer });                                                                         // 151
			return this;                                                                                                        // 152
		}                                                                                                                    // 153
                                                                                                                       // 154
		if (!this._map) {                                                                                                    // 155
			if (!this._arraySplice(this._needsClustering, layer) && this.hasLayer(layer)) {                                     // 156
				this._needsRemoving.push(layer);                                                                                   // 157
			}                                                                                                                   // 158
			this.fire('layerremove', { layer: layer });                                                                         // 159
			return this;                                                                                                        // 160
		}                                                                                                                    // 161
                                                                                                                       // 162
		if (!layer.__parent) {                                                                                               // 163
			return this;                                                                                                        // 164
		}                                                                                                                    // 165
                                                                                                                       // 166
		if (this._unspiderfy) {                                                                                              // 167
			this._unspiderfy();                                                                                                 // 168
			this._unspiderfyLayer(layer);                                                                                       // 169
		}                                                                                                                    // 170
                                                                                                                       // 171
		//Remove the marker from clusters                                                                                    // 172
		this._removeLayer(layer, true);                                                                                      // 173
		this.fire('layerremove', { layer: layer });                                                                          // 174
                                                                                                                       // 175
		// Refresh bounds and weighted positions.                                                                            // 176
		this._topClusterLevel._recalculateBounds();                                                                          // 177
                                                                                                                       // 178
		this._refreshClustersIcons();                                                                                        // 179
                                                                                                                       // 180
		layer.off(this._childMarkerEventHandlers, this);                                                                     // 181
                                                                                                                       // 182
		if (this._featureGroup.hasLayer(layer)) {                                                                            // 183
			this._featureGroup.removeLayer(layer);                                                                              // 184
			if (layer.clusterShow) {                                                                                            // 185
				layer.clusterShow();                                                                                               // 186
			}                                                                                                                   // 187
		}                                                                                                                    // 188
                                                                                                                       // 189
		return this;                                                                                                         // 190
	},                                                                                                                    // 191
                                                                                                                       // 192
	//Takes an array of markers and adds them in bulk                                                                     // 193
	addLayers: function (layersArray, skipLayerAddEvent) {                                                                // 194
		if (!L.Util.isArray(layersArray)) {                                                                                  // 195
			return this.addLayer(layersArray);                                                                                  // 196
		}                                                                                                                    // 197
                                                                                                                       // 198
		var fg = this._featureGroup,                                                                                         // 199
		    npg = this._nonPointGroup,                                                                                       // 200
		    chunked = this.options.chunkedLoading,                                                                           // 201
		    chunkInterval = this.options.chunkInterval,                                                                      // 202
		    chunkProgress = this.options.chunkProgress,                                                                      // 203
		    l = layersArray.length,                                                                                          // 204
		    offset = 0,                                                                                                      // 205
		    originalArray = true,                                                                                            // 206
		    m;                                                                                                               // 207
                                                                                                                       // 208
		if (this._map) {                                                                                                     // 209
			var started = (new Date()).getTime();                                                                               // 210
			var process = L.bind(function () {                                                                                  // 211
				var start = (new Date()).getTime();                                                                                // 212
				for (; offset < l; offset++) {                                                                                     // 213
					if (chunked && offset % 200 === 0) {                                                                              // 214
						// every couple hundred markers, instrument the time elapsed since processing started:                           // 215
						var elapsed = (new Date()).getTime() - start;                                                                    // 216
						if (elapsed > chunkInterval) {                                                                                   // 217
							break; // been working too hard, time to take a break :-)                                                       // 218
						}                                                                                                                // 219
					}                                                                                                                 // 220
                                                                                                                       // 221
					m = layersArray[offset];                                                                                          // 222
                                                                                                                       // 223
					// Group of layers, append children to layersArray and skip.                                                      // 224
					// Side effects:                                                                                                  // 225
					// - Total increases, so chunkProgress ratio jumps backward.                                                      // 226
					// - Groups are not included in this group, only their non-group child layers (hasLayer).                         // 227
					// Changing array length while looping does not affect performance in current browsers:                           // 228
					// http://jsperf.com/for-loop-changing-length/6                                                                   // 229
					if (m instanceof L.LayerGroup) {                                                                                  // 230
						if (originalArray) {                                                                                             // 231
							layersArray = layersArray.slice();                                                                              // 232
							originalArray = false;                                                                                          // 233
						}                                                                                                                // 234
						this._extractNonGroupLayers(m, layersArray);                                                                     // 235
						l = layersArray.length;                                                                                          // 236
						continue;                                                                                                        // 237
					}                                                                                                                 // 238
                                                                                                                       // 239
					//Not point data, can't be clustered                                                                              // 240
					if (!m.getLatLng) {                                                                                               // 241
						npg.addLayer(m);                                                                                                 // 242
						if (!skipLayerAddEvent) {                                                                                        // 243
							this.fire('layeradd', { layer: m });                                                                            // 244
						}                                                                                                                // 245
						continue;                                                                                                        // 246
					}                                                                                                                 // 247
                                                                                                                       // 248
					if (this.hasLayer(m)) {                                                                                           // 249
						continue;                                                                                                        // 250
					}                                                                                                                 // 251
                                                                                                                       // 252
					this._addLayer(m, this._maxZoom);                                                                                 // 253
					if (!skipLayerAddEvent) {                                                                                         // 254
						this.fire('layeradd', { layer: m });                                                                             // 255
					}                                                                                                                 // 256
                                                                                                                       // 257
					//If we just made a cluster of size 2 then we need to remove the other marker from the map (if it is) or we never will
					if (m.__parent) {                                                                                                 // 259
						if (m.__parent.getChildCount() === 2) {                                                                          // 260
							var markers = m.__parent.getAllChildMarkers(),                                                                  // 261
							    otherMarker = markers[0] === m ? markers[1] : markers[0];                                                   // 262
							fg.removeLayer(otherMarker);                                                                                    // 263
						}                                                                                                                // 264
					}                                                                                                                 // 265
				}                                                                                                                  // 266
                                                                                                                       // 267
				if (chunkProgress) {                                                                                               // 268
					// report progress and time elapsed:                                                                              // 269
					chunkProgress(offset, l, (new Date()).getTime() - started);                                                       // 270
				}                                                                                                                  // 271
                                                                                                                       // 272
				// Completed processing all markers.                                                                               // 273
				if (offset === l) {                                                                                                // 274
                                                                                                                       // 275
					// Refresh bounds and weighted positions.                                                                         // 276
					this._topClusterLevel._recalculateBounds();                                                                       // 277
                                                                                                                       // 278
					this._refreshClustersIcons();                                                                                     // 279
                                                                                                                       // 280
					this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);                   // 281
				} else {                                                                                                           // 282
					setTimeout(process, this.options.chunkDelay);                                                                     // 283
				}                                                                                                                  // 284
			}, this);                                                                                                           // 285
                                                                                                                       // 286
			process();                                                                                                          // 287
		} else {                                                                                                             // 288
			var needsClustering = this._needsClustering;                                                                        // 289
                                                                                                                       // 290
			for (; offset < l; offset++) {                                                                                      // 291
				m = layersArray[offset];                                                                                           // 292
                                                                                                                       // 293
				// Group of layers, append children to layersArray and skip.                                                       // 294
				if (m instanceof L.LayerGroup) {                                                                                   // 295
					if (originalArray) {                                                                                              // 296
						layersArray = layersArray.slice();                                                                               // 297
						originalArray = false;                                                                                           // 298
					}                                                                                                                 // 299
					this._extractNonGroupLayers(m, layersArray);                                                                      // 300
					l = layersArray.length;                                                                                           // 301
					continue;                                                                                                         // 302
				}                                                                                                                  // 303
                                                                                                                       // 304
				//Not point data, can't be clustered                                                                               // 305
				if (!m.getLatLng) {                                                                                                // 306
					npg.addLayer(m);                                                                                                  // 307
					continue;                                                                                                         // 308
				}                                                                                                                  // 309
                                                                                                                       // 310
				if (this.hasLayer(m)) {                                                                                            // 311
					continue;                                                                                                         // 312
				}                                                                                                                  // 313
                                                                                                                       // 314
				needsClustering.push(m);                                                                                           // 315
			}                                                                                                                   // 316
		}                                                                                                                    // 317
		return this;                                                                                                         // 318
	},                                                                                                                    // 319
                                                                                                                       // 320
	//Takes an array of markers and removes them in bulk                                                                  // 321
	removeLayers: function (layersArray) {                                                                                // 322
		var i, m,                                                                                                            // 323
		    l = layersArray.length,                                                                                          // 324
		    fg = this._featureGroup,                                                                                         // 325
		    npg = this._nonPointGroup,                                                                                       // 326
		    originalArray = true;                                                                                            // 327
                                                                                                                       // 328
		if (!this._map) {                                                                                                    // 329
			for (i = 0; i < l; i++) {                                                                                           // 330
				m = layersArray[i];                                                                                                // 331
                                                                                                                       // 332
				// Group of layers, append children to layersArray and skip.                                                       // 333
				if (m instanceof L.LayerGroup) {                                                                                   // 334
					if (originalArray) {                                                                                              // 335
						layersArray = layersArray.slice();                                                                               // 336
						originalArray = false;                                                                                           // 337
					}                                                                                                                 // 338
					this._extractNonGroupLayers(m, layersArray);                                                                      // 339
					l = layersArray.length;                                                                                           // 340
					continue;                                                                                                         // 341
				}                                                                                                                  // 342
                                                                                                                       // 343
				this._arraySplice(this._needsClustering, m);                                                                       // 344
				npg.removeLayer(m);                                                                                                // 345
				if (this.hasLayer(m)) {                                                                                            // 346
					this._needsRemoving.push(m);                                                                                      // 347
				}                                                                                                                  // 348
				this.fire('layerremove', { layer: m });                                                                            // 349
			}                                                                                                                   // 350
			return this;                                                                                                        // 351
		}                                                                                                                    // 352
                                                                                                                       // 353
		if (this._unspiderfy) {                                                                                              // 354
			this._unspiderfy();                                                                                                 // 355
                                                                                                                       // 356
			// Work on a copy of the array, so that next loop is not affected.                                                  // 357
			var layersArray2 = layersArray.slice(),                                                                             // 358
			    l2 = l;                                                                                                         // 359
			for (i = 0; i < l2; i++) {                                                                                          // 360
				m = layersArray2[i];                                                                                               // 361
                                                                                                                       // 362
				// Group of layers, append children to layersArray and skip.                                                       // 363
				if (m instanceof L.LayerGroup) {                                                                                   // 364
					this._extractNonGroupLayers(m, layersArray2);                                                                     // 365
					l2 = layersArray2.length;                                                                                         // 366
					continue;                                                                                                         // 367
				}                                                                                                                  // 368
                                                                                                                       // 369
				this._unspiderfyLayer(m);                                                                                          // 370
			}                                                                                                                   // 371
		}                                                                                                                    // 372
                                                                                                                       // 373
		for (i = 0; i < l; i++) {                                                                                            // 374
			m = layersArray[i];                                                                                                 // 375
                                                                                                                       // 376
			// Group of layers, append children to layersArray and skip.                                                        // 377
			if (m instanceof L.LayerGroup) {                                                                                    // 378
				if (originalArray) {                                                                                               // 379
					layersArray = layersArray.slice();                                                                                // 380
					originalArray = false;                                                                                            // 381
				}                                                                                                                  // 382
				this._extractNonGroupLayers(m, layersArray);                                                                       // 383
				l = layersArray.length;                                                                                            // 384
				continue;                                                                                                          // 385
			}                                                                                                                   // 386
                                                                                                                       // 387
			if (!m.__parent) {                                                                                                  // 388
				npg.removeLayer(m);                                                                                                // 389
				this.fire('layerremove', { layer: m });                                                                            // 390
				continue;                                                                                                          // 391
			}                                                                                                                   // 392
                                                                                                                       // 393
			this._removeLayer(m, true, true);                                                                                   // 394
			this.fire('layerremove', { layer: m });                                                                             // 395
                                                                                                                       // 396
			if (fg.hasLayer(m)) {                                                                                               // 397
				fg.removeLayer(m);                                                                                                 // 398
				if (m.clusterShow) {                                                                                               // 399
					m.clusterShow();                                                                                                  // 400
				}                                                                                                                  // 401
			}                                                                                                                   // 402
		}                                                                                                                    // 403
                                                                                                                       // 404
		// Refresh bounds and weighted positions.                                                                            // 405
		this._topClusterLevel._recalculateBounds();                                                                          // 406
                                                                                                                       // 407
		this._refreshClustersIcons();                                                                                        // 408
                                                                                                                       // 409
		//Fix up the clusters and markers on the map                                                                         // 410
		this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds);                      // 411
                                                                                                                       // 412
		return this;                                                                                                         // 413
	},                                                                                                                    // 414
                                                                                                                       // 415
	//Removes all layers from the MarkerClusterGroup                                                                      // 416
	clearLayers: function () {                                                                                            // 417
		//Need our own special implementation as the LayerGroup one doesn't work for us                                      // 418
                                                                                                                       // 419
		//If we aren't on the map (yet), blow away the markers we know of                                                    // 420
		if (!this._map) {                                                                                                    // 421
			this._needsClustering = [];                                                                                         // 422
			delete this._gridClusters;                                                                                          // 423
			delete this._gridUnclustered;                                                                                       // 424
		}                                                                                                                    // 425
                                                                                                                       // 426
		if (this._noanimationUnspiderfy) {                                                                                   // 427
			this._noanimationUnspiderfy();                                                                                      // 428
		}                                                                                                                    // 429
                                                                                                                       // 430
		//Remove all the visible layers                                                                                      // 431
		this._featureGroup.clearLayers();                                                                                    // 432
		this._nonPointGroup.clearLayers();                                                                                   // 433
                                                                                                                       // 434
		this.eachLayer(function (marker) {                                                                                   // 435
			marker.off(this._childMarkerEventHandlers, this);                                                                   // 436
			delete marker.__parent;                                                                                             // 437
		}, this);                                                                                                            // 438
                                                                                                                       // 439
		if (this._map) {                                                                                                     // 440
			//Reset _topClusterLevel and the DistanceGrids                                                                      // 441
			this._generateInitialClusters();                                                                                    // 442
		}                                                                                                                    // 443
                                                                                                                       // 444
		return this;                                                                                                         // 445
	},                                                                                                                    // 446
                                                                                                                       // 447
	//Override FeatureGroup.getBounds as it doesn't work                                                                  // 448
	getBounds: function () {                                                                                              // 449
		var bounds = new L.LatLngBounds();                                                                                   // 450
                                                                                                                       // 451
		if (this._topClusterLevel) {                                                                                         // 452
			bounds.extend(this._topClusterLevel._bounds);                                                                       // 453
		}                                                                                                                    // 454
                                                                                                                       // 455
		for (var i = this._needsClustering.length - 1; i >= 0; i--) {                                                        // 456
			bounds.extend(this._needsClustering[i].getLatLng());                                                                // 457
		}                                                                                                                    // 458
                                                                                                                       // 459
		bounds.extend(this._nonPointGroup.getBounds());                                                                      // 460
                                                                                                                       // 461
		return bounds;                                                                                                       // 462
	},                                                                                                                    // 463
                                                                                                                       // 464
	//Overrides LayerGroup.eachLayer                                                                                      // 465
	eachLayer: function (method, context) {                                                                               // 466
		var markers = this._needsClustering.slice(),                                                                         // 467
			needsRemoving = this._needsRemoving,                                                                                // 468
			i;                                                                                                                  // 469
                                                                                                                       // 470
		if (this._topClusterLevel) {                                                                                         // 471
			this._topClusterLevel.getAllChildMarkers(markers);                                                                  // 472
		}                                                                                                                    // 473
                                                                                                                       // 474
		for (i = markers.length - 1; i >= 0; i--) {                                                                          // 475
			if (needsRemoving.indexOf(markers[i]) === -1) {                                                                     // 476
				method.call(context, markers[i]);                                                                                  // 477
			}                                                                                                                   // 478
		}                                                                                                                    // 479
                                                                                                                       // 480
		this._nonPointGroup.eachLayer(method, context);                                                                      // 481
	},                                                                                                                    // 482
                                                                                                                       // 483
	//Overrides LayerGroup.getLayers                                                                                      // 484
	getLayers: function () {                                                                                              // 485
		var layers = [];                                                                                                     // 486
		this.eachLayer(function (l) {                                                                                        // 487
			layers.push(l);                                                                                                     // 488
		});                                                                                                                  // 489
		return layers;                                                                                                       // 490
	},                                                                                                                    // 491
                                                                                                                       // 492
	//Overrides LayerGroup.getLayer, WARNING: Really bad performance                                                      // 493
	getLayer: function (id) {                                                                                             // 494
		var result = null;                                                                                                   // 495
		                                                                                                                     // 496
		id = parseInt(id, 10);                                                                                               // 497
                                                                                                                       // 498
		this.eachLayer(function (l) {                                                                                        // 499
			if (L.stamp(l) === id) {                                                                                            // 500
				result = l;                                                                                                        // 501
			}                                                                                                                   // 502
		});                                                                                                                  // 503
                                                                                                                       // 504
		return result;                                                                                                       // 505
	},                                                                                                                    // 506
                                                                                                                       // 507
	//Returns true if the given layer is in this MarkerClusterGroup                                                       // 508
	hasLayer: function (layer) {                                                                                          // 509
		if (!layer) {                                                                                                        // 510
			return false;                                                                                                       // 511
		}                                                                                                                    // 512
                                                                                                                       // 513
		var i, anArray = this._needsClustering;                                                                              // 514
                                                                                                                       // 515
		for (i = anArray.length - 1; i >= 0; i--) {                                                                          // 516
			if (anArray[i] === layer) {                                                                                         // 517
				return true;                                                                                                       // 518
			}                                                                                                                   // 519
		}                                                                                                                    // 520
                                                                                                                       // 521
		anArray = this._needsRemoving;                                                                                       // 522
		for (i = anArray.length - 1; i >= 0; i--) {                                                                          // 523
			if (anArray[i] === layer) {                                                                                         // 524
				return false;                                                                                                      // 525
			}                                                                                                                   // 526
		}                                                                                                                    // 527
                                                                                                                       // 528
		return !!(layer.__parent && layer.__parent._group === this) || this._nonPointGroup.hasLayer(layer);                  // 529
	},                                                                                                                    // 530
                                                                                                                       // 531
	//Zoom down to show the given layer (spiderfying if necessary) then calls the callback                                // 532
	zoomToShowLayer: function (layer, callback) {                                                                         // 533
                                                                                                                       // 534
		if (typeof callback !== 'function') {                                                                                // 535
			callback = function () {};                                                                                          // 536
		}                                                                                                                    // 537
                                                                                                                       // 538
		var showMarker = function () {                                                                                       // 539
			if ((layer._icon || layer.__parent._icon) && !this._inZoomAnimation) {                                              // 540
				this._map.off('moveend', showMarker, this);                                                                        // 541
				this.off('animationend', showMarker, this);                                                                        // 542
                                                                                                                       // 543
				if (layer._icon) {                                                                                                 // 544
					callback();                                                                                                       // 545
				} else if (layer.__parent._icon) {                                                                                 // 546
					this.once('spiderfied', callback, this);                                                                          // 547
					layer.__parent.spiderfy();                                                                                        // 548
				}                                                                                                                  // 549
			}                                                                                                                   // 550
		};                                                                                                                   // 551
                                                                                                                       // 552
		if (layer._icon && this._map.getBounds().contains(layer.getLatLng())) {                                              // 553
			//Layer is visible ond on screen, immediate return                                                                  // 554
			callback();                                                                                                         // 555
		} else if (layer.__parent._zoom < Math.round(this._map._zoom)) {                                                     // 556
			//Layer should be visible at this zoom level. It must not be on screen so just pan over to it                       // 557
			this._map.on('moveend', showMarker, this);                                                                          // 558
			this._map.panTo(layer.getLatLng());                                                                                 // 559
		} else {                                                                                                             // 560
			this._map.on('moveend', showMarker, this);                                                                          // 561
			this.on('animationend', showMarker, this);                                                                          // 562
			layer.__parent.zoomToBounds();                                                                                      // 563
		}                                                                                                                    // 564
	},                                                                                                                    // 565
                                                                                                                       // 566
	//Overrides FeatureGroup.onAdd                                                                                        // 567
	onAdd: function (map) {                                                                                               // 568
		this._map = map;                                                                                                     // 569
		var i, l, layer;                                                                                                     // 570
                                                                                                                       // 571
		if (!isFinite(this._map.getMaxZoom())) {                                                                             // 572
			throw "Map has no maxZoom specified";                                                                               // 573
		}                                                                                                                    // 574
                                                                                                                       // 575
		this._featureGroup.addTo(map);                                                                                       // 576
		this._nonPointGroup.addTo(map);                                                                                      // 577
                                                                                                                       // 578
		if (!this._gridClusters) {                                                                                           // 579
			this._generateInitialClusters();                                                                                    // 580
		}                                                                                                                    // 581
                                                                                                                       // 582
		this._maxLat = map.options.crs.projection.MAX_LATITUDE;                                                              // 583
                                                                                                                       // 584
		for (i = 0, l = this._needsRemoving.length; i < l; i++) {                                                            // 585
			layer = this._needsRemoving[i];                                                                                     // 586
			this._removeLayer(layer, true);                                                                                     // 587
		}                                                                                                                    // 588
		this._needsRemoving = [];                                                                                            // 589
                                                                                                                       // 590
		//Remember the current zoom level and bounds                                                                         // 591
		this._zoom = Math.round(this._map._zoom);                                                                            // 592
		this._currentShownBounds = this._getExpandedVisibleBounds();                                                         // 593
                                                                                                                       // 594
		this._map.on('zoomend', this._zoomEnd, this);                                                                        // 595
		this._map.on('moveend', this._moveEnd, this);                                                                        // 596
                                                                                                                       // 597
		if (this._spiderfierOnAdd) { //TODO FIXME: Not sure how to have spiderfier add something on here nicely              // 598
			this._spiderfierOnAdd();                                                                                            // 599
		}                                                                                                                    // 600
                                                                                                                       // 601
		this._bindEvents();                                                                                                  // 602
                                                                                                                       // 603
		//Actually add our markers to the map:                                                                               // 604
		l = this._needsClustering;                                                                                           // 605
		this._needsClustering = [];                                                                                          // 606
		this.addLayers(l, true);                                                                                             // 607
	},                                                                                                                    // 608
                                                                                                                       // 609
	//Overrides FeatureGroup.onRemove                                                                                     // 610
	onRemove: function (map) {                                                                                            // 611
		map.off('zoomend', this._zoomEnd, this);                                                                             // 612
		map.off('moveend', this._moveEnd, this);                                                                             // 613
                                                                                                                       // 614
		this._unbindEvents();                                                                                                // 615
                                                                                                                       // 616
		//In case we are in a cluster animation                                                                              // 617
		this._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');                    // 618
                                                                                                                       // 619
		if (this._spiderfierOnRemove) { //TODO FIXME: Not sure how to have spiderfier add something on here nicely           // 620
			this._spiderfierOnRemove();                                                                                         // 621
		}                                                                                                                    // 622
                                                                                                                       // 623
		delete this._maxLat;                                                                                                 // 624
                                                                                                                       // 625
		//Clean up all the layers we added to the map                                                                        // 626
		this._hideCoverage();                                                                                                // 627
		this._featureGroup.remove();                                                                                         // 628
		this._nonPointGroup.remove();                                                                                        // 629
                                                                                                                       // 630
		this._featureGroup.clearLayers();                                                                                    // 631
                                                                                                                       // 632
		this._map = null;                                                                                                    // 633
	},                                                                                                                    // 634
                                                                                                                       // 635
	getVisibleParent: function (marker) {                                                                                 // 636
		var vMarker = marker;                                                                                                // 637
		while (vMarker && !vMarker._icon) {                                                                                  // 638
			vMarker = vMarker.__parent;                                                                                         // 639
		}                                                                                                                    // 640
		return vMarker || null;                                                                                              // 641
	},                                                                                                                    // 642
                                                                                                                       // 643
	//Remove the given object from the given array                                                                        // 644
	_arraySplice: function (anArray, obj) {                                                                               // 645
		for (var i = anArray.length - 1; i >= 0; i--) {                                                                      // 646
			if (anArray[i] === obj) {                                                                                           // 647
				anArray.splice(i, 1);                                                                                              // 648
				return true;                                                                                                       // 649
			}                                                                                                                   // 650
		}                                                                                                                    // 651
	},                                                                                                                    // 652
                                                                                                                       // 653
	/**                                                                                                                   // 654
	 * Removes a marker from all _gridUnclustered zoom levels, starting at the supplied zoom.                             // 655
	 * @param marker to be removed from _gridUnclustered.                                                                 // 656
	 * @param z integer bottom start zoom level (included)                                                                // 657
	 * @private                                                                                                           // 658
	 */                                                                                                                   // 659
	_removeFromGridUnclustered: function (marker, z) {                                                                    // 660
		var map = this._map,                                                                                                 // 661
		    gridUnclustered = this._gridUnclustered,                                                                         // 662
			minZoom = this._map.getMinZoom();                                                                                   // 663
                                                                                                                       // 664
		for (; z >= minZoom; z--) {                                                                                          // 665
			if (!gridUnclustered[z].removeObject(marker, map.project(marker.getLatLng(), z))) {                                 // 666
				break;                                                                                                             // 667
			}                                                                                                                   // 668
		}                                                                                                                    // 669
	},                                                                                                                    // 670
                                                                                                                       // 671
	_childMarkerDragStart: function (e) {                                                                                 // 672
		e.target.__dragStart = e.target._latlng;                                                                             // 673
	},                                                                                                                    // 674
                                                                                                                       // 675
	_childMarkerMoved: function (e) {                                                                                     // 676
		if (!this._ignoreMove && !e.target.__dragStart) {                                                                    // 677
			var isPopupOpen = e.target._popup && e.target._popup.isOpen();                                                      // 678
                                                                                                                       // 679
			this._moveChild(e.target, e.oldLatLng, e.latlng);                                                                   // 680
                                                                                                                       // 681
			if (isPopupOpen) {                                                                                                  // 682
				e.target.openPopup();                                                                                              // 683
			}                                                                                                                   // 684
		}                                                                                                                    // 685
	},                                                                                                                    // 686
                                                                                                                       // 687
	_moveChild: function (layer, from, to) {                                                                              // 688
		layer._latlng = from;                                                                                                // 689
		this.removeLayer(layer);                                                                                             // 690
                                                                                                                       // 691
		layer._latlng = to;                                                                                                  // 692
		this.addLayer(layer);                                                                                                // 693
	},                                                                                                                    // 694
                                                                                                                       // 695
	_childMarkerDragEnd: function (e) {                                                                                   // 696
		if (e.target.__dragStart) {                                                                                          // 697
			this._moveChild(e.target, e.target.__dragStart, e.target._latlng);                                                  // 698
		}                                                                                                                    // 699
		delete e.target.__dragStart;                                                                                         // 700
	},                                                                                                                    // 701
	                                                                                                                      // 702
                                                                                                                       // 703
	//Internal function for removing a marker from everything.                                                            // 704
	//dontUpdateMap: set to true if you will handle updating the map manually (for bulk functions)                        // 705
	_removeLayer: function (marker, removeFromDistanceGrid, dontUpdateMap) {                                              // 706
		var gridClusters = this._gridClusters,                                                                               // 707
			gridUnclustered = this._gridUnclustered,                                                                            // 708
			fg = this._featureGroup,                                                                                            // 709
			map = this._map,                                                                                                    // 710
			minZoom = this._map.getMinZoom();                                                                                   // 711
                                                                                                                       // 712
		//Remove the marker from distance clusters it might be in                                                            // 713
		if (removeFromDistanceGrid) {                                                                                        // 714
			this._removeFromGridUnclustered(marker, this._maxZoom);                                                             // 715
		}                                                                                                                    // 716
                                                                                                                       // 717
		//Work our way up the clusters removing them as we go if required                                                    // 718
		var cluster = marker.__parent,                                                                                       // 719
			markers = cluster._markers,                                                                                         // 720
			otherMarker;                                                                                                        // 721
                                                                                                                       // 722
		//Remove the marker from the immediate parents marker list                                                           // 723
		this._arraySplice(markers, marker);                                                                                  // 724
                                                                                                                       // 725
		while (cluster) {                                                                                                    // 726
			cluster._childCount--;                                                                                              // 727
			cluster._boundsNeedUpdate = true;                                                                                   // 728
                                                                                                                       // 729
			if (cluster._zoom < minZoom) {                                                                                      // 730
				//Top level, do nothing                                                                                            // 731
				break;                                                                                                             // 732
			} else if (removeFromDistanceGrid && cluster._childCount <= 1) { //Cluster no longer required                       // 733
				//We need to push the other marker up to the parent                                                                // 734
				otherMarker = cluster._markers[0] === marker ? cluster._markers[1] : cluster._markers[0];                          // 735
                                                                                                                       // 736
				//Update distance grid                                                                                             // 737
				gridClusters[cluster._zoom].removeObject(cluster, map.project(cluster._cLatLng, cluster._zoom));                   // 738
				gridUnclustered[cluster._zoom].addObject(otherMarker, map.project(otherMarker.getLatLng(), cluster._zoom));        // 739
                                                                                                                       // 740
				//Move otherMarker up to parent                                                                                    // 741
				this._arraySplice(cluster.__parent._childClusters, cluster);                                                       // 742
				cluster.__parent._markers.push(otherMarker);                                                                       // 743
				otherMarker.__parent = cluster.__parent;                                                                           // 744
                                                                                                                       // 745
				if (cluster._icon) {                                                                                               // 746
					//Cluster is currently on the map, need to put the marker on the map instead                                      // 747
					fg.removeLayer(cluster);                                                                                          // 748
					if (!dontUpdateMap) {                                                                                             // 749
						fg.addLayer(otherMarker);                                                                                        // 750
					}                                                                                                                 // 751
				}                                                                                                                  // 752
			} else {                                                                                                            // 753
				cluster._iconNeedsUpdate = true;                                                                                   // 754
			}                                                                                                                   // 755
                                                                                                                       // 756
			cluster = cluster.__parent;                                                                                         // 757
		}                                                                                                                    // 758
                                                                                                                       // 759
		delete marker.__parent;                                                                                              // 760
	},                                                                                                                    // 761
                                                                                                                       // 762
	_isOrIsParent: function (el, oel) {                                                                                   // 763
		while (oel) {                                                                                                        // 764
			if (el === oel) {                                                                                                   // 765
				return true;                                                                                                       // 766
			}                                                                                                                   // 767
			oel = oel.parentNode;                                                                                               // 768
		}                                                                                                                    // 769
		return false;                                                                                                        // 770
	},                                                                                                                    // 771
                                                                                                                       // 772
	//Override L.Evented.fire                                                                                             // 773
	fire: function (type, data, propagate) {                                                                              // 774
		if (data && data.layer instanceof L.MarkerCluster) {                                                                 // 775
			//Prevent multiple clustermouseover/off events if the icon is made up of stacked divs (Doesn't work in ie <= 8, no relatedTarget)
			if (data.originalEvent && this._isOrIsParent(data.layer._icon, data.originalEvent.relatedTarget)) {                 // 777
				return;                                                                                                            // 778
			}                                                                                                                   // 779
			type = 'cluster' + type;                                                                                            // 780
		}                                                                                                                    // 781
                                                                                                                       // 782
		L.FeatureGroup.prototype.fire.call(this, type, data, propagate);                                                     // 783
	},                                                                                                                    // 784
                                                                                                                       // 785
	//Override L.Evented.listens                                                                                          // 786
	listens: function (type, propagate) {                                                                                 // 787
		return L.FeatureGroup.prototype.listens.call(this, type, propagate) || L.FeatureGroup.prototype.listens.call(this, 'cluster' + type, propagate);
	},                                                                                                                    // 789
                                                                                                                       // 790
	//Default functionality                                                                                               // 791
	_defaultIconCreateFunction: function (cluster) {                                                                      // 792
		var childCount = cluster.getChildCount();                                                                            // 793
                                                                                                                       // 794
		var c = ' marker-cluster-';                                                                                          // 795
		if (childCount < 10) {                                                                                               // 796
			c += 'small';                                                                                                       // 797
		} else if (childCount < 100) {                                                                                       // 798
			c += 'medium';                                                                                                      // 799
		} else {                                                                                                             // 800
			c += 'large';                                                                                                       // 801
		}                                                                                                                    // 802
                                                                                                                       // 803
		return new L.DivIcon({ html: '<div><span>' + childCount + '</span></div>', className: 'marker-cluster' + c, iconSize: new L.Point(40, 40) });
	},                                                                                                                    // 805
                                                                                                                       // 806
	_bindEvents: function () {                                                                                            // 807
		var map = this._map,                                                                                                 // 808
		    spiderfyOnMaxZoom = this.options.spiderfyOnMaxZoom,                                                              // 809
		    showCoverageOnHover = this.options.showCoverageOnHover,                                                          // 810
		    zoomToBoundsOnClick = this.options.zoomToBoundsOnClick;                                                          // 811
                                                                                                                       // 812
		//Zoom on cluster click or spiderfy if we are at the lowest level                                                    // 813
		if (spiderfyOnMaxZoom || zoomToBoundsOnClick) {                                                                      // 814
			this.on('clusterclick', this._zoomOrSpiderfy, this);                                                                // 815
		}                                                                                                                    // 816
                                                                                                                       // 817
		//Show convex hull (boundary) polygon on mouse over                                                                  // 818
		if (showCoverageOnHover) {                                                                                           // 819
			this.on('clustermouseover', this._showCoverage, this);                                                              // 820
			this.on('clustermouseout', this._hideCoverage, this);                                                               // 821
			map.on('zoomend', this._hideCoverage, this);                                                                        // 822
		}                                                                                                                    // 823
	},                                                                                                                    // 824
                                                                                                                       // 825
	_zoomOrSpiderfy: function (e) {                                                                                       // 826
		var cluster = e.layer,                                                                                               // 827
		    bottomCluster = cluster;                                                                                         // 828
                                                                                                                       // 829
		while (bottomCluster._childClusters.length === 1) {                                                                  // 830
			bottomCluster = bottomCluster._childClusters[0];                                                                    // 831
		}                                                                                                                    // 832
                                                                                                                       // 833
		if (bottomCluster._zoom === this._maxZoom &&                                                                         // 834
			bottomCluster._childCount === cluster._childCount &&                                                                // 835
			this.options.spiderfyOnMaxZoom) {                                                                                   // 836
                                                                                                                       // 837
			// All child markers are contained in a single cluster from this._maxZoom to this cluster.                          // 838
			cluster.spiderfy();                                                                                                 // 839
		} else if (this.options.zoomToBoundsOnClick) {                                                                       // 840
			cluster.zoomToBounds();                                                                                             // 841
		}                                                                                                                    // 842
                                                                                                                       // 843
		// Focus the map again for keyboard users.                                                                           // 844
		if (e.originalEvent && e.originalEvent.keyCode === 13) {                                                             // 845
			this._map._container.focus();                                                                                       // 846
		}                                                                                                                    // 847
	},                                                                                                                    // 848
                                                                                                                       // 849
	_showCoverage: function (e) {                                                                                         // 850
		var map = this._map;                                                                                                 // 851
		if (this._inZoomAnimation) {                                                                                         // 852
			return;                                                                                                             // 853
		}                                                                                                                    // 854
		if (this._shownPolygon) {                                                                                            // 855
			map.removeLayer(this._shownPolygon);                                                                                // 856
		}                                                                                                                    // 857
		if (e.layer.getChildCount() > 2 && e.layer !== this._spiderfied) {                                                   // 858
			this._shownPolygon = new L.Polygon(e.layer.getConvexHull(), this.options.polygonOptions);                           // 859
			map.addLayer(this._shownPolygon);                                                                                   // 860
		}                                                                                                                    // 861
	},                                                                                                                    // 862
                                                                                                                       // 863
	_hideCoverage: function () {                                                                                          // 864
		if (this._shownPolygon) {                                                                                            // 865
			this._map.removeLayer(this._shownPolygon);                                                                          // 866
			this._shownPolygon = null;                                                                                          // 867
		}                                                                                                                    // 868
	},                                                                                                                    // 869
                                                                                                                       // 870
	_unbindEvents: function () {                                                                                          // 871
		var spiderfyOnMaxZoom = this.options.spiderfyOnMaxZoom,                                                              // 872
			showCoverageOnHover = this.options.showCoverageOnHover,                                                             // 873
			zoomToBoundsOnClick = this.options.zoomToBoundsOnClick,                                                             // 874
			map = this._map;                                                                                                    // 875
                                                                                                                       // 876
		if (spiderfyOnMaxZoom || zoomToBoundsOnClick) {                                                                      // 877
			this.off('clusterclick', this._zoomOrSpiderfy, this);                                                               // 878
		}                                                                                                                    // 879
		if (showCoverageOnHover) {                                                                                           // 880
			this.off('clustermouseover', this._showCoverage, this);                                                             // 881
			this.off('clustermouseout', this._hideCoverage, this);                                                              // 882
			map.off('zoomend', this._hideCoverage, this);                                                                       // 883
		}                                                                                                                    // 884
	},                                                                                                                    // 885
                                                                                                                       // 886
	_zoomEnd: function () {                                                                                               // 887
		if (!this._map) { //May have been removed from the map by a zoomEnd handler                                          // 888
			return;                                                                                                             // 889
		}                                                                                                                    // 890
		this._mergeSplitClusters();                                                                                          // 891
                                                                                                                       // 892
		this._zoom = Math.round(this._map._zoom);                                                                            // 893
		this._currentShownBounds = this._getExpandedVisibleBounds();                                                         // 894
	},                                                                                                                    // 895
                                                                                                                       // 896
	_moveEnd: function () {                                                                                               // 897
		if (this._inZoomAnimation) {                                                                                         // 898
			return;                                                                                                             // 899
		}                                                                                                                    // 900
                                                                                                                       // 901
		var newBounds = this._getExpandedVisibleBounds();                                                                    // 902
                                                                                                                       // 903
		this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, newBounds);            // 904
		this._topClusterLevel._recursivelyAddChildrenToMap(null, Math.round(this._map._zoom), newBounds);                    // 905
                                                                                                                       // 906
		this._currentShownBounds = newBounds;                                                                                // 907
		return;                                                                                                              // 908
	},                                                                                                                    // 909
                                                                                                                       // 910
	_generateInitialClusters: function () {                                                                               // 911
		var maxZoom = this._map.getMaxZoom(),                                                                                // 912
			minZoom = this._map.getMinZoom(),                                                                                   // 913
			radius = this.options.maxClusterRadius,                                                                             // 914
			radiusFn = radius;                                                                                                  // 915
	                                                                                                                      // 916
		//If we just set maxClusterRadius to a single number, we need to create                                              // 917
		//a simple function to return that number. Otherwise, we just have to                                                // 918
		//use the function we've passed in.                                                                                  // 919
		if (typeof radius !== "function") {                                                                                  // 920
			radiusFn = function () { return radius; };                                                                          // 921
		}                                                                                                                    // 922
                                                                                                                       // 923
		if (this.options.disableClusteringAtZoom) {                                                                          // 924
			maxZoom = this.options.disableClusteringAtZoom - 1;                                                                 // 925
		}                                                                                                                    // 926
		this._maxZoom = maxZoom;                                                                                             // 927
		this._gridClusters = {};                                                                                             // 928
		this._gridUnclustered = {};                                                                                          // 929
	                                                                                                                      // 930
		//Set up DistanceGrids for each zoom                                                                                 // 931
		for (var zoom = maxZoom; zoom >= minZoom; zoom--) {                                                                  // 932
			this._gridClusters[zoom] = new L.DistanceGrid(radiusFn(zoom));                                                      // 933
			this._gridUnclustered[zoom] = new L.DistanceGrid(radiusFn(zoom));                                                   // 934
		}                                                                                                                    // 935
                                                                                                                       // 936
		// Instantiate the appropriate L.MarkerCluster class (animated or not).                                              // 937
		this._topClusterLevel = new this._markerCluster(this, minZoom - 1);                                                  // 938
	},                                                                                                                    // 939
                                                                                                                       // 940
	//Zoom: Zoom to start adding at (Pass this._maxZoom to start at the bottom)                                           // 941
	_addLayer: function (layer, zoom) {                                                                                   // 942
		var gridClusters = this._gridClusters,                                                                               // 943
		    gridUnclustered = this._gridUnclustered,                                                                         // 944
			minZoom = this._map.getMinZoom(),                                                                                   // 945
		    markerPoint, z;                                                                                                  // 946
                                                                                                                       // 947
		if (this.options.singleMarkerMode) {                                                                                 // 948
			this._overrideMarkerIcon(layer);                                                                                    // 949
		}                                                                                                                    // 950
                                                                                                                       // 951
		layer.on(this._childMarkerEventHandlers, this);                                                                      // 952
                                                                                                                       // 953
		//Find the lowest zoom level to slot this one in                                                                     // 954
		for (; zoom >= minZoom; zoom--) {                                                                                    // 955
			markerPoint = this._map.project(layer.getLatLng(), zoom); // calculate pixel position                               // 956
                                                                                                                       // 957
			//Try find a cluster close by                                                                                       // 958
			var closest = gridClusters[zoom].getNearObject(markerPoint);                                                        // 959
			if (closest) {                                                                                                      // 960
				closest._addChild(layer);                                                                                          // 961
				layer.__parent = closest;                                                                                          // 962
				return;                                                                                                            // 963
			}                                                                                                                   // 964
                                                                                                                       // 965
			//Try find a marker close by to form a new cluster with                                                             // 966
			closest = gridUnclustered[zoom].getNearObject(markerPoint);                                                         // 967
			if (closest) {                                                                                                      // 968
				var parent = closest.__parent;                                                                                     // 969
				if (parent) {                                                                                                      // 970
					this._removeLayer(closest, false);                                                                                // 971
				}                                                                                                                  // 972
                                                                                                                       // 973
				//Create new cluster with these 2 in it                                                                            // 974
                                                                                                                       // 975
				var newCluster = new this._markerCluster(this, zoom, closest, layer);                                              // 976
				gridClusters[zoom].addObject(newCluster, this._map.project(newCluster._cLatLng, zoom));                            // 977
				closest.__parent = newCluster;                                                                                     // 978
				layer.__parent = newCluster;                                                                                       // 979
                                                                                                                       // 980
				//First create any new intermediate parent clusters that don't exist                                               // 981
				var lastParent = newCluster;                                                                                       // 982
				for (z = zoom - 1; z > parent._zoom; z--) {                                                                        // 983
					lastParent = new this._markerCluster(this, z, lastParent);                                                        // 984
					gridClusters[z].addObject(lastParent, this._map.project(closest.getLatLng(), z));                                 // 985
				}                                                                                                                  // 986
				parent._addChild(lastParent);                                                                                      // 987
                                                                                                                       // 988
				//Remove closest from this zoom level and any above that it is in, replace with newCluster                         // 989
				this._removeFromGridUnclustered(closest, zoom);                                                                    // 990
                                                                                                                       // 991
				return;                                                                                                            // 992
			}                                                                                                                   // 993
                                                                                                                       // 994
			//Didn't manage to cluster in at this zoom, record us as a marker here and continue upwards                         // 995
			gridUnclustered[zoom].addObject(layer, markerPoint);                                                                // 996
		}                                                                                                                    // 997
                                                                                                                       // 998
		//Didn't get in anything, add us to the top                                                                          // 999
		this._topClusterLevel._addChild(layer);                                                                              // 1000
		layer.__parent = this._topClusterLevel;                                                                              // 1001
		return;                                                                                                              // 1002
	},                                                                                                                    // 1003
                                                                                                                       // 1004
	/**                                                                                                                   // 1005
	 * Refreshes the icon of all "dirty" visible clusters.                                                                // 1006
	 * Non-visible "dirty" clusters will be updated when they are added to the map.                                       // 1007
	 * @private                                                                                                           // 1008
	 */                                                                                                                   // 1009
	_refreshClustersIcons: function () {                                                                                  // 1010
		this._featureGroup.eachLayer(function (c) {                                                                          // 1011
			if (c instanceof L.MarkerCluster && c._iconNeedsUpdate) {                                                           // 1012
				c._updateIcon();                                                                                                   // 1013
			}                                                                                                                   // 1014
		});                                                                                                                  // 1015
	},                                                                                                                    // 1016
                                                                                                                       // 1017
	//Enqueue code to fire after the marker expand/contract has happened                                                  // 1018
	_enqueue: function (fn) {                                                                                             // 1019
		this._queue.push(fn);                                                                                                // 1020
		if (!this._queueTimeout) {                                                                                           // 1021
			this._queueTimeout = setTimeout(L.bind(this._processQueue, this), 300);                                             // 1022
		}                                                                                                                    // 1023
	},                                                                                                                    // 1024
	_processQueue: function () {                                                                                          // 1025
		for (var i = 0; i < this._queue.length; i++) {                                                                       // 1026
			this._queue[i].call(this);                                                                                          // 1027
		}                                                                                                                    // 1028
		this._queue.length = 0;                                                                                              // 1029
		clearTimeout(this._queueTimeout);                                                                                    // 1030
		this._queueTimeout = null;                                                                                           // 1031
	},                                                                                                                    // 1032
                                                                                                                       // 1033
	//Merge and split any existing clusters that are too big or small                                                     // 1034
	_mergeSplitClusters: function () {                                                                                    // 1035
		var mapZoom = Math.round(this._map._zoom);                                                                           // 1036
                                                                                                                       // 1037
		//In case we are starting to split before the animation finished                                                     // 1038
		this._processQueue();                                                                                                // 1039
                                                                                                                       // 1040
		if (this._zoom < mapZoom && this._currentShownBounds.intersects(this._getExpandedVisibleBounds())) { //Zoom in, split
			this._animationStart();                                                                                             // 1042
			//Remove clusters now off screen                                                                                    // 1043
			this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, this._getExpandedVisibleBounds());
                                                                                                                       // 1045
			this._animationZoomIn(this._zoom, mapZoom);                                                                         // 1046
                                                                                                                       // 1047
		} else if (this._zoom > mapZoom) { //Zoom out, merge                                                                 // 1048
			this._animationStart();                                                                                             // 1049
                                                                                                                       // 1050
			this._animationZoomOut(this._zoom, mapZoom);                                                                        // 1051
		} else {                                                                                                             // 1052
			this._moveEnd();                                                                                                    // 1053
		}                                                                                                                    // 1054
	},                                                                                                                    // 1055
                                                                                                                       // 1056
	//Gets the maps visible bounds expanded in each direction by the size of the screen (so the user cannot see an area we do not cover in one pan)
	_getExpandedVisibleBounds: function () {                                                                              // 1058
		if (!this.options.removeOutsideVisibleBounds) {                                                                      // 1059
			return this._mapBoundsInfinite;                                                                                     // 1060
		} else if (L.Browser.mobile) {                                                                                       // 1061
			return this._checkBoundsMaxLat(this._map.getBounds());                                                              // 1062
		}                                                                                                                    // 1063
                                                                                                                       // 1064
		return this._checkBoundsMaxLat(this._map.getBounds().pad(1)); // Padding expands the bounds by its own dimensions but scaled with the given factor.
	},                                                                                                                    // 1066
                                                                                                                       // 1067
	/**                                                                                                                   // 1068
	 * Expands the latitude to Infinity (or -Infinity) if the input bounds reach the map projection maximum defined latitude
	 * (in the case of Web/Spherical Mercator, it is 85.0511287798 / see https://en.wikipedia.org/wiki/Web_Mercator#Formulas).
	 * Otherwise, the removeOutsideVisibleBounds option will remove markers beyond that limit, whereas the same markers without
	 * this option (or outside MCG) will have their position floored (ceiled) by the projection and rendered at that limit,
	 * making the user think that MCG "eats" them and never displays them again.                                          // 1073
	 * @param bounds L.LatLngBounds                                                                                       // 1074
	 * @returns {L.LatLngBounds}                                                                                          // 1075
	 * @private                                                                                                           // 1076
	 */                                                                                                                   // 1077
	_checkBoundsMaxLat: function (bounds) {                                                                               // 1078
		var maxLat = this._maxLat;                                                                                           // 1079
                                                                                                                       // 1080
		if (maxLat !== undefined) {                                                                                          // 1081
			if (bounds.getNorth() >= maxLat) {                                                                                  // 1082
				bounds._northEast.lat = Infinity;                                                                                  // 1083
			}                                                                                                                   // 1084
			if (bounds.getSouth() <= -maxLat) {                                                                                 // 1085
				bounds._southWest.lat = -Infinity;                                                                                 // 1086
			}                                                                                                                   // 1087
		}                                                                                                                    // 1088
                                                                                                                       // 1089
		return bounds;                                                                                                       // 1090
	},                                                                                                                    // 1091
                                                                                                                       // 1092
	//Shared animation code                                                                                               // 1093
	_animationAddLayerNonAnimated: function (layer, newCluster) {                                                         // 1094
		if (newCluster === layer) {                                                                                          // 1095
			this._featureGroup.addLayer(layer);                                                                                 // 1096
		} else if (newCluster._childCount === 2) {                                                                           // 1097
			newCluster._addToMap();                                                                                             // 1098
                                                                                                                       // 1099
			var markers = newCluster.getAllChildMarkers();                                                                      // 1100
			this._featureGroup.removeLayer(markers[0]);                                                                         // 1101
			this._featureGroup.removeLayer(markers[1]);                                                                         // 1102
		} else {                                                                                                             // 1103
			newCluster._updateIcon();                                                                                           // 1104
		}                                                                                                                    // 1105
	},                                                                                                                    // 1106
                                                                                                                       // 1107
	/**                                                                                                                   // 1108
	 * Extracts individual (i.e. non-group) layers from a Layer Group.                                                    // 1109
	 * @param group to extract layers from.                                                                               // 1110
	 * @param output {Array} in which to store the extracted layers.                                                      // 1111
	 * @returns {*|Array}                                                                                                 // 1112
	 * @private                                                                                                           // 1113
	 */                                                                                                                   // 1114
	_extractNonGroupLayers: function (group, output) {                                                                    // 1115
		var layers = group.getLayers(),                                                                                      // 1116
		    i = 0,                                                                                                           // 1117
		    layer;                                                                                                           // 1118
                                                                                                                       // 1119
		output = output || [];                                                                                               // 1120
                                                                                                                       // 1121
		for (; i < layers.length; i++) {                                                                                     // 1122
			layer = layers[i];                                                                                                  // 1123
                                                                                                                       // 1124
			if (layer instanceof L.LayerGroup) {                                                                                // 1125
				this._extractNonGroupLayers(layer, output);                                                                        // 1126
				continue;                                                                                                          // 1127
			}                                                                                                                   // 1128
                                                                                                                       // 1129
			output.push(layer);                                                                                                 // 1130
		}                                                                                                                    // 1131
                                                                                                                       // 1132
		return output;                                                                                                       // 1133
	},                                                                                                                    // 1134
                                                                                                                       // 1135
	/**                                                                                                                   // 1136
	 * Implements the singleMarkerMode option.                                                                            // 1137
	 * @param layer Marker to re-style using the Clusters iconCreateFunction.                                             // 1138
	 * @returns {L.Icon} The newly created icon.                                                                          // 1139
	 * @private                                                                                                           // 1140
	 */                                                                                                                   // 1141
	_overrideMarkerIcon: function (layer) {                                                                               // 1142
		var icon = layer.options.icon = this.options.iconCreateFunction({                                                    // 1143
			getChildCount: function () {                                                                                        // 1144
				return 1;                                                                                                          // 1145
			},                                                                                                                  // 1146
			getAllChildMarkers: function () {                                                                                   // 1147
				return [layer];                                                                                                    // 1148
			}                                                                                                                   // 1149
		});                                                                                                                  // 1150
                                                                                                                       // 1151
		return icon;                                                                                                         // 1152
	}                                                                                                                     // 1153
});                                                                                                                    // 1154
                                                                                                                       // 1155
// Constant bounds used in case option "removeOutsideVisibleBounds" is set to false.                                   // 1156
L.MarkerClusterGroup.include({                                                                                         // 1157
	_mapBoundsInfinite: new L.LatLngBounds(new L.LatLng(-Infinity, -Infinity), new L.LatLng(Infinity, Infinity))          // 1158
});                                                                                                                    // 1159
                                                                                                                       // 1160
L.MarkerClusterGroup.include({                                                                                         // 1161
	_noAnimation: {                                                                                                       // 1162
		//Non Animated versions of everything                                                                                // 1163
		_animationStart: function () {                                                                                       // 1164
			//Do nothing...                                                                                                     // 1165
		},                                                                                                                   // 1166
		_animationZoomIn: function (previousZoomLevel, newZoomLevel) {                                                       // 1167
			this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel);               // 1168
			this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());           // 1169
                                                                                                                       // 1170
			//We didn't actually animate, but we use this event to mean "clustering animations have finished"                   // 1171
			this.fire('animationend');                                                                                          // 1172
		},                                                                                                                   // 1173
		_animationZoomOut: function (previousZoomLevel, newZoomLevel) {                                                      // 1174
			this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel);               // 1175
			this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());           // 1176
                                                                                                                       // 1177
			//We didn't actually animate, but we use this event to mean "clustering animations have finished"                   // 1178
			this.fire('animationend');                                                                                          // 1179
		},                                                                                                                   // 1180
		_animationAddLayer: function (layer, newCluster) {                                                                   // 1181
			this._animationAddLayerNonAnimated(layer, newCluster);                                                              // 1182
		}                                                                                                                    // 1183
	},                                                                                                                    // 1184
                                                                                                                       // 1185
	_withAnimation: {                                                                                                     // 1186
		//Animated versions here                                                                                             // 1187
		_animationStart: function () {                                                                                       // 1188
			this._map._mapPane.className += ' leaflet-cluster-anim';                                                            // 1189
			this._inZoomAnimation++;                                                                                            // 1190
		},                                                                                                                   // 1191
                                                                                                                       // 1192
		_animationZoomIn: function (previousZoomLevel, newZoomLevel) {                                                       // 1193
			var bounds = this._getExpandedVisibleBounds(),                                                                      // 1194
			    fg = this._featureGroup,                                                                                        // 1195
				minZoom = this._map.getMinZoom(),                                                                                  // 1196
			    i;                                                                                                              // 1197
                                                                                                                       // 1198
			this._ignoreMove = true;                                                                                            // 1199
                                                                                                                       // 1200
			//Add all children of current clusters to map and remove those clusters from map                                    // 1201
			this._topClusterLevel._recursively(bounds, previousZoomLevel, minZoom, function (c) {                               // 1202
				var startPos = c._latlng,                                                                                          // 1203
				    markers  = c._markers,                                                                                         // 1204
				    m;                                                                                                             // 1205
                                                                                                                       // 1206
				if (!bounds.contains(startPos)) {                                                                                  // 1207
					startPos = null;                                                                                                  // 1208
				}                                                                                                                  // 1209
                                                                                                                       // 1210
				if (c._isSingleParent() && previousZoomLevel + 1 === newZoomLevel) { //Immediately add the new child and remove us
					fg.removeLayer(c);                                                                                                // 1212
					c._recursivelyAddChildrenToMap(null, newZoomLevel, bounds);                                                       // 1213
				} else {                                                                                                           // 1214
					//Fade out old cluster                                                                                            // 1215
					c.clusterHide();                                                                                                  // 1216
					c._recursivelyAddChildrenToMap(startPos, newZoomLevel, bounds);                                                   // 1217
				}                                                                                                                  // 1218
                                                                                                                       // 1219
				//Remove all markers that aren't visible any more                                                                  // 1220
				//TODO: Do we actually need to do this on the higher levels too?                                                   // 1221
				for (i = markers.length - 1; i >= 0; i--) {                                                                        // 1222
					m = markers[i];                                                                                                   // 1223
					if (!bounds.contains(m._latlng)) {                                                                                // 1224
						fg.removeLayer(m);                                                                                               // 1225
					}                                                                                                                 // 1226
				}                                                                                                                  // 1227
                                                                                                                       // 1228
			});                                                                                                                 // 1229
                                                                                                                       // 1230
			this._forceLayout();                                                                                                // 1231
                                                                                                                       // 1232
			//Update opacities                                                                                                  // 1233
			this._topClusterLevel._recursivelyBecomeVisible(bounds, newZoomLevel);                                              // 1234
			//TODO Maybe? Update markers in _recursivelyBecomeVisible                                                           // 1235
			fg.eachLayer(function (n) {                                                                                         // 1236
				if (!(n instanceof L.MarkerCluster) && n._icon) {                                                                  // 1237
					n.clusterShow();                                                                                                  // 1238
				}                                                                                                                  // 1239
			});                                                                                                                 // 1240
                                                                                                                       // 1241
			//update the positions of the just added clusters/markers                                                           // 1242
			this._topClusterLevel._recursively(bounds, previousZoomLevel, newZoomLevel, function (c) {                          // 1243
				c._recursivelyRestoreChildPositions(newZoomLevel);                                                                 // 1244
			});                                                                                                                 // 1245
                                                                                                                       // 1246
			this._ignoreMove = false;                                                                                           // 1247
                                                                                                                       // 1248
			//Remove the old clusters and close the zoom animation                                                              // 1249
			this._enqueue(function () {                                                                                         // 1250
				//update the positions of the just added clusters/markers                                                          // 1251
				this._topClusterLevel._recursively(bounds, previousZoomLevel, minZoom, function (c) {                              // 1252
					fg.removeLayer(c);                                                                                                // 1253
					c.clusterShow();                                                                                                  // 1254
				});                                                                                                                // 1255
                                                                                                                       // 1256
				this._animationEnd();                                                                                              // 1257
			});                                                                                                                 // 1258
		},                                                                                                                   // 1259
                                                                                                                       // 1260
		_animationZoomOut: function (previousZoomLevel, newZoomLevel) {                                                      // 1261
			this._animationZoomOutSingle(this._topClusterLevel, previousZoomLevel - 1, newZoomLevel);                           // 1262
                                                                                                                       // 1263
			//Need to add markers for those that weren't on the map before but are now                                          // 1264
			this._topClusterLevel._recursivelyAddChildrenToMap(null, newZoomLevel, this._getExpandedVisibleBounds());           // 1265
			//Remove markers that were on the map before but won't be now                                                       // 1266
			this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, previousZoomLevel, this._getExpandedVisibleBounds());
		},                                                                                                                   // 1268
                                                                                                                       // 1269
		_animationAddLayer: function (layer, newCluster) {                                                                   // 1270
			var me = this,                                                                                                      // 1271
			    fg = this._featureGroup;                                                                                        // 1272
                                                                                                                       // 1273
			fg.addLayer(layer);                                                                                                 // 1274
			if (newCluster !== layer) {                                                                                         // 1275
				if (newCluster._childCount > 2) { //Was already a cluster                                                          // 1276
                                                                                                                       // 1277
					newCluster._updateIcon();                                                                                         // 1278
					this._forceLayout();                                                                                              // 1279
					this._animationStart();                                                                                           // 1280
                                                                                                                       // 1281
					layer._setPos(this._map.latLngToLayerPoint(newCluster.getLatLng()));                                              // 1282
					layer.clusterHide();                                                                                              // 1283
                                                                                                                       // 1284
					this._enqueue(function () {                                                                                       // 1285
						fg.removeLayer(layer);                                                                                           // 1286
						layer.clusterShow();                                                                                             // 1287
                                                                                                                       // 1288
						me._animationEnd();                                                                                              // 1289
					});                                                                                                               // 1290
                                                                                                                       // 1291
				} else { //Just became a cluster                                                                                   // 1292
					this._forceLayout();                                                                                              // 1293
                                                                                                                       // 1294
					me._animationStart();                                                                                             // 1295
					me._animationZoomOutSingle(newCluster, this._map.getMaxZoom(), this._zoom);                                       // 1296
				}                                                                                                                  // 1297
			}                                                                                                                   // 1298
		}                                                                                                                    // 1299
	},                                                                                                                    // 1300
                                                                                                                       // 1301
	// Private methods for animated versions.                                                                             // 1302
	_animationZoomOutSingle: function (cluster, previousZoomLevel, newZoomLevel) {                                        // 1303
		var bounds = this._getExpandedVisibleBounds(),                                                                       // 1304
			minZoom = this._map.getMinZoom();                                                                                   // 1305
                                                                                                                       // 1306
		//Animate all of the markers in the clusters to move to their cluster center point                                   // 1307
		cluster._recursivelyAnimateChildrenInAndAddSelfToMap(bounds, previousZoomLevel + 1, newZoomLevel);                   // 1308
                                                                                                                       // 1309
		var me = this;                                                                                                       // 1310
                                                                                                                       // 1311
		//Update the opacity (If we immediately set it they won't animate)                                                   // 1312
		this._forceLayout();                                                                                                 // 1313
		cluster._recursivelyBecomeVisible(bounds, newZoomLevel);                                                             // 1314
                                                                                                                       // 1315
		//TODO: Maybe use the transition timing stuff to make this more reliable                                             // 1316
		//When the animations are done, tidy up                                                                              // 1317
		this._enqueue(function () {                                                                                          // 1318
                                                                                                                       // 1319
			//This cluster stopped being a cluster before the timeout fired                                                     // 1320
			if (cluster._childCount === 1) {                                                                                    // 1321
				var m = cluster._markers[0];                                                                                       // 1322
				//If we were in a cluster animation at the time then the opacity and position of our child could be wrong now, so fix it
				this._ignoreMove = true;                                                                                           // 1324
				m.setLatLng(m.getLatLng());                                                                                        // 1325
				this._ignoreMove = false;                                                                                          // 1326
				if (m.clusterShow) {                                                                                               // 1327
					m.clusterShow();                                                                                                  // 1328
				}                                                                                                                  // 1329
			} else {                                                                                                            // 1330
				cluster._recursively(bounds, newZoomLevel, minZoom, function (c) {                                                 // 1331
					c._recursivelyRemoveChildrenFromMap(bounds, previousZoomLevel + 1);                                               // 1332
				});                                                                                                                // 1333
			}                                                                                                                   // 1334
			me._animationEnd();                                                                                                 // 1335
		});                                                                                                                  // 1336
	},                                                                                                                    // 1337
                                                                                                                       // 1338
	_animationEnd: function () {                                                                                          // 1339
		if (this._map) {                                                                                                     // 1340
			this._map._mapPane.className = this._map._mapPane.className.replace(' leaflet-cluster-anim', '');                   // 1341
		}                                                                                                                    // 1342
		this._inZoomAnimation--;                                                                                             // 1343
		this.fire('animationend');                                                                                           // 1344
	},                                                                                                                    // 1345
                                                                                                                       // 1346
	//Force a browser layout of stuff in the map                                                                          // 1347
	// Should apply the current opacity and location to all elements so we can update them again for an animation         // 1348
	_forceLayout: function () {                                                                                           // 1349
		//In my testing this works, infact offsetWidth of any element seems to work.                                         // 1350
		//Could loop all this._layers and do this for each _icon if it stops working                                         // 1351
                                                                                                                       // 1352
		L.Util.falseFn(document.body.offsetWidth);                                                                           // 1353
	}                                                                                                                     // 1354
});                                                                                                                    // 1355
                                                                                                                       // 1356
L.markerClusterGroup = function (options) {                                                                            // 1357
	return new L.MarkerClusterGroup(options);                                                                             // 1358
};                                                                                                                     // 1359
                                                                                                                       // 1360
                                                                                                                       // 1361
L.MarkerCluster = L.Marker.extend({                                                                                    // 1362
	initialize: function (group, zoom, a, b) {                                                                            // 1363
                                                                                                                       // 1364
		L.Marker.prototype.initialize.call(this, a ? (a._cLatLng || a.getLatLng()) : new L.LatLng(0, 0), { icon: this });    // 1365
                                                                                                                       // 1366
                                                                                                                       // 1367
		this._group = group;                                                                                                 // 1368
		this._zoom = zoom;                                                                                                   // 1369
                                                                                                                       // 1370
		this._markers = [];                                                                                                  // 1371
		this._childClusters = [];                                                                                            // 1372
		this._childCount = 0;                                                                                                // 1373
		this._iconNeedsUpdate = true;                                                                                        // 1374
		this._boundsNeedUpdate = true;                                                                                       // 1375
                                                                                                                       // 1376
		this._bounds = new L.LatLngBounds();                                                                                 // 1377
                                                                                                                       // 1378
		if (a) {                                                                                                             // 1379
			this._addChild(a);                                                                                                  // 1380
		}                                                                                                                    // 1381
		if (b) {                                                                                                             // 1382
			this._addChild(b);                                                                                                  // 1383
		}                                                                                                                    // 1384
	},                                                                                                                    // 1385
                                                                                                                       // 1386
	//Recursively retrieve all child markers of this cluster                                                              // 1387
	getAllChildMarkers: function (storageArray) {                                                                         // 1388
		storageArray = storageArray || [];                                                                                   // 1389
                                                                                                                       // 1390
		for (var i = this._childClusters.length - 1; i >= 0; i--) {                                                          // 1391
			this._childClusters[i].getAllChildMarkers(storageArray);                                                            // 1392
		}                                                                                                                    // 1393
                                                                                                                       // 1394
		for (var j = this._markers.length - 1; j >= 0; j--) {                                                                // 1395
			storageArray.push(this._markers[j]);                                                                                // 1396
		}                                                                                                                    // 1397
                                                                                                                       // 1398
		return storageArray;                                                                                                 // 1399
	},                                                                                                                    // 1400
                                                                                                                       // 1401
	//Returns the count of how many child markers we have                                                                 // 1402
	getChildCount: function () {                                                                                          // 1403
		return this._childCount;                                                                                             // 1404
	},                                                                                                                    // 1405
                                                                                                                       // 1406
	//Zoom to the minimum of showing all of the child markers, or the extents of this cluster                             // 1407
	zoomToBounds: function () {                                                                                           // 1408
		var childClusters = this._childClusters.slice(),                                                                     // 1409
			map = this._group._map,                                                                                             // 1410
			boundsZoom = map.getBoundsZoom(this._bounds),                                                                       // 1411
			zoom = this._zoom + 1,                                                                                              // 1412
			mapZoom = map.getZoom(),                                                                                            // 1413
			i;                                                                                                                  // 1414
                                                                                                                       // 1415
		//calculate how far we need to zoom down to see all of the markers                                                   // 1416
		while (childClusters.length > 0 && boundsZoom > zoom) {                                                              // 1417
			zoom++;                                                                                                             // 1418
			var newClusters = [];                                                                                               // 1419
			for (i = 0; i < childClusters.length; i++) {                                                                        // 1420
				newClusters = newClusters.concat(childClusters[i]._childClusters);                                                 // 1421
			}                                                                                                                   // 1422
			childClusters = newClusters;                                                                                        // 1423
		}                                                                                                                    // 1424
                                                                                                                       // 1425
		if (boundsZoom > zoom) {                                                                                             // 1426
			this._group._map.setView(this._latlng, zoom);                                                                       // 1427
		} else if (boundsZoom <= mapZoom) { //If fitBounds wouldn't zoom us down, zoom us down instead                       // 1428
			this._group._map.setView(this._latlng, mapZoom + 1);                                                                // 1429
		} else {                                                                                                             // 1430
			this._group._map.fitBounds(this._bounds);                                                                           // 1431
		}                                                                                                                    // 1432
	},                                                                                                                    // 1433
                                                                                                                       // 1434
	getBounds: function () {                                                                                              // 1435
		var bounds = new L.LatLngBounds();                                                                                   // 1436
		bounds.extend(this._bounds);                                                                                         // 1437
		return bounds;                                                                                                       // 1438
	},                                                                                                                    // 1439
                                                                                                                       // 1440
	_updateIcon: function () {                                                                                            // 1441
		this._iconNeedsUpdate = true;                                                                                        // 1442
		if (this._icon) {                                                                                                    // 1443
			this.setIcon(this);                                                                                                 // 1444
		}                                                                                                                    // 1445
	},                                                                                                                    // 1446
                                                                                                                       // 1447
	//Cludge for Icon, we pretend to be an icon for performance                                                           // 1448
	createIcon: function () {                                                                                             // 1449
		if (this._iconNeedsUpdate) {                                                                                         // 1450
			this._iconObj = this._group.options.iconCreateFunction(this);                                                       // 1451
			this._iconNeedsUpdate = false;                                                                                      // 1452
		}                                                                                                                    // 1453
		return this._iconObj.createIcon();                                                                                   // 1454
	},                                                                                                                    // 1455
	createShadow: function () {                                                                                           // 1456
		return this._iconObj.createShadow();                                                                                 // 1457
	},                                                                                                                    // 1458
                                                                                                                       // 1459
                                                                                                                       // 1460
	_addChild: function (new1, isNotificationFromChild) {                                                                 // 1461
                                                                                                                       // 1462
		this._iconNeedsUpdate = true;                                                                                        // 1463
                                                                                                                       // 1464
		this._boundsNeedUpdate = true;                                                                                       // 1465
		this._setClusterCenter(new1);                                                                                        // 1466
                                                                                                                       // 1467
		if (new1 instanceof L.MarkerCluster) {                                                                               // 1468
			if (!isNotificationFromChild) {                                                                                     // 1469
				this._childClusters.push(new1);                                                                                    // 1470
				new1.__parent = this;                                                                                              // 1471
			}                                                                                                                   // 1472
			this._childCount += new1._childCount;                                                                               // 1473
		} else {                                                                                                             // 1474
			if (!isNotificationFromChild) {                                                                                     // 1475
				this._markers.push(new1);                                                                                          // 1476
			}                                                                                                                   // 1477
			this._childCount++;                                                                                                 // 1478
		}                                                                                                                    // 1479
                                                                                                                       // 1480
		if (this.__parent) {                                                                                                 // 1481
			this.__parent._addChild(new1, true);                                                                                // 1482
		}                                                                                                                    // 1483
	},                                                                                                                    // 1484
                                                                                                                       // 1485
	/**                                                                                                                   // 1486
	 * Makes sure the cluster center is set. If not, uses the child center if it is a cluster, or the marker position.    // 1487
	 * @param child L.MarkerCluster|L.Marker that will be used as cluster center if not defined yet.                      // 1488
	 * @private                                                                                                           // 1489
	 */                                                                                                                   // 1490
	_setClusterCenter: function (child) {                                                                                 // 1491
		if (!this._cLatLng) {                                                                                                // 1492
			// when clustering, take position of the first point as the cluster center                                          // 1493
			this._cLatLng = child._cLatLng || child._latlng;                                                                    // 1494
		}                                                                                                                    // 1495
	},                                                                                                                    // 1496
                                                                                                                       // 1497
	/**                                                                                                                   // 1498
	 * Assigns impossible bounding values so that the next extend entirely determines the new bounds.                     // 1499
	 * This method avoids having to trash the previous L.LatLngBounds object and to create a new one, which is much slower for this class.
	 * As long as the bounds are not extended, most other methods would probably fail, as they would with bounds initialized but not extended.
	 * @private                                                                                                           // 1502
	 */                                                                                                                   // 1503
	_resetBounds: function () {                                                                                           // 1504
		var bounds = this._bounds;                                                                                           // 1505
                                                                                                                       // 1506
		if (bounds._southWest) {                                                                                             // 1507
			bounds._southWest.lat = Infinity;                                                                                   // 1508
			bounds._southWest.lng = Infinity;                                                                                   // 1509
		}                                                                                                                    // 1510
		if (bounds._northEast) {                                                                                             // 1511
			bounds._northEast.lat = -Infinity;                                                                                  // 1512
			bounds._northEast.lng = -Infinity;                                                                                  // 1513
		}                                                                                                                    // 1514
	},                                                                                                                    // 1515
                                                                                                                       // 1516
	_recalculateBounds: function () {                                                                                     // 1517
		var markers = this._markers,                                                                                         // 1518
		    childClusters = this._childClusters,                                                                             // 1519
		    latSum = 0,                                                                                                      // 1520
		    lngSum = 0,                                                                                                      // 1521
		    totalCount = this._childCount,                                                                                   // 1522
		    i, child, childLatLng, childCount;                                                                               // 1523
                                                                                                                       // 1524
		// Case where all markers are removed from the map and we are left with just an empty _topClusterLevel.              // 1525
		if (totalCount === 0) {                                                                                              // 1526
			return;                                                                                                             // 1527
		}                                                                                                                    // 1528
                                                                                                                       // 1529
		// Reset rather than creating a new object, for performance.                                                         // 1530
		this._resetBounds();                                                                                                 // 1531
                                                                                                                       // 1532
		// Child markers.                                                                                                    // 1533
		for (i = 0; i < markers.length; i++) {                                                                               // 1534
			childLatLng = markers[i]._latlng;                                                                                   // 1535
                                                                                                                       // 1536
			this._bounds.extend(childLatLng);                                                                                   // 1537
                                                                                                                       // 1538
			latSum += childLatLng.lat;                                                                                          // 1539
			lngSum += childLatLng.lng;                                                                                          // 1540
		}                                                                                                                    // 1541
                                                                                                                       // 1542
		// Child clusters.                                                                                                   // 1543
		for (i = 0; i < childClusters.length; i++) {                                                                         // 1544
			child = childClusters[i];                                                                                           // 1545
                                                                                                                       // 1546
			// Re-compute child bounds and weighted position first if necessary.                                                // 1547
			if (child._boundsNeedUpdate) {                                                                                      // 1548
				child._recalculateBounds();                                                                                        // 1549
			}                                                                                                                   // 1550
                                                                                                                       // 1551
			this._bounds.extend(child._bounds);                                                                                 // 1552
                                                                                                                       // 1553
			childLatLng = child._wLatLng;                                                                                       // 1554
			childCount = child._childCount;                                                                                     // 1555
                                                                                                                       // 1556
			latSum += childLatLng.lat * childCount;                                                                             // 1557
			lngSum += childLatLng.lng * childCount;                                                                             // 1558
		}                                                                                                                    // 1559
                                                                                                                       // 1560
		this._latlng = this._wLatLng = new L.LatLng(latSum / totalCount, lngSum / totalCount);                               // 1561
                                                                                                                       // 1562
		// Reset dirty flag.                                                                                                 // 1563
		this._boundsNeedUpdate = false;                                                                                      // 1564
	},                                                                                                                    // 1565
                                                                                                                       // 1566
	//Set our markers position as given and add it to the map                                                             // 1567
	_addToMap: function (startPos) {                                                                                      // 1568
		if (startPos) {                                                                                                      // 1569
			this._backupLatlng = this._latlng;                                                                                  // 1570
			this.setLatLng(startPos);                                                                                           // 1571
		}                                                                                                                    // 1572
		this._group._featureGroup.addLayer(this);                                                                            // 1573
	},                                                                                                                    // 1574
                                                                                                                       // 1575
	_recursivelyAnimateChildrenIn: function (bounds, center, maxZoom) {                                                   // 1576
		this._recursively(bounds, this._group._map.getMinZoom(), maxZoom - 1,                                                // 1577
			function (c) {                                                                                                      // 1578
				var markers = c._markers,                                                                                          // 1579
					i, m;                                                                                                             // 1580
				for (i = markers.length - 1; i >= 0; i--) {                                                                        // 1581
					m = markers[i];                                                                                                   // 1582
                                                                                                                       // 1583
					//Only do it if the icon is still on the map                                                                      // 1584
					if (m._icon) {                                                                                                    // 1585
						m._setPos(center);                                                                                               // 1586
						m.clusterHide();                                                                                                 // 1587
					}                                                                                                                 // 1588
				}                                                                                                                  // 1589
			},                                                                                                                  // 1590
			function (c) {                                                                                                      // 1591
				var childClusters = c._childClusters,                                                                              // 1592
					j, cm;                                                                                                            // 1593
				for (j = childClusters.length - 1; j >= 0; j--) {                                                                  // 1594
					cm = childClusters[j];                                                                                            // 1595
					if (cm._icon) {                                                                                                   // 1596
						cm._setPos(center);                                                                                              // 1597
						cm.clusterHide();                                                                                                // 1598
					}                                                                                                                 // 1599
				}                                                                                                                  // 1600
			}                                                                                                                   // 1601
		);                                                                                                                   // 1602
	},                                                                                                                    // 1603
                                                                                                                       // 1604
	_recursivelyAnimateChildrenInAndAddSelfToMap: function (bounds, previousZoomLevel, newZoomLevel) {                    // 1605
		this._recursively(bounds, newZoomLevel, this._group._map.getMinZoom(),                                               // 1606
			function (c) {                                                                                                      // 1607
				c._recursivelyAnimateChildrenIn(bounds, c._group._map.latLngToLayerPoint(c.getLatLng()).round(), previousZoomLevel);
                                                                                                                       // 1609
				//TODO: depthToAnimateIn affects _isSingleParent, if there is a multizoom we may/may not be.                       // 1610
				//As a hack we only do a animation free zoom on a single level zoom, if someone does multiple levels then we always animate
				if (c._isSingleParent() && previousZoomLevel - 1 === newZoomLevel) {                                               // 1612
					c.clusterShow();                                                                                                  // 1613
					c._recursivelyRemoveChildrenFromMap(bounds, previousZoomLevel); //Immediately remove our children as we are replacing them. TODO previousBounds not bounds
				} else {                                                                                                           // 1615
					c.clusterHide();                                                                                                  // 1616
				}                                                                                                                  // 1617
                                                                                                                       // 1618
				c._addToMap();                                                                                                     // 1619
			}                                                                                                                   // 1620
		);                                                                                                                   // 1621
	},                                                                                                                    // 1622
                                                                                                                       // 1623
	_recursivelyBecomeVisible: function (bounds, zoomLevel) {                                                             // 1624
		this._recursively(bounds, this._group._map.getMinZoom(), zoomLevel, null, function (c) {                             // 1625
			c.clusterShow();                                                                                                    // 1626
		});                                                                                                                  // 1627
	},                                                                                                                    // 1628
                                                                                                                       // 1629
	_recursivelyAddChildrenToMap: function (startPos, zoomLevel, bounds) {                                                // 1630
		this._recursively(bounds, this._group._map.getMinZoom() - 1, zoomLevel,                                              // 1631
			function (c) {                                                                                                      // 1632
				if (zoomLevel === c._zoom) {                                                                                       // 1633
					return;                                                                                                           // 1634
				}                                                                                                                  // 1635
                                                                                                                       // 1636
				//Add our child markers at startPos (so they can be animated out)                                                  // 1637
				for (var i = c._markers.length - 1; i >= 0; i--) {                                                                 // 1638
					var nm = c._markers[i];                                                                                           // 1639
                                                                                                                       // 1640
					if (!bounds.contains(nm._latlng)) {                                                                               // 1641
						continue;                                                                                                        // 1642
					}                                                                                                                 // 1643
                                                                                                                       // 1644
					if (startPos) {                                                                                                   // 1645
						nm._backupLatlng = nm.getLatLng();                                                                               // 1646
                                                                                                                       // 1647
						nm.setLatLng(startPos);                                                                                          // 1648
						if (nm.clusterHide) {                                                                                            // 1649
							nm.clusterHide();                                                                                               // 1650
						}                                                                                                                // 1651
					}                                                                                                                 // 1652
                                                                                                                       // 1653
					c._group._featureGroup.addLayer(nm);                                                                              // 1654
				}                                                                                                                  // 1655
			},                                                                                                                  // 1656
			function (c) {                                                                                                      // 1657
				c._addToMap(startPos);                                                                                             // 1658
			}                                                                                                                   // 1659
		);                                                                                                                   // 1660
	},                                                                                                                    // 1661
                                                                                                                       // 1662
	_recursivelyRestoreChildPositions: function (zoomLevel) {                                                             // 1663
		//Fix positions of child markers                                                                                     // 1664
		for (var i = this._markers.length - 1; i >= 0; i--) {                                                                // 1665
			var nm = this._markers[i];                                                                                          // 1666
			if (nm._backupLatlng) {                                                                                             // 1667
				nm.setLatLng(nm._backupLatlng);                                                                                    // 1668
				delete nm._backupLatlng;                                                                                           // 1669
			}                                                                                                                   // 1670
		}                                                                                                                    // 1671
                                                                                                                       // 1672
		if (zoomLevel - 1 === this._zoom) {                                                                                  // 1673
			//Reposition child clusters                                                                                         // 1674
			for (var j = this._childClusters.length - 1; j >= 0; j--) {                                                         // 1675
				this._childClusters[j]._restorePosition();                                                                         // 1676
			}                                                                                                                   // 1677
		} else {                                                                                                             // 1678
			for (var k = this._childClusters.length - 1; k >= 0; k--) {                                                         // 1679
				this._childClusters[k]._recursivelyRestoreChildPositions(zoomLevel);                                               // 1680
			}                                                                                                                   // 1681
		}                                                                                                                    // 1682
	},                                                                                                                    // 1683
                                                                                                                       // 1684
	_restorePosition: function () {                                                                                       // 1685
		if (this._backupLatlng) {                                                                                            // 1686
			this.setLatLng(this._backupLatlng);                                                                                 // 1687
			delete this._backupLatlng;                                                                                          // 1688
		}                                                                                                                    // 1689
	},                                                                                                                    // 1690
                                                                                                                       // 1691
	//exceptBounds: If set, don't remove any markers/clusters in it                                                       // 1692
	_recursivelyRemoveChildrenFromMap: function (previousBounds, zoomLevel, exceptBounds) {                               // 1693
		var m, i;                                                                                                            // 1694
		this._recursively(previousBounds, this._group._map.getMinZoom() - 1, zoomLevel - 1,                                  // 1695
			function (c) {                                                                                                      // 1696
				//Remove markers at every level                                                                                    // 1697
				for (i = c._markers.length - 1; i >= 0; i--) {                                                                     // 1698
					m = c._markers[i];                                                                                                // 1699
					if (!exceptBounds || !exceptBounds.contains(m._latlng)) {                                                         // 1700
						c._group._featureGroup.removeLayer(m);                                                                           // 1701
						if (m.clusterShow) {                                                                                             // 1702
							m.clusterShow();                                                                                                // 1703
						}                                                                                                                // 1704
					}                                                                                                                 // 1705
				}                                                                                                                  // 1706
			},                                                                                                                  // 1707
			function (c) {                                                                                                      // 1708
				//Remove child clusters at just the bottom level                                                                   // 1709
				for (i = c._childClusters.length - 1; i >= 0; i--) {                                                               // 1710
					m = c._childClusters[i];                                                                                          // 1711
					if (!exceptBounds || !exceptBounds.contains(m._latlng)) {                                                         // 1712
						c._group._featureGroup.removeLayer(m);                                                                           // 1713
						if (m.clusterShow) {                                                                                             // 1714
							m.clusterShow();                                                                                                // 1715
						}                                                                                                                // 1716
					}                                                                                                                 // 1717
				}                                                                                                                  // 1718
			}                                                                                                                   // 1719
		);                                                                                                                   // 1720
	},                                                                                                                    // 1721
                                                                                                                       // 1722
	//Run the given functions recursively to this and child clusters                                                      // 1723
	// boundsToApplyTo: a L.LatLngBounds representing the bounds of what clusters to recurse in to                        // 1724
	// zoomLevelToStart: zoom level to start running functions (inclusive)                                                // 1725
	// zoomLevelToStop: zoom level to stop running functions (inclusive)                                                  // 1726
	// runAtEveryLevel: function that takes an L.MarkerCluster as an argument that should be applied on every level       // 1727
	// runAtBottomLevel: function that takes an L.MarkerCluster as an argument that should be applied at only the bottom level
	_recursively: function (boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel) {      // 1729
		var childClusters = this._childClusters,                                                                             // 1730
		    zoom = this._zoom,                                                                                               // 1731
		    i, c;                                                                                                            // 1732
                                                                                                                       // 1733
		if (zoomLevelToStart <= zoom) {                                                                                      // 1734
			if (runAtEveryLevel) {                                                                                              // 1735
				runAtEveryLevel(this);                                                                                             // 1736
			}                                                                                                                   // 1737
			if (runAtBottomLevel && zoom === zoomLevelToStop) {                                                                 // 1738
				runAtBottomLevel(this);                                                                                            // 1739
			}                                                                                                                   // 1740
		}                                                                                                                    // 1741
                                                                                                                       // 1742
		if (zoom < zoomLevelToStart || zoom < zoomLevelToStop) {                                                             // 1743
			for (i = childClusters.length - 1; i >= 0; i--) {                                                                   // 1744
				c = childClusters[i];                                                                                              // 1745
				if (boundsToApplyTo.intersects(c._bounds)) {                                                                       // 1746
					c._recursively(boundsToApplyTo, zoomLevelToStart, zoomLevelToStop, runAtEveryLevel, runAtBottomLevel);            // 1747
				}                                                                                                                  // 1748
			}                                                                                                                   // 1749
		}                                                                                                                    // 1750
	},                                                                                                                    // 1751
                                                                                                                       // 1752
	//Returns true if we are the parent of only one cluster and that cluster is the same as us                            // 1753
	_isSingleParent: function () {                                                                                        // 1754
		//Don't need to check this._markers as the rest won't work if there are any                                          // 1755
		return this._childClusters.length > 0 && this._childClusters[0]._childCount === this._childCount;                    // 1756
	}                                                                                                                     // 1757
});                                                                                                                    // 1758
                                                                                                                       // 1759
                                                                                                                       // 1760
                                                                                                                       // 1761
/*                                                                                                                     // 1762
* Extends L.Marker to include two extra methods: clusterHide and clusterShow.                                          // 1763
*                                                                                                                      // 1764
* They work as setOpacity(0) and setOpacity(1) respectively, but                                                       // 1765
* they will remember the marker's opacity when hiding and showing it again.                                            // 1766
*                                                                                                                      // 1767
*/                                                                                                                     // 1768
                                                                                                                       // 1769
                                                                                                                       // 1770
L.Marker.include({                                                                                                     // 1771
	                                                                                                                      // 1772
	clusterHide: function () {                                                                                            // 1773
		this.options.opacityWhenUnclustered = this.options.opacity || 1;                                                     // 1774
		return this.setOpacity(0);                                                                                           // 1775
	},                                                                                                                    // 1776
	                                                                                                                      // 1777
	clusterShow: function () {                                                                                            // 1778
		var ret = this.setOpacity(this.options.opacity || this.options.opacityWhenUnclustered);                              // 1779
		delete this.options.opacityWhenUnclustered;                                                                          // 1780
		return ret;                                                                                                          // 1781
	}                                                                                                                     // 1782
	                                                                                                                      // 1783
});                                                                                                                    // 1784
                                                                                                                       // 1785
                                                                                                                       // 1786
                                                                                                                       // 1787
                                                                                                                       // 1788
                                                                                                                       // 1789
L.DistanceGrid = function (cellSize) {                                                                                 // 1790
	this._cellSize = cellSize;                                                                                            // 1791
	this._sqCellSize = cellSize * cellSize;                                                                               // 1792
	this._grid = {};                                                                                                      // 1793
	this._objectPoint = { };                                                                                              // 1794
};                                                                                                                     // 1795
                                                                                                                       // 1796
L.DistanceGrid.prototype = {                                                                                           // 1797
                                                                                                                       // 1798
	addObject: function (obj, point) {                                                                                    // 1799
		var x = this._getCoord(point.x),                                                                                     // 1800
		    y = this._getCoord(point.y),                                                                                     // 1801
		    grid = this._grid,                                                                                               // 1802
		    row = grid[y] = grid[y] || {},                                                                                   // 1803
		    cell = row[x] = row[x] || [],                                                                                    // 1804
		    stamp = L.Util.stamp(obj);                                                                                       // 1805
                                                                                                                       // 1806
		this._objectPoint[stamp] = point;                                                                                    // 1807
                                                                                                                       // 1808
		cell.push(obj);                                                                                                      // 1809
	},                                                                                                                    // 1810
                                                                                                                       // 1811
	updateObject: function (obj, point) {                                                                                 // 1812
		this.removeObject(obj);                                                                                              // 1813
		this.addObject(obj, point);                                                                                          // 1814
	},                                                                                                                    // 1815
                                                                                                                       // 1816
	//Returns true if the object was found                                                                                // 1817
	removeObject: function (obj, point) {                                                                                 // 1818
		var x = this._getCoord(point.x),                                                                                     // 1819
		    y = this._getCoord(point.y),                                                                                     // 1820
		    grid = this._grid,                                                                                               // 1821
		    row = grid[y] = grid[y] || {},                                                                                   // 1822
		    cell = row[x] = row[x] || [],                                                                                    // 1823
		    i, len;                                                                                                          // 1824
                                                                                                                       // 1825
		delete this._objectPoint[L.Util.stamp(obj)];                                                                         // 1826
                                                                                                                       // 1827
		for (i = 0, len = cell.length; i < len; i++) {                                                                       // 1828
			if (cell[i] === obj) {                                                                                              // 1829
                                                                                                                       // 1830
				cell.splice(i, 1);                                                                                                 // 1831
                                                                                                                       // 1832
				if (len === 1) {                                                                                                   // 1833
					delete row[x];                                                                                                    // 1834
				}                                                                                                                  // 1835
                                                                                                                       // 1836
				return true;                                                                                                       // 1837
			}                                                                                                                   // 1838
		}                                                                                                                    // 1839
                                                                                                                       // 1840
	},                                                                                                                    // 1841
                                                                                                                       // 1842
	eachObject: function (fn, context) {                                                                                  // 1843
		var i, j, k, len, row, cell, removed,                                                                                // 1844
		    grid = this._grid;                                                                                               // 1845
                                                                                                                       // 1846
		for (i in grid) {                                                                                                    // 1847
			row = grid[i];                                                                                                      // 1848
                                                                                                                       // 1849
			for (j in row) {                                                                                                    // 1850
				cell = row[j];                                                                                                     // 1851
                                                                                                                       // 1852
				for (k = 0, len = cell.length; k < len; k++) {                                                                     // 1853
					removed = fn.call(context, cell[k]);                                                                              // 1854
					if (removed) {                                                                                                    // 1855
						k--;                                                                                                             // 1856
						len--;                                                                                                           // 1857
					}                                                                                                                 // 1858
				}                                                                                                                  // 1859
			}                                                                                                                   // 1860
		}                                                                                                                    // 1861
	},                                                                                                                    // 1862
                                                                                                                       // 1863
	getNearObject: function (point) {                                                                                     // 1864
		var x = this._getCoord(point.x),                                                                                     // 1865
		    y = this._getCoord(point.y),                                                                                     // 1866
		    i, j, k, row, cell, len, obj, dist,                                                                              // 1867
		    objectPoint = this._objectPoint,                                                                                 // 1868
		    closestDistSq = this._sqCellSize,                                                                                // 1869
		    closest = null;                                                                                                  // 1870
                                                                                                                       // 1871
		for (i = y - 1; i <= y + 1; i++) {                                                                                   // 1872
			row = this._grid[i];                                                                                                // 1873
			if (row) {                                                                                                          // 1874
                                                                                                                       // 1875
				for (j = x - 1; j <= x + 1; j++) {                                                                                 // 1876
					cell = row[j];                                                                                                    // 1877
					if (cell) {                                                                                                       // 1878
                                                                                                                       // 1879
						for (k = 0, len = cell.length; k < len; k++) {                                                                   // 1880
							obj = cell[k];                                                                                                  // 1881
							dist = this._sqDist(objectPoint[L.Util.stamp(obj)], point);                                                     // 1882
							if (dist < closestDistSq) {                                                                                     // 1883
								closestDistSq = dist;                                                                                          // 1884
								closest = obj;                                                                                                 // 1885
							}                                                                                                               // 1886
						}                                                                                                                // 1887
					}                                                                                                                 // 1888
				}                                                                                                                  // 1889
			}                                                                                                                   // 1890
		}                                                                                                                    // 1891
		return closest;                                                                                                      // 1892
	},                                                                                                                    // 1893
                                                                                                                       // 1894
	_getCoord: function (x) {                                                                                             // 1895
		return Math.floor(x / this._cellSize);                                                                               // 1896
	},                                                                                                                    // 1897
                                                                                                                       // 1898
	_sqDist: function (p, p2) {                                                                                           // 1899
		var dx = p2.x - p.x,                                                                                                 // 1900
		    dy = p2.y - p.y;                                                                                                 // 1901
		return dx * dx + dy * dy;                                                                                            // 1902
	}                                                                                                                     // 1903
};                                                                                                                     // 1904
                                                                                                                       // 1905
                                                                                                                       // 1906
/* Copyright (c) 2012 the authors listed at the following URL, and/or                                                  // 1907
the authors of referenced articles or incorporated external code:                                                      // 1908
http://en.literateprograms.org/Quickhull_(Javascript)?action=history&offset=20120410175256                             // 1909
                                                                                                                       // 1910
Permission is hereby granted, free of charge, to any person obtaining                                                  // 1911
a copy of this software and associated documentation files (the                                                        // 1912
"Software"), to deal in the Software without restriction, including                                                    // 1913
without limitation the rights to use, copy, modify, merge, publish,                                                    // 1914
distribute, sublicense, and/or sell copies of the Software, and to                                                     // 1915
permit persons to whom the Software is furnished to do so, subject to                                                  // 1916
the following conditions:                                                                                              // 1917
                                                                                                                       // 1918
The above copyright notice and this permission notice shall be                                                         // 1919
included in all copies or substantial portions of the Software.                                                        // 1920
                                                                                                                       // 1921
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,                                                        // 1922
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF                                                     // 1923
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.                                                 // 1924
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY                                                   // 1925
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,                                                   // 1926
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE                                                      // 1927
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.                                                                 // 1928
                                                                                                                       // 1929
Retrieved from: http://en.literateprograms.org/Quickhull_(Javascript)?oldid=18434                                      // 1930
*/                                                                                                                     // 1931
                                                                                                                       // 1932
(function () {                                                                                                         // 1933
	L.QuickHull = {                                                                                                       // 1934
                                                                                                                       // 1935
		/*                                                                                                                   // 1936
		 * @param {Object} cpt a point to be measured from the baseline                                                      // 1937
		 * @param {Array} bl the baseline, as represented by a two-element                                                   // 1938
		 *   array of latlng objects.                                                                                        // 1939
		 * @returns {Number} an approximate distance measure                                                                 // 1940
		 */                                                                                                                  // 1941
		getDistant: function (cpt, bl) {                                                                                     // 1942
			var vY = bl[1].lat - bl[0].lat,                                                                                     // 1943
				vX = bl[0].lng - bl[1].lng;                                                                                        // 1944
			return (vX * (cpt.lat - bl[0].lat) + vY * (cpt.lng - bl[0].lng));                                                   // 1945
		},                                                                                                                   // 1946
                                                                                                                       // 1947
		/*                                                                                                                   // 1948
		 * @param {Array} baseLine a two-element array of latlng objects                                                     // 1949
		 *   representing the baseline to project from                                                                       // 1950
		 * @param {Array} latLngs an array of latlng objects                                                                 // 1951
		 * @returns {Object} the maximum point and all new points to stay                                                    // 1952
		 *   in consideration for the hull.                                                                                  // 1953
		 */                                                                                                                  // 1954
		findMostDistantPointFromBaseLine: function (baseLine, latLngs) {                                                     // 1955
			var maxD = 0,                                                                                                       // 1956
				maxPt = null,                                                                                                      // 1957
				newPoints = [],                                                                                                    // 1958
				i, pt, d;                                                                                                          // 1959
                                                                                                                       // 1960
			for (i = latLngs.length - 1; i >= 0; i--) {                                                                         // 1961
				pt = latLngs[i];                                                                                                   // 1962
				d = this.getDistant(pt, baseLine);                                                                                 // 1963
                                                                                                                       // 1964
				if (d > 0) {                                                                                                       // 1965
					newPoints.push(pt);                                                                                               // 1966
				} else {                                                                                                           // 1967
					continue;                                                                                                         // 1968
				}                                                                                                                  // 1969
                                                                                                                       // 1970
				if (d > maxD) {                                                                                                    // 1971
					maxD = d;                                                                                                         // 1972
					maxPt = pt;                                                                                                       // 1973
				}                                                                                                                  // 1974
			}                                                                                                                   // 1975
                                                                                                                       // 1976
			return { maxPoint: maxPt, newPoints: newPoints };                                                                   // 1977
		},                                                                                                                   // 1978
                                                                                                                       // 1979
                                                                                                                       // 1980
		/*                                                                                                                   // 1981
		 * Given a baseline, compute the convex hull of latLngs as an array                                                  // 1982
		 * of latLngs.                                                                                                       // 1983
		 *                                                                                                                   // 1984
		 * @param {Array} latLngs                                                                                            // 1985
		 * @returns {Array}                                                                                                  // 1986
		 */                                                                                                                  // 1987
		buildConvexHull: function (baseLine, latLngs) {                                                                      // 1988
			var convexHullBaseLines = [],                                                                                       // 1989
				t = this.findMostDistantPointFromBaseLine(baseLine, latLngs);                                                      // 1990
                                                                                                                       // 1991
			if (t.maxPoint) { // if there is still a point "outside" the base line                                              // 1992
				convexHullBaseLines =                                                                                              // 1993
					convexHullBaseLines.concat(                                                                                       // 1994
						this.buildConvexHull([baseLine[0], t.maxPoint], t.newPoints)                                                     // 1995
					);                                                                                                                // 1996
				convexHullBaseLines =                                                                                              // 1997
					convexHullBaseLines.concat(                                                                                       // 1998
						this.buildConvexHull([t.maxPoint, baseLine[1]], t.newPoints)                                                     // 1999
					);                                                                                                                // 2000
				return convexHullBaseLines;                                                                                        // 2001
			} else {  // if there is no more point "outside" the base line, the current base line is part of the convex hull    // 2002
				return [baseLine[0]];                                                                                              // 2003
			}                                                                                                                   // 2004
		},                                                                                                                   // 2005
                                                                                                                       // 2006
		/*                                                                                                                   // 2007
		 * Given an array of latlngs, compute a convex hull as an array                                                      // 2008
		 * of latlngs                                                                                                        // 2009
		 *                                                                                                                   // 2010
		 * @param {Array} latLngs                                                                                            // 2011
		 * @returns {Array}                                                                                                  // 2012
		 */                                                                                                                  // 2013
		getConvexHull: function (latLngs) {                                                                                  // 2014
			// find first baseline                                                                                              // 2015
			var maxLat = false, minLat = false,                                                                                 // 2016
				maxLng = false, minLng = false,                                                                                    // 2017
				maxLatPt = null, minLatPt = null,                                                                                  // 2018
				maxLngPt = null, minLngPt = null,                                                                                  // 2019
				maxPt = null, minPt = null,                                                                                        // 2020
				i;                                                                                                                 // 2021
                                                                                                                       // 2022
			for (i = latLngs.length - 1; i >= 0; i--) {                                                                         // 2023
				var pt = latLngs[i];                                                                                               // 2024
				if (maxLat === false || pt.lat > maxLat) {                                                                         // 2025
					maxLatPt = pt;                                                                                                    // 2026
					maxLat = pt.lat;                                                                                                  // 2027
				}                                                                                                                  // 2028
				if (minLat === false || pt.lat < minLat) {                                                                         // 2029
					minLatPt = pt;                                                                                                    // 2030
					minLat = pt.lat;                                                                                                  // 2031
				}                                                                                                                  // 2032
				if (maxLng === false || pt.lng > maxLng) {                                                                         // 2033
					maxLngPt = pt;                                                                                                    // 2034
					maxLng = pt.lng;                                                                                                  // 2035
				}                                                                                                                  // 2036
				if (minLng === false || pt.lng < minLng) {                                                                         // 2037
					minLngPt = pt;                                                                                                    // 2038
					minLng = pt.lng;                                                                                                  // 2039
				}                                                                                                                  // 2040
			}                                                                                                                   // 2041
			                                                                                                                    // 2042
			if (minLat !== maxLat) {                                                                                            // 2043
				minPt = minLatPt;                                                                                                  // 2044
				maxPt = maxLatPt;                                                                                                  // 2045
			} else {                                                                                                            // 2046
				minPt = minLngPt;                                                                                                  // 2047
				maxPt = maxLngPt;                                                                                                  // 2048
			}                                                                                                                   // 2049
                                                                                                                       // 2050
			var ch = [].concat(this.buildConvexHull([minPt, maxPt], latLngs),                                                   // 2051
								this.buildConvexHull([maxPt, minPt], latLngs));                                                                // 2052
			return ch;                                                                                                          // 2053
		}                                                                                                                    // 2054
	};                                                                                                                    // 2055
}());                                                                                                                  // 2056
                                                                                                                       // 2057
L.MarkerCluster.include({                                                                                              // 2058
	getConvexHull: function () {                                                                                          // 2059
		var childMarkers = this.getAllChildMarkers(),                                                                        // 2060
			points = [],                                                                                                        // 2061
			p, i;                                                                                                               // 2062
                                                                                                                       // 2063
		for (i = childMarkers.length - 1; i >= 0; i--) {                                                                     // 2064
			p = childMarkers[i].getLatLng();                                                                                    // 2065
			points.push(p);                                                                                                     // 2066
		}                                                                                                                    // 2067
                                                                                                                       // 2068
		return L.QuickHull.getConvexHull(points);                                                                            // 2069
	}                                                                                                                     // 2070
});                                                                                                                    // 2071
                                                                                                                       // 2072
                                                                                                                       // 2073
//This code is 100% based on https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet                               // 2074
//Huge thanks to jawj for implementing it first to make my job easy :-)                                                // 2075
                                                                                                                       // 2076
L.MarkerCluster.include({                                                                                              // 2077
                                                                                                                       // 2078
	_2PI: Math.PI * 2,                                                                                                    // 2079
	_circleFootSeparation: 25, //related to circumference of circle                                                       // 2080
	_circleStartAngle: Math.PI / 6,                                                                                       // 2081
                                                                                                                       // 2082
	_spiralFootSeparation:  28, //related to size of spiral (experiment!)                                                 // 2083
	_spiralLengthStart: 11,                                                                                               // 2084
	_spiralLengthFactor: 5,                                                                                               // 2085
                                                                                                                       // 2086
	_circleSpiralSwitchover: 9, //show spiral instead of circle from this marker count upwards.                           // 2087
								// 0 -> always spiral; Infinity -> always circle                                                               // 2088
                                                                                                                       // 2089
	spiderfy: function () {                                                                                               // 2090
		if (this._group._spiderfied === this || this._group._inZoomAnimation) {                                              // 2091
			return;                                                                                                             // 2092
		}                                                                                                                    // 2093
                                                                                                                       // 2094
		var childMarkers = this.getAllChildMarkers(),                                                                        // 2095
			group = this._group,                                                                                                // 2096
			map = group._map,                                                                                                   // 2097
			center = map.latLngToLayerPoint(this._latlng),                                                                      // 2098
			positions;                                                                                                          // 2099
                                                                                                                       // 2100
		this._group._unspiderfy();                                                                                           // 2101
		this._group._spiderfied = this;                                                                                      // 2102
                                                                                                                       // 2103
		//TODO Maybe: childMarkers order by distance to center                                                               // 2104
                                                                                                                       // 2105
		if (childMarkers.length >= this._circleSpiralSwitchover) {                                                           // 2106
			positions = this._generatePointsSpiral(childMarkers.length, center);                                                // 2107
		} else {                                                                                                             // 2108
			center.y += 10; // Otherwise circles look wrong => hack for standard blue icon, renders differently for other icons.
			positions = this._generatePointsCircle(childMarkers.length, center);                                                // 2110
		}                                                                                                                    // 2111
                                                                                                                       // 2112
		this._animationSpiderfy(childMarkers, positions);                                                                    // 2113
	},                                                                                                                    // 2114
                                                                                                                       // 2115
	unspiderfy: function (zoomDetails) {                                                                                  // 2116
		/// <param Name="zoomDetails">Argument from zoomanim if being called in a zoom animation or null otherwise</param>   // 2117
		if (this._group._inZoomAnimation) {                                                                                  // 2118
			return;                                                                                                             // 2119
		}                                                                                                                    // 2120
		this._animationUnspiderfy(zoomDetails);                                                                              // 2121
                                                                                                                       // 2122
		this._group._spiderfied = null;                                                                                      // 2123
	},                                                                                                                    // 2124
                                                                                                                       // 2125
	_generatePointsCircle: function (count, centerPt) {                                                                   // 2126
		var circumference = this._group.options.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + count),       // 2127
			legLength = circumference / this._2PI,  //radius from circumference                                                 // 2128
			angleStep = this._2PI / count,                                                                                      // 2129
			res = [],                                                                                                           // 2130
			i, angle;                                                                                                           // 2131
                                                                                                                       // 2132
		res.length = count;                                                                                                  // 2133
                                                                                                                       // 2134
		for (i = count - 1; i >= 0; i--) {                                                                                   // 2135
			angle = this._circleStartAngle + i * angleStep;                                                                     // 2136
			res[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();  // 2137
		}                                                                                                                    // 2138
                                                                                                                       // 2139
		return res;                                                                                                          // 2140
	},                                                                                                                    // 2141
                                                                                                                       // 2142
	_generatePointsSpiral: function (count, centerPt) {                                                                   // 2143
		var spiderfyDistanceMultiplier = this._group.options.spiderfyDistanceMultiplier,                                     // 2144
			legLength = spiderfyDistanceMultiplier * this._spiralLengthStart,                                                   // 2145
			separation = spiderfyDistanceMultiplier * this._spiralFootSeparation,                                               // 2146
			lengthFactor = spiderfyDistanceMultiplier * this._spiralLengthFactor * this._2PI,                                   // 2147
			angle = 0,                                                                                                          // 2148
			res = [],                                                                                                           // 2149
			i;                                                                                                                  // 2150
                                                                                                                       // 2151
		res.length = count;                                                                                                  // 2152
                                                                                                                       // 2153
		// Higher index, closer position to cluster center.                                                                  // 2154
		for (i = count - 1; i >= 0; i--) {                                                                                   // 2155
			angle += separation / legLength + i * 0.0005;                                                                       // 2156
			res[i] = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle))._round();  // 2157
			legLength += lengthFactor / angle;                                                                                  // 2158
		}                                                                                                                    // 2159
		return res;                                                                                                          // 2160
	},                                                                                                                    // 2161
                                                                                                                       // 2162
	_noanimationUnspiderfy: function () {                                                                                 // 2163
		var group = this._group,                                                                                             // 2164
			map = group._map,                                                                                                   // 2165
			fg = group._featureGroup,                                                                                           // 2166
			childMarkers = this.getAllChildMarkers(),                                                                           // 2167
			m, i;                                                                                                               // 2168
                                                                                                                       // 2169
		group._ignoreMove = true;                                                                                            // 2170
                                                                                                                       // 2171
		this.setOpacity(1);                                                                                                  // 2172
		for (i = childMarkers.length - 1; i >= 0; i--) {                                                                     // 2173
			m = childMarkers[i];                                                                                                // 2174
                                                                                                                       // 2175
			fg.removeLayer(m);                                                                                                  // 2176
                                                                                                                       // 2177
			if (m._preSpiderfyLatlng) {                                                                                         // 2178
				m.setLatLng(m._preSpiderfyLatlng);                                                                                 // 2179
				delete m._preSpiderfyLatlng;                                                                                       // 2180
			}                                                                                                                   // 2181
			if (m.setZIndexOffset) {                                                                                            // 2182
				m.setZIndexOffset(0);                                                                                              // 2183
			}                                                                                                                   // 2184
                                                                                                                       // 2185
			if (m._spiderLeg) {                                                                                                 // 2186
				map.removeLayer(m._spiderLeg);                                                                                     // 2187
				delete m._spiderLeg;                                                                                               // 2188
			}                                                                                                                   // 2189
		}                                                                                                                    // 2190
                                                                                                                       // 2191
		group.fire('unspiderfied', {                                                                                         // 2192
			cluster: this,                                                                                                      // 2193
			markers: childMarkers                                                                                               // 2194
		});                                                                                                                  // 2195
		group._ignoreMove = false;                                                                                           // 2196
		group._spiderfied = null;                                                                                            // 2197
	}                                                                                                                     // 2198
});                                                                                                                    // 2199
                                                                                                                       // 2200
//Non Animated versions of everything                                                                                  // 2201
L.MarkerClusterNonAnimated = L.MarkerCluster.extend({                                                                  // 2202
	_animationSpiderfy: function (childMarkers, positions) {                                                              // 2203
		var group = this._group,                                                                                             // 2204
			map = group._map,                                                                                                   // 2205
			fg = group._featureGroup,                                                                                           // 2206
			legOptions = this._group.options.spiderLegPolylineOptions,                                                          // 2207
			i, m, leg, newPos;                                                                                                  // 2208
                                                                                                                       // 2209
		group._ignoreMove = true;                                                                                            // 2210
                                                                                                                       // 2211
		// Traverse in ascending order to make sure that inner circleMarkers are on top of further legs. Normal markers are re-ordered by newPosition.
		// The reverse order trick no longer improves performance on modern browsers.                                        // 2213
		for (i = 0; i < childMarkers.length; i++) {                                                                          // 2214
			newPos = map.layerPointToLatLng(positions[i]);                                                                      // 2215
			m = childMarkers[i];                                                                                                // 2216
                                                                                                                       // 2217
			// Add the leg before the marker, so that in case the latter is a circleMarker, the leg is behind it.               // 2218
			leg = new L.Polyline([this._latlng, newPos], legOptions);                                                           // 2219
			map.addLayer(leg);                                                                                                  // 2220
			m._spiderLeg = leg;                                                                                                 // 2221
                                                                                                                       // 2222
			// Now add the marker.                                                                                              // 2223
			m._preSpiderfyLatlng = m._latlng;                                                                                   // 2224
			m.setLatLng(newPos);                                                                                                // 2225
			if (m.setZIndexOffset) {                                                                                            // 2226
				m.setZIndexOffset(1000000); //Make these appear on top of EVERYTHING                                               // 2227
			}                                                                                                                   // 2228
                                                                                                                       // 2229
			fg.addLayer(m);                                                                                                     // 2230
		}                                                                                                                    // 2231
		this.setOpacity(0.3);                                                                                                // 2232
                                                                                                                       // 2233
		group._ignoreMove = false;                                                                                           // 2234
		group.fire('spiderfied', {                                                                                           // 2235
			cluster: this,                                                                                                      // 2236
			markers: childMarkers                                                                                               // 2237
		});                                                                                                                  // 2238
	},                                                                                                                    // 2239
                                                                                                                       // 2240
	_animationUnspiderfy: function () {                                                                                   // 2241
		this._noanimationUnspiderfy();                                                                                       // 2242
	}                                                                                                                     // 2243
});                                                                                                                    // 2244
                                                                                                                       // 2245
//Animated versions here                                                                                               // 2246
L.MarkerCluster.include({                                                                                              // 2247
                                                                                                                       // 2248
	_animationSpiderfy: function (childMarkers, positions) {                                                              // 2249
		var me = this,                                                                                                       // 2250
			group = this._group,                                                                                                // 2251
			map = group._map,                                                                                                   // 2252
			fg = group._featureGroup,                                                                                           // 2253
			thisLayerLatLng = this._latlng,                                                                                     // 2254
			thisLayerPos = map.latLngToLayerPoint(thisLayerLatLng),                                                             // 2255
			svg = L.Path.SVG,                                                                                                   // 2256
			legOptions = L.extend({}, this._group.options.spiderLegPolylineOptions), // Copy the options so that we can modify them for animation.
			finalLegOpacity = legOptions.opacity,                                                                               // 2258
			i, m, leg, legPath, legLength, newPos;                                                                              // 2259
                                                                                                                       // 2260
		if (finalLegOpacity === undefined) {                                                                                 // 2261
			finalLegOpacity = L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity;                          // 2262
		}                                                                                                                    // 2263
                                                                                                                       // 2264
		if (svg) {                                                                                                           // 2265
			// If the initial opacity of the spider leg is not 0 then it appears before the animation starts.                   // 2266
			legOptions.opacity = 0;                                                                                             // 2267
                                                                                                                       // 2268
			// Add the class for CSS transitions.                                                                               // 2269
			legOptions.className = (legOptions.className || '') + ' leaflet-cluster-spider-leg';                                // 2270
		} else {                                                                                                             // 2271
			// Make sure we have a defined opacity.                                                                             // 2272
			legOptions.opacity = finalLegOpacity;                                                                               // 2273
		}                                                                                                                    // 2274
                                                                                                                       // 2275
		group._ignoreMove = true;                                                                                            // 2276
                                                                                                                       // 2277
		// Add markers and spider legs to map, hidden at our center point.                                                   // 2278
		// Traverse in ascending order to make sure that inner circleMarkers are on top of further legs. Normal markers are re-ordered by newPosition.
		// The reverse order trick no longer improves performance on modern browsers.                                        // 2280
		for (i = 0; i < childMarkers.length; i++) {                                                                          // 2281
			m = childMarkers[i];                                                                                                // 2282
                                                                                                                       // 2283
			newPos = map.layerPointToLatLng(positions[i]);                                                                      // 2284
                                                                                                                       // 2285
			// Add the leg before the marker, so that in case the latter is a circleMarker, the leg is behind it.               // 2286
			leg = new L.Polyline([thisLayerLatLng, newPos], legOptions);                                                        // 2287
			map.addLayer(leg);                                                                                                  // 2288
			m._spiderLeg = leg;                                                                                                 // 2289
                                                                                                                       // 2290
			// Explanations: https://jakearchibald.com/2013/animated-line-drawing-svg/                                          // 2291
			// In our case the transition property is declared in the CSS file.                                                 // 2292
			if (svg) {                                                                                                          // 2293
				legPath = leg._path;                                                                                               // 2294
				legLength = legPath.getTotalLength() + 0.1; // Need a small extra length to avoid remaining dot in Firefox.        // 2295
				legPath.style.strokeDasharray = legLength; // Just 1 length is enough, it will be duplicated.                      // 2296
				legPath.style.strokeDashoffset = legLength;                                                                        // 2297
			}                                                                                                                   // 2298
                                                                                                                       // 2299
			// If it is a marker, add it now and we'll animate it out                                                           // 2300
			if (m.setZIndexOffset) {                                                                                            // 2301
				m.setZIndexOffset(1000000); // Make normal markers appear on top of EVERYTHING                                     // 2302
			}                                                                                                                   // 2303
			if (m.clusterHide) {                                                                                                // 2304
				m.clusterHide();                                                                                                   // 2305
			}                                                                                                                   // 2306
			                                                                                                                    // 2307
			// Vectors just get immediately added                                                                               // 2308
			fg.addLayer(m);                                                                                                     // 2309
                                                                                                                       // 2310
			if (m._setPos) {                                                                                                    // 2311
				m._setPos(thisLayerPos);                                                                                           // 2312
			}                                                                                                                   // 2313
		}                                                                                                                    // 2314
                                                                                                                       // 2315
		group._forceLayout();                                                                                                // 2316
		group._animationStart();                                                                                             // 2317
                                                                                                                       // 2318
		// Reveal markers and spider legs.                                                                                   // 2319
		for (i = childMarkers.length - 1; i >= 0; i--) {                                                                     // 2320
			newPos = map.layerPointToLatLng(positions[i]);                                                                      // 2321
			m = childMarkers[i];                                                                                                // 2322
                                                                                                                       // 2323
			//Move marker to new position                                                                                       // 2324
			m._preSpiderfyLatlng = m._latlng;                                                                                   // 2325
			m.setLatLng(newPos);                                                                                                // 2326
			                                                                                                                    // 2327
			if (m.clusterShow) {                                                                                                // 2328
				m.clusterShow();                                                                                                   // 2329
			}                                                                                                                   // 2330
                                                                                                                       // 2331
			// Animate leg (animation is actually delegated to CSS transition).                                                 // 2332
			if (svg) {                                                                                                          // 2333
				leg = m._spiderLeg;                                                                                                // 2334
				legPath = leg._path;                                                                                               // 2335
				legPath.style.strokeDashoffset = 0;                                                                                // 2336
				//legPath.style.strokeOpacity = finalLegOpacity;                                                                   // 2337
				leg.setStyle({opacity: finalLegOpacity});                                                                          // 2338
			}                                                                                                                   // 2339
		}                                                                                                                    // 2340
		this.setOpacity(0.3);                                                                                                // 2341
                                                                                                                       // 2342
		group._ignoreMove = false;                                                                                           // 2343
                                                                                                                       // 2344
		setTimeout(function () {                                                                                             // 2345
			group._animationEnd();                                                                                              // 2346
			group.fire('spiderfied', {                                                                                          // 2347
				cluster: me,                                                                                                       // 2348
				markers: childMarkers                                                                                              // 2349
			});                                                                                                                 // 2350
		}, 200);                                                                                                             // 2351
	},                                                                                                                    // 2352
                                                                                                                       // 2353
	_animationUnspiderfy: function (zoomDetails) {                                                                        // 2354
		var me = this,                                                                                                       // 2355
			group = this._group,                                                                                                // 2356
			map = group._map,                                                                                                   // 2357
			fg = group._featureGroup,                                                                                           // 2358
			thisLayerPos = zoomDetails ? map._latLngToNewLayerPoint(this._latlng, zoomDetails.zoom, zoomDetails.center) : map.latLngToLayerPoint(this._latlng),
			childMarkers = this.getAllChildMarkers(),                                                                           // 2360
			svg = L.Path.SVG,                                                                                                   // 2361
			m, i, leg, legPath, legLength, nonAnimatable;                                                                       // 2362
                                                                                                                       // 2363
		group._ignoreMove = true;                                                                                            // 2364
		group._animationStart();                                                                                             // 2365
                                                                                                                       // 2366
		//Make us visible and bring the child markers back in                                                                // 2367
		this.setOpacity(1);                                                                                                  // 2368
		for (i = childMarkers.length - 1; i >= 0; i--) {                                                                     // 2369
			m = childMarkers[i];                                                                                                // 2370
                                                                                                                       // 2371
			//Marker was added to us after we were spiderfied                                                                   // 2372
			if (!m._preSpiderfyLatlng) {                                                                                        // 2373
				continue;                                                                                                          // 2374
			}                                                                                                                   // 2375
                                                                                                                       // 2376
			//Close any popup on the marker first, otherwise setting the location of the marker will make the map scroll        // 2377
			m.closePopup();                                                                                                     // 2378
                                                                                                                       // 2379
			//Fix up the location to the real one                                                                               // 2380
			m.setLatLng(m._preSpiderfyLatlng);                                                                                  // 2381
			delete m._preSpiderfyLatlng;                                                                                        // 2382
                                                                                                                       // 2383
			//Hack override the location to be our center                                                                       // 2384
			nonAnimatable = true;                                                                                               // 2385
			if (m._setPos) {                                                                                                    // 2386
				m._setPos(thisLayerPos);                                                                                           // 2387
				nonAnimatable = false;                                                                                             // 2388
			}                                                                                                                   // 2389
			if (m.clusterHide) {                                                                                                // 2390
				m.clusterHide();                                                                                                   // 2391
				nonAnimatable = false;                                                                                             // 2392
			}                                                                                                                   // 2393
			if (nonAnimatable) {                                                                                                // 2394
				fg.removeLayer(m);                                                                                                 // 2395
			}                                                                                                                   // 2396
                                                                                                                       // 2397
			// Animate the spider leg back in (animation is actually delegated to CSS transition).                              // 2398
			if (svg) {                                                                                                          // 2399
				leg = m._spiderLeg;                                                                                                // 2400
				legPath = leg._path;                                                                                               // 2401
				legLength = legPath.getTotalLength() + 0.1;                                                                        // 2402
				legPath.style.strokeDashoffset = legLength;                                                                        // 2403
				leg.setStyle({opacity: 0});                                                                                        // 2404
			}                                                                                                                   // 2405
		}                                                                                                                    // 2406
                                                                                                                       // 2407
		group._ignoreMove = false;                                                                                           // 2408
                                                                                                                       // 2409
		setTimeout(function () {                                                                                             // 2410
			//If we have only <= one child left then that marker will be shown on the map so don't remove it!                   // 2411
			var stillThereChildCount = 0;                                                                                       // 2412
			for (i = childMarkers.length - 1; i >= 0; i--) {                                                                    // 2413
				m = childMarkers[i];                                                                                               // 2414
				if (m._spiderLeg) {                                                                                                // 2415
					stillThereChildCount++;                                                                                           // 2416
				}                                                                                                                  // 2417
			}                                                                                                                   // 2418
                                                                                                                       // 2419
                                                                                                                       // 2420
			for (i = childMarkers.length - 1; i >= 0; i--) {                                                                    // 2421
				m = childMarkers[i];                                                                                               // 2422
                                                                                                                       // 2423
				if (!m._spiderLeg) { //Has already been unspiderfied                                                               // 2424
					continue;                                                                                                         // 2425
				}                                                                                                                  // 2426
                                                                                                                       // 2427
				if (m.clusterShow) {                                                                                               // 2428
					m.clusterShow();                                                                                                  // 2429
				}                                                                                                                  // 2430
				if (m.setZIndexOffset) {                                                                                           // 2431
					m.setZIndexOffset(0);                                                                                             // 2432
				}                                                                                                                  // 2433
                                                                                                                       // 2434
				if (stillThereChildCount > 1) {                                                                                    // 2435
					fg.removeLayer(m);                                                                                                // 2436
				}                                                                                                                  // 2437
                                                                                                                       // 2438
				map.removeLayer(m._spiderLeg);                                                                                     // 2439
				delete m._spiderLeg;                                                                                               // 2440
			}                                                                                                                   // 2441
			group._animationEnd();                                                                                              // 2442
			group.fire('unspiderfied', {                                                                                        // 2443
				cluster: me,                                                                                                       // 2444
				markers: childMarkers                                                                                              // 2445
			});                                                                                                                 // 2446
		}, 200);                                                                                                             // 2447
	}                                                                                                                     // 2448
});                                                                                                                    // 2449
                                                                                                                       // 2450
                                                                                                                       // 2451
L.MarkerClusterGroup.include({                                                                                         // 2452
	//The MarkerCluster currently spiderfied (if any)                                                                     // 2453
	_spiderfied: null,                                                                                                    // 2454
                                                                                                                       // 2455
	unspiderfy: function () {                                                                                             // 2456
		this._unspiderfy.apply(this, arguments);                                                                             // 2457
	},                                                                                                                    // 2458
                                                                                                                       // 2459
	_spiderfierOnAdd: function () {                                                                                       // 2460
		this._map.on('click', this._unspiderfyWrapper, this);                                                                // 2461
                                                                                                                       // 2462
		if (this._map.options.zoomAnimation) {                                                                               // 2463
			this._map.on('zoomstart', this._unspiderfyZoomStart, this);                                                         // 2464
		}                                                                                                                    // 2465
		//Browsers without zoomAnimation or a big zoom don't fire zoomstart                                                  // 2466
		this._map.on('zoomend', this._noanimationUnspiderfy, this);                                                          // 2467
                                                                                                                       // 2468
		if (!L.Browser.touch) {                                                                                              // 2469
			this._map.getRenderer(this);                                                                                        // 2470
			//Needs to happen in the pageload, not after, or animations don't work in webkit                                    // 2471
			//  http://stackoverflow.com/questions/8455200/svg-animate-with-dynamically-added-elements                          // 2472
			//Disable on touch browsers as the animation messes up on a touch zoom and isn't very noticable                     // 2473
		}                                                                                                                    // 2474
	},                                                                                                                    // 2475
                                                                                                                       // 2476
	_spiderfierOnRemove: function () {                                                                                    // 2477
		this._map.off('click', this._unspiderfyWrapper, this);                                                               // 2478
		this._map.off('zoomstart', this._unspiderfyZoomStart, this);                                                         // 2479
		this._map.off('zoomanim', this._unspiderfyZoomAnim, this);                                                           // 2480
		this._map.off('zoomend', this._noanimationUnspiderfy, this);                                                         // 2481
                                                                                                                       // 2482
		//Ensure that markers are back where they should be                                                                  // 2483
		// Use no animation to avoid a sticky leaflet-cluster-anim class on mapPane                                          // 2484
		this._noanimationUnspiderfy();                                                                                       // 2485
	},                                                                                                                    // 2486
                                                                                                                       // 2487
	//On zoom start we add a zoomanim handler so that we are guaranteed to be last (after markers are animated)           // 2488
	//This means we can define the animation they do rather than Markers doing an animation to their actual location      // 2489
	_unspiderfyZoomStart: function () {                                                                                   // 2490
		if (!this._map) { //May have been removed from the map by a zoomEnd handler                                          // 2491
			return;                                                                                                             // 2492
		}                                                                                                                    // 2493
                                                                                                                       // 2494
		this._map.on('zoomanim', this._unspiderfyZoomAnim, this);                                                            // 2495
	},                                                                                                                    // 2496
                                                                                                                       // 2497
	_unspiderfyZoomAnim: function (zoomDetails) {                                                                         // 2498
		//Wait until the first zoomanim after the user has finished touch-zooming before running the animation               // 2499
		if (L.DomUtil.hasClass(this._map._mapPane, 'leaflet-touching')) {                                                    // 2500
			return;                                                                                                             // 2501
		}                                                                                                                    // 2502
                                                                                                                       // 2503
		this._map.off('zoomanim', this._unspiderfyZoomAnim, this);                                                           // 2504
		this._unspiderfy(zoomDetails);                                                                                       // 2505
	},                                                                                                                    // 2506
                                                                                                                       // 2507
	_unspiderfyWrapper: function () {                                                                                     // 2508
		/// <summary>_unspiderfy but passes no arguments</summary>                                                           // 2509
		this._unspiderfy();                                                                                                  // 2510
	},                                                                                                                    // 2511
                                                                                                                       // 2512
	_unspiderfy: function (zoomDetails) {                                                                                 // 2513
		if (this._spiderfied) {                                                                                              // 2514
			this._spiderfied.unspiderfy(zoomDetails);                                                                           // 2515
		}                                                                                                                    // 2516
	},                                                                                                                    // 2517
                                                                                                                       // 2518
	_noanimationUnspiderfy: function () {                                                                                 // 2519
		if (this._spiderfied) {                                                                                              // 2520
			this._spiderfied._noanimationUnspiderfy();                                                                          // 2521
		}                                                                                                                    // 2522
	},                                                                                                                    // 2523
                                                                                                                       // 2524
	//If the given layer is currently being spiderfied then we unspiderfy it so it isn't on the map anymore etc           // 2525
	_unspiderfyLayer: function (layer) {                                                                                  // 2526
		if (layer._spiderLeg) {                                                                                              // 2527
			this._featureGroup.removeLayer(layer);                                                                              // 2528
                                                                                                                       // 2529
			if (layer.clusterShow) {                                                                                            // 2530
				layer.clusterShow();                                                                                               // 2531
			}                                                                                                                   // 2532
				//Position will be fixed up immediately in _animationUnspiderfy                                                    // 2533
			if (layer.setZIndexOffset) {                                                                                        // 2534
				layer.setZIndexOffset(0);                                                                                          // 2535
			}                                                                                                                   // 2536
                                                                                                                       // 2537
			this._map.removeLayer(layer._spiderLeg);                                                                            // 2538
			delete layer._spiderLeg;                                                                                            // 2539
		}                                                                                                                    // 2540
	}                                                                                                                     // 2541
});                                                                                                                    // 2542
                                                                                                                       // 2543
                                                                                                                       // 2544
/**                                                                                                                    // 2545
 * Adds 1 public method to MCG and 1 to L.Marker to facilitate changing                                                // 2546
 * markers' icon options and refreshing their icon and their parent clusters                                           // 2547
 * accordingly (case where their iconCreateFunction uses data of childMarkers                                          // 2548
 * to make up the cluster icon).                                                                                       // 2549
 */                                                                                                                    // 2550
                                                                                                                       // 2551
                                                                                                                       // 2552
L.MarkerClusterGroup.include({                                                                                         // 2553
	/**                                                                                                                   // 2554
	 * Updates the icon of all clusters which are parents of the given marker(s).                                         // 2555
	 * In singleMarkerMode, also updates the given marker(s) icon.                                                        // 2556
	 * @param layers L.MarkerClusterGroup|L.LayerGroup|Array(L.Marker)|Map(L.Marker)|                                     // 2557
	 * L.MarkerCluster|L.Marker (optional) list of markers (or single marker) whose parent                                // 2558
	 * clusters need to be updated. If not provided, retrieves all child markers of this.                                 // 2559
	 * @returns {L.MarkerClusterGroup}                                                                                    // 2560
	 */                                                                                                                   // 2561
	refreshClusters: function (layers) {                                                                                  // 2562
		if (!layers) {                                                                                                       // 2563
			layers = this._topClusterLevel.getAllChildMarkers();                                                                // 2564
		} else if (layers instanceof L.MarkerClusterGroup) {                                                                 // 2565
			layers = layers._topClusterLevel.getAllChildMarkers();                                                              // 2566
		} else if (layers instanceof L.LayerGroup) {                                                                         // 2567
			layers = layers._layers;                                                                                            // 2568
		} else if (layers instanceof L.MarkerCluster) {                                                                      // 2569
			layers = layers.getAllChildMarkers();                                                                               // 2570
		} else if (layers instanceof L.Marker) {                                                                             // 2571
			layers = [layers];                                                                                                  // 2572
		} // else: must be an Array(L.Marker)|Map(L.Marker)                                                                  // 2573
		this._flagParentsIconsNeedUpdate(layers);                                                                            // 2574
		this._refreshClustersIcons();                                                                                        // 2575
                                                                                                                       // 2576
		// In case of singleMarkerMode, also re-draw the markers.                                                            // 2577
		if (this.options.singleMarkerMode) {                                                                                 // 2578
			this._refreshSingleMarkerModeMarkers(layers);                                                                       // 2579
		}                                                                                                                    // 2580
                                                                                                                       // 2581
		return this;                                                                                                         // 2582
	},                                                                                                                    // 2583
                                                                                                                       // 2584
	/**                                                                                                                   // 2585
	 * Simply flags all parent clusters of the given markers as having a "dirty" icon.                                    // 2586
	 * @param layers Array(L.Marker)|Map(L.Marker) list of markers.                                                       // 2587
	 * @private                                                                                                           // 2588
	 */                                                                                                                   // 2589
	_flagParentsIconsNeedUpdate: function (layers) {                                                                      // 2590
		var id, parent;                                                                                                      // 2591
                                                                                                                       // 2592
		// Assumes layers is an Array or an Object whose prototype is non-enumerable.                                        // 2593
		for (id in layers) {                                                                                                 // 2594
			// Flag parent clusters' icon as "dirty", all the way up.                                                           // 2595
			// Dumb process that flags multiple times upper parents, but still                                                  // 2596
			// much more efficient than trying to be smart and make short lists,                                                // 2597
			// at least in the case of a hierarchy following a power law:                                                       // 2598
			// http://jsperf.com/flag-nodes-in-power-hierarchy/2                                                                // 2599
			parent = layers[id].__parent;                                                                                       // 2600
			while (parent) {                                                                                                    // 2601
				parent._iconNeedsUpdate = true;                                                                                    // 2602
				parent = parent.__parent;                                                                                          // 2603
			}                                                                                                                   // 2604
		}                                                                                                                    // 2605
	},                                                                                                                    // 2606
                                                                                                                       // 2607
	/**                                                                                                                   // 2608
	 * Re-draws the icon of the supplied markers.                                                                         // 2609
	 * To be used in singleMarkerMode only.                                                                               // 2610
	 * @param layers Array(L.Marker)|Map(L.Marker) list of markers.                                                       // 2611
	 * @private                                                                                                           // 2612
	 */                                                                                                                   // 2613
	_refreshSingleMarkerModeMarkers: function (layers) {                                                                  // 2614
		var id, layer;                                                                                                       // 2615
                                                                                                                       // 2616
		for (id in layers) {                                                                                                 // 2617
			layer = layers[id];                                                                                                 // 2618
                                                                                                                       // 2619
			// Make sure we do not override markers that do not belong to THIS group.                                           // 2620
			if (this.hasLayer(layer)) {                                                                                         // 2621
				// Need to re-create the icon first, then re-draw the marker.                                                      // 2622
				layer.setIcon(this._overrideMarkerIcon(layer));                                                                    // 2623
			}                                                                                                                   // 2624
		}                                                                                                                    // 2625
	}                                                                                                                     // 2626
});                                                                                                                    // 2627
                                                                                                                       // 2628
L.Marker.include({                                                                                                     // 2629
	/**                                                                                                                   // 2630
	 * Updates the given options in the marker's icon and refreshes the marker.                                           // 2631
	 * @param options map object of icon options.                                                                         // 2632
	 * @param directlyRefreshClusters boolean (optional) true to trigger                                                  // 2633
	 * MCG.refreshClustersOf() right away with this single marker.                                                        // 2634
	 * @returns {L.Marker}                                                                                                // 2635
	 */                                                                                                                   // 2636
	refreshIconOptions: function (options, directlyRefreshClusters) {                                                     // 2637
		var icon = this.options.icon;                                                                                        // 2638
                                                                                                                       // 2639
		L.setOptions(icon, options);                                                                                         // 2640
                                                                                                                       // 2641
		this.setIcon(icon);                                                                                                  // 2642
                                                                                                                       // 2643
		// Shortcut to refresh the associated MCG clusters right away.                                                       // 2644
		// To be used when refreshing a single marker.                                                                       // 2645
		// Otherwise, better use MCG.refreshClusters() once at the end with                                                  // 2646
		// the list of modified markers.                                                                                     // 2647
		if (directlyRefreshClusters && this.__parent) {                                                                      // 2648
			this.__parent._group.refreshClusters(this);                                                                         // 2649
		}                                                                                                                    // 2650
                                                                                                                       // 2651
		return this;                                                                                                         // 2652
	}                                                                                                                     // 2653
});                                                                                                                    // 2654
                                                                                                                       // 2655
                                                                                                                       // 2656
}(window, document));                                                                                                  // 2657
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/bevanhunt_leaflet/.npm/package/node_modules/spin.js/spin.js                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/**                                                                                                                    // 1
 * Copyright (c) 2011-2014 Felix Gnass                                                                                 // 2
 * Licensed under the MIT license                                                                                      // 3
 * http://spin.js.org/                                                                                                 // 4
 *                                                                                                                     // 5
 * Example:                                                                                                            // 6
    var opts = {                                                                                                       // 7
      lines: 12             // The number of lines to draw                                                             // 8
    , length: 7             // The length of each line                                                                 // 9
    , width: 5              // The line thickness                                                                      // 10
    , radius: 10            // The radius of the inner circle                                                          // 11
    , scale: 1.0            // Scales overall size of the spinner                                                      // 12
    , corners: 1            // Roundness (0..1)                                                                        // 13
    , color: '#000'         // #rgb or #rrggbb                                                                         // 14
    , opacity: 1/4          // Opacity of the lines                                                                    // 15
    , rotate: 0             // Rotation offset                                                                         // 16
    , direction: 1          // 1: clockwise, -1: counterclockwise                                                      // 17
    , speed: 1              // Rounds per second                                                                       // 18
    , trail: 100            // Afterglow percentage                                                                    // 19
    , fps: 20               // Frames per second when using setTimeout()                                               // 20
    , zIndex: 2e9           // Use a high z-index by default                                                           // 21
    , className: 'spinner'  // CSS class to assign to the element                                                      // 22
    , top: '50%'            // center vertically                                                                       // 23
    , left: '50%'           // center horizontally                                                                     // 24
    , shadow: false         // Whether to render a shadow                                                              // 25
    , hwaccel: false        // Whether to use hardware acceleration (might be buggy)                                   // 26
    , position: 'absolute'  // Element positioning                                                                     // 27
    }                                                                                                                  // 28
    var target = document.getElementById('foo')                                                                        // 29
    var spinner = new Spinner(opts).spin(target)                                                                       // 30
 */                                                                                                                    // 31
;(function (root, factory) {                                                                                           // 32
                                                                                                                       // 33
  /* CommonJS */                                                                                                       // 34
  if (typeof module == 'object' && module.exports) module.exports = factory()                                          // 35
                                                                                                                       // 36
  /* AMD module */                                                                                                     // 37
  else if (typeof define == 'function' && define.amd) define(factory)                                                  // 38
                                                                                                                       // 39
  /* Browser global */                                                                                                 // 40
  else root.Spinner = factory()                                                                                        // 41
}(this, function () {                                                                                                  // 42
  "use strict"                                                                                                         // 43
                                                                                                                       // 44
  var prefixes = ['webkit', 'Moz', 'ms', 'O'] /* Vendor prefixes */                                                    // 45
    , animations = {} /* Animation rules keyed by their name */                                                        // 46
    , useCssAnimations /* Whether to use CSS animations or setTimeout */                                               // 47
    , sheet /* A stylesheet to hold the @keyframe or VML rules. */                                                     // 48
                                                                                                                       // 49
  /**                                                                                                                  // 50
   * Utility function to create elements. If no tag name is given,                                                     // 51
   * a DIV is created. Optionally properties can be passed.                                                            // 52
   */                                                                                                                  // 53
  function createEl (tag, prop) {                                                                                      // 54
    var el = document.createElement(tag || 'div')                                                                      // 55
      , n                                                                                                              // 56
                                                                                                                       // 57
    for (n in prop) el[n] = prop[n]                                                                                    // 58
    return el                                                                                                          // 59
  }                                                                                                                    // 60
                                                                                                                       // 61
  /**                                                                                                                  // 62
   * Appends children and returns the parent.                                                                          // 63
   */                                                                                                                  // 64
  function ins (parent /* child1, child2, ...*/) {                                                                     // 65
    for (var i = 1, n = arguments.length; i < n; i++) {                                                                // 66
      parent.appendChild(arguments[i])                                                                                 // 67
    }                                                                                                                  // 68
                                                                                                                       // 69
    return parent                                                                                                      // 70
  }                                                                                                                    // 71
                                                                                                                       // 72
  /**                                                                                                                  // 73
   * Creates an opacity keyframe animation rule and returns its name.                                                  // 74
   * Since most mobile Webkits have timing issues with animation-delay,                                                // 75
   * we create separate rules for each line/segment.                                                                   // 76
   */                                                                                                                  // 77
  function addAnimation (alpha, trail, i, lines) {                                                                     // 78
    var name = ['opacity', trail, ~~(alpha * 100), i, lines].join('-')                                                 // 79
      , start = 0.01 + i/lines * 100                                                                                   // 80
      , z = Math.max(1 - (1-alpha) / trail * (100-start), alpha)                                                       // 81
      , prefix = useCssAnimations.substring(0, useCssAnimations.indexOf('Animation')).toLowerCase()                    // 82
      , pre = prefix && '-' + prefix + '-' || ''                                                                       // 83
                                                                                                                       // 84
    if (!animations[name]) {                                                                                           // 85
      sheet.insertRule(                                                                                                // 86
        '@' + pre + 'keyframes ' + name + '{' +                                                                        // 87
        '0%{opacity:' + z + '}' +                                                                                      // 88
        start + '%{opacity:' + alpha + '}' +                                                                           // 89
        (start+0.01) + '%{opacity:1}' +                                                                                // 90
        (start+trail) % 100 + '%{opacity:' + alpha + '}' +                                                             // 91
        '100%{opacity:' + z + '}' +                                                                                    // 92
        '}', sheet.cssRules.length)                                                                                    // 93
                                                                                                                       // 94
      animations[name] = 1                                                                                             // 95
    }                                                                                                                  // 96
                                                                                                                       // 97
    return name                                                                                                        // 98
  }                                                                                                                    // 99
                                                                                                                       // 100
  /**                                                                                                                  // 101
   * Tries various vendor prefixes and returns the first supported property.                                           // 102
   */                                                                                                                  // 103
  function vendor (el, prop) {                                                                                         // 104
    var s = el.style                                                                                                   // 105
      , pp                                                                                                             // 106
      , i                                                                                                              // 107
                                                                                                                       // 108
    prop = prop.charAt(0).toUpperCase() + prop.slice(1)                                                                // 109
    if (s[prop] !== undefined) return prop                                                                             // 110
    for (i = 0; i < prefixes.length; i++) {                                                                            // 111
      pp = prefixes[i]+prop                                                                                            // 112
      if (s[pp] !== undefined) return pp                                                                               // 113
    }                                                                                                                  // 114
  }                                                                                                                    // 115
                                                                                                                       // 116
  /**                                                                                                                  // 117
   * Sets multiple style properties at once.                                                                           // 118
   */                                                                                                                  // 119
  function css (el, prop) {                                                                                            // 120
    for (var n in prop) {                                                                                              // 121
      el.style[vendor(el, n) || n] = prop[n]                                                                           // 122
    }                                                                                                                  // 123
                                                                                                                       // 124
    return el                                                                                                          // 125
  }                                                                                                                    // 126
                                                                                                                       // 127
  /**                                                                                                                  // 128
   * Fills in default values.                                                                                          // 129
   */                                                                                                                  // 130
  function merge (obj) {                                                                                               // 131
    for (var i = 1; i < arguments.length; i++) {                                                                       // 132
      var def = arguments[i]                                                                                           // 133
      for (var n in def) {                                                                                             // 134
        if (obj[n] === undefined) obj[n] = def[n]                                                                      // 135
      }                                                                                                                // 136
    }                                                                                                                  // 137
    return obj                                                                                                         // 138
  }                                                                                                                    // 139
                                                                                                                       // 140
  /**                                                                                                                  // 141
   * Returns the line color from the given string or array.                                                            // 142
   */                                                                                                                  // 143
  function getColor (color, idx) {                                                                                     // 144
    return typeof color == 'string' ? color : color[idx % color.length]                                                // 145
  }                                                                                                                    // 146
                                                                                                                       // 147
  // Built-in defaults                                                                                                 // 148
                                                                                                                       // 149
  var defaults = {                                                                                                     // 150
    lines: 12             // The number of lines to draw                                                               // 151
  , length: 7             // The length of each line                                                                   // 152
  , width: 5              // The line thickness                                                                        // 153
  , radius: 10            // The radius of the inner circle                                                            // 154
  , scale: 1.0            // Scales overall size of the spinner                                                        // 155
  , corners: 1            // Roundness (0..1)                                                                          // 156
  , color: '#000'         // #rgb or #rrggbb                                                                           // 157
  , opacity: 1/4          // Opacity of the lines                                                                      // 158
  , rotate: 0             // Rotation offset                                                                           // 159
  , direction: 1          // 1: clockwise, -1: counterclockwise                                                        // 160
  , speed: 1              // Rounds per second                                                                         // 161
  , trail: 100            // Afterglow percentage                                                                      // 162
  , fps: 20               // Frames per second when using setTimeout()                                                 // 163
  , zIndex: 2e9           // Use a high z-index by default                                                             // 164
  , className: 'spinner'  // CSS class to assign to the element                                                        // 165
  , top: '50%'            // center vertically                                                                         // 166
  , left: '50%'           // center horizontally                                                                       // 167
  , shadow: false         // Whether to render a shadow                                                                // 168
  , hwaccel: false        // Whether to use hardware acceleration (might be buggy)                                     // 169
  , position: 'absolute'  // Element positioning                                                                       // 170
  }                                                                                                                    // 171
                                                                                                                       // 172
  /** The constructor */                                                                                               // 173
  function Spinner (o) {                                                                                               // 174
    this.opts = merge(o || {}, Spinner.defaults, defaults)                                                             // 175
  }                                                                                                                    // 176
                                                                                                                       // 177
  // Global defaults that override the built-ins:                                                                      // 178
  Spinner.defaults = {}                                                                                                // 179
                                                                                                                       // 180
  merge(Spinner.prototype, {                                                                                           // 181
    /**                                                                                                                // 182
     * Adds the spinner to the given target element. If this instance is already                                       // 183
     * spinning, it is automatically removed from its previous target b calling                                        // 184
     * stop() internally.                                                                                              // 185
     */                                                                                                                // 186
    spin: function (target) {                                                                                          // 187
      this.stop()                                                                                                      // 188
                                                                                                                       // 189
      var self = this                                                                                                  // 190
        , o = self.opts                                                                                                // 191
        , el = self.el = createEl(null, {className: o.className})                                                      // 192
                                                                                                                       // 193
      css(el, {                                                                                                        // 194
        position: o.position                                                                                           // 195
      , width: 0                                                                                                       // 196
      , zIndex: o.zIndex                                                                                               // 197
      , left: o.left                                                                                                   // 198
      , top: o.top                                                                                                     // 199
      })                                                                                                               // 200
                                                                                                                       // 201
      if (target) {                                                                                                    // 202
        target.insertBefore(el, target.firstChild || null)                                                             // 203
      }                                                                                                                // 204
                                                                                                                       // 205
      el.setAttribute('role', 'progressbar')                                                                           // 206
      self.lines(el, self.opts)                                                                                        // 207
                                                                                                                       // 208
      if (!useCssAnimations) {                                                                                         // 209
        // No CSS animation support, use setTimeout() instead                                                          // 210
        var i = 0                                                                                                      // 211
          , start = (o.lines - 1) * (1 - o.direction) / 2                                                              // 212
          , alpha                                                                                                      // 213
          , fps = o.fps                                                                                                // 214
          , f = fps / o.speed                                                                                          // 215
          , ostep = (1 - o.opacity) / (f * o.trail / 100)                                                              // 216
          , astep = f / o.lines                                                                                        // 217
                                                                                                                       // 218
        ;(function anim () {                                                                                           // 219
          i++                                                                                                          // 220
          for (var j = 0; j < o.lines; j++) {                                                                          // 221
            alpha = Math.max(1 - (i + (o.lines - j) * astep) % f * ostep, o.opacity)                                   // 222
                                                                                                                       // 223
            self.opacity(el, j * o.direction + start, alpha, o)                                                        // 224
          }                                                                                                            // 225
          self.timeout = self.el && setTimeout(anim, ~~(1000 / fps))                                                   // 226
        })()                                                                                                           // 227
      }                                                                                                                // 228
      return self                                                                                                      // 229
    }                                                                                                                  // 230
                                                                                                                       // 231
    /**                                                                                                                // 232
     * Stops and removes the Spinner.                                                                                  // 233
     */                                                                                                                // 234
  , stop: function () {                                                                                                // 235
      var el = this.el                                                                                                 // 236
      if (el) {                                                                                                        // 237
        clearTimeout(this.timeout)                                                                                     // 238
        if (el.parentNode) el.parentNode.removeChild(el)                                                               // 239
        this.el = undefined                                                                                            // 240
      }                                                                                                                // 241
      return this                                                                                                      // 242
    }                                                                                                                  // 243
                                                                                                                       // 244
    /**                                                                                                                // 245
     * Internal method that draws the individual lines. Will be overwritten                                            // 246
     * in VML fallback mode below.                                                                                     // 247
     */                                                                                                                // 248
  , lines: function (el, o) {                                                                                          // 249
      var i = 0                                                                                                        // 250
        , start = (o.lines - 1) * (1 - o.direction) / 2                                                                // 251
        , seg                                                                                                          // 252
                                                                                                                       // 253
      function fill (color, shadow) {                                                                                  // 254
        return css(createEl(), {                                                                                       // 255
          position: 'absolute'                                                                                         // 256
        , width: o.scale * (o.length + o.width) + 'px'                                                                 // 257
        , height: o.scale * o.width + 'px'                                                                             // 258
        , background: color                                                                                            // 259
        , boxShadow: shadow                                                                                            // 260
        , transformOrigin: 'left'                                                                                      // 261
        , transform: 'rotate(' + ~~(360/o.lines*i + o.rotate) + 'deg) translate(' + o.scale*o.radius + 'px' + ',0)'    // 262
        , borderRadius: (o.corners * o.scale * o.width >> 1) + 'px'                                                    // 263
        })                                                                                                             // 264
      }                                                                                                                // 265
                                                                                                                       // 266
      for (; i < o.lines; i++) {                                                                                       // 267
        seg = css(createEl(), {                                                                                        // 268
          position: 'absolute'                                                                                         // 269
        , top: 1 + ~(o.scale * o.width / 2) + 'px'                                                                     // 270
        , transform: o.hwaccel ? 'translate3d(0,0,0)' : ''                                                             // 271
        , opacity: o.opacity                                                                                           // 272
        , animation: useCssAnimations && addAnimation(o.opacity, o.trail, start + i * o.direction, o.lines) + ' ' + 1 / o.speed + 's linear infinite'
        })                                                                                                             // 274
                                                                                                                       // 275
        if (o.shadow) ins(seg, css(fill('#000', '0 0 4px #000'), {top: '2px'}))                                        // 276
        ins(el, ins(seg, fill(getColor(o.color, i), '0 0 1px rgba(0,0,0,.1)')))                                        // 277
      }                                                                                                                // 278
      return el                                                                                                        // 279
    }                                                                                                                  // 280
                                                                                                                       // 281
    /**                                                                                                                // 282
     * Internal method that adjusts the opacity of a single line.                                                      // 283
     * Will be overwritten in VML fallback mode below.                                                                 // 284
     */                                                                                                                // 285
  , opacity: function (el, i, val) {                                                                                   // 286
      if (i < el.childNodes.length) el.childNodes[i].style.opacity = val                                               // 287
    }                                                                                                                  // 288
                                                                                                                       // 289
  })                                                                                                                   // 290
                                                                                                                       // 291
                                                                                                                       // 292
  function initVML () {                                                                                                // 293
                                                                                                                       // 294
    /* Utility function to create a VML tag */                                                                         // 295
    function vml (tag, attr) {                                                                                         // 296
      return createEl('<' + tag + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', attr)                    // 297
    }                                                                                                                  // 298
                                                                                                                       // 299
    // No CSS transforms but VML support, add a CSS rule for VML elements:                                             // 300
    sheet.addRule('.spin-vml', 'behavior:url(#default#VML)')                                                           // 301
                                                                                                                       // 302
    Spinner.prototype.lines = function (el, o) {                                                                       // 303
      var r = o.scale * (o.length + o.width)                                                                           // 304
        , s = o.scale * 2 * r                                                                                          // 305
                                                                                                                       // 306
      function grp () {                                                                                                // 307
        return css(                                                                                                    // 308
          vml('group', {                                                                                               // 309
            coordsize: s + ' ' + s                                                                                     // 310
          , coordorigin: -r + ' ' + -r                                                                                 // 311
          })                                                                                                           // 312
        , { width: s, height: s }                                                                                      // 313
        )                                                                                                              // 314
      }                                                                                                                // 315
                                                                                                                       // 316
      var margin = -(o.width + o.length) * o.scale * 2 + 'px'                                                          // 317
        , g = css(grp(), {position: 'absolute', top: margin, left: margin})                                            // 318
        , i                                                                                                            // 319
                                                                                                                       // 320
      function seg (i, dx, filter) {                                                                                   // 321
        ins(                                                                                                           // 322
          g                                                                                                            // 323
        , ins(                                                                                                         // 324
            css(grp(), {rotation: 360 / o.lines * i + 'deg', left: ~~dx})                                              // 325
          , ins(                                                                                                       // 326
              css(                                                                                                     // 327
                vml('roundrect', {arcsize: o.corners})                                                                 // 328
              , { width: r                                                                                             // 329
                , height: o.scale * o.width                                                                            // 330
                , left: o.scale * o.radius                                                                             // 331
                , top: -o.scale * o.width >> 1                                                                         // 332
                , filter: filter                                                                                       // 333
                }                                                                                                      // 334
              )                                                                                                        // 335
            , vml('fill', {color: getColor(o.color, i), opacity: o.opacity})                                           // 336
            , vml('stroke', {opacity: 0}) // transparent stroke to fix color bleeding upon opacity change              // 337
            )                                                                                                          // 338
          )                                                                                                            // 339
        )                                                                                                              // 340
      }                                                                                                                // 341
                                                                                                                       // 342
      if (o.shadow)                                                                                                    // 343
        for (i = 1; i <= o.lines; i++) {                                                                               // 344
          seg(i, -2, 'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')            // 345
        }                                                                                                              // 346
                                                                                                                       // 347
      for (i = 1; i <= o.lines; i++) seg(i)                                                                            // 348
      return ins(el, g)                                                                                                // 349
    }                                                                                                                  // 350
                                                                                                                       // 351
    Spinner.prototype.opacity = function (el, i, val, o) {                                                             // 352
      var c = el.firstChild                                                                                            // 353
      o = o.shadow && o.lines || 0                                                                                     // 354
      if (c && i + o < c.childNodes.length) {                                                                          // 355
        c = c.childNodes[i + o]; c = c && c.firstChild; c = c && c.firstChild                                          // 356
        if (c) c.opacity = val                                                                                         // 357
      }                                                                                                                // 358
    }                                                                                                                  // 359
  }                                                                                                                    // 360
                                                                                                                       // 361
  if (typeof document !== 'undefined') {                                                                               // 362
    sheet = (function () {                                                                                             // 363
      var el = createEl('style', {type : 'text/css'})                                                                  // 364
      ins(document.getElementsByTagName('head')[0], el)                                                                // 365
      return el.sheet || el.styleSheet                                                                                 // 366
    }())                                                                                                               // 367
                                                                                                                       // 368
    var probe = css(createEl('group'), {behavior: 'url(#default#VML)'})                                                // 369
                                                                                                                       // 370
    if (!vendor(probe, 'transform') && probe.adj) initVML()                                                            // 371
    else useCssAnimations = vendor(probe, 'animation')                                                                 // 372
  }                                                                                                                    // 373
                                                                                                                       // 374
  return Spinner                                                                                                       // 375
                                                                                                                       // 376
}));                                                                                                                   // 377
                                                                                                                       // 378
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/bevanhunt_leaflet/.npm/package/node_modules/leaflet-spin/leaflet.spin.js                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
(function (factory, window) {                                                                                          // 1
    // define an AMD module that relies on 'leaflet'                                                                   // 2
    if (typeof define === 'function' && define.amd) {                                                                  // 3
        define(['leaflet'], function (L) {                                                                             // 4
            factory(L);                                                                                                // 5
        });                                                                                                            // 6
                                                                                                                       // 7
    // define a Common JS module that relies on 'leaflet'                                                              // 8
    } else if (typeof exports === 'object') {                                                                          // 9
        module.exports = function (L) {                                                                                // 10
            if (L === undefined) {                                                                                     // 11
                L = require('leaflet');                                                                                // 12
            }                                                                                                          // 13
            factory(L);                                                                                                // 14
            return L;                                                                                                  // 15
        };                                                                                                             // 16
    // attach your plugin to the global 'L' variable                                                                   // 17
    } else if (typeof window !== 'undefined' && window.L) {                                                            // 18
        factory(window.L);                                                                                             // 19
    }                                                                                                                  // 20
}(function leafletSpinFactory(L) {                                                                                     // 21
    var SpinMapMixin = {                                                                                               // 22
        spin: function (state, options) {                                                                              // 23
            if (!!state) {                                                                                             // 24
                // start spinning !                                                                                    // 25
                if (!this._spinner) {                                                                                  // 26
                    this._spinner = new Spinner(options)                                                               // 27
                        .spin(this._container);                                                                        // 28
                    this._spinning = 0;                                                                                // 29
                }                                                                                                      // 30
                this._spinning++;                                                                                      // 31
            }                                                                                                          // 32
            else {                                                                                                     // 33
                this._spinning--;                                                                                      // 34
                if (this._spinning <= 0) {                                                                             // 35
                    // end spinning !                                                                                  // 36
                    if (this._spinner) {                                                                               // 37
                        this._spinner.stop();                                                                          // 38
                        this._spinner = null;                                                                          // 39
                    }                                                                                                  // 40
                }                                                                                                      // 41
            }                                                                                                          // 42
        }                                                                                                              // 43
    };                                                                                                                 // 44
                                                                                                                       // 45
    var SpinMapInitHook = function () {                                                                                // 46
        this.on('layeradd', function (e) {                                                                             // 47
            // If added layer is currently loading, spin !                                                             // 48
            if (e.layer.loading) this.spin(true);                                                                      // 49
            if (typeof e.layer.on !== 'function') return;                                                              // 50
            e.layer.on('data:loading', function () {                                                                   // 51
                this.spin(true);                                                                                       // 52
            }, this);                                                                                                  // 53
            e.layer.on('data:loaded',  function () {                                                                   // 54
                this.spin(false);                                                                                      // 55
            }, this);                                                                                                  // 56
        }, this);                                                                                                      // 57
        this.on('layerremove', function (e) {                                                                          // 58
            // Clean-up                                                                                                // 59
            if (e.layer.loading) this.spin(false);                                                                     // 60
            if (typeof e.layer.on !== 'function') return;                                                              // 61
            e.layer.off('data:loaded');                                                                                // 62
            e.layer.off('data:loading');                                                                               // 63
        }, this);                                                                                                      // 64
    };                                                                                                                 // 65
                                                                                                                       // 66
    L.Map.include(SpinMapMixin);                                                                                       // 67
    L.Map.addInitHook(SpinMapInitHook);                                                                                // 68
}, window));                                                                                                           // 69
                                                                                                                       // 70
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['bevanhunt:leaflet'] = {};

})();
