{"version":3,"sources":["meteor://ðŸ’»app/folder/array.coffee","meteor://ðŸ’»app/folder/funcs.coffee","meteor://ðŸ’»app/both.coffee","meteor://ðŸ’»app/client.coffee","meteor://ðŸ’»app/server.coffee"],"names":["colors","item","color","_","lodash","coll","Meteor","isClient","currentRoute","Router","current","route","getName","currentPar","name","params","configure","layoutTemplate","action","render","map","i","waitOn","sel","grup","subscribe","geojsons","Collection","allow","insert","update","remove","onAfterAction","userId","go","Template","registerHelper","val","startCase","upperCase","menu","onRendered","$","collapsible","call","err","res","Session","set","helpers","list","get","events","logout","beranda","slider","height","peta","baseMaps","bases","fillColor","items","layers","overLays","tiles","find","fetch","geojson","L","geoJson","style","feature","properties","F_Prbhn","weight","opacity","dashArray","fillOpacity","onEachFeature","layer","on","mouseover","event","target","setStyle","bringToFront","mouseout","resetStyle","click","fitBounds","getBounds","bindPopup","content","key","ref","tileLayer","provider","zipObject","center","zoom","zoomControl","attributionControl","control","collapsed","addTo","locate","position","admin","file","reader","files","FileReader","onload","doc","split","kebabCase","assign","JSON","parse","result","Materialize","toast","readAsText","login","creds","preventDefault","children","value","loginWithPassword","isServer","publish","selector","modifier","methods","upsert","arr","pick","groupBy","push","j"],"mappings":"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","file":"/app.js","sourcesContent":["@colors = [\n\titem: 'KSA/KPA'\n\tcolor: 'purple'\n,\n\titem: 'APL'\n\tcolor: 'white'\n,\n\titem: 'HL'\n\tcolor: 'green'\n,\n\titem: 'HP'\n\tcolor: 'yellow'\n,\n\titem: 'HPK'\n\tcolor: 'pink'\n,\n\titem: 'HPT'\n\tcolor: '#33e72d'\n]\n","@_ = lodash\n@coll = {}\n\nif Meteor.isClient\n\t@currentRoute = -> Router.current().route.getName()\n\t@currentPar = (name) -> Router.current().params[name]\n","Router.configure\n\tlayoutTemplate: 'layout'\n\nRouter.route '/',\n\taction: -> this.render 'beranda'\n\n_.map ['login', 'admin'], (i) ->\n\tRouter.route '/'+i,\n\t\taction: -> this.render i\n\nRouter.route '/peta/:grup?/:item?',\n\taction: -> this.render 'peta'\n\twaitOn: -> if Meteor.isClient\n\t\tsel = grup: this.params.grup\n\t\tthis.params.item and sel.item = this.params.item\n\t\tMeteor.subscribe 'coll', 'geojsons', sel, {}\n\ncoll.geojsons = new Meteor.Collection 'geojsons'\ncoll.geojsons.allow\n\tinsert: -> true\n\tupdate: -> true\n\tremove: -> true\n","if Meteor.isClient\n\n\tRouter.onAfterAction ->\n\t\tRouter.go '/' if currentRoute() is 'admin' and not Meteor.userId()\n\n\tTemplate.registerHelper 'startCase', (val) -> _.startCase val\n\tTemplate.registerHelper 'upperCase', (val) -> _.upperCase val\n\n\tTemplate.menu.onRendered ->\n\t\t$('.collapsible').collapsible()\n\t\tMeteor.call 'list', (err, res) ->\n\t\t\tres and Session.set 'list', res\n\n\tTemplate.menu.helpers\n\t\tlist: -> Session.get 'list'\n\n\tTemplate.menu.events\n\t\t'click #logout': -> Meteor.logout()\n\n\tTemplate.beranda.onRendered ->\n\t\t$('.slider').slider height: 900\n\n\tTemplate.peta.onRendered ->\n\t\tfillColor = (val) ->\n\t\t\tfind = _.find colors, (i) -> i.item is val\n\t\t\tfind.color\n\t\tlayers = _.map coll.geojsons.find().fetch(), (i) -> geojson = L.geoJson i,\n\t\t\tstyle: (feature) ->\n\t\t\t\tfillColor: fillColor feature.properties.F_Prbhn\n\t\t\t\tweight: 2\n\t\t\t\topacity: 1\n\t\t\t\tcolor: 'white'\n\t\t\t\tdashArray: '3'\n\t\t\t\tfillOpacity: 0.7\n\t\t\tonEachFeature: (feature, layer) ->\n\t\t\t\tlayer.on\n\t\t\t\t\tmouseover: (event) ->\n\t\t\t\t\t\tevent.target.setStyle\n\t\t\t\t\t\t\tweight: 3\n\t\t\t\t\t\t\tdashArray: ''\n\t\t\t\t\t\tevent.target.bringToFront()\n\t\t\t\t\tmouseout: (event) ->\n\t\t\t\t\t\tgeojson.resetStyle event.target\n\t\t\t\t\tclick: (event) ->\n\t\t\t\t\t\tmap.fitBounds event.target.getBounds()\n\t\t\t\tlayer.bindPopup ->\n\t\t\t\t\tcontent = ''\n\t\t\t\t\tfor key, val of feature.properties\n\t\t\t\t\t\tcontent += '<b>Data '+key+'</b>'+': '+val+'</br>'\n\t\t\t\t\tcontent\n\t\ttiles = ['OpenTopoMap', 'Esri.WorldImagery']\n\t\tbases = _.map tiles, (i) -> L.tileLayer.provider i\n\t\tbaseMaps = _.zipObject tiles, bases\n\t\titems = _.map coll.geojsons.find().fetch(), (i) -> _.upperCase i.item\n\t\toverLays = _.zipObject items, layers\n\t\tmap = L.map 'peta',\n\t\t\tcenter: [0.5, 101]\n\t\t\tzoom: 8\n\t\t\tzoomControl: false\n\t\t\tattributionControl: false\n\t\t\tlayers: [bases..., layers...]\n\t\tL.control.layers(baseMaps, overLays, collapsed: false).addTo map\n\t\tL.control.locate(position:'topright').addTo map\n\n\tTemplate.admin.events\n\t\t'change :file': (event) ->\n\t\t\tfile = event.target.files[0]\n\t\t\treader = new FileReader()\n\t\t\treader.onload = ->\n\t\t\t\tsplit = _.split _.kebabCase(file.name), '-'\n\t\t\t\tif split[2] is 'geojson'\n\t\t\t\t\tname = grup: split[0], item: split[1]\n\t\t\t\t\tdoc = _.assign name, JSON.parse reader.result\n\t\t\t\t\tMeteor.call 'import', 'geojsons', name, doc, (err, res) ->\n\t\t\t\t\t\tres and Materialize.toast 'Unggah Berhasil', 3000, 'orange'\n\t\t\treader.readAsText file, 'UTF-8'\n\n\tTemplate.login.events\n\t\t'submit form': (event) ->\n\t\t\tevent.preventDefault()\n\t\t\tcreds = _.map ['username', 'password'], (i) ->\n\t\t\t\tevent.target.children[i].value\n\t\t\tMeteor.loginWithPassword creds..., (err) ->\n\t\t\t\tunless err then Router.go '/'\n","if Meteor.isServer\n\n\tMeteor.publish 'coll', (name, selector, modifier) ->\n\t\tcoll[name].find selector, modifier\n\n\tMeteor.methods\n\t\timport: (name, selector, modifier) ->\n\t\t\tcoll[name].upsert selector, modifier\n\n\t\tlist: ->\n\t\t\tmap = _.map coll.geojsons.find().fetch(), (i) ->\n\t\t\t\t_.pick i, ['grup', 'item']\n\t\t\tarr = []\n\t\t\tfor key, val of _.groupBy(map, 'grup')\n\t\t\t\tarr.push\n\t\t\t\t\tgrup: key\n\t\t\t\t\titems: _.map val, (j) -> j.item\n\t\t\tarr\n"]}