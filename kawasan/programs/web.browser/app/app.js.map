{"version":3,"sources":["meteor://ðŸ’»app/folder/array.coffee","meteor://ðŸ’»app/folder/funcs.coffee","meteor://ðŸ’»app/both.coffee","meteor://ðŸ’»app/client.coffee","meteor://ðŸ’»app/server.coffee"],"names":["colors","item","color","_","lodash","coll","Meteor","isClient","currentPar","name","Router","current","params","configure","layoutTemplate","loadingTemplate","route","action","render","map","i","waitOn","sel","grup","subscribe","geojsons","Collection","allow","insert","update","remove","Template","registerHelper","val","startCase","upperCase","menu","onRendered","$","collapsible","call","err","res","Session","set","helpers","list","get","peta","baseMaps","bases","fillColor","items","layers","overLays","tiles","find","fetch","geojson","L","geoJson","style","feature","properties","F_Prbhn","weight","opacity","dashArray","fillOpacity","onEachFeature","layer","on","mouseover","event","target","setStyle","bringToFront","mouseout","resetStyle","click","fitBounds","getBounds","bindPopup","content","key","ref","tileLayer","provider","zipObject","center","zoom","zoomControl","control","addTo","locate","position","admin","events","file","reader","files","FileReader","onload","doc","split","kebabCase","assign","JSON","parse","result","Materialize","toast","readAsText","login","creds","preventDefault","children","value","loginWithPassword","isServer","publish","selector","modifier","methods","upsert","arr","pick","groupBy","push","j"],"mappings":"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","file":"/app.js","sourcesContent":["@colors = [\n\titem: 'KSA/KPA'\n\tcolor: '#ad3fff'\n,\n\titem: 'APL'\n\tcolor: 'white'\n,\n\titem: 'HL'\n\tcolor: '#02ad00'\n,\n\titem: 'HP'\n\tcolor: '#ffff00'\n,\n\titem: 'HPK'\n\tcolor: '#ff5eff'\n,\n\titem: 'HPT'\n\tcolor: '#8af200'\n]\n","@_ = lodash\n@coll = {}\n\nif Meteor.isClient\n\t@currentPar = (name) -> Router.current().params[name]\n","Router.configure\n\tlayoutTemplate: 'layout'\n\tloadingTemplate: 'loading'\n\nRouter.route '/',\n\taction: -> this.render 'beranda'\n\n_.map ['login', 'admin'], (i) ->\n\tRouter.route '/'+i,\n\t\taction: -> this.render i\n\nRouter.route '/peta/:grup?/:item?',\n\taction: -> this.render 'peta'\n\twaitOn: -> if Meteor.isClient\n\t\tsel = grup: this.params.grup\n\t\tthis.params.item and sel.item = this.params.item\n\t\tMeteor.subscribe 'coll', 'geojsons', sel, {}\n\ncoll.geojsons = new Meteor.Collection 'geojsons'\ncoll.geojsons.allow\n\tinsert: -> true\n\tupdate: -> true\n\tremove: -> true\n","if Meteor.isClient\n\n\tTemplate.registerHelper 'startCase', (val) -> _.startCase val\n\tTemplate.registerHelper 'upperCase', (val) -> _.upperCase val\n\n\tTemplate.menu.onRendered ->\n\t\t$('.collapsible').collapsible()\n\t\tMeteor.call 'list', (err, res) ->\n\t\t\tres and Session.set 'list', res\n\n\tTemplate.menu.helpers\n\t\tlist: -> Session.get 'list'\n\n\tTemplate.peta.onRendered ->\n\t\tfillColor = (val) ->\n\t\t\tfind = _.find colors, (i) -> i.item is val\n\t\t\tfind.color\n\t\tlayers = _.map coll.geojsons.find().fetch(), (i) -> geojson = L.geoJson i,\n\t\t\tstyle: (feature) ->\n\t\t\t\tfillColor: fillColor feature.properties.F_Prbhn\n\t\t\t\tweight: 2\n\t\t\t\topacity: 1\n\t\t\t\tcolor: 'white'\n\t\t\t\tdashArray: '3'\n\t\t\t\tfillOpacity: 0.7\n\t\t\tonEachFeature: (feature, layer) ->\n\t\t\t\tlayer.on\n\t\t\t\t\tmouseover: (event) ->\n\t\t\t\t\t\tevent.target.setStyle\n\t\t\t\t\t\t\tweight: 3\n\t\t\t\t\t\t\tdashArray: ''\n\t\t\t\t\t\tevent.target.bringToFront()\n\t\t\t\t\tmouseout: (event) ->\n\t\t\t\t\t\tgeojson.resetStyle event.target\n\t\t\t\t\tclick: (event) ->\n\t\t\t\t\t\tmap.fitBounds event.target.getBounds()\n\t\t\t\tlayer.bindPopup ->\n\t\t\t\t\tcontent = ''\n\t\t\t\t\tfor key, val of feature.properties\n\t\t\t\t\t\tcontent += '<b>Data '+key+'</b>'+': '+val+'</br>'\n\t\t\t\t\tcontent\n\t\ttiles = ['OpenTopoMap', 'Esri.WorldImagery']\n\t\tbases = _.map tiles, (i) -> L.tileLayer.provider i\n\t\tbaseMaps = _.zipObject tiles, bases\n\t\titems = _.map coll.geojsons.find().fetch(), (i) -> _.upperCase i.item\n\t\toverLays = _.zipObject items, layers\n\t\tmap = L.map 'peta',\n\t\t\tcenter: [0.5, 101]\n\t\t\tzoom: 8\n\t\t\tzoomControl: false\n\t\t\tlayers: [bases..., layers...]\n\t\tL.control.layers(baseMaps, overLays).addTo map\n\t\tL.control.locate(position:'topright').addTo map\n\n\tTemplate.admin.events\n\t\t'change :file': (event) ->\n\t\t\tfile = event.target.files[0]\n\t\t\treader = new FileReader()\n\t\t\treader.onload = ->\n\t\t\t\tsplit = _.split _.kebabCase(file.name), '-'\n\t\t\t\tif split[2] is 'geojson'\n\t\t\t\t\tname = grup: split[0], item: split[1]\n\t\t\t\t\tdoc = _.assign name, JSON.parse reader.result\n\t\t\t\t\tMeteor.call 'import', 'geojsons', name, doc, (err, res) ->\n\t\t\t\t\t\tres and Materialize.toast 'Unggah Berhasil', 3000, 'orange'\n\t\t\treader.readAsText file, 'UTF-8'\n\n\tTemplate.login.events\n\t\t'submit form': (event) ->\n\t\t\tevent.preventDefault()\n\t\t\tcreds = _.map ['username', 'password'], (i) ->\n\t\t\t\tevent.target.children[i].value\n\t\t\tMeteor.loginWithPassword creds...\n","if Meteor.isServer\n\n\tMeteor.publish 'coll', (name, selector, modifier) ->\n\t\tcoll[name].find selector, modifier\n\n\tMeteor.methods\n\t\timport: (name, selector, modifier) ->\n\t\t\tcoll[name].upsert selector, modifier\n\n\t\tlist: ->\n\t\t\tmap = _.map coll.geojsons.find().fetch(), (i) ->\n\t\t\t\t_.pick i, ['grup', 'item']\n\t\t\tarr = []\n\t\t\tfor key, val of _.groupBy(map, 'grup')\n\t\t\t\tarr.push\n\t\t\t\t\tgrup: key\n\t\t\t\t\titems: _.map val, (j) -> j.item\n\t\t\tarr\n"]}